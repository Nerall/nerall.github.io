{"version":3,"file":"4826.bundle.81b8358d1ea44070c6e1.js","mappings":"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AC,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAc,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAc,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAc,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAc,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAc,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAc,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAc,CAAC,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAc,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAc,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,GAAI,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,GAAI,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,IAAK,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,IAAK,GAAe,CAAC,GAAI,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAe,CAAC,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAe,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAe,CAAC,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAe,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,IAAK,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,IAAK,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAgB,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,GAAI,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAiB,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAiB,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAgB,CAAC,GAAI,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAgB,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAgB,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,GAAI,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,GAAI,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,GAAI,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,IAAK,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,IAAK,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAgB,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAiB,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,GAAI,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAgB,CAAC,EAA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yiB,SAAS,KAC9B,CACA,SAASwb,GAAiBC,GAExB,MAAO,GADMhsC,UAAUrH,OAAS,QAAsBC,IAAjBoH,UAAU,GAAmBA,UAAU,GAAK,MAC9DgsC,EAASrvC,IAAImvC,IAAa1lC,KAAK,KACpD,CACA,SAAS6lC,GAAYr2B,GACnB,OAAOrc,KAAKkI,MAAU,IAAJmU,EACpB,CACA,SAASs2B,GAAcF,GACrB,OAAwB,IAApBA,EAASrzC,OACJ,OAAOqzC,EAASrvC,IAAIsvC,IAAa7lC,KAAK,SAExC,QAAQ6lC,GAAYD,EAAS,IAAM,OAAOC,GAAYD,EAAS,IAAM,OAAOC,GAAYD,EAAS,IAAM,OAAOA,EAAS,IAAM,IACtI,CAMA,IAAIG,GAAU,CACZxU,KACAE,QACAE,qBACAE,qBACAx2B,QACAsM,QACAoqB,OACAQ,WACAj3B,MACAF,MACA42B,WACAI,WACAE,aACAK,eACAF,oBACAD,YACAI,WACAC,mBACAC,kBACAE,aACAG,UACAC,SACAC,WACA/I,MACAgJ,WACAC,iBACAG,mBACAC,qBACAC,uBACAC,MACAC,QACAE,QACAI,OACAC,YACAE,iBACAY,gBACAK,kBACAC,yBACAC,sBACAG,oBACAI,kBACAV,QACAW,WACAE,UACAE,eACAC,kBACAK,eACAK,cACAE,kBACAqB,qBACAG,oBACAK,kBACAM,gBACAG,aACAO,eACAC,YACAE,cACAlc,iBACA0b,kBACAS,yBACAR,aACAG,oBACAkB,eACAI,eACAc,yBACAE,sBACAU,oBACAM,kBACAO,iCACAS,qBACAC,gBACAN,wBACAI,uBACAO,2BACAC,UACAtD,WACAuD,gCACAQ,qBACAY,aACAI,WACAM,WACAI,WACAO,WACAC,WACAC,WACAC,WACAC,WACAC,sBACAC,wBACAC,2BACAG,cACAC,eACAG,0BACAC,6BACAC,0BACAC,6BACAG,6BACAI,uBACAG,qBACAqB,OACAC,UACAC,SACAwB,MAAOtzC,GACPA,SACA+xC,YAEAC,6BACAE,qBACAE,6BACAY,eACAC,oBACAG,iB,oFC1lEF,MAAM,cACJxsC,GACE,EAAAjF,EAoFJ,MAAMk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","sources":["webpack:///../../../node_modules/@cornerstonejs/calculate-suv/src/combineDateTime.ts","webpack:///../../../node_modules/@cornerstonejs/calculate-suv/src/parseDA.ts","webpack:///../../../node_modules/@cornerstonejs/calculate-suv/src/parseTM.ts","webpack:///../../../node_modules/@cornerstonejs/calculate-suv/src/dateTimeToFullDateInterface.ts","webpack:///../../../node_modules/@cornerstonejs/calculate-suv/src/calculateSUVScalingFactors.ts","webpack:///../../../node_modules/@cornerstonejs/calculate-suv/src/calculateScanTimes.ts","webpack:///../../../node_modules/@cornerstonejs/calculate-suv/src/calculateStartTime.ts","webpack:///../../../node_modules/@cornerstonejs/calculate-suv/src/calculateSUVbsaScalingFactor.ts","webpack:///../../../node_modules/@cornerstonejs/calculate-suv/src/calculateSUVlbmScalingFactor.ts","webpack:///../../../node_modules/@kitware/vtk.js/Filters/General/ImageCropFilter.js","webpack:///../../../node_modules/@kitware/vtk.js/Filters/General/ImageMarchingCubes/caseTable.js","webpack:///../../../node_modules/@kitware/vtk.js/IO/Geometry/STLReader.js","webpack:///../../../node_modules/@kitware/vtk.js/IO/Geometry/STLWriter.js","webpack:///../../../node_modules/@kitware/vtk.js/IO/Geometry/STLWriter/Constants.js","webpack:///../../../node_modules/@kitware/vtk.js/Imaging/Core/AbstractImageInterpolator/Constants.js","webpack:///../../../node_modules/@kitware/vtk.js/Imaging/Core/AbstractImageInterpolator/InterpolationInfo.js","webpack:///../../../node_modules/@kitware/vtk.js/Imaging/Core/AbstractImageInterpolator.js","webpack:///../../../node_modules/@kitware/vtk.js/Imaging/Core/ImageInterpolator.js","webpack:///../../../node_modules/@kitware/vtk.js/Imaging/Core/ImagePointDataIterator.js","webpack:///../../../node_modules/@kitware/vtk.js/Imaging/Core/ImageReslice/Constants.js","webpack:///../../../node_modules/@kitware/vtk.js/Imaging/Core/ImageReslice.js","webpack:///../../../node_modules/react-window/src/timer.js","webpack:///../../../node_modules/react-window/src/domHelpers.js","webpack:///../../../node_modules/react-window/src/createGridComponent.js","webpack:///../../../node_modules/react-window/src/createListComponent.js","webpack:///../../../node_modules/react-window/src/VariableSizeList.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/Core/DataArray.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/Core/DataArray/Constants.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/Core/Math/Constants.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/Core/Math/index.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/Core/Points.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/DataSetAttributes/Constants.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/Core/CellArray.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/ImplicitFunction.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/Plane.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/BoundingBox.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/Cell.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/CellLinks.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/CellTypes/Constants.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/CellTypes.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/Line/Constants.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/Line.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/DataSetAttributes/FieldData.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/DataSetAttributes.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/DataSet/Constants.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/DataSet.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/PointSet.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/PolyLine.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/Core/PriorityQueue.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/Polygon/Constants.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/Polygon.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/Triangle.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/Quad.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/TriangleStrip.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/PolyData/Constants.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/DataModel/PolyData.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/Transform/Transform.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Filters/General/TransformPolyDataFilter.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/IO/Core/BinaryHelper.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/IO/Core/DataAccessHelper.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/Core/MatrixBuilder.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/Core/Endian.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/IO/Core/DataAccessHelper/LiteHttpDataAccessHelper.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/IO/Geometry/STLReader.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/Common/Core/ClassHierarchy.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/macros2.js","webpack:///../../../extensions/cornerstone/node_modules/@kitware/vtk.js/vtk.js"],"sourcesContent":["import { DateInterface } from './parseDA';\nimport { TimeInterface } from './parseTM';\n\n/**\n * Javascript object that handles dates and compute the time.\n *\n * @export\n * @class FullDateInterface\n */\nexport class FullDateInterface {\n  fullDate: string;\n\n  /**\n   * Creates an instance of FullDateInterface.\n   * @param {string} date formatted as yyyy-mm-ddTHH:MM:SS.FFFFFFZ\n   * @memberof FullDateInterface\n   */\n  constructor(date: string) {\n    this.fullDate = date;\n  }\n\n  /**\n   * returns time since 1 january 1970\n   *\n   * @returns {number} time in sec\n   * @memberof FullDateInterface\n   */\n  getTimeInSec(): number {\n    // yyyy-mm-ddTHH:MM:SS.FFFFFFZ\n    const dateString = this.fullDate.substring(0, 10);\n    const timeString = this.fullDate.substring(11, 28);\n\n    // yyyy-mm-dd\n    const yyyy = parseInt(dateString.substring(0, 4), 10);\n    const mm =\n      dateString.length >= 7\n        ? parseInt(dateString.substring(5, 7), 10)\n        : undefined;\n    const dd =\n      dateString.length >= 10\n        ? parseInt(dateString.substring(8, 10), 10)\n        : undefined;\n\n    if (\n      isNaN(yyyy) ||\n      (mm !== undefined && isNaN(mm)) ||\n      (dd !== undefined && isNaN(dd)) ||\n      yyyy > 3000 ||\n      (mm && (mm < 1 || mm > 12)) ||\n      (dd && (dd < 1 || dd > 31))\n    ) {\n      throw new Error(`invalid date '${dateString}'`);\n    }\n\n    const dateJS = new Date(`${dateString}T00:00:00.000000Z`);\n\n    // HHMMSS.FFFFFF\n    const HH = parseInt(timeString.substring(0, 2), 10);\n    const MM =\n      timeString.length >= 5\n        ? parseInt(timeString.substring(3, 5), 10)\n        : undefined;\n    const SS =\n      timeString.length >= 8\n        ? parseInt(timeString.substring(6, 8), 10)\n        : undefined;\n    const fractionalStr = timeString.substring(9, 15);\n    const FFFFFF = fractionalStr\n      ? parseInt(fractionalStr, 10) * Math.pow(10, -fractionalStr.length)\n      : undefined;\n\n    if (\n      isNaN(HH) ||\n      (MM !== undefined && isNaN(MM)) ||\n      (SS !== undefined && isNaN(SS)) ||\n      (FFFFFF !== undefined && isNaN(FFFFFF)) ||\n      HH < 0 ||\n      HH > 23 ||\n      (MM && (MM < 0 || MM > 59)) ||\n      (SS && (SS < 0 || SS > 59)) ||\n      (FFFFFF && (FFFFFF < 0 || FFFFFF > 999999))\n    ) {\n      throw new Error(`invalid time '${timeString}'`);\n    }\n\n    let timeInSec = dateJS.getTime() / 1000;\n\n    timeInSec += HH * 3600;\n    if (MM !== undefined) {\n      timeInSec += MM * 60;\n    }\n    if (SS !== undefined) {\n      timeInSec += SS;\n    }\n    if (FFFFFF !== undefined) {\n      timeInSec += FFFFFF;\n    }\n\n    return timeInSec;\n  }\n\n  /**\n   * returns time since 1 january 1970\n   *\n   * @returns {number} time in microsec\n   * @memberof FullDateInterface\n   */\n  getTimeInMicroSec(): number {\n    const timeInMicroSec = this.getTimeInSec() * 1e6;\n    return timeInMicroSec;\n  }\n}\n\nexport interface FullDateInterface {\n  date: string;\n}\n\n/**\n * Combines two javascript objects containing the date and time information\n *\n * @export\n * @param {DateInterface} date\n * @param {TimeInterface} time\n * @returns {FullDateInterface}\n */\nexport default function combineDateTime(\n  date: DateInterface,\n  time: TimeInterface\n): FullDateInterface {\n  const hours = `${time.hours || '00'}`.padStart(2, '0');\n  const minutes = `${time.minutes || '00'}`.padStart(2, '0');\n  const seconds = `${time.seconds || '00'}`.padStart(2, '0');\n  const month = `${date.month}`.padStart(2, '0');\n  const day = `${date.day}`.padStart(2, '0');\n  const fractionalSeconds = `${time.fractionalSeconds || '000000'}`.padEnd(\n    6,\n    '0'\n  );\n  const dateString = `${date.year}-${month}-${day}`;\n  const timeString = `T${hours}:${minutes}:${seconds}.${fractionalSeconds}Z`;\n  const fullDateString = `${dateString}${timeString}`;\n\n  return new FullDateInterface(fullDateString);\n}\n\nexport { combineDateTime };\n","/**\n * Check the number of days for a picked month and year\n * algorithm based on http://stackoverflow.com/questions/1433030/validate-number-of-days-in-a-given-month\n *\n * @param {number} m\n * @param {number} y\n * @returns {number} number of days\n */\nfunction daysInMonth(m: number, y: number): number {\n  // m is 0 indexed: 0-11\n  switch (m) {\n    case 2:\n      return (y % 4 === 0 && y % 100) || y % 400 === 0 ? 29 : 28;\n    case 9:\n    case 4:\n    case 6:\n    case 11:\n      return 30;\n    default:\n      return 31;\n  }\n}\n\n/**\n * Check if the date is valid\n *\n * @param {number} d\n * @param {number} m\n * @param {number} y\n * @returns {boolean} boolean result\n */\nfunction isValidDate(d: number, m: number, y: number): boolean {\n  // make year is a number\n  if (isNaN(y)) {\n    return false;\n  }\n\n  return m > 0 && m <= 12 && d > 0 && d <= daysInMonth(m, y);\n}\n\n/**\n * Javascript object with properties year, month and day\n *\n * @export\n * @interface DateInterface\n */\nexport interface DateInterface {\n  year: number;\n  month: number;\n  day: number;\n}\n\n/**\n * Parses a DA formatted string into a Javascript object\n * @param {string} date a string in the DA VR format\n * @param {boolean} [validate] - true if an exception should be thrown if the date is invalid\n * @returns {DateInterface} Javascript object with properties year, month and day or undefined if not present or not 8 bytes long\n */\nexport default function parseDA(date: string): DateInterface {\n  if (\n    date === undefined ||\n    date === null ||\n    date.length !== 8 ||\n    typeof date !== 'string'\n  ) {\n    throw new Error(`invalid DA '${date}'`);\n  }\n\n  const yyyy = parseInt(date.substring(0, 4), 10);\n  const mm = parseInt(date.substring(4, 6), 10);\n  const dd = parseInt(date.substring(6, 8), 10);\n\n  if (isValidDate(dd, mm, yyyy) !== true) {\n    throw new Error(`invalid DA '${date}'`);\n  }\n\n  return {\n    year: yyyy,\n    month: mm,\n    day: dd,\n  };\n}\n\nexport { parseDA };\n","/**\n * Javascript object with properties for hours, minutes, seconds and fractionalSeconds\n *\n * @export\n * @interface TimeInterface\n */\nexport interface TimeInterface {\n  hours?: number;\n  minutes?: number;\n  seconds?: number;\n  fractionalSeconds?: number;\n}\n\n/**\n * Parses a TM formatted string into a javascript object with properties for hours, minutes, seconds and fractionalSeconds\n * @param {string} time - a string in the TM VR format\n * @returns {string} javascript object with properties for hours, minutes, seconds and fractionalSeconds or undefined if no element or data.  Missing fields are set to undefined\n */\nexport default function parseTM(time: string): TimeInterface {\n  if (\n    time === null ||\n    time === undefined ||\n    time.length < 2 ||\n    typeof time !== 'string'\n  ) {\n    // must at least have HH\n    throw new Error(`invalid TM '${time}'`);\n  }\n\n  // 0123456789\n  // HHMMSS.FFFFFF\n  const hh = parseInt(time.substring(0, 2), 10);\n  const mm = time.length >= 4 ? parseInt(time.substring(2, 4), 10) : undefined;\n  const ss = time.length >= 6 ? parseInt(time.substring(4, 6), 10) : undefined;\n  const fractionalStr = time.length >= 8 ? time.substring(7, 13) : undefined;\n  const ffffff = fractionalStr\n    ? parseInt(fractionalStr, 10) * Math.pow(10, 6 - fractionalStr.length)\n    : undefined;\n\n  if (\n    isNaN(hh) ||\n    (mm !== undefined && isNaN(mm)) ||\n    (ss !== undefined && isNaN(ss)) ||\n    (ffffff !== undefined && isNaN(ffffff)) ||\n    hh < 0 ||\n    hh > 23 ||\n    (mm && (mm < 0 || mm > 59)) ||\n    (ss && (ss < 0 || ss > 59)) ||\n    (ffffff && (ffffff < 0 || ffffff > 999999))\n  ) {\n    throw new Error(`invalid TM '${time}'`);\n  }\n\n  return {\n    hours: hh,\n    minutes: mm,\n    seconds: ss,\n    fractionalSeconds: ffffff,\n  };\n}\n\nexport { parseTM };\n","import combineDateTime, { FullDateInterface } from './combineDateTime';\nimport parseDA from './parseDA';\nimport parseTM from './parseTM';\n\n/**\n * Utility to create a FullDateInterface object given a string formatted as yyyy-mm-ddTHH:MM:SS.FFFFFFZ\n *\n * @export\n * @param {string} dateTime\n * @returns {FullDateInterface}\n */\nexport default function dateTimeToFullDateInterface(\n  dateTime: string\n): FullDateInterface {\n  if (dateTime === undefined || dateTime === null) {\n    throw new Error('dateTimeToFullDateInterface : dateTime not defined.');\n  }\n\n  const date = parseDA(dateTime.substring(0, 8));\n  const time = parseTM(dateTime.substring(8));\n  return combineDateTime(date, time);\n}\n\nexport { dateTimeToFullDateInterface };\n","import { FullDateInterface } from './combineDateTime';\nimport { calculateScanTimes } from './calculateScanTimes';\nimport {\n  calculateSUVlbmJanmahasatianScalingFactor,\n  calculateSUVlbmScalingFactor,\n  SUVlbmScalingFactorInput,\n} from './calculateSUVlbmScalingFactor';\nimport {\n  calculateSUVbsaScalingFactor,\n  SUVbsaScalingFactorInput,\n} from './calculateSUVbsaScalingFactor';\nimport { calculateStartTime } from './calculateStartTime';\nimport { InstanceMetadata } from './types';\n\n/**\n * Javascript object containing the SUV and SUL factors.\n * TODO, the result property names may changes\n *\n * @interface ScalingFactorResult\n */\ninterface ScalingFactorResult {\n  suvbw: number;\n  suvlbm?: number;\n  suvlbmJanma?: number;\n  suvbsa?: number;\n}\n\n/**\n * The injected dose used to calculate SUV is corrected for the\n * decay that occurs between the time of injection and the start of the scan\n *\n * @param {InstanceMetadata[]} instances\n * @returns {number[]}\n */\nfunction calculateDecayCorrection(instances: InstanceMetadata[]): number[] {\n  const {\n    RadionuclideTotalDose,\n    RadionuclideHalfLife,\n    RadiopharmaceuticalStartDateTime,\n    RadiopharmaceuticalStartTime,\n    SeriesDate,\n  } = instances[0];\n\n  if (RadionuclideTotalDose === undefined || RadionuclideTotalDose === null) {\n    throw new Error(\n      'calculateDecayCorrection : RadionuclideTotalDose value not found.'\n    );\n  }\n\n  if (RadionuclideHalfLife === undefined || RadionuclideHalfLife === null) {\n    throw new Error(\n      'calculateDecayCorrection : RadionuclideHalfLife value not found.'\n    );\n  }\n\n  const scanTimes: FullDateInterface[] = calculateScanTimes(instances);\n  const startTime: FullDateInterface = calculateStartTime({\n    RadiopharmaceuticalStartDateTime,\n    RadiopharmaceuticalStartTime,\n    SeriesDate,\n  });\n\n  return instances.map((_, index) => {\n    const scanTime = scanTimes[index];\n    const decayTimeInSec: number =\n      scanTime.getTimeInSec() - startTime.getTimeInSec();\n    if (decayTimeInSec < 0) {\n      throw new Error('Decay time cannot be less than zero');\n    }\n\n    const decayedDose: number =\n      RadionuclideTotalDose *\n      Math.pow(2, -decayTimeInSec / RadionuclideHalfLife);\n\n    return 1 / decayedDose;\n  });\n}\n\n/**\n *\n * @param a Simple value or array of simple values\n * @param b Simple value or array of simple values\n * @returns boolean true if the values are equal.\n */\nconst deepEquals = (\n  a: string | number | any[],\n  b: string | number | any[]\n): boolean => {\n  return (\n    a === b ||\n    (Array.isArray(a) &&\n      Array.isArray(b) &&\n      a.length === b.length &&\n      a.every((val, index) => val === b[index]))\n  );\n};\n\n/**\n * Calculate the SUV factor\n *\n * Note: Rescale Slope / Intercept must still be applied. These must be applied\n *       on a per-Frame basis, since some scanners may have different values per Frame.\n *\n * @export\n * @param {InstanceMetadata[]} instances\n * @returns {ScalingFactorResult[]}\n */\nexport default function calculateSUVScalingFactors(\n  instances: InstanceMetadata[]\n): ScalingFactorResult[] {\n  const {\n    CorrectedImage,\n    Units,\n    PhilipsPETPrivateGroup,\n    PatientWeight,\n    PatientSex,\n    PatientSize,\n  } = instances[0];\n\n  if (!CorrectedImage.includes('ATTN') || !CorrectedImage.includes('DECY')) {\n    throw new Error(\n      `CorrectedImage must contain \"ATTN\" and \"DECY\": ${CorrectedImage}`\n    );\n  }\n\n  // Sanity check that every instance provided has identical\n  // values for series-level metadata. If not, the provided\n  // data is invalid.\n  const isSingleSeries = instances.every(instance => {\n    return (\n      instance.Units === Units &&\n      deepEquals(instance.CorrectedImage, CorrectedImage) &&\n      instance.PatientWeight === PatientWeight &&\n      instance.PatientSex === PatientSex &&\n      instance.PatientSize === PatientSize &&\n      instance.RadionuclideHalfLife === instances[0].RadionuclideHalfLife &&\n      instance.RadionuclideTotalDose === instances[0].RadionuclideTotalDose &&\n      instance.DecayCorrection === instances[0].DecayCorrection &&\n      instance.SeriesDate === instances[0].SeriesDate &&\n      instance.SeriesTime === instances[0].SeriesTime\n    );\n  });\n\n  if (!isSingleSeries) {\n    throw new Error(\n      'The set of instances does not appear to come from one Series. Every instance must have identical values for series-level metadata properties'\n    );\n  }\n\n  // Treat null, undefined and zero as a missing PatientWeight.\n  if (!PatientWeight) {\n    throw new Error(\n      'PatientWeight value is missing. It is not possible to calculate the SUV factors'\n    );\n  }\n\n  let decayCorrectionArray: number[] = new Array(instances.length);\n  decayCorrectionArray = calculateDecayCorrection(instances);\n\n  let results: number[] = new Array(instances.length);\n  const weightInGrams: number = PatientWeight * 1000;\n\n  if (Units === 'BQML') {\n    results = decayCorrectionArray.map(function(value) {\n      return value * weightInGrams;\n    });\n  } else if (Units === 'CNTS') {\n    const hasValidSUVScaleFactor: boolean = instances.every(instance => {\n      return (\n        instance.PhilipsPETPrivateGroup &&\n        instance.PhilipsPETPrivateGroup?.SUVScaleFactor !== null &&\n        instance.PhilipsPETPrivateGroup?.SUVScaleFactor !== undefined &&\n        instance.PhilipsPETPrivateGroup?.SUVScaleFactor !== 0\n      );\n    });\n\n    const hasValidActivityConcentrationScaleFactor: boolean = instances.every(\n      instance => {\n        return (\n          instance.PhilipsPETPrivateGroup &&\n          !instance.PhilipsPETPrivateGroup?.SUVScaleFactor &&\n          instance.PhilipsPETPrivateGroup?.ActivityConcentrationScaleFactor !==\n            undefined &&\n          instance.PhilipsPETPrivateGroup?.ActivityConcentrationScaleFactor !==\n            0\n        );\n      }\n    );\n\n    //console.log(`hasValidSUVScaleFactor: ${hasValidSUVScaleFactor}`);\n    //console.log(`hasValidActivityConcentrationScaleFactor: ${hasValidActivityConcentrationScaleFactor}`);\n\n    if (hasValidSUVScaleFactor) {\n      results = instances.map(\n        // Added ! to tell Typescript that this can't be undefined, since we are testing it\n        // in the .every loop above.\n        instance => instance.PhilipsPETPrivateGroup!.SUVScaleFactor!\n      );\n    } else if (hasValidActivityConcentrationScaleFactor) {\n      // if (0x7053,0x1000) not present, but (0x7053,0x1009) is present, then (0x7053,0x1009) * Rescale Slope,\n      // scales pixels to Bq/ml, and proceed as if Units are BQML\n      results = instances.map((instance, index) => {\n        // Added ! to tell Typescript that this can't be undefined, since we are testing it\n        // in the .every loop above.\n        return (\n          instance.PhilipsPETPrivateGroup!.ActivityConcentrationScaleFactor! *\n          decayCorrectionArray[index] *\n          weightInGrams\n        );\n      });\n    } else {\n      throw new Error(\n        `Units are in CNTS, but PhilipsPETPrivateGroup has invalid values: ${JSON.stringify(\n          PhilipsPETPrivateGroup\n        )}`\n      );\n    }\n  } else if (Units === 'GML') {\n    // assumes that GML indicates SUVbw instead of SUVlbm\n    results.fill(1);\n  } else {\n    throw new Error(`Units has an invalid value: ${Units}`);\n  }\n\n  // get BSA\n  let suvbsaFactor: number | undefined;\n  if (PatientSize === null || PatientSize === undefined) {\n    console.warn(\n      'PatientSize value is missing. It is not possible to calculate the SUV bsa factors'\n    );\n  } else {\n    const sulInputs: SUVbsaScalingFactorInput = {\n      PatientWeight,\n      PatientSize,\n    };\n\n    suvbsaFactor = calculateSUVbsaScalingFactor(sulInputs);\n  }\n\n  // get LBM\n  let suvlbmFactor: number | undefined;\n  let suvlbmJenmaFactor: number | undefined;\n  if (PatientSize === null || PatientSize === undefined) {\n    console.warn(\n      'PatientSize value is missing. It is not possible to calculate the SUV lbm factors'\n    );\n  } else if (PatientSex === null || PatientSex === undefined) {\n    console.warn(\n      'PatientSex value is missing. It is not possible to calculate the SUV lbm factors'\n    );\n  } else {\n    const suvlbmInputs: SUVlbmScalingFactorInput = {\n      PatientWeight,\n      PatientSex,\n      PatientSize,\n    };\n\n    suvlbmFactor = calculateSUVlbmScalingFactor(suvlbmInputs);\n    suvlbmJenmaFactor = calculateSUVlbmJanmahasatianScalingFactor(suvlbmInputs);\n  }\n\n  return results.map(function(result, index) {\n    const factors: ScalingFactorResult = {\n      suvbw: result,\n    };\n\n    if (suvbsaFactor) {\n      // multiply for BSA\n      factors.suvbsa = decayCorrectionArray[index] * suvbsaFactor;\n    }\n\n    if (suvlbmFactor) {\n      // multiply for LBM\n      factors.suvlbm = decayCorrectionArray[index] * suvlbmFactor;\n    }\n\n    if (suvlbmJenmaFactor) {\n      factors.suvlbmJanma = decayCorrectionArray[index] * suvlbmJenmaFactor;\n    }\n\n    // factor formulaes taken from:\n    // https://www.medicalconnections.co.uk/kb/calculating-suv-from-pet-images/\n\n    return factors;\n  });\n}\n\nexport { calculateSUVScalingFactors };\n","import combineDateTime, { FullDateInterface } from './combineDateTime';\nimport parseDA, { DateInterface } from './parseDA';\nimport parseTM, { TimeInterface } from './parseTM';\nimport dateTimeToFullDateInterface from './dateTimeToFullDateInterface';\n\n/**\n * Javascript object with scan properties\n *\n * @interface InstanceMetadataForScanTimes\n */\ninterface InstanceMetadataForScanTimes {\n  SeriesDate: string;\n  SeriesTime: string;\n  AcquisitionDate: string;\n  AcquisitionTime: string;\n\n  GEPrivatePostInjectionDateTime?: string;\n\n  // Only used in Siemens case\n  RadionuclideHalfLife?: number; // \tRadionuclideHalfLife(0x0018,0x1075)\tin\tRadiopharmaceutical\tInformation\tSequence(0x0054,0x0016)\n  RadionuclideTotalDose?: number;\n  FrameReferenceTime?: number;\n  ActualFrameDuration?: number;\n}\n\n/**\n * Calculate the scan times\n *\n * @export\n * @param {InstanceMetadataForScanTimes[]} instances\n * @returns {FullDateInterface[]}\n */\nexport default function calculateScanTimes(\n  instances: InstanceMetadataForScanTimes[]\n): FullDateInterface[] {\n  const {\n    SeriesDate,\n    SeriesTime,\n    GEPrivatePostInjectionDateTime,\n  } = instances[0];\n  const results = new Array(instances.length);\n  const seriesDate: DateInterface = parseDA(SeriesDate);\n  const seriesTime: TimeInterface = parseTM(SeriesTime);\n  const seriesDateTime: FullDateInterface = combineDateTime(\n    seriesDate,\n    seriesTime\n  );\n\n  let earliestAcquisitionDateTime = new FullDateInterface(\n    `3000-01-01T00:00:00.000000Z`\n  );\n  let timeError = earliestAcquisitionDateTime.getTimeInSec();\n  instances.forEach(instance => {\n    const { AcquisitionDate, AcquisitionTime } = instance;\n\n    const acquisitionDate: DateInterface = parseDA(AcquisitionDate);\n    const acquisitionTime: TimeInterface = parseTM(AcquisitionTime);\n    const acquisitionDateTime: FullDateInterface = combineDateTime(\n      acquisitionDate,\n      acquisitionTime\n    );\n\n    if (earliestAcquisitionDateTime.getTimeInSec() >= timeError) {\n      earliestAcquisitionDateTime = acquisitionDateTime;\n    } else {\n      earliestAcquisitionDateTime =\n        acquisitionDateTime.getTimeInSec() <\n        earliestAcquisitionDateTime.getTimeInSec()\n          ? acquisitionDateTime\n          : earliestAcquisitionDateTime;\n    }\n  });\n\n  if (earliestAcquisitionDateTime.getTimeInSec() >= timeError) {\n    throw new Error('Earliest acquisition time or date could not be parsed.');\n  }\n\n  if (\n    seriesDateTime.getTimeInSec() <= earliestAcquisitionDateTime.getTimeInSec()\n  ) {\n    return results.fill(seriesDateTime);\n  } else {\n    if (GEPrivatePostInjectionDateTime) {\n      // GE Private scan\n      return results.fill(\n        dateTimeToFullDateInterface(GEPrivatePostInjectionDateTime)\n      );\n    } else {\n      /*const hasValidFrameTimes = instances.every(instance => {\n        return (\n          instance.FrameReferenceTime &&\n          instance.FrameReferenceTime > 0 &&\n          instance.ActualFrameDuration &&\n          instance.ActualFrameDuration > 0\n        );\n      });*/\n\n      // TODO: Temporarily commented out the checks and logic below to\n      // investigate the BQML_AC_DT_lessThan_S_DT_SIEMENS-instances case\n      //if (!hasValidFrameTimes) {\n      return results.fill(earliestAcquisitionDateTime);\n      //}\n\n      /* Siemens PETsyngo\t3.x\tmulti-injection logic\n      - backcompute\tfrom\tcenter\t(average\tcount\trate\t)\tof\ttime\twindow\tfor\tbed\tposition\t(frame)\tin\tseries (reliable\tin\tall\tcases)\n      - Acquisition\tDate\t(0x0008,0x0022)\tand\tTime\t(0x0008,0x0032) are\tthe\tstart\tof\tthe\tbed\tposition\t(frame)\n      - Frame\tReference\tTime\t(0x0054,0x1300) is\tthe\toffset\t(ms)\tfrom\tthe\tscan\tDate\tand\tTime we\twant\tto\tthe\taverage\tcount\trate\ttime\n      */\n      /*return instances.map(instance => {\n        const {\n          FrameReferenceTime,\n          ActualFrameDuration,\n          RadionuclideHalfLife,\n          AcquisitionDate,\n          AcquisitionTime,\n        } = instance;\n        // Some of these checks are only here because the compiler is complaining\n        // We could potentially use the ! operator instead\n        if (!FrameReferenceTime || FrameReferenceTime <= 0) {\n          throw new Error(\n            `FrameReferenceTime is invalid: ${FrameReferenceTime}`\n          );\n        }\n\n        if (!ActualFrameDuration || ActualFrameDuration <= 0) {\n          throw new Error(\n            `ActualFrameDuration is invalid: ${ActualFrameDuration}`\n          );\n        }\n\n        if (!RadionuclideHalfLife) {\n          throw new Error('RadionuclideHalfLife is required');\n        }\n\n        if (!AcquisitionDate) {\n          throw new Error('AcquisitionDate is required');\n        }\n\n        if (!AcquisitionTime) {\n          throw new Error('AcquisitionTime is required');\n        }\n\n        const acquisitionDate: DateInterface = parseDA(AcquisitionDate);\n        const acquisitionTime: TimeInterface = parseTM(AcquisitionTime);\n        const acquisitionDateTime: FullDateInterface = combineDateTime(\n          acquisitionDate,\n          acquisitionTime\n        );\n\n        const frameDurationInSec = ActualFrameDuration / 1000;\n        const decayConstant = Math.log(2) / RadionuclideHalfLife;\n        const decayDuringFrame = decayConstant * frameDurationInSec;\n        // TODO: double check this is correctly copied from QIBA pseudocode\n        const averageCountRateTimeWithinFrameInSec =\n          (1 / decayConstant) *\n          Math.log(decayDuringFrame / (1 - Math.exp(-decayConstant)));\n        const scanDateTimeAsNumber =\n          Number(acquisitionDateTime) -\n          FrameReferenceTime / 1000 +\n          averageCountRateTimeWithinFrameInSec;\n\n        const scanDate = new Date(scanDateTimeAsNumber);\n        console.log('SIEMENS PATH');\n        console.log(new Date(scanDateTimeAsNumber));\n        return scanDate;\n      });*/\n    }\n  }\n}\n\nexport { calculateScanTimes };\n","import combineDateTime, { FullDateInterface } from './combineDateTime';\nimport { parseDA, DateInterface } from './parseDA';\nimport { parseTM, TimeInterface } from './parseTM';\nimport dateTimeToFullDateInterface from './dateTimeToFullDateInterface';\n\n/**\n * Calculate start time\n *\n * @export\n * @param {{\n *   RadiopharmaceuticalStartDateTime?: string;\n *   RadiopharmaceuticalStartTime?: string;\n *   SeriesDate?: string;\n * }} input\n * @returns {FullDateInterface}\n */\nexport default function calculateStartTime(input: {\n  RadiopharmaceuticalStartDateTime?: string;\n  RadiopharmaceuticalStartTime?: string;\n  SeriesDate?: string;\n}): FullDateInterface {\n  const {\n    RadiopharmaceuticalStartDateTime,\n    RadiopharmaceuticalStartTime,\n    SeriesDate,\n  } = input;\n\n  let time: TimeInterface;\n  let date: DateInterface;\n  if (RadiopharmaceuticalStartDateTime) {\n    return dateTimeToFullDateInterface(RadiopharmaceuticalStartDateTime);\n  } else if (RadiopharmaceuticalStartTime && SeriesDate) {\n    // start Date\tis not explicit - assume\tsame as\tSeries Date;\n    // but consider\tspanning midnight\n    // TODO: do we need some logic to check if the scan went over midnight?\n    time = parseTM(RadiopharmaceuticalStartTime);\n    date = parseDA(SeriesDate);\n\n    return combineDateTime(date, time);\n  }\n\n  throw new Error(`Invalid input: ${input}`);\n}\n\nexport { calculateStartTime };\n","/**\n * Javascript object with patient properties size, sez, weight\n *\n * @export\n * @interface SUVbsaScalingFactorInput\n */\ninterface SUVbsaScalingFactorInput {\n  PatientSize: number;\n  PatientWeight: number;\n}\n\nfunction calculateSUVbsaScalingFactor(\n  inputs: SUVbsaScalingFactorInput\n): number {\n  const { PatientWeight, PatientSize } = inputs;\n\n  let BSA =\n    Math.pow(PatientWeight, 0.425) * Math.pow(PatientSize * 100, 0.725) * 71.84;\n\n  return BSA;\n}\n\nexport { calculateSUVbsaScalingFactor, SUVbsaScalingFactorInput };\n","/**\n * Javascript object with patient properties size, sez, weight\n *\n * @export\n * @interface SUVlbmScalingFactorInput\n */\ninterface SUVlbmScalingFactorInput {\n  PatientSize: number; // m\n  PatientSex: string; //'M' | 'F' | 'O';\n  PatientWeight: number; // Kg\n}\n\nfunction calculateSUVlbmScalingFactor(\n  inputs: SUVlbmScalingFactorInput\n): number {\n  const { PatientSex, PatientWeight, PatientSize } = inputs;\n\n  let LBM;\n  const weightSizeFactor = Math.pow(PatientWeight / (PatientSize * 100), 2);\n  // reference: https://www.medicalconnections.co.uk/kb/calculating-suv-from-pet-images/\n  if (PatientSex === 'F') {\n    LBM = 1.07 * PatientWeight - 148 * weightSizeFactor;\n  } else if (PatientSex === 'M') {\n    LBM = 1.1 * PatientWeight - 120 * weightSizeFactor;\n  } else {\n    throw new Error(`PatientSex is an invalid value: ${PatientSex}`);\n  }\n\n  return LBM * 1000; // convert in gr\n}\n\n/**\n * From https://link.springer.com/article/10.1007/s00259-014-2961-x\n * and https://link.springer.com/article/10.2165/00003088-200544100-00004\n * and\n * @param inputs\n * @returns\n */\nfunction calculateSUVlbmJanmahasatianScalingFactor(\n  inputs: SUVlbmScalingFactorInput\n): number {\n  const { PatientSex, PatientWeight, PatientSize } = inputs;\n\n  let LBM;\n  const bodyMassIndex = PatientWeight / Math.pow(PatientSize, 2);\n\n  if (PatientSex === 'F') {\n    LBM = (9270 * PatientWeight) / (8780 + 244 * bodyMassIndex);\n  } else if (PatientSex === 'M') {\n    LBM = (9270 * PatientWeight) / (6680 + 216 * bodyMassIndex);\n  } else {\n    throw new Error(`PatientSex is an invalid value: ${PatientSex}`);\n  }\n  return LBM * 1000; // convert in gr\n}\n\nexport {\n  calculateSUVlbmScalingFactor,\n  calculateSUVlbmJanmahasatianScalingFactor,\n  SUVlbmScalingFactorInput,\n};\n","import { m as macro } from '../../macros2.js';\nimport vtkImageData from '../../Common/DataModel/ImageData.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// vtkImageCropFilter methods\n// ----------------------------------------------------------------------------\n\nfunction vtkImageCropFilter(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkImageCropFilter');\n\n  // --------------------------------------------------------------------------\n\n  publicAPI.reset = () => {\n    const data = publicAPI.getInputData();\n    if (data) {\n      publicAPI.setCroppingPlanes(...data.getExtent());\n    }\n  };\n\n  // --------------------------------------------------------------------------\n\n  publicAPI.requestData = (inData, outData) => {\n    // implement requestData\n    const input = inData[0];\n    if (!input) {\n      vtkErrorMacro('Invalid or missing input');\n      return;\n    }\n    const scalars = input.getPointData().getScalars();\n    if (!scalars) {\n      vtkErrorMacro('No scalars from input');\n      return;\n    }\n    const extent = input.getExtent();\n    const cropped = model.croppingPlanes && model.croppingPlanes.length === 6 ? extent.map((e, i) => {\n      if (i % 2 === 0) {\n        // min plane\n        return Math.max(e, Math.round(model.croppingPlanes[i]));\n      }\n      // max plane\n      return Math.min(e, Math.round(model.croppingPlanes[i]));\n    }) : extent.slice();\n    if (cropped[0] === extent[0] && cropped[1] === extent[1] && cropped[2] === extent[2] && cropped[3] === extent[3] && cropped[4] === extent[4] && cropped[5] === extent[5]) {\n      const sameAsInput = vtkImageData.newInstance();\n      sameAsInput.shallowCopy(input); // Force new mtime\n      outData[0] = sameAsInput;\n      return;\n    }\n\n    // reorder if needed\n    for (let i = 0; i < 3; ++i) {\n      if (cropped[i * 2] > cropped[i * 2 + 1]) {\n        [cropped[i * 2], cropped[i * 2 + 1]] = [cropped[i * 2 + 1], cropped[i * 2]];\n      }\n    }\n\n    // restrict crop bounds based on extent bounds\n    for (let i = 0; i < 6; i += 2) {\n      // min case\n      cropped[i] = Math.max(cropped[i], extent[i]);\n      // max case\n      cropped[i + 1] = Math.min(cropped[i + 1], extent[i + 1]);\n    }\n    const numberOfComponents = scalars.getNumberOfComponents();\n    const componentSize = (cropped[1] - cropped[0] + 1) * (cropped[3] - cropped[2] + 1) * (cropped[5] - cropped[4] + 1) * numberOfComponents;\n    const scalarsData = scalars.getData();\n    const dims = input.getDimensions();\n    const jStride = numberOfComponents * dims[0];\n    const kStride = numberOfComponents * dims[0] * dims[1];\n    const beginOffset = (cropped[0] - extent[0]) * numberOfComponents;\n    const stripSize = (cropped[1] - cropped[0] + 1) * numberOfComponents; // +1 because subarray end is exclusive\n\n    // crop image\n    const croppedArray = new scalarsData.constructor(componentSize);\n    let index = 0;\n    for (let k = cropped[4]; k <= cropped[5]; ++k) {\n      for (let j = cropped[2]; j <= cropped[3]; ++j) {\n        const begin = beginOffset + (j - extent[2]) * jStride + (k - extent[4]) * kStride;\n        const end = begin + stripSize;\n        const slice = scalarsData.subarray(begin, end);\n        croppedArray.set(slice, index);\n        index += slice.length;\n      }\n    }\n    const outImage = vtkImageData.newInstance({\n      extent: cropped,\n      origin: input.getOrigin(),\n      direction: input.getDirection(),\n      spacing: input.getSpacing()\n    });\n    const croppedScalars = vtkDataArray.newInstance({\n      name: scalars.getName(),\n      numberOfComponents,\n      values: croppedArray\n    });\n    outImage.getPointData().setScalars(croppedScalars);\n    outData[0] = outImage;\n  };\n  publicAPI.isResetAvailable = () => {\n    if (model.croppingPlanes == null || model.croppingPlanes.length === 0) {\n      return false;\n    }\n    const data = publicAPI.getInputData();\n    if (data) {\n      const originalExtent = data.getExtent();\n      const findDifference = originalExtent.find((v, i) => Math.abs(model.croppingPlanes[i] - v) > Number.EPSILON);\n      return findDifference !== undefined;\n    }\n    return false;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // croppingPlanes: null,\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Make this a VTK object\n  macro.obj(publicAPI, model);\n\n  // Also make it an algorithm with one input and one output\n  macro.algo(publicAPI, model, 1, 1);\n\n  // no orientation support yet\n  macro.setGetArray(publicAPI, model, ['croppingPlanes'], 6);\n\n  // Object specific methods\n  vtkImageCropFilter(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkImageCropFilter');\n\n// ----------------------------------------------------------------------------\n\nvar vtkImageCropFilter$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkImageCropFilter$1 as default, extend, newInstance };\n","// ----------------------------------------------------------------------------\n// Marching cubes case functions (using triangles to complete tessellation).\n// For each case, a list of edge ids that form the triangles. A -1 marks the\n// end of the list of edges. Edges are taken three at a time to generate\n// triangle points.\n// ----------------------------------------------------------------------------\nconst MARCHING_CUBE_CASES = [[-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 0 0 */, [0, 3, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 1 1 */, [0, 9, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 2 1 */, [1, 3, 8, 9, 1, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 3 2 */, [1, 11, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 4 1 */, [0, 3, 8, 1, 11, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 5 3 */, [9, 11, 2, 0, 9, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 6 2 */, [2, 3, 8, 2, 8, 11, 11, 8, 9, -1, -1, -1, -1, -1, -1, -1] /* 7 5 */, [3, 2, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 8 1 */, [0, 2, 10, 8, 0, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 9 2 */, [1, 0, 9, 2, 10, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 10 3 */, [1, 2, 10, 1, 10, 9, 9, 10, 8, -1, -1, -1, -1, -1, -1, -1] /* 11 5 */, [3, 1, 11, 10, 3, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 12 2 */, [0, 1, 11, 0, 11, 8, 8, 11, 10, -1, -1, -1, -1, -1, -1, -1] /* 13 5 */, [3, 0, 9, 3, 9, 10, 10, 9, 11, -1, -1, -1, -1, -1, -1, -1] /* 14 5 */, [9, 11, 8, 11, 10, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 15 8 */, [4, 8, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 16 1 */, [4, 0, 3, 7, 4, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 17 2 */, [0, 9, 1, 8, 7, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 18 3 */, [4, 9, 1, 4, 1, 7, 7, 1, 3, -1, -1, -1, -1, -1, -1, -1] /* 19 5 */, [1, 11, 2, 8, 7, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 20 4 */, [3, 7, 4, 3, 4, 0, 1, 11, 2, -1, -1, -1, -1, -1, -1, -1] /* 21 7 */, [9, 11, 2, 9, 2, 0, 8, 7, 4, -1, -1, -1, -1, -1, -1, -1] /* 22 7 */, [2, 9, 11, 2, 7, 9, 2, 3, 7, 7, 4, 9, -1, -1, -1, -1] /* 23 14 */, [8, 7, 4, 3, 2, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 24 3 */, [10, 7, 4, 10, 4, 2, 2, 4, 0, -1, -1, -1, -1, -1, -1, -1] /* 25 5 */, [9, 1, 0, 8, 7, 4, 2, 10, 3, -1, -1, -1, -1, -1, -1, -1] /* 26 6 */, [4, 10, 7, 9, 10, 4, 9, 2, 10, 9, 1, 2, -1, -1, -1, -1] /* 27 9 */, [3, 1, 11, 3, 11, 10, 7, 4, 8, -1, -1, -1, -1, -1, -1, -1] /* 28 7 */, [1, 11, 10, 1, 10, 4, 1, 4, 0, 7, 4, 10, -1, -1, -1, -1] /* 29 11 */, [4, 8, 7, 9, 10, 0, 9, 11, 10, 10, 3, 0, -1, -1, -1, -1] /* 30 12 */, [4, 10, 7, 4, 9, 10, 9, 11, 10, -1, -1, -1, -1, -1, -1, -1] /* 31 5 */, [9, 4, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 32 1 */, [9, 4, 5, 0, 3, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 33 3 */, [0, 4, 5, 1, 0, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 34 2 */, [8, 4, 5, 8, 5, 3, 3, 5, 1, -1, -1, -1, -1, -1, -1, -1] /* 35 5 */, [1, 11, 2, 9, 4, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 36 3 */, [3, 8, 0, 1, 11, 2, 4, 5, 9, -1, -1, -1, -1, -1, -1, -1] /* 37 6 */, [5, 11, 2, 5, 2, 4, 4, 2, 0, -1, -1, -1, -1, -1, -1, -1] /* 38 5 */, [2, 5, 11, 3, 5, 2, 3, 4, 5, 3, 8, 4, -1, -1, -1, -1] /* 39 9 */, [9, 4, 5, 2, 10, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 40 4 */, [0, 2, 10, 0, 10, 8, 4, 5, 9, -1, -1, -1, -1, -1, -1, -1] /* 41 7 */, [0, 4, 5, 0, 5, 1, 2, 10, 3, -1, -1, -1, -1, -1, -1, -1] /* 42 7 */, [2, 5, 1, 2, 8, 5, 2, 10, 8, 4, 5, 8, -1, -1, -1, -1] /* 43 11 */, [11, 10, 3, 11, 3, 1, 9, 4, 5, -1, -1, -1, -1, -1, -1, -1] /* 44 7 */, [4, 5, 9, 0, 1, 8, 8, 1, 11, 8, 11, 10, -1, -1, -1, -1] /* 45 12 */, [5, 0, 4, 5, 10, 0, 5, 11, 10, 10, 3, 0, -1, -1, -1, -1] /* 46 14 */, [5, 8, 4, 5, 11, 8, 11, 10, 8, -1, -1, -1, -1, -1, -1, -1] /* 47 5 */, [9, 8, 7, 5, 9, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 48 2 */, [9, 0, 3, 9, 3, 5, 5, 3, 7, -1, -1, -1, -1, -1, -1, -1] /* 49 5 */, [0, 8, 7, 0, 7, 1, 1, 7, 5, -1, -1, -1, -1, -1, -1, -1] /* 50 5 */, [1, 3, 5, 3, 7, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 51 8 */, [9, 8, 7, 9, 7, 5, 11, 2, 1, -1, -1, -1, -1, -1, -1, -1] /* 52 7 */, [11, 2, 1, 9, 0, 5, 5, 0, 3, 5, 3, 7, -1, -1, -1, -1] /* 53 12 */, [8, 2, 0, 8, 5, 2, 8, 7, 5, 11, 2, 5, -1, -1, -1, -1] /* 54 11 */, [2, 5, 11, 2, 3, 5, 3, 7, 5, -1, -1, -1, -1, -1, -1, -1] /* 55 5 */, [7, 5, 9, 7, 9, 8, 3, 2, 10, -1, -1, -1, -1, -1, -1, -1] /* 56 7 */, [9, 7, 5, 9, 2, 7, 9, 0, 2, 2, 10, 7, -1, -1, -1, -1] /* 57 14 */, [2, 10, 3, 0, 8, 1, 1, 8, 7, 1, 7, 5, -1, -1, -1, -1] /* 58 12 */, [10, 1, 2, 10, 7, 1, 7, 5, 1, -1, -1, -1, -1, -1, -1, -1] /* 59 5 */, [9, 8, 5, 8, 7, 5, 11, 3, 1, 11, 10, 3, -1, -1, -1, -1] /* 60 10 */, [5, 0, 7, 5, 9, 0, 7, 0, 10, 1, 11, 0, 10, 0, 11, -1] /* 61 7 */, [10, 0, 11, 10, 3, 0, 11, 0, 5, 8, 7, 0, 5, 0, 7, -1] /* 62 7 */, [10, 5, 11, 7, 5, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 63 2 */, [11, 5, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 64 1 */, [0, 3, 8, 5, 6, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 65 4 */, [9, 1, 0, 5, 6, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 66 3 */, [1, 3, 8, 1, 8, 9, 5, 6, 11, -1, -1, -1, -1, -1, -1, -1] /* 67 7 */, [1, 5, 6, 2, 1, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 68 2 */, [1, 5, 6, 1, 6, 2, 3, 8, 0, -1, -1, -1, -1, -1, -1, -1] /* 69 7 */, [9, 5, 6, 9, 6, 0, 0, 6, 2, -1, -1, -1, -1, -1, -1, -1] /* 70 5 */, [5, 8, 9, 5, 2, 8, 5, 6, 2, 3, 8, 2, -1, -1, -1, -1] /* 71 11 */, [2, 10, 3, 11, 5, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 72 3 */, [10, 8, 0, 10, 0, 2, 11, 5, 6, -1, -1, -1, -1, -1, -1, -1] /* 73 7 */, [0, 9, 1, 2, 10, 3, 5, 6, 11, -1, -1, -1, -1, -1, -1, -1] /* 74 6 */, [5, 6, 11, 1, 2, 9, 9, 2, 10, 9, 10, 8, -1, -1, -1, -1] /* 75 12 */, [6, 10, 3, 6, 3, 5, 5, 3, 1, -1, -1, -1, -1, -1, -1, -1] /* 76 5 */, [0, 10, 8, 0, 5, 10, 0, 1, 5, 5, 6, 10, -1, -1, -1, -1] /* 77 14 */, [3, 6, 10, 0, 6, 3, 0, 5, 6, 0, 9, 5, -1, -1, -1, -1] /* 78 9 */, [6, 9, 5, 6, 10, 9, 10, 8, 9, -1, -1, -1, -1, -1, -1, -1] /* 79 5 */, [5, 6, 11, 4, 8, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 80 3 */, [4, 0, 3, 4, 3, 7, 6, 11, 5, -1, -1, -1, -1, -1, -1, -1] /* 81 7 */, [1, 0, 9, 5, 6, 11, 8, 7, 4, -1, -1, -1, -1, -1, -1, -1] /* 82 6 */, [11, 5, 6, 1, 7, 9, 1, 3, 7, 7, 4, 9, -1, -1, -1, -1] /* 83 12 */, [6, 2, 1, 6, 1, 5, 4, 8, 7, -1, -1, -1, -1, -1, -1, -1] /* 84 7 */, [1, 5, 2, 5, 6, 2, 3, 4, 0, 3, 7, 4, -1, -1, -1, -1] /* 85 10 */, [8, 7, 4, 9, 5, 0, 0, 5, 6, 0, 6, 2, -1, -1, -1, -1] /* 86 12 */, [7, 9, 3, 7, 4, 9, 3, 9, 2, 5, 6, 9, 2, 9, 6, -1] /* 87 7 */, [3, 2, 10, 7, 4, 8, 11, 5, 6, -1, -1, -1, -1, -1, -1, -1] /* 88 6 */, [5, 6, 11, 4, 2, 7, 4, 0, 2, 2, 10, 7, -1, -1, -1, -1] /* 89 12 */, [0, 9, 1, 4, 8, 7, 2, 10, 3, 5, 6, 11, -1, -1, -1, -1] /* 90 13 */, [9, 1, 2, 9, 2, 10, 9, 10, 4, 7, 4, 10, 5, 6, 11, -1] /* 91 6 */, [8, 7, 4, 3, 5, 10, 3, 1, 5, 5, 6, 10, -1, -1, -1, -1] /* 92 12 */, [5, 10, 1, 5, 6, 10, 1, 10, 0, 7, 4, 10, 0, 10, 4, -1] /* 93 7 */, [0, 9, 5, 0, 5, 6, 0, 6, 3, 10, 3, 6, 8, 7, 4, -1] /* 94 6 */, [6, 9, 5, 6, 10, 9, 4, 9, 7, 7, 9, 10, -1, -1, -1, -1] /* 95 3 */, [11, 9, 4, 6, 11, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 96 2 */, [4, 6, 11, 4, 11, 9, 0, 3, 8, -1, -1, -1, -1, -1, -1, -1] /* 97 7 */, [11, 1, 0, 11, 0, 6, 6, 0, 4, -1, -1, -1, -1, -1, -1, -1] /* 98 5 */, [8, 1, 3, 8, 6, 1, 8, 4, 6, 6, 11, 1, -1, -1, -1, -1] /* 99 14 */, [1, 9, 4, 1, 4, 2, 2, 4, 6, -1, -1, -1, -1, -1, -1, -1] /* 100 5 */, [3, 8, 0, 1, 9, 2, 2, 9, 4, 2, 4, 6, -1, -1, -1, -1] /* 101 12 */, [0, 4, 2, 4, 6, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 102 8 */, [8, 2, 3, 8, 4, 2, 4, 6, 2, -1, -1, -1, -1, -1, -1, -1] /* 103 5 */, [11, 9, 4, 11, 4, 6, 10, 3, 2, -1, -1, -1, -1, -1, -1, -1] /* 104 7 */, [0, 2, 8, 2, 10, 8, 4, 11, 9, 4, 6, 11, -1, -1, -1, -1] /* 105 10 */, [3, 2, 10, 0, 6, 1, 0, 4, 6, 6, 11, 1, -1, -1, -1, -1] /* 106 12 */, [6, 1, 4, 6, 11, 1, 4, 1, 8, 2, 10, 1, 8, 1, 10, -1] /* 107 7 */, [9, 4, 6, 9, 6, 3, 9, 3, 1, 10, 3, 6, -1, -1, -1, -1] /* 108 11 */, [8, 1, 10, 8, 0, 1, 10, 1, 6, 9, 4, 1, 6, 1, 4, -1] /* 109 7 */, [3, 6, 10, 3, 0, 6, 0, 4, 6, -1, -1, -1, -1, -1, -1, -1] /* 110 5 */, [6, 8, 4, 10, 8, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 111 2 */, [7, 6, 11, 7, 11, 8, 8, 11, 9, -1, -1, -1, -1, -1, -1, -1] /* 112 5 */, [0, 3, 7, 0, 7, 11, 0, 11, 9, 6, 11, 7, -1, -1, -1, -1] /* 113 11 */, [11, 7, 6, 1, 7, 11, 1, 8, 7, 1, 0, 8, -1, -1, -1, -1] /* 114 9 */, [11, 7, 6, 11, 1, 7, 1, 3, 7, -1, -1, -1, -1, -1, -1, -1] /* 115 5 */, [1, 6, 2, 1, 8, 6, 1, 9, 8, 8, 7, 6, -1, -1, -1, -1] /* 116 14 */, [2, 9, 6, 2, 1, 9, 6, 9, 7, 0, 3, 9, 7, 9, 3, -1] /* 117 7 */, [7, 0, 8, 7, 6, 0, 6, 2, 0, -1, -1, -1, -1, -1, -1, -1] /* 118 5 */, [7, 2, 3, 6, 2, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 119 2 */, [2, 10, 3, 11, 8, 6, 11, 9, 8, 8, 7, 6, -1, -1, -1, -1] /* 120 12 */, [2, 7, 0, 2, 10, 7, 0, 7, 9, 6, 11, 7, 9, 7, 11, -1] /* 121 7 */, [1, 0, 8, 1, 8, 7, 1, 7, 11, 6, 11, 7, 2, 10, 3, -1] /* 122 6 */, [10, 1, 2, 10, 7, 1, 11, 1, 6, 6, 1, 7, -1, -1, -1, -1] /* 123 3 */, [8, 6, 9, 8, 7, 6, 9, 6, 1, 10, 3, 6, 1, 6, 3, -1] /* 124 7 */, [0, 1, 9, 10, 7, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 125 4 */, [7, 0, 8, 7, 6, 0, 3, 0, 10, 10, 0, 6, -1, -1, -1, -1] /* 126 3 */, [7, 6, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 127 1 */, [7, 10, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 128 1 */, [3, 8, 0, 10, 6, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 129 3 */, [0, 9, 1, 10, 6, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 130 4 */, [8, 9, 1, 8, 1, 3, 10, 6, 7, -1, -1, -1, -1, -1, -1, -1] /* 131 7 */, [11, 2, 1, 6, 7, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 132 3 */, [1, 11, 2, 3, 8, 0, 6, 7, 10, -1, -1, -1, -1, -1, -1, -1] /* 133 6 */, [2, 0, 9, 2, 9, 11, 6, 7, 10, -1, -1, -1, -1, -1, -1, -1] /* 134 7 */, [6, 7, 10, 2, 3, 11, 11, 3, 8, 11, 8, 9, -1, -1, -1, -1] /* 135 12 */, [7, 3, 2, 6, 7, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 136 2 */, [7, 8, 0, 7, 0, 6, 6, 0, 2, -1, -1, -1, -1, -1, -1, -1] /* 137 5 */, [2, 6, 7, 2, 7, 3, 0, 9, 1, -1, -1, -1, -1, -1, -1, -1] /* 138 7 */, [1, 2, 6, 1, 6, 8, 1, 8, 9, 8, 6, 7, -1, -1, -1, -1] /* 139 14 */, [11, 6, 7, 11, 7, 1, 1, 7, 3, -1, -1, -1, -1, -1, -1, -1] /* 140 5 */, [11, 6, 7, 1, 11, 7, 1, 7, 8, 1, 8, 0, -1, -1, -1, -1] /* 141 9 */, [0, 7, 3, 0, 11, 7, 0, 9, 11, 6, 7, 11, -1, -1, -1, -1] /* 142 11 */, [7, 11, 6, 7, 8, 11, 8, 9, 11, -1, -1, -1, -1, -1, -1, -1] /* 143 5 */, [6, 4, 8, 10, 6, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 144 2 */, [3, 10, 6, 3, 6, 0, 0, 6, 4, -1, -1, -1, -1, -1, -1, -1] /* 145 5 */, [8, 10, 6, 8, 6, 4, 9, 1, 0, -1, -1, -1, -1, -1, -1, -1] /* 146 7 */, [9, 6, 4, 9, 3, 6, 9, 1, 3, 10, 6, 3, -1, -1, -1, -1] /* 147 11 */, [6, 4, 8, 6, 8, 10, 2, 1, 11, -1, -1, -1, -1, -1, -1, -1] /* 148 7 */, [1, 11, 2, 3, 10, 0, 0, 10, 6, 0, 6, 4, -1, -1, -1, -1] /* 149 12 */, [4, 8, 10, 4, 10, 6, 0, 9, 2, 2, 9, 11, -1, -1, -1, -1] /* 150 10 */, [11, 3, 9, 11, 2, 3, 9, 3, 4, 10, 6, 3, 4, 3, 6, -1] /* 151 7 */, [8, 3, 2, 8, 2, 4, 4, 2, 6, -1, -1, -1, -1, -1, -1, -1] /* 152 5 */, [0, 2, 4, 4, 2, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 153 8 */, [1, 0, 9, 2, 4, 3, 2, 6, 4, 4, 8, 3, -1, -1, -1, -1] /* 154 12 */, [1, 4, 9, 1, 2, 4, 2, 6, 4, -1, -1, -1, -1, -1, -1, -1] /* 155 5 */, [8, 3, 1, 8, 1, 6, 8, 6, 4, 6, 1, 11, -1, -1, -1, -1] /* 156 14 */, [11, 0, 1, 11, 6, 0, 6, 4, 0, -1, -1, -1, -1, -1, -1, -1] /* 157 5 */, [4, 3, 6, 4, 8, 3, 6, 3, 11, 0, 9, 3, 11, 3, 9, -1] /* 158 7 */, [11, 4, 9, 6, 4, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 159 2 */, [4, 5, 9, 7, 10, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 160 3 */, [0, 3, 8, 4, 5, 9, 10, 6, 7, -1, -1, -1, -1, -1, -1, -1] /* 161 6 */, [5, 1, 0, 5, 0, 4, 7, 10, 6, -1, -1, -1, -1, -1, -1, -1] /* 162 7 */, [10, 6, 7, 8, 4, 3, 3, 4, 5, 3, 5, 1, -1, -1, -1, -1] /* 163 12 */, [9, 4, 5, 11, 2, 1, 7, 10, 6, -1, -1, -1, -1, -1, -1, -1] /* 164 6 */, [6, 7, 10, 1, 11, 2, 0, 3, 8, 4, 5, 9, -1, -1, -1, -1] /* 165 13 */, [7, 10, 6, 5, 11, 4, 4, 11, 2, 4, 2, 0, -1, -1, -1, -1] /* 166 12 */, [3, 8, 4, 3, 4, 5, 3, 5, 2, 11, 2, 5, 10, 6, 7, -1] /* 167 6 */, [7, 3, 2, 7, 2, 6, 5, 9, 4, -1, -1, -1, -1, -1, -1, -1] /* 168 7 */, [9, 4, 5, 0, 6, 8, 0, 2, 6, 6, 7, 8, -1, -1, -1, -1] /* 169 12 */, [3, 2, 6, 3, 6, 7, 1, 0, 5, 5, 0, 4, -1, -1, -1, -1] /* 170 10 */, [6, 8, 2, 6, 7, 8, 2, 8, 1, 4, 5, 8, 1, 8, 5, -1] /* 171 7 */, [9, 4, 5, 11, 6, 1, 1, 6, 7, 1, 7, 3, -1, -1, -1, -1] /* 172 12 */, [1, 11, 6, 1, 6, 7, 1, 7, 0, 8, 0, 7, 9, 4, 5, -1] /* 173 6 */, [4, 11, 0, 4, 5, 11, 0, 11, 3, 6, 7, 11, 3, 11, 7, -1] /* 174 7 */, [7, 11, 6, 7, 8, 11, 5, 11, 4, 4, 11, 8, -1, -1, -1, -1] /* 175 3 */, [6, 5, 9, 6, 9, 10, 10, 9, 8, -1, -1, -1, -1, -1, -1, -1] /* 176 5 */, [3, 10, 6, 0, 3, 6, 0, 6, 5, 0, 5, 9, -1, -1, -1, -1] /* 177 9 */, [0, 8, 10, 0, 10, 5, 0, 5, 1, 5, 10, 6, -1, -1, -1, -1] /* 178 14 */, [6, 3, 10, 6, 5, 3, 5, 1, 3, -1, -1, -1, -1, -1, -1, -1] /* 179 5 */, [1, 11, 2, 9, 10, 5, 9, 8, 10, 10, 6, 5, -1, -1, -1, -1] /* 180 12 */, [0, 3, 10, 0, 10, 6, 0, 6, 9, 5, 9, 6, 1, 11, 2, -1] /* 181 6 */, [10, 5, 8, 10, 6, 5, 8, 5, 0, 11, 2, 5, 0, 5, 2, -1] /* 182 7 */, [6, 3, 10, 6, 5, 3, 2, 3, 11, 11, 3, 5, -1, -1, -1, -1] /* 183 3 */, [5, 9, 8, 5, 8, 2, 5, 2, 6, 3, 2, 8, -1, -1, -1, -1] /* 184 11 */, [9, 6, 5, 9, 0, 6, 0, 2, 6, -1, -1, -1, -1, -1, -1, -1] /* 185 5 */, [1, 8, 5, 1, 0, 8, 5, 8, 6, 3, 2, 8, 6, 8, 2, -1] /* 186 7 */, [1, 6, 5, 2, 6, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 187 2 */, [1, 6, 3, 1, 11, 6, 3, 6, 8, 5, 9, 6, 8, 6, 9, -1] /* 188 7 */, [11, 0, 1, 11, 6, 0, 9, 0, 5, 5, 0, 6, -1, -1, -1, -1] /* 189 3 */, [0, 8, 3, 5, 11, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 190 4 */, [11, 6, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 191 1 */, [10, 11, 5, 7, 10, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 192 2 */, [10, 11, 5, 10, 5, 7, 8, 0, 3, -1, -1, -1, -1, -1, -1, -1] /* 193 7 */, [5, 7, 10, 5, 10, 11, 1, 0, 9, -1, -1, -1, -1, -1, -1, -1] /* 194 7 */, [11, 5, 7, 11, 7, 10, 9, 1, 8, 8, 1, 3, -1, -1, -1, -1] /* 195 10 */, [10, 2, 1, 10, 1, 7, 7, 1, 5, -1, -1, -1, -1, -1, -1, -1] /* 196 5 */, [0, 3, 8, 1, 7, 2, 1, 5, 7, 7, 10, 2, -1, -1, -1, -1] /* 197 12 */, [9, 5, 7, 9, 7, 2, 9, 2, 0, 2, 7, 10, -1, -1, -1, -1] /* 198 14 */, [7, 2, 5, 7, 10, 2, 5, 2, 9, 3, 8, 2, 9, 2, 8, -1] /* 199 7 */, [2, 11, 5, 2, 5, 3, 3, 5, 7, -1, -1, -1, -1, -1, -1, -1] /* 200 5 */, [8, 0, 2, 8, 2, 5, 8, 5, 7, 11, 5, 2, -1, -1, -1, -1] /* 201 11 */, [9, 1, 0, 5, 3, 11, 5, 7, 3, 3, 2, 11, -1, -1, -1, -1] /* 202 12 */, [9, 2, 8, 9, 1, 2, 8, 2, 7, 11, 5, 2, 7, 2, 5, -1] /* 203 7 */, [1, 5, 3, 3, 5, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 204 8 */, [0, 7, 8, 0, 1, 7, 1, 5, 7, -1, -1, -1, -1, -1, -1, -1] /* 205 5 */, [9, 3, 0, 9, 5, 3, 5, 7, 3, -1, -1, -1, -1, -1, -1, -1] /* 206 5 */, [9, 7, 8, 5, 7, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 207 2 */, [5, 4, 8, 5, 8, 11, 11, 8, 10, -1, -1, -1, -1, -1, -1, -1] /* 208 5 */, [5, 4, 0, 5, 0, 10, 5, 10, 11, 10, 0, 3, -1, -1, -1, -1] /* 209 14 */, [0, 9, 1, 8, 11, 4, 8, 10, 11, 11, 5, 4, -1, -1, -1, -1] /* 210 12 */, [11, 4, 10, 11, 5, 4, 10, 4, 3, 9, 1, 4, 3, 4, 1, -1] /* 211 7 */, [2, 1, 5, 2, 5, 8, 2, 8, 10, 4, 8, 5, -1, -1, -1, -1] /* 212 11 */, [0, 10, 4, 0, 3, 10, 4, 10, 5, 2, 1, 10, 5, 10, 1, -1] /* 213 7 */, [0, 5, 2, 0, 9, 5, 2, 5, 10, 4, 8, 5, 10, 5, 8, -1] /* 214 7 */, [9, 5, 4, 2, 3, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 215 4 */, [2, 11, 5, 3, 2, 5, 3, 5, 4, 3, 4, 8, -1, -1, -1, -1] /* 216 9 */, [5, 2, 11, 5, 4, 2, 4, 0, 2, -1, -1, -1, -1, -1, -1, -1] /* 217 5 */, [3, 2, 11, 3, 11, 5, 3, 5, 8, 4, 8, 5, 0, 9, 1, -1] /* 218 6 */, [5, 2, 11, 5, 4, 2, 1, 2, 9, 9, 2, 4, -1, -1, -1, -1] /* 219 3 */, [8, 5, 4, 8, 3, 5, 3, 1, 5, -1, -1, -1, -1, -1, -1, -1] /* 220 5 */, [0, 5, 4, 1, 5, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 221 2 */, [8, 5, 4, 8, 3, 5, 9, 5, 0, 0, 5, 3, -1, -1, -1, -1] /* 222 3 */, [9, 5, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 223 1 */, [4, 7, 10, 4, 10, 9, 9, 10, 11, -1, -1, -1, -1, -1, -1, -1] /* 224 5 */, [0, 3, 8, 4, 7, 9, 9, 7, 10, 9, 10, 11, -1, -1, -1, -1] /* 225 12 */, [1, 10, 11, 1, 4, 10, 1, 0, 4, 7, 10, 4, -1, -1, -1, -1] /* 226 11 */, [3, 4, 1, 3, 8, 4, 1, 4, 11, 7, 10, 4, 11, 4, 10, -1] /* 227 7 */, [4, 7, 10, 9, 4, 10, 9, 10, 2, 9, 2, 1, -1, -1, -1, -1] /* 228 9 */, [9, 4, 7, 9, 7, 10, 9, 10, 1, 2, 1, 10, 0, 3, 8, -1] /* 229 6 */, [10, 4, 7, 10, 2, 4, 2, 0, 4, -1, -1, -1, -1, -1, -1, -1] /* 230 5 */, [10, 4, 7, 10, 2, 4, 8, 4, 3, 3, 4, 2, -1, -1, -1, -1] /* 231 3 */, [2, 11, 9, 2, 9, 7, 2, 7, 3, 7, 9, 4, -1, -1, -1, -1] /* 232 14 */, [9, 7, 11, 9, 4, 7, 11, 7, 2, 8, 0, 7, 2, 7, 0, -1] /* 233 7 */, [3, 11, 7, 3, 2, 11, 7, 11, 4, 1, 0, 11, 4, 11, 0, -1] /* 234 7 */, [1, 2, 11, 8, 4, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 235 4 */, [4, 1, 9, 4, 7, 1, 7, 3, 1, -1, -1, -1, -1, -1, -1, -1] /* 236 5 */, [4, 1, 9, 4, 7, 1, 0, 1, 8, 8, 1, 7, -1, -1, -1, -1] /* 237 3 */, [4, 3, 0, 7, 3, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 238 2 */, [4, 7, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 239 1 */, [9, 8, 11, 11, 8, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 240 8 */, [3, 9, 0, 3, 10, 9, 10, 11, 9, -1, -1, -1, -1, -1, -1, -1] /* 241 5 */, [0, 11, 1, 0, 8, 11, 8, 10, 11, -1, -1, -1, -1, -1, -1, -1] /* 242 5 */, [3, 11, 1, 10, 11, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 243 2 */, [1, 10, 2, 1, 9, 10, 9, 8, 10, -1, -1, -1, -1, -1, -1, -1] /* 244 5 */, [3, 9, 0, 3, 10, 9, 1, 9, 2, 2, 9, 10, -1, -1, -1, -1] /* 245 3 */, [0, 10, 2, 8, 10, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 246 2 */, [3, 10, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 247 1 */, [2, 8, 3, 2, 11, 8, 11, 9, 8, -1, -1, -1, -1, -1, -1, -1] /* 248 5 */, [9, 2, 11, 0, 2, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 249 2 */, [2, 8, 3, 2, 11, 8, 0, 8, 1, 1, 8, 11, -1, -1, -1, -1] /* 250 3 */, [1, 2, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 251 1 */, [1, 8, 3, 9, 8, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 252 2 */, [0, 1, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 253 1 */, [0, 8, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 254 1 */, [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1] /* 255 0 */];\n\nconst EDGES = [[0, 1], [1, 3], [2, 3], [0, 2], [4, 5], [5, 7], [6, 7], [4, 6], [0, 4], [1, 5], [2, 6], [3, 7]];\nfunction getCase(index) {\n  return MARCHING_CUBE_CASES[index];\n}\n\n// Define the twelve edges of the voxel by the following pairs of vertices\nfunction getEdge(eid) {\n  return EDGES[eid];\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\nvar vtkCaseTable = {\n  getCase,\n  getEdge\n};\n\nexport { vtkCaseTable as default };\n","import BinaryHelper from '../Core/BinaryHelper.js';\nimport DataAccessHelper from '../Core/DataAccessHelper.js';\nimport { m as macro } from '../../macros2.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport vtkMatrixBuilder from '../../Common/Core/MatrixBuilder.js';\nimport vtkPolyData from '../../Common/DataModel/PolyData.js';\nimport '../Core/DataAccessHelper/LiteHttpDataAccessHelper.js';\n\n// import 'vtk.js/Sources/IO/Core/DataAccessHelper/HttpDataAccessHelper'; // HTTP + zip\n// import 'vtk.js/Sources/IO/Core/DataAccessHelper/HtmlDataAccessHelper'; // html + base64 + zip\n// import 'vtk.js/Sources/IO/Core/DataAccessHelper/JSZipDataAccessHelper'; // zip\n\nconst {\n  vtkErrorMacro\n} = macro;\nfunction parseHeader(headerString) {\n  const headerSubStr = headerString.split(' ');\n  const fieldValues = headerSubStr.filter(e => e.indexOf('=') > -1);\n  const header = {};\n  for (let i = 0; i < fieldValues.length; ++i) {\n    const fieldValueStr = fieldValues[i];\n    const fieldValueSubStr = fieldValueStr.split('=');\n    if (fieldValueSubStr.length === 2) {\n      header[fieldValueSubStr[0]] = fieldValueSubStr[1];\n    }\n  }\n  return header;\n}\nfunction addValuesToArray(src, dst) {\n  for (let i = 0; i < src.length; i++) {\n    dst.push(src[i]);\n  }\n}\n\n// facet normal ni nj nk\n//     outer loop\n//         vertex v1x v1y v1z\n//         vertex v2x v2y v2z\n//         vertex v3x v3y v3z\n//     endloop\n// endfacet\nfunction readTriangle(lines, offset, points, cellArray, cellNormals) {\n  const normalLine = lines[offset];\n  if (normalLine === undefined) {\n    return -1;\n  }\n  if (normalLine.indexOf('endfacet') !== -1) {\n    return offset + 1;\n  }\n  if (normalLine.indexOf('facet') === -1) {\n    return offset + 1; // Move to next line\n  }\n\n  let nbVertex = 0;\n  let nbConsumedLines = 2;\n  const firstVertexIndex = points.length / 3;\n  const normal = normalLine.split(/[ \\t]+/).filter(i => i).slice(-3).map(Number);\n  addValuesToArray(normal, cellNormals);\n  while (lines[offset + nbConsumedLines].indexOf('vertex') !== -1) {\n    const line = lines[offset + nbConsumedLines];\n    const coords = line.split(/[ \\t]+/).filter(i => i).slice(-3).map(Number);\n    addValuesToArray(coords, points);\n    nbVertex++;\n    nbConsumedLines++;\n  }\n  cellArray.push(nbVertex);\n  for (let i = 0; i < nbVertex; i++) {\n    cellArray.push(firstVertexIndex + i);\n  }\n  while (lines[offset + nbConsumedLines] && lines[offset + nbConsumedLines].indexOf('endfacet') !== -1) {\n    nbConsumedLines++;\n  }\n  // +1 (endfacet) +1 (next facet)\n  return offset + nbConsumedLines + 2;\n}\n\n// ----------------------------------------------------------------------------\n// vtkSTLReader methods\n// ----------------------------------------------------------------------------\n\nfunction vtkSTLReader(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkSTLReader');\n\n  // Create default dataAccessHelper if not available\n  if (!model.dataAccessHelper) {\n    model.dataAccessHelper = DataAccessHelper.get('http');\n  }\n\n  // Internal method to fetch Array\n  function fetchData(url) {\n    let option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const compression = option.compression !== undefined ? option.compression : model.compression;\n    const progressCallback = option.progressCallback !== undefined ? option.progressCallback : model.progressCallback;\n    if (option.binary) {\n      return model.dataAccessHelper.fetchBinary(url, {\n        compression,\n        progressCallback\n      });\n    }\n    return model.dataAccessHelper.fetchText(publicAPI, url, {\n      compression,\n      progressCallback\n    });\n  }\n\n  // Set DataSet url\n  publicAPI.setUrl = function (url) {\n    let option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      binary: true\n    };\n    model.url = url;\n\n    // Remove the file in the URL\n    const path = url.split('/');\n    path.pop();\n    model.baseURL = path.join('/');\n\n    // Fetch metadata\n    return publicAPI.loadData(option);\n  };\n\n  // Fetch the actual data arrays\n  publicAPI.loadData = function () {\n    let option = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const promise = fetchData(model.url, option);\n    promise.then(publicAPI.parse);\n    return promise;\n  };\n  publicAPI.parse = content => {\n    if (typeof content === 'string') {\n      publicAPI.parseAsText(content);\n    } else {\n      publicAPI.parseAsArrayBuffer(content);\n    }\n  };\n  publicAPI.parseAsArrayBuffer = content => {\n    if (!content) {\n      return;\n    }\n    if (content !== model.parseData) {\n      publicAPI.modified();\n    } else {\n      return;\n    }\n    model.parseData = content;\n\n    // ascii/binary detection\n    let isBinary = false;\n    // 80=STL header, 4=uint32 of num of triangles (le)\n    const dview = new DataView(content, 0, 80 + 4);\n    const numTriangles = dview.getUint32(80, true);\n    // 50 bytes per triangle\n    isBinary = 84 + numTriangles * 50 === content.byteLength;\n\n    // Check if ascii format\n    if (!isBinary) {\n      publicAPI.parseAsText(BinaryHelper.arrayBufferToString(content));\n      return;\n    }\n\n    // Binary parsing\n    // Header\n    const headerData = content.slice(0, 80);\n    const headerStr = BinaryHelper.arrayBufferToString(headerData);\n    const header = parseHeader(headerStr);\n\n    // Data\n    const dataView = new DataView(content, 84);\n    // global.dataview = dataView;\n    const nbFaces = (content.byteLength - 84) / 50;\n    const pointValues = new Float32Array(nbFaces * 9);\n    const normalValues = new Float32Array(nbFaces * 3);\n    const cellValues = new Uint32Array(nbFaces * 4);\n    const cellDataValues = new Uint16Array(nbFaces);\n    let cellOffset = 0;\n    for (let faceIdx = 0; faceIdx < nbFaces; faceIdx++) {\n      const offset = faceIdx * 50;\n      normalValues[faceIdx * 3 + 0] = dataView.getFloat32(offset + 0, true);\n      normalValues[faceIdx * 3 + 1] = dataView.getFloat32(offset + 4, true);\n      normalValues[faceIdx * 3 + 2] = dataView.getFloat32(offset + 8, true);\n      pointValues[faceIdx * 9 + 0] = dataView.getFloat32(offset + 12, true);\n      pointValues[faceIdx * 9 + 1] = dataView.getFloat32(offset + 16, true);\n      pointValues[faceIdx * 9 + 2] = dataView.getFloat32(offset + 20, true);\n      pointValues[faceIdx * 9 + 3] = dataView.getFloat32(offset + 24, true);\n      pointValues[faceIdx * 9 + 4] = dataView.getFloat32(offset + 28, true);\n      pointValues[faceIdx * 9 + 5] = dataView.getFloat32(offset + 32, true);\n      pointValues[faceIdx * 9 + 6] = dataView.getFloat32(offset + 36, true);\n      pointValues[faceIdx * 9 + 7] = dataView.getFloat32(offset + 40, true);\n      pointValues[faceIdx * 9 + 8] = dataView.getFloat32(offset + 44, true);\n      cellValues[cellOffset++] = 3;\n      cellValues[cellOffset++] = faceIdx * 3 + 0;\n      cellValues[cellOffset++] = faceIdx * 3 + 1;\n      cellValues[cellOffset++] = faceIdx * 3 + 2;\n      cellDataValues[faceIdx] = dataView.getUint16(offset + 48, true);\n    }\n\n    // Rotate points\n    const orientationField = 'SPACE';\n    if (orientationField in header && header[orientationField] !== 'LPS') {\n      const XYZ = header[orientationField];\n      const mat4 = new Float32Array(16);\n      mat4[15] = 1;\n      switch (XYZ[0]) {\n        case 'L':\n          mat4[0] = 1;\n          break;\n        case 'R':\n          mat4[0] = -1;\n          break;\n        default:\n          vtkErrorMacro(`Can not convert STL file from ${XYZ} to LPS space: ` + `permutations not supported. Use itk.js STL reader instead.`);\n          return;\n      }\n      switch (XYZ[1]) {\n        case 'P':\n          mat4[5] = 1;\n          break;\n        case 'A':\n          mat4[5] = -1;\n          break;\n        default:\n          vtkErrorMacro(`Can not convert STL file from ${XYZ} to LPS space: ` + `permutations not supported. Use itk.js STL reader instead.`);\n          return;\n      }\n      switch (XYZ[2]) {\n        case 'S':\n          mat4[10] = 1;\n          break;\n        case 'I':\n          mat4[10] = -1;\n          break;\n        default:\n          vtkErrorMacro(`Can not convert STL file from ${XYZ} to LPS space: ` + `permutations not supported. Use itk.js STL reader instead.`);\n          return;\n      }\n      vtkMatrixBuilder.buildFromDegree().setMatrix(mat4).apply(pointValues).apply(normalValues);\n    }\n    const polydata = vtkPolyData.newInstance();\n    polydata.getPoints().setData(pointValues, 3);\n    polydata.getPolys().setData(cellValues);\n    polydata.getCellData().setScalars(vtkDataArray.newInstance({\n      name: 'Attribute',\n      values: cellDataValues\n    }));\n    polydata.getCellData().setNormals(vtkDataArray.newInstance({\n      name: 'Normals',\n      values: normalValues,\n      numberOfComponents: 3\n    }));\n\n    // Add new output\n    model.output[0] = polydata;\n  };\n  publicAPI.parseAsText = content => {\n    if (!content) {\n      return;\n    }\n    if (content !== model.parseData) {\n      publicAPI.modified();\n    } else {\n      return;\n    }\n    model.parseData = content;\n    const lines = content.split('\\n');\n    let offset = 1;\n    const points = [];\n    const cellArray = [];\n    const cellNormals = [];\n    while (offset !== -1) {\n      offset = readTriangle(lines, offset, points, cellArray, cellNormals);\n    }\n    const polydata = vtkPolyData.newInstance();\n    polydata.getPoints().setData(Float32Array.from(points), 3);\n    polydata.getPolys().setData(Uint32Array.from(cellArray));\n    polydata.getCellData().setNormals(vtkDataArray.newInstance({\n      name: 'Normals',\n      values: Float32Array.from(cellNormals),\n      numberOfComponents: 3\n    }));\n\n    // Add new output\n    model.output[0] = polydata;\n  };\n  publicAPI.requestData = (inData, outData) => {\n    publicAPI.parse(model.parseData);\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // baseURL: null,\n  // dataAccessHelper: null,\n  // url: null,\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['url', 'baseURL']);\n  macro.setGet(publicAPI, model, ['dataAccessHelper']);\n  macro.algo(publicAPI, model, 0, 1);\n\n  // vtkSTLReader methods\n  vtkSTLReader(publicAPI, model);\n\n  // To support destructuring\n  if (!model.compression) {\n    model.compression = null;\n  }\n  if (!model.progressCallback) {\n    model.progressCallback = null;\n  }\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkSTLReader');\n\n// ----------------------------------------------------------------------------\n\nvar vtkSTLReader$1 = {\n  extend,\n  newInstance\n};\n\nexport { vtkSTLReader$1 as default, extend, newInstance };\n","import { vec3 } from 'gl-matrix';\nimport { m as macro } from '../../macros2.js';\nimport vtkTriangle from '../../Common/DataModel/Triangle.js';\nimport { FormatTypes } from './STLWriter/Constants.js';\n\n// @author: Thomas Beznik <thomas.beznik@relu.eu>, with the help of Julien Finet <julien.finet@kitware.com> (https://github.com/Kitware/vtk-js/issues/1442)\nconst {\n  vtkErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nfunction writeFloatBinary(dataView, offset, float) {\n  dataView.setFloat32(offset, float.toPrecision(6), true);\n  return offset + 4;\n}\nfunction writeVectorBinary(dataView, offset, vector) {\n  let off = writeFloatBinary(dataView, offset, vector[0]);\n  off = writeFloatBinary(dataView, off, vector[1]);\n  return writeFloatBinary(dataView, off, vector[2]);\n}\n\n// ----------------------------------------------------------------------------\n// vtkSTLWriter methods\n// ----------------------------------------------------------------------------\n\nconst binaryWriter = () => {\n  let offset = 0;\n  let dataView = null;\n  return {\n    init: polyData => {\n      const polys = polyData.getPolys().getData();\n      const buffer = new ArrayBuffer(80 + 4 + 50 * polys.length / 4); // buffer for the full file; size = header (80) + num cells (4) +  50 bytes per poly\n      dataView = new DataView(buffer);\n    },\n    writeHeader: polyData => {\n      offset += 80; // Header is empty // TODO: could add date, version, package\n\n      // First need to write the number of cells\n      dataView.setUint32(offset, polyData.getNumberOfCells(), true);\n      offset += 4;\n    },\n    writeTriangle: (v1, v2, v3, dn) => {\n      offset = writeVectorBinary(dataView, offset, dn);\n      offset = writeVectorBinary(dataView, offset, v1);\n      offset = writeVectorBinary(dataView, offset, v2);\n      offset = writeVectorBinary(dataView, offset, v3);\n      offset += 2; // unused 'attribute byte count' is a Uint16\n    },\n\n    writeFooter: polyData => {},\n    getOutputData: () => dataView\n  };\n};\nconst asciiWriter = () => {\n  let file = '';\n  return {\n    init: polyData => {},\n    writeHeader: polyData => {\n      file += 'solid ascii\\n';\n    },\n    writeTriangle: (v1, v2, v3, dn) => {\n      file += ` facet normal ${dn[0].toPrecision(6)} ${dn[1].toPrecision(6)} ${dn[2].toPrecision(6)}\\n`;\n      file += '  outer loop\\n';\n      file += `   vertex ${v1[0].toPrecision(6)} ${v1[1].toPrecision(6)} ${v1[2].toPrecision(6)}\\n`;\n      file += `   vertex ${v2[0].toPrecision(6)} ${v2[1].toPrecision(6)} ${v2[2].toPrecision(6)}\\n`;\n      file += `   vertex ${v3[0].toPrecision(6)} ${v3[1].toPrecision(6)} ${v3[2].toPrecision(6)}\\n`;\n      file += '  endloop\\n';\n      file += ' endfacet\\n';\n    },\n    writeFooter: polyData => {\n      file += 'endsolid\\n';\n    },\n    getOutputData: () => file\n  };\n};\nfunction writeSTL(polyData) {\n  let format = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : FormatTypes.BINARY;\n  let transform = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  let writer = null;\n  if (format === FormatTypes.BINARY) {\n    writer = binaryWriter();\n  } else if (format === FormatTypes.ASCII) {\n    writer = asciiWriter();\n  } else {\n    vtkErrorMacro('Invalid format type');\n  }\n  writer.init(polyData);\n  writer.writeHeader(polyData);\n  const polys = polyData.getPolys().getData();\n  const points = polyData.getPoints().getData();\n  const strips = polyData.getStrips() ? polyData.getStrips().getData() : null;\n  const n = [];\n  let v1 = [];\n  let v2 = [];\n  let v3 = [];\n\n  // Strips\n  if (strips && strips.length > 0) {\n    throw new Error('Unsupported strips');\n  }\n\n  // Polys\n  for (let i = 0; i < polys.length;) {\n    const pointNumber = polys[i++];\n    if (pointNumber) {\n      v1 = [points[polys[i] * 3], points[polys[i] * 3 + 1], points[polys[i++] * 3 + 2]];\n      v2 = [points[polys[i] * 3], points[polys[i] * 3 + 1], points[polys[i++] * 3 + 2]];\n      v3 = [points[polys[i] * 3], points[polys[i] * 3 + 1], points[polys[i++] * 3 + 2]];\n      if (transform) {\n        vec3.transformMat4(v1, v1, transform);\n        vec3.transformMat4(v2, v2, transform);\n        vec3.transformMat4(v3, v3, transform);\n      }\n      vtkTriangle.computeNormal(v1, v2, v3, n);\n      writer.writeTriangle(v1, v2, v3, n);\n    }\n  }\n  writer.writeFooter(polyData);\n  return writer.getOutputData();\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  writeSTL\n};\n\n// ----------------------------------------------------------------------------\n// vtkSTLWriter methods\n// ----------------------------------------------------------------------------\n\nfunction vtkSTLWriter(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkSTLWriter');\n  publicAPI.requestData = (inData, outData) => {\n    const input = inData[0];\n    if (!input || input.getClassName() !== 'vtkPolyData') {\n      vtkErrorMacro('Invalid or missing input');\n      return;\n    }\n    outData[0] = writeSTL(input, model.format, model.transform);\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  format: FormatTypes.BINARY,\n  transform: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Make this a VTK object\n  macro.obj(publicAPI, model);\n\n  // Also make it an algorithm with one input and one output\n  macro.algo(publicAPI, model, 1, 1);\n  macro.setGet(publicAPI, model, ['format', 'transform']);\n\n  // Object specific methods\n  vtkSTLWriter(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkSTLWriter');\n\n// ----------------------------------------------------------------------------\n\nvar vtkSTLWriter$1 = {\n  newInstance,\n  extend,\n  ...STATIC\n};\n\nexport { STATIC, vtkSTLWriter$1 as default, extend, newInstance };\n","const FormatTypes = {\n  ASCII: 'ascii',\n  BINARY: 'binary'\n};\nvar Constants = {\n  FormatTypes\n};\n\nexport { FormatTypes, Constants as default };\n","const ImageBorderMode = {\n  CLAMP: 0,\n  REPEAT: 1,\n  MIRROR: 2\n};\nconst InterpolationMode = {\n  NEAREST: 0,\n  LINEAR: 1,\n  CUBIC: 2\n};\nvar Constants = {\n  ImageBorderMode,\n  InterpolationMode\n};\n\nexport { ImageBorderMode, InterpolationMode, Constants as default };\n","import { ImageBorderMode, InterpolationMode } from './Constants.js';\n\nconst vtkInterpolationInfo = {\n  pointer: null,\n  extent: [0, -1, 0, -1, 0, -1],\n  increments: [0, 0, 0],\n  scalarType: null,\n  // dataType\n  dataTypeSize: 1,\n  // BYTES_PER_ELEMENT\n  numberOfComponents: 1,\n  borderMode: ImageBorderMode.CLAMP,\n  interpolationMode: InterpolationMode.LINEAR,\n  extraInfo: null\n};\nconst vtkInterpolationWeights = {\n  ...vtkInterpolationInfo,\n  positions: [0, 0, 0],\n  weights: null,\n  weightExtent: [0, -1, 0, -1, 0, -1],\n  kernelSize: [1, 1, 1],\n  workspace: null,\n  lastY: null,\n  lastZ: null\n};\nfunction vtkInterpolationMathFloor(x) {\n  const integer = Math.floor(x);\n  return {\n    floored: integer,\n    error: x - integer\n  };\n}\nfunction vtkInterpolationMathRound(x) {\n  return Math.round(x);\n}\n\n//----------------------------------------------------------------------------\n// Perform a clamp to limit an index to [b, c] and subtract b.\n\nfunction vtkInterpolationMathClamp(a, b, c) {\n  let clamp = a <= c ? a : c;\n  clamp -= b;\n  clamp = clamp >= 0 ? clamp : 0;\n  return clamp;\n}\n\n//----------------------------------------------------------------------------\n// Perform a wrap to limit an index to [b, c] and subtract b.\n\nfunction vtkInterpolationMathWrap(a, b, c) {\n  const range = c - b + 1;\n  let wrap = a - b;\n  wrap %= range;\n  // required for some % implementations\n  wrap = wrap >= 0 ? wrap : wrap + range;\n  return wrap;\n}\n\n//----------------------------------------------------------------------------\n// Perform a mirror to limit an index to [b, c] and subtract b.\n\nfunction vtkInterpolationMathMirror(a, b, c) {\n  const range = c - b;\n  const ifzero = range === 0 ? 1 : 0;\n  const range2 = 2 * range + ifzero;\n  let mirror = a - b;\n  mirror = mirror >= 0 ? mirror : -mirror;\n  mirror %= range2;\n  mirror = mirror <= range ? mirror : range2 - mirror;\n  return mirror;\n}\nvar InterpolationInfo = {\n  vtkInterpolationInfo,\n  vtkInterpolationWeights,\n  vtkInterpolationMathFloor,\n  vtkInterpolationMathRound,\n  vtkInterpolationMathClamp,\n  vtkInterpolationMathWrap,\n  vtkInterpolationMathMirror\n};\n\nexport { InterpolationInfo as default, vtkInterpolationInfo, vtkInterpolationMathClamp, vtkInterpolationMathFloor, vtkInterpolationMathMirror, vtkInterpolationMathRound, vtkInterpolationMathWrap, vtkInterpolationWeights };\n","import { m as macro } from '../../macros2.js';\nimport Constants from './AbstractImageInterpolator/Constants.js';\nimport { vtkInterpolationInfo } from './AbstractImageInterpolator/InterpolationInfo.js';\n\nconst {\n  ImageBorderMode\n} = Constants;\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n// ----------------------------------------------------------------------------\n// vtkAbstractImageInterpolator methods\n// ----------------------------------------------------------------------------\n\nfunction vtkAbstractImageInterpolator(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkAbstractImageInterpolator');\n  publicAPI.initialize = data => {\n    publicAPI.releaseData();\n    model.scalars = data.getPointData().getScalars();\n    model.spacing = data.getSpacing();\n    model.origin = data.getOrigin();\n    model.extent = data.getExtent();\n    publicAPI.update();\n  };\n  publicAPI.releaseData = () => {\n    model.scalars = null;\n  };\n  publicAPI.update = () => {\n    if (!model.scalars) {\n      model.interpolationInfo.pointer = null;\n      model.interpolationInfo.numberOfComponents = 1;\n      return;\n    }\n    model.interpolationInfo.extent = model.extent.slice();\n    const supportSize = publicAPI.computeSupportSize(null);\n    const kernelSize = Math.max(Math.max(supportSize[0], supportSize[1]), supportSize[2]);\n    const minBound = Number.MIN_SAFE_INTEGER + kernelSize / 2;\n    const maxBound = Number.MAX_SAFE_INTEGER - kernelSize / 2;\n    for (let i = 0; i < 3; ++i) {\n      const newTol = Math.max(0.5 * (model.extent[2 * i] === model.extent[2 * i + 1]), model.tolerance);\n      model.structuredBounds[2 * i] = Math.max(model.extent[2 * i] - newTol, minBound);\n      model.structuredBounds[2 * i + 1] = Math.min(model.extent[2 * i + 1] + newTol, maxBound);\n    }\n    const xdim = model.extent[1] - model.extent[0] + 1;\n    const ydim = model.extent[3] - model.extent[2] + 1;\n    const ncomp = model.scalars.getNumberOfComponents();\n    model.interpolationInfo.increments[0] = ncomp;\n    model.interpolationInfo.increments[1] = model.interpolationInfo.increments[0] * xdim;\n    model.interpolationInfo.increments[2] = model.interpolationInfo.increments[1] * ydim;\n    let component = model.componentOffset;\n    component = component > 0 ? component : 0;\n    component = component < ncomp ? component : ncomp - 1;\n    const dataSize = 1; // scalars.getDataTypeSize()\n    const inPtr = model.scalars.getData();\n    model.interpolationInfo.pointer = inPtr.subarray(component * dataSize);\n    model.interpolationInfo.scalarType = model.scalars.dataType;\n    model.interpolationInfo.dataTypeSize = 1; // model.scalars.getElementComponentSize();\n    model.interpolationInfo.numberOfComponents = publicAPI.computeNumberOfComponents(ncomp);\n    model.interpolationInfo.borderMode = model.borderMode;\n    publicAPI.internalUpdate();\n\n    // TODO get functions\n  };\n\n  publicAPI.internalUpdate = () => {};\n  publicAPI.interpolateXYZ = (x, y, z, component) => {\n    let value = model.outValue;\n    const point = [x, y, z];\n    const p = [(point[0] - model.origin[0]) / model.spacing[0], (point[1] - model.origin[1]) / model.spacing[1], (point[2] - model.origin[2]) / model.spacing[2]];\n    if (publicAPI.checkBoundsIJK(p)) {\n      const iinfo = {\n        ...model.interpolationInfo\n      };\n      const ncomp = iinfo.increments[0] - model.componentOffset;\n      const dataTypeSize = 1; // iinfo.dataTypeSize; // vtkAbstractArray::getDataTypeSize(iinfo.scalarType)\n\n      let c = component > 0 ? component : 0;\n      c = c < ncomp ? c : ncomp - 1;\n      iinfo.pointer = model.interpolationInfo.pointer.subarray(dataTypeSize * c);\n      iinfo.numberOfComponents = 1;\n      const v = [value];\n      publicAPI.interpolatePoint(iinfo, p, v);\n      value = v[0];\n    }\n    return value;\n  };\n  publicAPI.interpolate = (point, value) => {\n    const p = [(point[0] - model.origin[0]) / model.spacing[0], (point[1] - model.origin[1]) / model.spacing[1], (point[2] - model.origin[2]) / model.spacing[2]];\n    if (publicAPI.checkBoundsIJK(p)) {\n      publicAPI.interpolatePoint(model.interpolationInfo, p, value);\n      return true;\n    }\n    for (let i = 0; i < model.interpolationInfo.numberOfComponents; ++i) {\n      value[i] = model.outValue;\n    }\n    return false;\n  };\n  publicAPI.computeNumberOfComponents = inputCount => {\n    const component = Math.min(Math.max(model.componentOffset, 0), inputCount - 1);\n    const count = model.componentCount < inputCount - component ? model.componentCount : inputCount - component;\n    return count > 0 ? count : inputCount - component;\n  };\n  publicAPI.getNumberOfComponents = () => model.interpolationInfo.numberOfComponents;\n  publicAPI.interpolateIJK = (point, value) => {\n    publicAPI.interpolatePoint(model.interpolationInfo, point, value);\n  };\n  publicAPI.checkBoundsIJK = point => !(point[0] < model.structuredBounds[0] || point[0] > model.structuredBounds[1] || point[1] < model.structuredBounds[2] || point[1] > model.structuredBounds[3] || point[2] < model.structuredBounds[4] || point[2] > model.structuredBounds[5]);\n  publicAPI.computeSupportSize = null; // (matrix) => {};\n  publicAPI.isSeparable = null;\n  publicAPI.precomputeWeightsForExtent = (matrix, inExtent, checkExtent) => {};\n  publicAPI.FreePrecomputedWeights = weights => {\n    /*\n    for (let k = 0; k < 3; ++k) {\n      const step = weights.kernelSize[k];\n      // TODO: check if ok\n      weights.positions[k] += step * weights.weightExtent[2 * k];\n      if (weights.weights[k]) {\n        // TODO: check if ok\n        weights.weights[k] += step * weights.weightExtent[2 * k];\n      }\n    }\n     if (weights.workspace) {\n      for (let i = 1; i < weights.kernelSize[1]; ++i) {\n        // TODO\n        ...\n      }\n    }\n    */\n  };\n  publicAPI.interpolatePoint = (interpolationInfo, point, value) => {};\n  publicAPI.interpolateRow = (weights, xIdx, yIdx, zIdx, value, n) => {};\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  outValue: 0,\n  tolerance: Number.EPSILON,\n  componentOffset: 0,\n  componentCount: -1,\n  borderMode: ImageBorderMode.CLAMP,\n  slidingWindow: false,\n  scalars: null,\n  interpolationInfo: {\n    ...vtkInterpolationInfo\n  },\n  interpolationFunc: null,\n  rowInterpolationFunc: null,\n  structuredBounds: [0, -1, 0, -1, 0, -1],\n  spacing: null,\n  origin: null,\n  extent: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['outValue', 'tolerance', 'componentOffset', 'componentCount', 'borderMode', 'slidingWindow']);\n  macro.get(publicAPI, model, ['origin', 'spacing']);\n\n  // Object specific methods\n  vtkAbstractImageInterpolator(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkAbstractImageInterpolator');\n\n// ----------------------------------------------------------------------------\n\nvar vtkAbstractImageInterpolator$1 = {\n  newInstance,\n  extend,\n  ...Constants\n};\n\nexport { vtkAbstractImageInterpolator$1 as default, extend, newInstance };\n","import { m as macro } from '../../macros2.js';\nimport vtkAbstractImageInterpolator from './AbstractImageInterpolator.js';\nimport { vtkInterpolationMathRound, vtkInterpolationMathClamp, vtkInterpolationMathMirror, vtkInterpolationMathWrap, vtkInterpolationMathFloor, vtkInterpolationWeights } from './AbstractImageInterpolator/InterpolationInfo.js';\nimport { InterpolationMode, ImageBorderMode } from './AbstractImageInterpolator/Constants.js';\n\n// ----------------------------------------------------------------------------\n// vtkImageInterpolator methods\n// ----------------------------------------------------------------------------\n\nfunction vtkImageInterpolator(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkImageInterpolator');\n  publicAPI.computeSupportSize = matrix => {\n    let s = 1;\n    if (model.interpolationMode === InterpolationMode.LINEAR) {\n      s = 2;\n    } else if (model.interpolationMode === InterpolationMode.CUBIC) {\n      s = 4;\n    }\n    const size = [s, s, s];\n    if (matrix == null) {\n      return size;\n    }\n    // TODO CHECK MATRIX\n    if (matrix[12] !== 0 || matrix[13] !== 0 || matrix[14] !== 0 || matrix[15] !== 1) {\n      return size;\n    }\n    for (let i = 0; i < 3; ++i) {\n      let integerRow = true;\n      for (let j = 0; j < 3; ++j) {\n        integerRow = integerRow && Number.isInteger(matrix[4 * i + j]);\n      }\n      if (integerRow) {\n        size[i] = 1;\n      }\n    }\n    return size;\n  };\n  publicAPI.internalUpdate = () => {\n    model.interpolationInfo.interpolationMode = model.interpolationMode;\n  };\n  publicAPI.isSeparable = () => true;\n  publicAPI.interpolateNearest = (interpolationInfo, point, value) => {\n    const inExt = interpolationInfo.extent;\n    const inInc = interpolationInfo.increments;\n    const numscalars = interpolationInfo.numberOfComponents;\n    let inIdX0 = vtkInterpolationMathRound(point[0]);\n    let inIdY0 = vtkInterpolationMathRound(point[1]);\n    let inIdZ0 = vtkInterpolationMathRound(point[2]);\n    switch (interpolationInfo.borderMode) {\n      case ImageBorderMode.REPEAT:\n        inIdX0 = vtkInterpolationMathWrap(inIdX0, inExt[0], inExt[1]);\n        inIdY0 = vtkInterpolationMathWrap(inIdY0, inExt[2], inExt[3]);\n        inIdZ0 = vtkInterpolationMathWrap(inIdZ0, inExt[4], inExt[5]);\n        break;\n      case ImageBorderMode.MIRROR:\n        inIdX0 = vtkInterpolationMathMirror(inIdX0, inExt[0], inExt[1]);\n        inIdY0 = vtkInterpolationMathMirror(inIdY0, inExt[2], inExt[3]);\n        inIdZ0 = vtkInterpolationMathMirror(inIdZ0, inExt[4], inExt[5]);\n        break;\n      default:\n        inIdX0 = vtkInterpolationMathClamp(inIdX0, inExt[0], inExt[1]);\n        inIdY0 = vtkInterpolationMathClamp(inIdY0, inExt[2], inExt[3]);\n        inIdZ0 = vtkInterpolationMathClamp(inIdZ0, inExt[4], inExt[5]);\n        break;\n    }\n    const startId = inIdX0 * inInc[0] + inIdY0 * inInc[1] + inIdZ0 * inInc[2];\n    for (let i = 0; i < numscalars; ++i) {\n      value[i] = interpolationInfo.pointer[startId + i];\n    }\n  };\n  publicAPI.interpolateLinear = (interpolationInfo, point, value) => {\n    const inExt = interpolationInfo.extent;\n    const inInc = interpolationInfo.increments;\n    const numscalars = interpolationInfo.numberOfComponents;\n    const floorX = vtkInterpolationMathFloor(point[0]);\n    const floorY = vtkInterpolationMathFloor(point[1]);\n    const floorZ = vtkInterpolationMathFloor(point[2]);\n    let inIdX0 = floorX.floored;\n    let inIdY0 = floorY.floored;\n    let inIdZ0 = floorZ.floored;\n    const fx = floorX.error;\n    const fy = floorY.error;\n    const fz = floorZ.error;\n    let inIdX1 = inIdX0 + (fx !== 0);\n    let inIdY1 = inIdY0 + (fy !== 0);\n    let inIdZ1 = inIdZ0 + (fz !== 0);\n    switch (interpolationInfo.borderMode) {\n      case ImageBorderMode.REPEAT:\n        inIdX0 = vtkInterpolationMathWrap(inIdX0, inExt[0], inExt[1]);\n        inIdY0 = vtkInterpolationMathWrap(inIdY0, inExt[2], inExt[3]);\n        inIdZ0 = vtkInterpolationMathWrap(inIdZ0, inExt[4], inExt[5]);\n        inIdX1 = vtkInterpolationMathWrap(inIdX1, inExt[0], inExt[1]);\n        inIdY1 = vtkInterpolationMathWrap(inIdY1, inExt[2], inExt[3]);\n        inIdZ1 = vtkInterpolationMathWrap(inIdZ1, inExt[4], inExt[5]);\n        break;\n      case ImageBorderMode.MIRROR:\n        inIdX0 = vtkInterpolationMathMirror(inIdX0, inExt[0], inExt[1]);\n        inIdY0 = vtkInterpolationMathMirror(inIdY0, inExt[2], inExt[3]);\n        inIdZ0 = vtkInterpolationMathMirror(inIdZ0, inExt[4], inExt[5]);\n        inIdX1 = vtkInterpolationMathMirror(inIdX1, inExt[0], inExt[1]);\n        inIdY1 = vtkInterpolationMathMirror(inIdY1, inExt[2], inExt[3]);\n        inIdZ1 = vtkInterpolationMathMirror(inIdZ1, inExt[4], inExt[5]);\n        break;\n      default:\n        inIdX0 = vtkInterpolationMathClamp(inIdX0, inExt[0], inExt[1]);\n        inIdY0 = vtkInterpolationMathClamp(inIdY0, inExt[2], inExt[3]);\n        inIdZ0 = vtkInterpolationMathClamp(inIdZ0, inExt[4], inExt[5]);\n        inIdX1 = vtkInterpolationMathClamp(inIdX1, inExt[0], inExt[1]);\n        inIdY1 = vtkInterpolationMathClamp(inIdY1, inExt[2], inExt[3]);\n        inIdZ1 = vtkInterpolationMathClamp(inIdZ1, inExt[4], inExt[5]);\n        break;\n    }\n    const factX0 = inIdX0 * inInc[0];\n    const factX1 = inIdX1 * inInc[0];\n    const factY0 = inIdY0 * inInc[1];\n    const factY1 = inIdY1 * inInc[1];\n    const factZ0 = inIdZ0 * inInc[2];\n    const factZ1 = inIdZ1 * inInc[2];\n    const i00 = factY0 + factZ0;\n    const i01 = factY0 + factZ1;\n    const i10 = factY1 + factZ0;\n    const i11 = factY1 + factZ1;\n    const rx = 1 - fx;\n    const ry = 1 - fy;\n    const rz = 1 - fz;\n    const ryrz = ry * rz;\n    const fyrz = fy * rz;\n    const ryfz = ry * fz;\n    const fyfz = fy * fz;\n    const inPtr = interpolationInfo.pointer;\n    for (let i = 0; i < numscalars; ++i) {\n      value[i] = rx * (ryrz * inPtr[factX0 + i00 + i * 4] + ryfz * inPtr[factX0 + i01 + i * 4] + fyrz * inPtr[factX0 + i10 + i * 4] + fyfz * inPtr[factX0 + i11 + i * 4]) + fx * (ryrz * inPtr[factX1 + i00 + i * 4] + ryfz * inPtr[factX1 + i01 + i * 4] + fyrz * inPtr[factX1 + i10 + i * 4] + fyfz * inPtr[factX1 + i11 + i * 4]);\n    }\n  };\n  publicAPI.interpolatePoint = (interpolationInfo, point, value) => {\n    switch (model.interpolationMode) {\n      case InterpolationMode.LINEAR:\n        publicAPI.interpolateLinear(interpolationInfo, point, value);\n        break;\n      case InterpolationMode.CUBIC:\n        console.log('CUBIC not implemented');\n        break;\n      case InterpolationMode.NEAREST:\n      default:\n        publicAPI.interpolateNearest(interpolationInfo, point, value);\n        break;\n    }\n  };\n  publicAPI.interpolateRowNearest = (weights, idX, idY, idZ, outPtr, n) => {\n    // TODO check pointers\n    const iX = weights.positions[0].subarray(idX);\n    const iY = weights.positions[1].subarray(idY);\n    const iZ = weights.positions[2].subarray(idZ);\n    const inPtr0 = weights.pointer.subarray(iY[0] + iZ[0]);\n\n    // get the number of components per pixel\n    const numscalars = weights.numberOfComponents;\n\n    // This is a hot loop.\n    for (let i = 0; i < n; ++i) {\n      outPtr.set(inPtr0.subarray(iX[i], numscalars), i * numscalars);\n    }\n  };\n  publicAPI.interpolateRowLinear = (weights, idX, idY, idZ, outPtr, n) => {\n    const stepX = weights.kernelSize[0];\n    const stepY = weights.kernelSize[1];\n    const stepZ = weights.kernelSize[2];\n    const idXtemp = idX * stepX;\n    const idYtemp = idY * stepY;\n    const idZtemp = idZ * stepZ;\n    const fX = weights.weights[0].subarray(idXtemp);\n    const fY = weights.weights[1].subarray(idYtemp);\n    const fZ = weights.weights[2].subarray(idZtemp);\n    const iX = weights.positions[0].subarray(idXtemp);\n    const iY = weights.positions[1].subarray(idYtemp);\n    const iZ = weights.positions[2].subarray(idZtemp);\n    const inPtr = weights.pointer;\n\n    // get the number of components per pixel\n    const numscalars = weights.numberOfComponents;\n\n    // create a 2x2 bilinear kernel in local variables\n    const i00 = iY.subarray(iZ[0]);\n    let i01 = i00;\n    let i10 = i00;\n    let i11 = i00;\n    let ry = 1;\n    let fy = 0;\n    let rz = 1;\n    let fz = 0;\n    if (stepY === 2) {\n      i10 = iY[1].subarray(iZ[0]);\n      i11 = i10;\n      ry = fY[0];\n      fy = fY[1];\n    }\n    if (stepZ === 2) {\n      i01 = iY[0].subarray(iZ[1]);\n      i11 = i01;\n      rz = fZ[0];\n      fz = fZ[1];\n    }\n    if (stepY + stepZ === 4) {\n      i11 = iY[1].subarray(iZ[1]);\n    }\n    const ryrz = ry * rz;\n    const ryfz = ry * fz;\n    const fyrz = fy * rz;\n    const fyfz = fy * fz;\n    if (stepX === 1) {\n      if (fy === 0 && fz === 0) {\n        // no interpolation needed at all\n        for (let i = n; i > 0; --i) {\n          for (let j = 0; j < numscalars; j++) {\n            outPtr[j + n - i] = inPtr[i00 + iX[n - i] + j];\n          }\n        }\n      } else if (fy === 0) {\n        // only need linear z interpolation\n        for (let i = n; i > 0; --i) {\n          for (let j = 0; j < numscalars; j++) {\n            outPtr[j + n - i] = rz * inPtr[iX[n - i] + i00 + j * 4] + fz * inPtr[iX[n - i] + i01 + j * 4];\n          }\n        }\n      } else {\n        // interpolate in y and z but not in x\n        for (let i = n; i > 0; --i) {\n          for (let j = 0; j < numscalars; j++) {\n            outPtr[j + n - i] = ryrz * inPtr[iX[n - i] + i00 + j * 4] + ryfz * inPtr[iX[n - i] + i01 + j * 4] + fyrz * inPtr[iX[n - i] + i10 + j * 4] + fyfz * inPtr[iX[n - i] + i11 + j * 4];\n          }\n        }\n      }\n    } else if (fz === 0) {\n      let x = 0;\n      // bilinear interpolation in x,y\n      for (let i = n; i > 0; --i) {\n        const rx = fX[0 + 2 * x];\n        const fx = fX[1 + 2 * x];\n        const t0 = iX[0 + 2 * x];\n        const t1 = iX[1 + 2 * x];\n        for (let j = 0; j < numscalars; j++) {\n          outPtr[j + n - i] = rx * (ry * inPtr[t0 + i00 + j * 4] + fy * inPtr[t0 + i10 + j * 4]) + fx * (ry * inPtr[t1 + i00 + j * 4] + fy * inPtr[t1 + i10 + j * 4]);\n        }\n        x++;\n      }\n    } else {\n      let x = 0;\n      // do full trilinear interpolation\n      for (let i = n; i > 0; --i) {\n        const rx = fX[0 + 2 * x];\n        const fx = fX[1 + 2 * x];\n        const t0 = iX[0 + 2 * x];\n        const t1 = iX[1 + 2 * x];\n        for (let j = 0; j < numscalars; j++) {\n          outPtr[j] = rx * (ryrz * inPtr[t0 + i00 + j * 4] + ryfz * inPtr[t0 + i01 + j * 4] + fyrz * inPtr[t0 + i10 + j * 4] + fyfz * inPtr[t0 + i11 + j * 4]) + fx * (ryrz * inPtr[t1 + i00 + j * 4] + ryfz * inPtr[t1 + i01 + j * 4] + fyrz * inPtr[t1 + i10 + j * 4] + fyfz * inPtr[t1 + i11 + j * 4]);\n        }\n        x++;\n      }\n    }\n  };\n  publicAPI.interpolateRow = (weights, xIdx, yIdx, zIdx, value, n) => {\n    switch (model.interpolationMode) {\n      case InterpolationMode.LINEAR:\n        publicAPI.interpolateRowLinear(weights, xIdx, yIdx, zIdx, value, n);\n        break;\n      case InterpolationMode.CUBIC:\n        console.log('CUBIC not implemented');\n        break;\n      case InterpolationMode.NEAREST:\n      default:\n        publicAPI.interpolateRowNearest(weights, xIdx, yIdx, zIdx, value, n);\n        break;\n    }\n  };\n  publicAPI.vtkTricubicInterpWeights = f => {\n    const half = 0.5;\n\n    // cubic interpolation\n    const fm1 = f - 1;\n    const fd2 = f * half;\n    const ft3 = f * 3;\n    return [-fd2 * fm1 * fm1, ((ft3 - 2) * fd2 - 1) * fm1, -((ft3 - 4) * f - 1) * fd2, f * fd2 * fm1];\n  };\n  publicAPI.precomputeWeightsForExtent = (matrix, outExt, clipExt) => {\n    const weights = {\n      ...vtkInterpolationWeights.newInstance(),\n      ...model.interpolationInfo\n    };\n    weights.weightType = 'Float32Array';\n    const interpMode = weights.interpolationMode;\n    let validClip = true;\n    for (let j = 0; j < 3; ++j) {\n      // set k to the row for which the element in column j is nonzero\n      let k;\n      for (k = 0; k < 3; ++k) {\n        if (matrix[4 * j + k] !== 0) {\n          break;\n        }\n      }\n\n      // get the extents\n      clipExt[2 * j] = outExt[2 * j];\n      clipExt[2 * j + 1] = outExt[2 * j + 1];\n      const minExt = weights.extent[2 * k];\n      const maxExt = weights.extent[2 * k + 1];\n      const minBounds = model.structuredBounds[2 * k];\n      const maxBounds = model.structuredBounds[2 * k + 1];\n\n      // the kernel size should not exceed the input dimension\n      let step = 1;\n      step = interpMode < InterpolationMode.LINEAR ? step : 2;\n      step = interpMode < InterpolationMode.CUBIC ? step : 4;\n      const inCount = maxExt - minExt + 1;\n      step = step < inCount ? step : inCount;\n\n      // if output pixels lie exactly on top of the input pixels\n      if (Number.isInteger(matrix[4 * j + k]) && Number.isInteger(matrix[4 * k + k])) {\n        step = 1;\n      }\n      const size = step * (outExt[2 * j + 1] - outExt[2 * j] + 1);\n      // TODO: check pointers\n      const positions = new Int16Array(size);\n      // positions -= step*outExt[2 * j];\n      const startPositions = step * outExt[2 * j];\n      let constants = null;\n      if (interpMode !== InterpolationMode.NEAREST) {\n        constants = new Int16Array(size);\n        // constants -= step * outExt[2 * j];\n      }\n\n      weights.kernelSize[j] = step;\n      weights.weightExtent[2 * j] = outExt[2 * j];\n      weights.weightExtent[2 * j + 1] = outExt[2 * j + 1];\n      weights.positions[j] = positions; // TODO: check pointers\n      weights.weights[j] = constants; // TODO: check pointers\n\n      let region = 0;\n      for (let i = outExt[2 * j]; i <= outExt[2 * j + 1]; ++i) {\n        const point = matrix[4 * 3 + k] + i * matrix[4 * j + k];\n        let lcount = step;\n        let inId0 = 0;\n        let f = 0;\n        if (interpMode === InterpolationMode.NEAREST) {\n          inId0 = Math.round(point);\n        } else {\n          const res = vtkInterpolationMathFloor(point);\n          inId0 = res.integer;\n          f = res.error;\n          if (interpMode === InterpolationMode.CUBIC && step !== 1) {\n            inId0--;\n            lcount = 4;\n          }\n        }\n        const inId = [0, 0, 0, 0];\n        let l = 0;\n        switch (weights.borderMode) {\n          case ImageBorderMode.REPEAT:\n            do {\n              inId[l] = vtkInterpolationMathWrap(inId0, minExt, maxExt);\n              inId0++;\n            } while (++l < lcount);\n            break;\n          case ImageBorderMode.MIRROR:\n            do {\n              inId[l] = vtkInterpolationMathMirror(inId0, minExt, maxExt);\n              inId0++;\n            } while (++l < lcount);\n            break;\n          default:\n            do {\n              inId[l] = vtkInterpolationMathClamp(inId0, minExt, maxExt);\n              inId0++;\n            } while (++l < lcount);\n            break;\n        }\n\n        // compute the weights and offsets\n        const inInc = weights.increments[k];\n        positions[step * i - startPositions] = inId[0] * inInc;\n        if (interpMode !== InterpolationMode.NEAREST) {\n          constants[step * i - startPositions] = 1;\n        }\n        if (step > 1) {\n          if (interpMode === InterpolationMode.LINEAR) {\n            positions[step * i + 1 - startPositions] = inId[1] * inInc;\n            constants[step * i - startPositions] = 1.0 - f;\n            constants[step * i + 1 - startPositions] = f;\n          } else if (interpMode === InterpolationMode.CUBIC) {\n            const g = publicAPI.vtkTricubicInterpWeights(f);\n            if (step === 4) {\n              for (let ll = 0; ll < 4; ll++) {\n                positions[step * i + ll - startPositions] = inId[ll] * inInc;\n                constants[step * i + ll - startPositions] = g[ll];\n              }\n            } else {\n              // it gets tricky if there are fewer than 4 slices\n              const gg = [0, 0, 0, 0];\n              for (let ll = 0; ll < 4; ll++) {\n                const rIdx = inId[ll] - minExt;\n                gg[rIdx] += g[ll];\n              }\n              for (let jj = 0; jj < step; jj++) {\n                positions[step * i + jj - startPositions] = minExt + jj;\n                constants[step * i + jj - startPositions] = gg[jj];\n              }\n            }\n          }\n        }\n        if (point >= minBounds && point <= maxBounds) {\n          if (region === 0) {\n            // entering the input extent\n            region = 1;\n            clipExt[2 * j] = i;\n          }\n        } else if (region === 1) {\n          // leaving the input extent\n          region = 2;\n          clipExt[2 * j + 1] = i - 1;\n        }\n      }\n      if (region === 0 || clipExt[2 * j] > clipExt[2 * j + 1]) {\n        // never entered input extent!\n        validClip = false;\n      }\n    }\n    if (!validClip) {\n      // output extent doesn't itersect input extent\n      for (let j = 0; j < 3; j++) {\n        clipExt[2 * j] = outExt[2 * j];\n        clipExt[2 * j + 1] = outExt[2 * j] - 1;\n      }\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  interpolationMode: InterpolationMode.NEAREST\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkAbstractImageInterpolator.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['interpolationMode']);\n\n  // Object specific methods\n  vtkImageInterpolator(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkImageInterpolator');\n\n// ----------------------------------------------------------------------------\n\nvar vtkImageInterpolator$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkImageInterpolator$1 as default, extend, newInstance };\n","import { m as macro } from '../../macros2.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n// ----------------------------------------------------------------------------\n// vtkImagePointDataIterator methods\n// ----------------------------------------------------------------------------\n\nfunction vtkImagePointDataIterator(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkImagePointDataIterator');\n  publicAPI.initialize = (image, inExtent, stencil, algorithm) => {\n    const dataExtent = image.getExtent();\n    let extent = inExtent;\n    if (extent == null) {\n      extent = dataExtent;\n    }\n    let emptyExtent = false;\n    for (let i = 0; i < 6; i += 2) {\n      model.extent[i] = Math.max(extent[i], dataExtent[i]);\n      model.extent[i + 1] = Math.min(extent[i + 1], dataExtent[i + 1]);\n      if (model.extent[i] > model.extent[i + 1]) {\n        emptyExtent = true;\n      }\n    }\n    model.rowIncrement = dataExtent[1] - dataExtent[0] + 1;\n    model.sliceIncrement = model.rowIncrement * (dataExtent[3] - dataExtent[2] + 1);\n    let rowSpan;\n    let sliceSpan;\n    let volumeSpan;\n    if (!emptyExtent) {\n      // Compute the span of the image region to be covered.\n      rowSpan = model.extent[1] - model.extent[0] + 1;\n      sliceSpan = model.extent[3] - model.extent[2] + 1;\n      volumeSpan = model.extent[5] - model.extent[4] + 1;\n      model.id = model.extent[0] - dataExtent[0] + (model.extent[2] - dataExtent[2]) * model.rowIncrement + (model.extent[4] - dataExtent[4]) * model.sliceIncrement;\n\n      // Compute the end increments (continuous increments).\n      model.rowEndIncrement = model.rowIncrement - rowSpan;\n      model.sliceEndIncrement = model.rowEndIncrement + model.sliceIncrement - model.rowIncrement * sliceSpan;\n    } else {\n      // Extent is empty, isAtEnd() will immediately return \"true\"\n      rowSpan = 0;\n      sliceSpan = 0;\n      volumeSpan = 0;\n      model.id = 0;\n      model.rowEndIncrement = 0;\n      model.sliceEndIncrement = 0;\n      for (let i = 0; i < 6; i += 2) {\n        model.extent[i] = dataExtent[i];\n        model.extent[i + 1] = dataExtent[i] - 1;\n      }\n    }\n\n    // Get the end pointers for row, slice, and volume.\n    model.spanEnd = model.id + rowSpan;\n    model.rowEnd = model.id + rowSpan;\n    model.sliceEnd = model.id + (model.rowIncrement * sliceSpan - model.rowEndIncrement);\n    model.end = model.id + (model.sliceIncrement * volumeSpan - model.sliceEndIncrement);\n\n    // For keeping track of the current x,y,z index.\n    model.index[0] = model.extent[0];\n    model.index[1] = model.extent[2];\n    model.index[2] = model.extent[4];\n\n    // For resetting the Y index after each slice.\n    model.startY = model.index[1];\n\n    // Code for when a stencil is provided.\n    if (stencil) {\n      model.hasStencil = true;\n      model.inStencil = false;\n      model.spanIndex = 0;\n      const stencilExtent = stencil.getExtent();\n\n      // The stencil has a YZ array of span lists, we need increments\n      // to get to the next Z position in the YZ array.\n      model.spanSliceIncrement = 0;\n      model.spanSliceEndIncrement = 0;\n      if (stencilExtent[3] >= stencilExtent[2] && stencilExtent[5] >= stencilExtent[4]) {\n        model.spanSliceIncrement = stencilExtent[3] - stencilExtent[2] + 1;\n        const botOffset = model.extent[2] - stencilExtent[2];\n        if (botOffset >= 0) {\n          model.spanSliceEndIncrement += botOffset;\n        }\n        const topOffset = stencilExtent[3] - model.extent[3];\n        if (topOffset >= 0) {\n          model.spanSliceEndIncrement += topOffset;\n        }\n      }\n\n      // Find the offset to the start position within the YZ array.\n      let startOffset = 0;\n      const yOffset = model.extent[2] - stencilExtent[2];\n      if (yOffset < 0) {\n        model.extent[2] = stencilExtent[2];\n        // starting before start of stencil: subtract the increment that\n        // will be added in NextSpan() upon entry into stencil extent\n        startOffset -= 1;\n      } else {\n        // starting partway into the stencil, so add an offset\n        startOffset += yOffset;\n      }\n      if (stencilExtent[3] <= model.extent[3]) {\n        model.extent[3] = stencilExtent[3];\n      }\n      const zOffset = model.extent[4] - stencilExtent[4];\n      if (zOffset < 0) {\n        model.extent[4] = stencilExtent[4];\n        // starting before start of stencil: subtract the increment that\n        // will be added in NextSpan() upon entry into stencil extent\n        if (yOffset >= 0) {\n          startOffset -= 1 + model.spanSliceEndIncrement;\n        }\n      } else {\n        // starting partway into the stencil, so add an offset\n        startOffset += zOffset * model.spanSliceIncrement;\n      }\n      if (stencilExtent[5] <= model.extent[5]) {\n        model.extent[5] = stencilExtent[5];\n      }\n      if (model.extent[2] <= model.extent[3] && model.extent[4] <= model.extent[5]) {\n        model.spanCountPointer = stencil.extentListLengths.subarray(startOffset);\n        model.spanListPointer = stencil.extentLists.subarray(startOffset);\n\n        // Get the current position within the span list for the current row\n        if (yOffset >= 0 && zOffset >= 0) {\n          // If starting within stencil extent, check stencil immediately\n          model.inStencil = true;\n          model.setSpanState(model.extent[0]);\n        }\n      } else {\n        model.spanCountPointer = null;\n        model.spanListPointer = null;\n        model.inStencil = false;\n      }\n    } else {\n      model.hasStencil = false;\n      model.inStencil = true;\n      model.spanSliceEndIncrement = 0;\n      model.spanSliceIncrement = 0;\n      model.spanIndex = 0;\n      model.spanCountPointer = null;\n      model.spanListPointer = null;\n    }\n    if (algorithm) {\n      model.algorithm = algorithm;\n      const maxCount = sliceSpan * volumeSpan;\n      model.target = maxCount / 50 + 1;\n      model.count = model.target * 50 - maxCount / model.target * model.target + 1;\n    } else {\n      model.algorithm = null;\n      model.target = 0;\n      model.count = 0;\n    }\n  };\n  publicAPI.setSpanState = idX => {\n    // Find the span that includes idX\n    let inStencil = false;\n    const spans = model.spanListPointer;\n    const n = model.spanCountPointer[0];\n    let i;\n    for (i = 0; i < n; ++i) {\n      if (spans[i] > idX) {\n        break;\n      }\n      inStencil = !inStencil;\n    }\n\n    // Set the primary span state variables\n    model.spanIndex = i;\n    model.inStencil = inStencil;\n\n    // Clamp the span end to MaxX+1\n    let endIdX = model.extent[1] + 1;\n    if (i < n && spans[i] <= model.extent[1]) {\n      endIdX = spans[i];\n    }\n\n    // Compute the pointers for idX and endIdX\n    const rowStart = model.rowEnd - (model.rowIncrement - model.rowEndIncrement);\n    model.id = rowStart + (idX - model.extent[0]);\n    model.spanEnd = rowStart + (endIdX - model.extent[0]);\n  };\n  publicAPI.nextSpan = () => {\n    if (model.spanEnd === model.rowEnd) {\n      let spanIncr = 1;\n      if (model.spanEnd !== model.sliceEnd) {\n        // Move to the next row\n        model.id = model.rowEnd + model.rowEndIncrement;\n        model.rowEnd += model.rowIncrement;\n        model.spanEnd = model.rowEnd;\n        model.index[1]++;\n      } else if (model.spanEnd !== model.end) {\n        // Move to the next slice\n        model.id = model.sliceEnd + model.sliceEndIncrement;\n        model.sliceEnd += model.sliceIncrement;\n        model.rowEnd = model.id + (model.rowIncrement - model.rowEndIncrement);\n        model.spanEnd = model.rowEnd;\n        model.index[1] = model.startY;\n        model.index[2]++;\n        spanIncr += model.spanSliceEndIncrement;\n      } else {\n        // reached End\n        model.id = model.end;\n        return;\n      }\n\n      // Start of next row\n      model.index[0] = model.extent[0];\n      if (model.hasStencil) {\n        if (model.index[1] >= model.extent[2] && model.index[1] <= model.extent[3] && model.index[2] >= model.extent[4] && model.index[2] <= model.extent[5]) {\n          model.spanCountPointer = model.spanCountPointer.subarray(spanIncr);\n          model.spanListPointer = model.spanListPointer.subarray(spanIncr);\n          publicAPI.setSpanState(model.extent[0]);\n        } else {\n          model.inStencil = false;\n        }\n      }\n      if (model.algorithm) {\n        publicAPI.reportProgress();\n      }\n    } else {\n      // Move to the next span in the current row\n      model.id = model.spanEnd;\n      const spanCount = model.spanCountPointer[0];\n      let endIdX = model.extent[1] + 1;\n      model.index[0] = endIdX;\n      if (model.spanIndex < spanCount) {\n        const tmpIdX = model.spanListPointer[model.spanIndex];\n        if (tmpIdX < endIdX) {\n          model.index[0] = tmpIdX;\n        }\n      }\n\n      // Get the index to the start of the span after the next\n      model.spanIndex++;\n      if (model.spanIndex < spanCount) {\n        const tmpIdX = model.spanListPointer[model.spanIndex];\n        if (tmpIdX < endIdX) {\n          endIdX = tmpIdX;\n        }\n      }\n\n      // Compute the end of the span\n      model.spanEnd = model.rowEnd - (model.rowIncrement - model.rowEndIncrement) + (endIdX - model.extent[0]);\n\n      // Flip the state\n      model.inStencil = !model.inStencil;\n    }\n  };\n  publicAPI.isAtEnd = () => model.id === model.end;\n  publicAPI.isInStencil = () => model.inStencil;\n  publicAPI.spanEndId = () => model.spanEnd;\n  publicAPI.reportProgress = () => {};\n  publicAPI.getArray = (array, i) => array.getData().subarray(i * array.getNumberOfComponents());\n  publicAPI.getScalars = function (image) {\n    let i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    return publicAPI.getArray(image.getPointData().getScalars(), i);\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  spanState: 0,\n  extent: [0, -1, 0, -1, 0, -1],\n  end: 0,\n  spanEnd: 0,\n  rowEnd: 0,\n  sliceEnd: 0,\n  rowIncrement: 0,\n  rowEndIncrement: 0,\n  sliceIncrement: 0,\n  sliceEndIncrement: 0,\n  id: 0,\n  index: [0, 0, 0],\n  startY: 0,\n  hasStencil: false,\n  inStencil: true,\n  spanIndex: 0,\n  spanSliceIncrement: 0,\n  spanSliceEndIncrement: 0,\n  spanCountPointer: null,\n  spanListPointer: null,\n  algorithm: null,\n  target: 0,\n  count: 0\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['id', 'index']);\n\n  // Object specific methods\n  vtkImagePointDataIterator(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkImagePointDataIterator');\n\n// ----------------------------------------------------------------------------\n\nvar vtkImagePointDataIterator$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkImagePointDataIterator$1 as default, extend, newInstance };\n","const SlabMode = {\n  MIN: 0,\n  MAX: 1,\n  MEAN: 2,\n  SUM: 3\n};\nvar Constants = {\n  SlabMode\n};\n\nexport { SlabMode, Constants as default };\n","import { mat4, vec4 } from 'gl-matrix';\nimport { m as macro, v as vtkWarningMacro } from '../../macros2.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport { f as vtkMath } from '../../Common/Core/Math/index.js';\nimport vtkMatrixBuilder from '../../Common/Core/MatrixBuilder.js';\nimport { VtkDataTypes } from '../../Common/Core/DataArray/Constants.js';\nimport vtkBoundingBox from '../../Common/DataModel/BoundingBox.js';\nimport vtkImageData from '../../Common/DataModel/ImageData.js';\nimport vtkImageInterpolator from './ImageInterpolator.js';\nimport vtkImagePointDataIterator from './ImagePointDataIterator.js';\nimport { InterpolationMode, ImageBorderMode } from './AbstractImageInterpolator/Constants.js';\nimport { vtkInterpolationMathClamp, vtkInterpolationMathFloor, vtkInterpolationMathRound } from './AbstractImageInterpolator/InterpolationInfo.js';\nimport Constants from './ImageReslice/Constants.js';\n\nconst {\n  SlabMode\n} = Constants;\nconst {\n  vtkErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// vtkImageReslice methods\n// ----------------------------------------------------------------------------\n\nfunction vtkImageReslice(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkImageReslice');\n  const superClass = {\n    ...publicAPI\n  };\n  const indexMatrix = mat4.identity(new Float64Array(16));\n  let optimizedTransform = null;\n  function getImageResliceSlabTrap(tmpPtr, inComponents, sampleCount, f) {\n    const n = sampleCount - 1;\n    for (let i = 0; i < inComponents; i += 1) {\n      let result = tmpPtr[i] * 0.5;\n      for (let j = 1; j < n; j += 1) {\n        result += tmpPtr[i + j * inComponents];\n      }\n      result += tmpPtr[i + n * inComponents] * 0.5;\n      tmpPtr[i] = result * f;\n    }\n  }\n  function getImageResliceSlabSum(tmpPtr, inComponents, sampleCount, f) {\n    for (let i = 0; i < inComponents; i += 1) {\n      let result = tmpPtr[i];\n      for (let j = 1; j < sampleCount; j += 1) {\n        result += tmpPtr[i + j * inComponents];\n      }\n      tmpPtr[i] = result * f;\n    }\n  }\n  function getImageResliceCompositeMinValue(tmpPtr, inComponents, sampleCount) {\n    for (let i = 0; i < inComponents; i += 1) {\n      let result = tmpPtr[i];\n      for (let j = 1; j < sampleCount; j += 1) {\n        result = Math.min(result, tmpPtr[i + j * inComponents]);\n      }\n      tmpPtr[i] = result;\n    }\n  }\n  function getImageResliceCompositeMaxValue(tmpPtr, inComponents, sampleCount) {\n    for (let i = 0; i < inComponents; i += 1) {\n      let result = tmpPtr[i];\n      for (let j = 1; j < sampleCount; j += 1) {\n        result = Math.max(result, tmpPtr[i + j * inComponents]);\n      }\n      tmpPtr[i] = result;\n    }\n  }\n  function getImageResliceCompositeMeanValue(tmpPtr, inComponents, sampleCount) {\n    const f = 1.0 / sampleCount;\n    getImageResliceSlabSum(tmpPtr, inComponents, sampleCount, f);\n  }\n  function getImageResliceCompositeMeanTrap(tmpPtr, inComponents, sampleCount) {\n    const f = 1.0 / (sampleCount - 1);\n    getImageResliceSlabTrap(tmpPtr, inComponents, sampleCount, f);\n  }\n  function getImageResliceCompositeSumValue(tmpPtr, inComponents, sampleCount) {\n    const f = 1.0;\n    getImageResliceSlabSum(tmpPtr, inComponents, sampleCount, f);\n  }\n  function getImageResliceCompositeSumTrap(tmpPtr, inComponents, sampleCount) {\n    const f = 1.0;\n    getImageResliceSlabTrap(tmpPtr, inComponents, sampleCount, f);\n  }\n  publicAPI.getMTime = () => {\n    let mTime = superClass.getMTime();\n    if (model.resliceTransform) {\n      mTime = Math.max(mTime, model.resliceTransform.getMTime());\n    }\n    return mTime;\n  };\n  publicAPI.setResliceAxes = resliceAxes => {\n    if (!model.resliceAxes) {\n      model.resliceAxes = mat4.identity(new Float64Array(16));\n    }\n    if (!mat4.exactEquals(model.resliceAxes, resliceAxes)) {\n      mat4.copy(model.resliceAxes, resliceAxes);\n      publicAPI.modified();\n      return true;\n    }\n    return false;\n  };\n  publicAPI.requestData = (inData, outData) => {\n    // implement requestData\n    const input = inData[0];\n    if (!input) {\n      vtkErrorMacro('Invalid or missing input');\n      return;\n    }\n\n    // console.time('reslice');\n\n    // Retrieve output and volume data\n    const origin = input.getOrigin();\n    const inSpacing = input.getSpacing();\n    const dims = input.getDimensions();\n    const inScalars = input.getPointData().getScalars();\n    const inWholeExt = [0, dims[0] - 1, 0, dims[1] - 1, 0, dims[2] - 1];\n    const outOrigin = [0, 0, 0];\n    const outSpacing = [1, 1, 1];\n    const outWholeExt = [0, 0, 0, 0, 0, 0];\n    const outDims = [0, 0, 0];\n    const matrix = mat4.identity(new Float64Array(16));\n    if (model.resliceAxes) {\n      mat4.multiply(matrix, matrix, model.resliceAxes);\n    }\n    const imatrix = new Float64Array(16);\n    mat4.invert(imatrix, matrix);\n    const inCenter = [origin[0] + 0.5 * (inWholeExt[0] + inWholeExt[1]) * inSpacing[0], origin[1] + 0.5 * (inWholeExt[2] + inWholeExt[3]) * inSpacing[1], origin[2] + 0.5 * (inWholeExt[4] + inWholeExt[5]) * inSpacing[2]];\n    let maxBounds = null;\n    if (model.autoCropOutput) {\n      maxBounds = publicAPI.getAutoCroppedOutputBounds(input);\n    }\n    for (let i = 0; i < 3; i++) {\n      let s = 0; // default output spacing\n      let d = 0; // default linear dimension\n      let e = 0; // default extent start\n      let c = 0; // transformed center-of-volume\n\n      if (model.transformInputSampling) {\n        let r = 0.0;\n        for (let j = 0; j < 3; j++) {\n          c += imatrix[4 * j + i] * (inCenter[j] - matrix[4 * 3 + j]);\n          const tmp = matrix[4 * i + j] * matrix[4 * i + j];\n          s += tmp * Math.abs(inSpacing[j]);\n          d += tmp * (inWholeExt[2 * j + 1] - inWholeExt[2 * j]) * Math.abs(inSpacing[j]);\n          e += tmp * inWholeExt[2 * j];\n          r += tmp;\n        }\n        s /= r;\n        d /= r * Math.sqrt(r);\n        e /= r;\n      } else {\n        c = inCenter[i];\n        s = inSpacing[i];\n        d = (inWholeExt[2 * i + 1] - inWholeExt[2 * i]) * s;\n        e = inWholeExt[2 * i];\n      }\n      if (model.outputSpacing == null) {\n        outSpacing[i] = s;\n      } else {\n        outSpacing[i] = model.outputSpacing[i];\n      }\n      if (i >= model.outputDimensionality) {\n        outWholeExt[2 * i] = 0;\n        outWholeExt[2 * i + 1] = 0;\n      } else if (model.outputExtent == null) {\n        if (model.autoCropOutput) {\n          d = maxBounds[2 * i + 1] - maxBounds[2 * i];\n        }\n        outWholeExt[2 * i] = Math.round(e);\n        outWholeExt[2 * i + 1] = Math.round(outWholeExt[2 * i] + Math.abs(d / outSpacing[i]));\n      } else {\n        outWholeExt[2 * i] = model.outputExtent[2 * i];\n        outWholeExt[2 * i + 1] = model.outputExtent[2 * i + 1];\n      }\n      if (i >= model.outputDimensionality) {\n        outOrigin[i] = 0;\n      } else if (model.outputOrigin == null) {\n        if (model.autoCropOutput) {\n          // set origin so edge of extent is edge of bounds\n          outOrigin[i] = maxBounds[2 * i] - outWholeExt[2 * i] * outSpacing[i];\n        } else {\n          // center new bounds over center of input bounds\n          outOrigin[i] = c - 0.5 * (outWholeExt[2 * i] + outWholeExt[2 * i + 1]) * outSpacing[i];\n        }\n      } else {\n        outOrigin[i] = model.outputOrigin[i];\n      }\n      outDims[i] = outWholeExt[2 * i + 1] - outWholeExt[2 * i] + 1;\n    }\n    let dataType = inScalars.getDataType();\n    if (model.outputScalarType) {\n      dataType = model.outputScalarType;\n    }\n    const numComponents = input.getPointData().getScalars().getNumberOfComponents(); // or s.numberOfComponents;\n\n    const outScalarsData = macro.newTypedArray(dataType, outDims[0] * outDims[1] * outDims[2] * numComponents);\n    const outScalars = vtkDataArray.newInstance({\n      name: 'Scalars',\n      values: outScalarsData,\n      numberOfComponents: numComponents\n    });\n\n    // Update output\n    const output = vtkImageData.newInstance();\n    output.setDimensions(outDims);\n    output.setOrigin(outOrigin);\n    output.setSpacing(outSpacing);\n    if (model.outputDirection) {\n      output.setDirection(model.outputDirection);\n    }\n    output.getPointData().setScalars(outScalars);\n    publicAPI.getIndexMatrix(input, output);\n    let interpolationMode = model.interpolationMode;\n    model.usePermuteExecute = false;\n    if (model.optimization) {\n      if (optimizedTransform == null && model.slabSliceSpacingFraction === 1.0 && model.interpolator.isSeparable() && publicAPI.isPermutationMatrix(indexMatrix)) {\n        model.usePermuteExecute = true;\n        if (publicAPI.canUseNearestNeighbor(indexMatrix, outWholeExt)) {\n          interpolationMode = InterpolationMode.NEAREST;\n        }\n      }\n    }\n    model.interpolator.setInterpolationMode(interpolationMode);\n    let borderMode = ImageBorderMode.CLAMP;\n    borderMode = model.wrap ? ImageBorderMode.REPEAT : borderMode;\n    borderMode = model.mirror ? ImageBorderMode.MIRROR : borderMode;\n    model.interpolator.setBorderMode(borderMode);\n    const mintol = 7.62939453125e-6;\n    const maxtol = 2.0 * 2147483647;\n    let tol = 0.5 * model.border;\n    tol = borderMode === ImageBorderMode.CLAMP ? tol : maxtol;\n    tol = tol > mintol ? tol : mintol;\n    model.interpolator.setTolerance(tol);\n    model.interpolator.initialize(input);\n    publicAPI.vtkImageResliceExecute(input, output);\n    model.interpolator.releaseData();\n    outData[0] = output;\n\n    // console.timeEnd('reslice');\n  };\n\n  publicAPI.vtkImageResliceExecute = (input, output) => {\n    // const outDims = output.getDimensions();\n    const inScalars = input.getPointData().getScalars();\n    const outScalars = output.getPointData().getScalars();\n    let outPtr = outScalars.getData();\n    const outExt = output.getExtent();\n    const newmat = indexMatrix;\n\n    // multiple samples for thick slabs\n    const nsamples = Math.max(model.slabNumberOfSlices, 1);\n\n    // spacing between slab samples (as a fraction of slice spacing).\n    const slabSampleSpacing = model.slabSliceSpacingFraction;\n\n    // check for perspective transformation\n    const perspective = publicAPI.isPerspectiveMatrix(newmat);\n\n    // extra scalar info for nearest-neighbor optimization\n    let inPtr = inScalars.getData();\n    const inputScalarSize = 1; // inScalars.getElementComponentSize(); // inScalars.getDataTypeSize();\n    const inputScalarType = inScalars.getDataType();\n    const inComponents = inScalars.getNumberOfComponents(); // interpolator.GetNumberOfComponents();\n    const componentOffset = model.interpolator.getComponentOffset();\n    const borderMode = model.interpolator.getBorderMode();\n    const inDims = input.getDimensions();\n    const inExt = [0, inDims[0] - 1, 0, inDims[1] - 1, 0, inDims[2] - 1]; // interpolator->GetExtent();\n    const inInc = [0, 0, 0];\n    inInc[0] = inScalars.getNumberOfComponents();\n    inInc[1] = inInc[0] * inDims[0];\n    inInc[2] = inInc[1] * inDims[1];\n    const fullSize = inDims[0] * inDims[1] * inDims[2];\n    if (componentOffset > 0 && componentOffset + inComponents < inInc[0]) {\n      inPtr = inPtr.subarray(inputScalarSize * componentOffset);\n    }\n    let interpolationMode = InterpolationMode.NEAREST;\n    if (model.interpolator.isA('vtkImageInterpolator')) {\n      interpolationMode = model.interpolator.getInterpolationMode();\n    }\n    const convertScalars = null;\n    const rescaleScalars = model.scalarShift !== 0.0 || model.scalarScale !== 1.0;\n\n    // is nearest neighbor optimization possible?\n    const optimizeNearest = interpolationMode === InterpolationMode.NEAREST && borderMode === ImageBorderMode.CLAMP && !(optimizedTransform != null || perspective || convertScalars != null || rescaleScalars) && inputScalarType === outScalars.getDataType() && fullSize === inScalars.getNumberOfTuples() && model.border === true && nsamples <= 1;\n\n    // get pixel information\n    const scalarType = outScalars.getDataType();\n    const scalarSize = 1; // outScalars.getElementComponentSize() // outScalars.scalarSize;\n    const outComponents = outScalars.getNumberOfComponents();\n\n    // break matrix into a set of axes plus an origin\n    // (this allows us to calculate the transform Incrementally)\n    const xAxis = [0, 0, 0, 0];\n    const yAxis = [0, 0, 0, 0];\n    const zAxis = [0, 0, 0, 0];\n    const origin = [0, 0, 0, 0];\n    for (let i = 0; i < 4; ++i) {\n      xAxis[i] = newmat[4 * 0 + i];\n      yAxis[i] = newmat[4 * 1 + i];\n      zAxis[i] = newmat[4 * 2 + i];\n      origin[i] = newmat[4 * 3 + i];\n    }\n\n    // allocate an output row of type double\n    let floatPtr = null;\n    if (!optimizeNearest) {\n      floatPtr = new Float64Array(inComponents * (outExt[1] - outExt[0] + nsamples));\n    }\n    const background = macro.newTypedArray(inputScalarType, model.backgroundColor);\n\n    // set color for area outside of input volume extent\n    // void *background;\n    // vtkAllocBackgroundPixel(&background,\n    //    self->GetBackgroundColor(), scalarType, scalarSize, outComponents);\n\n    // get various helper functions\n    const forceClamping = interpolationMode > InterpolationMode.LINEAR || nsamples > 1 && model.slabMode === SlabMode.SUM;\n    const convertpixels = publicAPI.getConversionFunc(inputScalarType, scalarType, model.scalarShift, model.scalarScale, forceClamping);\n    const setpixels = publicAPI.getSetPixelsFunc(scalarType, scalarSize, outComponents, outPtr);\n    const composite = publicAPI.getCompositeFunc(model.slabMode, model.slabTrapezoidIntegration);\n\n    // create some variables for when we march through the data\n    let idY = outExt[2] - 1;\n    let idZ = outExt[4] - 1;\n    const inPoint0 = [0.0, 0.0, 0.0, 0.0];\n    const inPoint1 = [0.0, 0.0, 0.0, 0.0];\n\n    // create an iterator to march through the data\n    const iter = vtkImagePointDataIterator.newInstance();\n    iter.initialize(output, outExt, model.stencil, null);\n    const outPtr0 = iter.getScalars(output, 0);\n    let outPtrIndex = 0;\n    const outTmp = macro.newTypedArray(scalarType, vtkBoundingBox.getDiagonalLength(outExt) * outComponents * 2);\n    const interpolatedPtr = new Float64Array(inComponents * nsamples);\n    const interpolatedPoint = new Float64Array(inComponents);\n    for (; !iter.isAtEnd(); iter.nextSpan()) {\n      const span = iter.spanEndId() - iter.getId();\n      outPtrIndex = iter.getId() * scalarSize * outComponents;\n      if (!iter.isInStencil()) {\n        // clear any regions that are outside the stencil\n        const n = setpixels(outTmp, background, outComponents, span);\n        for (let i = 0; i < n; ++i) {\n          outPtr0[outPtrIndex++] = outTmp[i];\n        }\n      } else {\n        // get output index, and compute position in input image\n        const outIndex = iter.getIndex();\n\n        // if Z index increased, then advance position along Z axis\n        if (outIndex[2] > idZ) {\n          idZ = outIndex[2];\n          inPoint0[0] = origin[0] + idZ * zAxis[0];\n          inPoint0[1] = origin[1] + idZ * zAxis[1];\n          inPoint0[2] = origin[2] + idZ * zAxis[2];\n          inPoint0[3] = origin[3] + idZ * zAxis[3];\n          idY = outExt[2] - 1;\n        }\n\n        // if Y index increased, then advance position along Y axis\n        if (outIndex[1] > idY) {\n          idY = outIndex[1];\n          inPoint1[0] = inPoint0[0] + idY * yAxis[0];\n          inPoint1[1] = inPoint0[1] + idY * yAxis[1];\n          inPoint1[2] = inPoint0[2] + idY * yAxis[2];\n          inPoint1[3] = inPoint0[3] + idY * yAxis[3];\n        }\n\n        // march through one row of the output image\n        const idXmin = outIndex[0];\n        const idXmax = idXmin + span - 1;\n        if (!optimizeNearest) {\n          let wasInBounds = 1;\n          let isInBounds = 1;\n          let startIdX = idXmin;\n          let idX = idXmin;\n          const tmpPtr = floatPtr;\n          let pixelIndex = 0;\n          while (startIdX <= idXmax) {\n            for (; idX <= idXmax && isInBounds === wasInBounds; idX++) {\n              const inPoint2 = [inPoint1[0] + idX * xAxis[0], inPoint1[1] + idX * xAxis[1], inPoint1[2] + idX * xAxis[2], inPoint1[3] + idX * xAxis[3]];\n              const inPoint3 = [0, 0, 0, 0];\n              let inPoint = inPoint2;\n              isInBounds = false;\n              let interpolatedPtrIndex = 0;\n              for (let sample = 0; sample < nsamples; ++sample) {\n                if (nsamples > 1) {\n                  let s = sample - 0.5 * (nsamples - 1);\n                  s *= slabSampleSpacing;\n                  inPoint3[0] = inPoint2[0] + s * zAxis[0];\n                  inPoint3[1] = inPoint2[1] + s * zAxis[1];\n                  inPoint3[2] = inPoint2[2] + s * zAxis[2];\n                  inPoint3[3] = inPoint2[3] + s * zAxis[3];\n                  inPoint = inPoint3;\n                }\n                if (perspective) {\n                  // only do perspective if necessary\n                  const f = 1 / inPoint[3];\n                  inPoint[0] *= f;\n                  inPoint[1] *= f;\n                  inPoint[2] *= f;\n                }\n                if (optimizedTransform !== null) {\n                  // get the input origin and spacing for conversion purposes\n                  const inOrigin = model.interpolator.getOrigin();\n                  const inSpacing = model.interpolator.getSpacing();\n                  const inInvSpacing = [1.0 / inSpacing[0], 1.0 / inSpacing[1], 1.0 / inSpacing[2]];\n\n                  // apply the AbstractTransform if there is one\n                  // TBD: handle inDirection\n                  publicAPI.applyTransform(optimizedTransform, inPoint, inOrigin, inInvSpacing);\n                }\n                if (model.interpolator.checkBoundsIJK(inPoint)) {\n                  // do the interpolation\n                  isInBounds = 1;\n                  model.interpolator.interpolateIJK(inPoint, interpolatedPoint);\n                  for (let i = 0; i < inComponents; ++i) {\n                    interpolatedPtr[interpolatedPtrIndex++] = interpolatedPoint[i];\n                  }\n                }\n              }\n              if (interpolatedPtrIndex > inComponents) {\n                composite(interpolatedPtr, inComponents, interpolatedPtrIndex / inComponents);\n              }\n              for (let i = 0; i < inComponents; ++i) {\n                tmpPtr[pixelIndex++] = interpolatedPtr[i];\n              }\n\n              // set \"was in\" to \"is in\" if first pixel\n              wasInBounds = idX > idXmin ? wasInBounds : isInBounds;\n            }\n\n            // write a segment to the output\n            const endIdX = idX - 1 - (isInBounds !== wasInBounds);\n            const numpixels = endIdX - startIdX + 1;\n            let n = 0;\n            if (wasInBounds) {\n              if (rescaleScalars) {\n                publicAPI.rescaleScalars(floatPtr, inComponents, idXmax - idXmin + 1, model.scalarShift, model.scalarScale);\n              }\n              {\n                n = convertpixels(outTmp, floatPtr.subarray(startIdX * inComponents), outComponents, numpixels);\n              }\n            } else {\n              n = setpixels(outTmp, background, outComponents, numpixels);\n            }\n            for (let i = 0; i < n; ++i) {\n              outPtr0[outPtrIndex++] = outTmp[i];\n            }\n            startIdX += numpixels;\n            wasInBounds = isInBounds;\n          }\n        } else {\n          // optimize for nearest-neighbor interpolation\n          const inPtrTmp0 = inPtr;\n          const outPtrTmp = outPtr;\n          const inIncX = inInc[0] * inputScalarSize;\n          const inIncY = inInc[1] * inputScalarSize;\n          const inIncZ = inInc[2] * inputScalarSize;\n          const inExtX = inExt[1] - inExt[0] + 1;\n          const inExtY = inExt[3] - inExt[2] + 1;\n          const inExtZ = inExt[5] - inExt[4] + 1;\n          let startIdX = idXmin;\n          let endIdX = idXmin - 1;\n          let isInBounds = false;\n          const bytesPerPixel = inputScalarSize * inComponents;\n          for (let iidX = idXmin; iidX <= idXmax; iidX++) {\n            const inPoint = [inPoint1[0] + iidX * xAxis[0], inPoint1[1] + iidX * xAxis[1], inPoint1[2] + iidX * xAxis[2]];\n            const inIdX = vtkInterpolationMathRound(inPoint[0]) - inExt[0];\n            const inIdY = vtkInterpolationMathRound(inPoint[1]) - inExt[2];\n            const inIdZ = vtkInterpolationMathRound(inPoint[2]) - inExt[4];\n            if (inIdX >= 0 && inIdX < inExtX && inIdY >= 0 && inIdY < inExtY && inIdZ >= 0 && inIdZ < inExtZ) {\n              if (!isInBounds) {\n                // clear leading out-of-bounds pixels\n                startIdX = iidX;\n                isInBounds = true;\n                const n = setpixels(outTmp, background, outComponents, startIdX - idXmin);\n                for (let i = 0; i < n; ++i) {\n                  outPtr0[outPtrIndex++] = outTmp[i];\n                }\n              }\n              // set the final index that was within input bounds\n              endIdX = iidX;\n\n              // perform nearest-neighbor interpolation via pixel copy\n              let offset = inIdX * inIncX + inIdY * inIncY + inIdZ * inIncZ;\n\n              // when memcpy is used with a constant size, the compiler will\n              // optimize away the function call and use the minimum number\n              // of instructions necessary to perform the copy\n              switch (bytesPerPixel) {\n                case 1:\n                  outPtr0[outPtrIndex++] = inPtrTmp0[offset];\n                  break;\n                case 2:\n                case 3:\n                case 4:\n                case 8:\n                case 12:\n                case 16:\n                  for (let i = 0; i < bytesPerPixel; ++i) {\n                    outPtr0[outPtrIndex++] = inPtrTmp0[offset + i];\n                  }\n                  break;\n                default:\n                  {\n                    // TODO: check bytes\n                    let oc = 0;\n                    do {\n                      outPtr0[outPtrIndex++] = inPtrTmp0[offset++];\n                    } while (++oc !== bytesPerPixel);\n                    break;\n                  }\n              }\n            } else if (isInBounds) {\n              // leaving input bounds\n              break;\n            }\n          }\n\n          // clear trailing out-of-bounds pixels\n          outPtr = outPtrTmp;\n          const n = setpixels(outTmp, background, outComponents, idXmax - endIdX);\n          for (let i = 0; i < n; ++i) {\n            outPtr0[outPtrIndex++] = outTmp[i];\n          }\n        }\n      }\n    }\n  };\n  /**\n   * The transform matrix supplied by the user converts output coordinates\n   * to input coordinates.\n   * To speed up the pixel lookup, the following function provides a\n   * matrix which converts output pixel indices to input pixel indices.\n   * This will also concatenate the ResliceAxes and the ResliceTransform\n   * if possible (if the ResliceTransform is a 4x4 matrix transform).\n   * If it does, this->OptimizedTransform will be set to nullptr, otherwise\n   * this->OptimizedTransform will be equal to this->ResliceTransform.\n   * @param {vtkImageData} input\n   * @param {vtkImageData} output\n   * @returns\n   */\n  publicAPI.getIndexMatrix = (input, output) => {\n    const transform = mat4.identity(new Float64Array(16));\n    optimizedTransform = null;\n    if (model.resliceAxes) {\n      mat4.copy(transform, model.resliceAxes);\n    }\n    if (model.resliceTransform) {\n      if (model.resliceTransform.isA('vtkHomogeneousTransform')) {\n        mat4.multiply(transform, model.resliceTransform.getMatrix(), transform);\n      } else {\n        // TODO\n        vtkWarningMacro('Non homogeneous transform have not yet been ported');\n      }\n    }\n\n    // the outMatrix takes OutputData indices to OutputData coordinates,\n    const outMatrix = output.getIndexToWorld();\n    mat4.multiply(transform, transform, outMatrix);\n\n    // the inMatrix takes InputData coordinates to InputData indices\n    // the optimizedTransform requires data coords, not index coords, as its input\n    if (optimizedTransform == null) {\n      const inMatrix = input.getWorldToIndex();\n      mat4.multiply(transform, inMatrix, transform);\n    }\n    mat4.copy(indexMatrix, transform);\n    return indexMatrix;\n  };\n  publicAPI.getAutoCroppedOutputBounds = input => {\n    const inOrigin = input.getOrigin();\n    const inSpacing = input.getSpacing();\n    const inDirection = input.getDirection();\n    const dims = input.getDimensions();\n    const inWholeExt = [0, dims[0] - 1, 0, dims[1] - 1, 0, dims[2] - 1];\n    const matrix = new Float64Array(16);\n    if (model.resliceAxes) {\n      mat4.invert(matrix, model.resliceAxes);\n    } else {\n      mat4.identity(matrix);\n    }\n    let transform = null;\n    if (model.resliceTransform) {\n      transform = model.resliceTransform.getInverse();\n    }\n    let imageTransform = null;\n    if (!vtkMath.isIdentity3x3(inDirection)) {\n      imageTransform = vtkMatrixBuilder.buildFromRadian().translate(inOrigin[0], inOrigin[1], inOrigin[2]).multiply3x3(inDirection).translate(-inOrigin[0], -inOrigin[1], -inOrigin[2]).invert().getMatrix();\n    }\n    const bounds = [Number.MAX_VALUE, -Number.MAX_VALUE, Number.MAX_VALUE, -Number.MAX_VALUE, Number.MAX_VALUE, -Number.MAX_VALUE];\n    const point = [0, 0, 0, 0];\n    for (let i = 0; i < 8; ++i) {\n      point[0] = inOrigin[0] + inWholeExt[i % 2] * inSpacing[0];\n      point[1] = inOrigin[1] + inWholeExt[2 + Math.floor(i / 2) % 2] * inSpacing[1];\n      point[2] = inOrigin[2] + inWholeExt[4 + Math.floor(i / 4) % 2] * inSpacing[2];\n      point[3] = 1.0;\n      if (imageTransform) {\n        vec4.transformMat4(point, point, imageTransform);\n      }\n      if (model.resliceTransform) {\n        transform.transformPoint(point, point);\n      }\n      vec4.transformMat4(point, point, matrix);\n      const f = 1.0 / point[3];\n      point[0] *= f;\n      point[1] *= f;\n      point[2] *= f;\n      for (let j = 0; j < 3; ++j) {\n        if (point[j] > bounds[2 * j + 1]) {\n          bounds[2 * j + 1] = point[j];\n        }\n        if (point[j] < bounds[2 * j]) {\n          bounds[2 * j] = point[j];\n        }\n      }\n    }\n    return bounds;\n  };\n  publicAPI.getDataTypeMinMax = dataType => {\n    switch (dataType) {\n      case 'Int8Array':\n        return {\n          min: -128,\n          max: 127\n        };\n      case 'Int16Array':\n        return {\n          min: -32768,\n          max: 32767\n        };\n      case 'Uint16Array':\n        return {\n          min: 0,\n          max: 65535\n        };\n      case 'Int32Array':\n        return {\n          min: -2147483648,\n          max: 2147483647\n        };\n      case 'Uint32Array':\n        return {\n          min: 0,\n          max: 4294967295\n        };\n      case 'Float32Array':\n        return {\n          min: -1.2e38,\n          max: 1.2e38\n        };\n      case 'Float64Array':\n        return {\n          min: -1.2e38,\n          max: 1.2e38\n        };\n      case 'Uint8Array':\n      case 'Uint8ClampedArray':\n      default:\n        return {\n          min: 0,\n          max: 255\n        };\n    }\n  };\n  publicAPI.clamp = (outPtr, inPtr, numscalars, n, min, max) => {\n    const count = n * numscalars;\n    for (let i = 0; i < count; ++i) {\n      outPtr[i] = vtkInterpolationMathClamp(inPtr[i], min, max);\n    }\n    return count;\n  };\n  publicAPI.convert = (outPtr, inPtr, numscalars, n) => {\n    const count = n * numscalars;\n    for (let i = 0; i < count; ++i) {\n      outPtr[i] = Math.round(inPtr[i]);\n    }\n    return count;\n  };\n  publicAPI.getConversionFunc = (inputType, dataType, scalarShift, scalarScale, forceClamping) => {\n    let useClamping = forceClamping;\n    if (dataType !== VtkDataTypes.FLOAT && dataType !== VtkDataTypes.DOUBLE && !forceClamping) {\n      const inMinMax = publicAPI.getDataTypeMinMax(inputType);\n      let checkMin = (inMinMax.min + scalarShift) * scalarScale;\n      let checkMax = (inMinMax.max + scalarShift) * scalarScale;\n      const outMinMax = publicAPI.getDataTypeMinMax(dataType);\n      const outputMin = outMinMax.min;\n      const outputMax = outMinMax.max;\n      if (checkMin > checkMax) {\n        const tmp = checkMax;\n        checkMax = checkMin;\n        checkMin = tmp;\n      }\n      useClamping = checkMin < outputMin || checkMax > outputMax;\n    }\n    if (useClamping && dataType !== VtkDataTypes.FLOAT && dataType !== VtkDataTypes.DOUBLE) {\n      const minMax = publicAPI.getDataTypeMinMax(dataType);\n      const clamp = (outPtr, inPtr, numscalars, n) => publicAPI.clamp(outPtr, inPtr, numscalars, n, minMax.min, minMax.max);\n      return clamp;\n    }\n    return publicAPI.convert;\n  };\n  publicAPI.set = (outPtr, inPtr, numscalars, n) => {\n    const count = numscalars * n;\n    for (let i = 0; i < n; ++i) {\n      outPtr[i] = inPtr[i];\n    }\n    return count;\n  };\n  publicAPI.set1 = (outPtr, inPtr, numscalars, n) => {\n    outPtr.fill(inPtr[0], 0, n);\n    return n;\n  };\n  publicAPI.getSetPixelsFunc = (dataType, dataSize, numscalars, dataPtr) => numscalars === 1 ? publicAPI.set1 : publicAPI.set;\n  publicAPI.getCompositeFunc = (slabMode, slabTrapezoidIntegration) => {\n    let composite = null;\n    // eslint-disable-next-line default-case\n    switch (slabMode) {\n      case SlabMode.MIN:\n        composite = getImageResliceCompositeMinValue;\n        break;\n      case SlabMode.MAX:\n        composite = getImageResliceCompositeMaxValue;\n        break;\n      case SlabMode.MEAN:\n        if (slabTrapezoidIntegration) {\n          composite = getImageResliceCompositeMeanTrap;\n        } else {\n          composite = getImageResliceCompositeMeanValue;\n        }\n        break;\n      case SlabMode.SUM:\n        if (slabTrapezoidIntegration) {\n          composite = getImageResliceCompositeSumTrap;\n        } else {\n          composite = getImageResliceCompositeSumValue;\n        }\n        break;\n    }\n    return composite;\n  };\n  publicAPI.applyTransform = (newTrans, inPoint, inOrigin, inInvSpacing) => {\n    inPoint[3] = 1;\n    vec4.transformMat4(inPoint, inPoint, newTrans);\n    inPoint[0] -= inOrigin[0];\n    inPoint[1] -= inOrigin[1];\n    inPoint[2] -= inOrigin[2];\n    inPoint[0] *= inInvSpacing[0];\n    inPoint[1] *= inInvSpacing[1];\n    inPoint[2] *= inInvSpacing[2];\n  };\n  publicAPI.rescaleScalars = (floatData, components, n, scalarShift, scalarScale) => {\n    const m = n * components;\n    for (let i = 0; i < m; ++i) {\n      floatData[i] = (floatData[i] + scalarShift) * scalarScale;\n    }\n  };\n  publicAPI.isPermutationMatrix = matrix => {\n    for (let i = 0; i < 3; i++) {\n      if (matrix[4 * i + 3] !== 0) {\n        return false;\n      }\n    }\n    if (matrix[4 * 3 + 3] !== 1) {\n      return false;\n    }\n    for (let j = 0; j < 3; j++) {\n      let k = 0;\n      for (let i = 0; i < 3; i++) {\n        if (matrix[4 * j + i] !== 0) {\n          k++;\n        }\n      }\n      if (k !== 1) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  // TODO: to move in vtkMath and add tolerance\n  publicAPI.isIdentityMatrix = matrix => {\n    for (let i = 0; i < 4; ++i) {\n      for (let j = 0; j < 4; ++j) {\n        if ((i === j ? 1.0 : 0.0) !== matrix[4 * j + i]) {\n          return false;\n        }\n      }\n    }\n    return true;\n  };\n  publicAPI.isPerspectiveMatrix = matrix => matrix[4 * 0 + 3] !== 0 || matrix[4 * 1 + 3] !== 0 || matrix[4 * 2 + 3] !== 0 || matrix[4 * 3 + 3] !== 1;\n  publicAPI.canUseNearestNeighbor = (matrix, outExt) => {\n    // loop through dimensions\n    for (let i = 0; i < 3; i++) {\n      let j;\n      for (j = 0; j < 3; j++) {\n        if (matrix[4 * j + i] !== 0) {\n          break;\n        }\n      }\n      if (j >= 3) {\n        return false;\n      }\n      let x = matrix[4 * j + i];\n      let y = matrix[4 * 3 + i];\n      if (outExt[2 * j] === outExt[2 * j + 1]) {\n        y += x * outExt[2 * i];\n        x = 0;\n      }\n      const fx = vtkInterpolationMathFloor(x).error;\n      const fy = vtkInterpolationMathFloor(y).error;\n      if (fx !== 0 || fy !== 0) {\n        return false;\n      }\n    }\n    return true;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  transformInputSampling: true,\n  autoCropOutput: false,\n  outputDimensionality: 3,\n  outputSpacing: null,\n  // automatically computed if null\n  outputOrigin: null,\n  // automatically computed if null\n  outputDirection: null,\n  // identity if null\n  outputExtent: null,\n  // automatically computed if null\n  outputScalarType: null,\n  wrap: false,\n  // don't wrap\n  mirror: false,\n  // don't mirror\n  border: true,\n  // apply a border\n  interpolationMode: InterpolationMode.NEAREST,\n  // only NEAREST supported so far\n  slabMode: SlabMode.MIN,\n  slabTrapezoidIntegration: false,\n  slabNumberOfSlices: 1,\n  slabSliceSpacingFraction: 1,\n  optimization: false,\n  // not supported yet\n  scalarShift: 0,\n  // for rescaling the data\n  scalarScale: 1,\n  backgroundColor: [0, 0, 0, 0],\n  resliceAxes: null,\n  // resliceTransform: null,\n  interpolator: vtkImageInterpolator.newInstance(),\n  usePermuteExecute: false // no supported yet\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Make this a VTK object\n  macro.obj(publicAPI, model);\n\n  // Also make it an algorithm with one input and one output\n  macro.algo(publicAPI, model, 1, 1);\n  macro.setGet(publicAPI, model, ['outputDimensionality', 'outputScalarType', 'scalarShift', 'scalarScale', 'transformInputSampling', 'autoCropOutput', 'wrap', 'mirror', 'border', 'interpolationMode', 'resliceTransform', 'slabMode', 'slabTrapezoidIntegration', 'slabNumberOfSlices', 'slabSliceSpacingFraction']);\n  macro.setGetArray(publicAPI, model, ['outputOrigin', 'outputSpacing'], 3);\n  macro.setGetArray(publicAPI, model, ['outputExtent'], 6);\n  macro.setGetArray(publicAPI, model, ['outputDirection'], 9);\n  macro.setGetArray(publicAPI, model, ['backgroundColor'], 4);\n  macro.get(publicAPI, model, ['resliceAxes']);\n\n  // Object specific methods\n  vtkImageReslice(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkImageReslice');\n\n// ----------------------------------------------------------------------------\n\nvar vtkImageReslice$1 = {\n  newInstance,\n  extend,\n  ...Constants\n};\n\nexport { vtkImageReslice$1 as default, extend, newInstance };\n","// @flow\n\n// Animation frame based implementation of setTimeout.\n// Inspired by Joe Lambert, https://gist.github.com/joelambert/1002116#file-requesttimeout-js\n\nconst hasNativePerformanceNow =\n  typeof performance === 'object' && typeof performance.now === 'function';\n\nconst now = hasNativePerformanceNow\n  ? () => performance.now()\n  : () => Date.now();\n\nexport type TimeoutID = {|\n  id: AnimationFrameID,\n|};\n\nexport function cancelTimeout(timeoutID: TimeoutID) {\n  cancelAnimationFrame(timeoutID.id);\n}\n\nexport function requestTimeout(callback: Function, delay: number): TimeoutID {\n  const start = now();\n\n  function tick() {\n    if (now() - start >= delay) {\n      callback.call(null);\n    } else {\n      timeoutID.id = requestAnimationFrame(tick);\n    }\n  }\n\n  const timeoutID: TimeoutID = {\n    id: requestAnimationFrame(tick),\n  };\n\n  return timeoutID;\n}\n","// @flow\n\nlet size: number = -1;\n\n// This utility copied from \"dom-helpers\" package.\nexport function getScrollbarSize(recalculate?: boolean = false): number {\n  if (size === -1 || recalculate) {\n    const div = document.createElement('div');\n    const style = div.style;\n    style.width = '50px';\n    style.height = '50px';\n    style.overflow = 'scroll';\n\n    ((document.body: any): HTMLBodyElement).appendChild(div);\n\n    size = div.offsetWidth - div.clientWidth;\n\n    ((document.body: any): HTMLBodyElement).removeChild(div);\n  }\n\n  return size;\n}\n\nexport type RTLOffsetType =\n  | 'negative'\n  | 'positive-descending'\n  | 'positive-ascending';\n\nlet cachedRTLResult: RTLOffsetType | null = null;\n\n// TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n// Chrome does not seem to adhere; its scrollLeft values are positive (measured relative to the left).\n// Safari's elastic bounce makes detecting this even more complicated wrt potential false positives.\n// The safest way to check this is to intentionally set a negative offset,\n// and then verify that the subsequent \"scroll\" event matches the negative offset.\n// If it does not match, then we can assume a non-standard RTL scroll implementation.\nexport function getRTLOffsetType(recalculate?: boolean = false): RTLOffsetType {\n  if (cachedRTLResult === null || recalculate) {\n    const outerDiv = document.createElement('div');\n    const outerStyle = outerDiv.style;\n    outerStyle.width = '50px';\n    outerStyle.height = '50px';\n    outerStyle.overflow = 'scroll';\n    outerStyle.direction = 'rtl';\n\n    const innerDiv = document.createElement('div');\n    const innerStyle = innerDiv.style;\n    innerStyle.width = '100px';\n    innerStyle.height = '100px';\n\n    outerDiv.appendChild(innerDiv);\n\n    ((document.body: any): HTMLBodyElement).appendChild(outerDiv);\n\n    if (outerDiv.scrollLeft > 0) {\n      cachedRTLResult = 'positive-descending';\n    } else {\n      outerDiv.scrollLeft = 1;\n      if (outerDiv.scrollLeft === 0) {\n        cachedRTLResult = 'negative';\n      } else {\n        cachedRTLResult = 'positive-ascending';\n      }\n    }\n\n    ((document.body: any): HTMLBodyElement).removeChild(outerDiv);\n\n    return cachedRTLResult;\n  }\n\n  return cachedRTLResult;\n}\n","// @flow\n\nimport memoizeOne from 'memoize-one';\nimport { createElement, PureComponent } from 'react';\nimport { cancelTimeout, requestTimeout } from './timer';\nimport { getScrollbarSize, getRTLOffsetType } from './domHelpers';\n\nimport type { TimeoutID } from './timer';\n\ntype Direction = 'ltr' | 'rtl';\nexport type ScrollToAlign = 'auto' | 'smart' | 'center' | 'start' | 'end';\n\ntype itemSize = number | ((index: number) => number);\n\ntype RenderComponentProps<T> = {|\n  columnIndex: number,\n  data: T,\n  isScrolling?: boolean,\n  rowIndex: number,\n  style: Object,\n|};\nexport type RenderComponent<T> = React$ComponentType<\n  $Shape<RenderComponentProps<T>>\n>;\n\ntype ScrollDirection = 'forward' | 'backward';\n\ntype OnItemsRenderedCallback = ({\n  overscanColumnStartIndex: number,\n  overscanColumnStopIndex: number,\n  overscanRowStartIndex: number,\n  overscanRowStopIndex: number,\n  visibleColumnStartIndex: number,\n  visibleColumnStopIndex: number,\n  visibleRowStartIndex: number,\n  visibleRowStopIndex: number,\n}) => void;\ntype OnScrollCallback = ({\n  horizontalScrollDirection: ScrollDirection,\n  scrollLeft: number,\n  scrollTop: number,\n  scrollUpdateWasRequested: boolean,\n  verticalScrollDirection: ScrollDirection,\n}) => void;\n\ntype ScrollEvent = SyntheticEvent<HTMLDivElement>;\ntype ItemStyleCache = { [key: string]: Object };\n\ntype OuterProps = {|\n  children: React$Node,\n  className: string | void,\n  onScroll: ScrollEvent => void,\n  style: {\n    [string]: mixed,\n  },\n|};\n\ntype InnerProps = {|\n  children: React$Node,\n  style: {\n    [string]: mixed,\n  },\n|};\n\nexport type Props<T> = {|\n  children: RenderComponent<T>,\n  className?: string,\n  columnCount: number,\n  columnWidth: itemSize,\n  direction: Direction,\n  height: number,\n  initialScrollLeft?: number,\n  initialScrollTop?: number,\n  innerRef?: any,\n  innerElementType?: string | React$AbstractComponent<InnerProps, any>,\n  innerTagName?: string, // deprecated\n  itemData: T,\n  itemKey?: (params: {|\n    columnIndex: number,\n    data: T,\n    rowIndex: number,\n  |}) => any,\n  onItemsRendered?: OnItemsRenderedCallback,\n  onScroll?: OnScrollCallback,\n  outerRef?: any,\n  outerElementType?: string | React$AbstractComponent<OuterProps, any>,\n  outerTagName?: string, // deprecated\n  overscanColumnCount?: number,\n  overscanColumnsCount?: number, // deprecated\n  overscanCount?: number, // deprecated\n  overscanRowCount?: number,\n  overscanRowsCount?: number, // deprecated\n  rowCount: number,\n  rowHeight: itemSize,\n  style?: Object,\n  useIsScrolling: boolean,\n  width: number,\n|};\n\ntype State = {|\n  instance: any,\n  isScrolling: boolean,\n  horizontalScrollDirection: ScrollDirection,\n  scrollLeft: number,\n  scrollTop: number,\n  scrollUpdateWasRequested: boolean,\n  verticalScrollDirection: ScrollDirection,\n|};\n\ntype getItemOffset = (\n  props: Props<any>,\n  index: number,\n  instanceProps: any\n) => number;\ntype getItemSize = (\n  props: Props<any>,\n  index: number,\n  instanceProps: any\n) => number;\ntype getEstimatedTotalSize = (props: Props<any>, instanceProps: any) => number;\ntype GetOffsetForItemAndAlignment = (\n  props: Props<any>,\n  index: number,\n  align: ScrollToAlign,\n  scrollOffset: number,\n  instanceProps: any,\n  scrollbarSize: number\n) => number;\ntype GetStartIndexForOffset = (\n  props: Props<any>,\n  offset: number,\n  instanceProps: any\n) => number;\ntype GetStopIndexForStartIndex = (\n  props: Props<any>,\n  startIndex: number,\n  scrollOffset: number,\n  instanceProps: any\n) => number;\ntype InitInstanceProps = (props: Props<any>, instance: any) => any;\ntype ValidateProps = (props: Props<any>) => void;\n\nconst IS_SCROLLING_DEBOUNCE_INTERVAL = 150;\n\nconst defaultItemKey = ({ columnIndex, data, rowIndex }) =>\n  `${rowIndex}:${columnIndex}`;\n\n// In DEV mode, this Set helps us only log a warning once per component instance.\n// This avoids spamming the console every time a render happens.\nlet devWarningsOverscanCount = null;\nlet devWarningsOverscanRowsColumnsCount = null;\nlet devWarningsTagName = null;\nif (process.env.NODE_ENV !== 'production') {\n  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {\n    devWarningsOverscanCount = new WeakSet();\n    devWarningsOverscanRowsColumnsCount = new WeakSet();\n    devWarningsTagName = new WeakSet();\n  }\n}\n\nexport default function createGridComponent({\n  getColumnOffset,\n  getColumnStartIndexForOffset,\n  getColumnStopIndexForStartIndex,\n  getColumnWidth,\n  getEstimatedTotalHeight,\n  getEstimatedTotalWidth,\n  getOffsetForColumnAndAlignment,\n  getOffsetForRowAndAlignment,\n  getRowHeight,\n  getRowOffset,\n  getRowStartIndexForOffset,\n  getRowStopIndexForStartIndex,\n  initInstanceProps,\n  shouldResetStyleCacheOnItemSizeChange,\n  validateProps,\n}: {|\n  getColumnOffset: getItemOffset,\n  getColumnStartIndexForOffset: GetStartIndexForOffset,\n  getColumnStopIndexForStartIndex: GetStopIndexForStartIndex,\n  getColumnWidth: getItemSize,\n  getEstimatedTotalHeight: getEstimatedTotalSize,\n  getEstimatedTotalWidth: getEstimatedTotalSize,\n  getOffsetForColumnAndAlignment: GetOffsetForItemAndAlignment,\n  getOffsetForRowAndAlignment: GetOffsetForItemAndAlignment,\n  getRowOffset: getItemOffset,\n  getRowHeight: getItemSize,\n  getRowStartIndexForOffset: GetStartIndexForOffset,\n  getRowStopIndexForStartIndex: GetStopIndexForStartIndex,\n  initInstanceProps: InitInstanceProps,\n  shouldResetStyleCacheOnItemSizeChange: boolean,\n  validateProps: ValidateProps,\n|}) {\n  return class Grid<T> extends PureComponent<Props<T>, State> {\n    _instanceProps: any = initInstanceProps(this.props, this);\n    _resetIsScrollingTimeoutId: TimeoutID | null = null;\n    _outerRef: ?HTMLDivElement;\n\n    static defaultProps = {\n      direction: 'ltr',\n      itemData: undefined,\n      useIsScrolling: false,\n    };\n\n    state: State = {\n      instance: this,\n      isScrolling: false,\n      horizontalScrollDirection: 'forward',\n      scrollLeft:\n        typeof this.props.initialScrollLeft === 'number'\n          ? this.props.initialScrollLeft\n          : 0,\n      scrollTop:\n        typeof this.props.initialScrollTop === 'number'\n          ? this.props.initialScrollTop\n          : 0,\n      scrollUpdateWasRequested: false,\n      verticalScrollDirection: 'forward',\n    };\n\n    // Always use explicit constructor for React components.\n    // It produces less code after transpilation. (#26)\n    // eslint-disable-next-line no-useless-constructor\n    constructor(props: Props<T>) {\n      super(props);\n    }\n\n    static getDerivedStateFromProps(\n      nextProps: Props<T>,\n      prevState: State\n    ): $Shape<State> | null {\n      validateSharedProps(nextProps, prevState);\n      validateProps(nextProps);\n      return null;\n    }\n\n    scrollTo({\n      scrollLeft,\n      scrollTop,\n    }: {\n      scrollLeft: number,\n      scrollTop: number,\n    }): void {\n      if (scrollLeft !== undefined) {\n        scrollLeft = Math.max(0, scrollLeft);\n      }\n      if (scrollTop !== undefined) {\n        scrollTop = Math.max(0, scrollTop);\n      }\n\n      this.setState(prevState => {\n        if (scrollLeft === undefined) {\n          scrollLeft = prevState.scrollLeft;\n        }\n        if (scrollTop === undefined) {\n          scrollTop = prevState.scrollTop;\n        }\n\n        if (\n          prevState.scrollLeft === scrollLeft &&\n          prevState.scrollTop === scrollTop\n        ) {\n          return null;\n        }\n\n        return {\n          horizontalScrollDirection:\n            prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',\n          scrollLeft: scrollLeft,\n          scrollTop: scrollTop,\n          scrollUpdateWasRequested: true,\n          verticalScrollDirection:\n            prevState.scrollTop < scrollTop ? 'forward' : 'backward',\n        };\n      }, this._resetIsScrollingDebounced);\n    }\n\n    scrollToItem({\n      align = 'auto',\n      columnIndex,\n      rowIndex,\n    }: {\n      align: ScrollToAlign,\n      columnIndex?: number,\n      rowIndex?: number,\n    }): void {\n      const { columnCount, height, rowCount, width } = this.props;\n      const { scrollLeft, scrollTop } = this.state;\n      const scrollbarSize = getScrollbarSize();\n\n      if (columnIndex !== undefined) {\n        columnIndex = Math.max(0, Math.min(columnIndex, columnCount - 1));\n      }\n      if (rowIndex !== undefined) {\n        rowIndex = Math.max(0, Math.min(rowIndex, rowCount - 1));\n      }\n\n      const estimatedTotalHeight = getEstimatedTotalHeight(\n        this.props,\n        this._instanceProps\n      );\n      const estimatedTotalWidth = getEstimatedTotalWidth(\n        this.props,\n        this._instanceProps\n      );\n\n      // The scrollbar size should be considered when scrolling an item into view,\n      // to ensure it's fully visible.\n      // But we only need to account for its size when it's actually visible.\n      const horizontalScrollbarSize =\n        estimatedTotalWidth > width ? scrollbarSize : 0;\n      const verticalScrollbarSize =\n        estimatedTotalHeight > height ? scrollbarSize : 0;\n\n      this.scrollTo({\n        scrollLeft:\n          columnIndex !== undefined\n            ? getOffsetForColumnAndAlignment(\n                this.props,\n                columnIndex,\n                align,\n                scrollLeft,\n                this._instanceProps,\n                verticalScrollbarSize\n              )\n            : scrollLeft,\n        scrollTop:\n          rowIndex !== undefined\n            ? getOffsetForRowAndAlignment(\n                this.props,\n                rowIndex,\n                align,\n                scrollTop,\n                this._instanceProps,\n                horizontalScrollbarSize\n              )\n            : scrollTop,\n      });\n    }\n\n    componentDidMount() {\n      const { initialScrollLeft, initialScrollTop } = this.props;\n\n      if (this._outerRef != null) {\n        const outerRef = ((this._outerRef: any): HTMLElement);\n        if (typeof initialScrollLeft === 'number') {\n          outerRef.scrollLeft = initialScrollLeft;\n        }\n        if (typeof initialScrollTop === 'number') {\n          outerRef.scrollTop = initialScrollTop;\n        }\n      }\n\n      this._callPropsCallbacks();\n    }\n\n    componentDidUpdate() {\n      const { direction } = this.props;\n      const { scrollLeft, scrollTop, scrollUpdateWasRequested } = this.state;\n\n      if (scrollUpdateWasRequested && this._outerRef != null) {\n        // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n        // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n        // So we need to determine which browser behavior we're dealing with, and mimic it.\n        const outerRef = ((this._outerRef: any): HTMLElement);\n        if (direction === 'rtl') {\n          switch (getRTLOffsetType()) {\n            case 'negative':\n              outerRef.scrollLeft = -scrollLeft;\n              break;\n            case 'positive-ascending':\n              outerRef.scrollLeft = scrollLeft;\n              break;\n            default:\n              const { clientWidth, scrollWidth } = outerRef;\n              outerRef.scrollLeft = scrollWidth - clientWidth - scrollLeft;\n              break;\n          }\n        } else {\n          outerRef.scrollLeft = Math.max(0, scrollLeft);\n        }\n\n        outerRef.scrollTop = Math.max(0, scrollTop);\n      }\n\n      this._callPropsCallbacks();\n    }\n\n    componentWillUnmount() {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n    }\n\n    render() {\n      const {\n        children,\n        className,\n        columnCount,\n        direction,\n        height,\n        innerRef,\n        innerElementType,\n        innerTagName,\n        itemData,\n        itemKey = defaultItemKey,\n        outerElementType,\n        outerTagName,\n        rowCount,\n        style,\n        useIsScrolling,\n        width,\n      } = this.props;\n      const { isScrolling } = this.state;\n\n      const [\n        columnStartIndex,\n        columnStopIndex,\n      ] = this._getHorizontalRangeToRender();\n      const [rowStartIndex, rowStopIndex] = this._getVerticalRangeToRender();\n\n      const items = [];\n      if (columnCount > 0 && rowCount) {\n        for (\n          let rowIndex = rowStartIndex;\n          rowIndex <= rowStopIndex;\n          rowIndex++\n        ) {\n          for (\n            let columnIndex = columnStartIndex;\n            columnIndex <= columnStopIndex;\n            columnIndex++\n          ) {\n            items.push(\n              createElement(children, {\n                columnIndex,\n                data: itemData,\n                isScrolling: useIsScrolling ? isScrolling : undefined,\n                key: itemKey({ columnIndex, data: itemData, rowIndex }),\n                rowIndex,\n                style: this._getItemStyle(rowIndex, columnIndex),\n              })\n            );\n          }\n        }\n      }\n\n      // Read this value AFTER items have been created,\n      // So their actual sizes (if variable) are taken into consideration.\n      const estimatedTotalHeight = getEstimatedTotalHeight(\n        this.props,\n        this._instanceProps\n      );\n      const estimatedTotalWidth = getEstimatedTotalWidth(\n        this.props,\n        this._instanceProps\n      );\n\n      return createElement(\n        outerElementType || outerTagName || 'div',\n        {\n          className,\n          onScroll: this._onScroll,\n          ref: this._outerRefSetter,\n          style: {\n            position: 'relative',\n            height,\n            width,\n            overflow: 'auto',\n            WebkitOverflowScrolling: 'touch',\n            willChange: 'transform',\n            direction,\n            ...style,\n          },\n        },\n        createElement(innerElementType || innerTagName || 'div', {\n          children: items,\n          ref: innerRef,\n          style: {\n            height: estimatedTotalHeight,\n            pointerEvents: isScrolling ? 'none' : undefined,\n            width: estimatedTotalWidth,\n          },\n        })\n      );\n    }\n\n    _callOnItemsRendered: (\n      overscanColumnStartIndex: number,\n      overscanColumnStopIndex: number,\n      overscanRowStartIndex: number,\n      overscanRowStopIndex: number,\n      visibleColumnStartIndex: number,\n      visibleColumnStopIndex: number,\n      visibleRowStartIndex: number,\n      visibleRowStopIndex: number\n    ) => void;\n    _callOnItemsRendered = memoizeOne(\n      (\n        overscanColumnStartIndex: number,\n        overscanColumnStopIndex: number,\n        overscanRowStartIndex: number,\n        overscanRowStopIndex: number,\n        visibleColumnStartIndex: number,\n        visibleColumnStopIndex: number,\n        visibleRowStartIndex: number,\n        visibleRowStopIndex: number\n      ) =>\n        ((this.props.onItemsRendered: any): OnItemsRenderedCallback)({\n          overscanColumnStartIndex,\n          overscanColumnStopIndex,\n          overscanRowStartIndex,\n          overscanRowStopIndex,\n          visibleColumnStartIndex,\n          visibleColumnStopIndex,\n          visibleRowStartIndex,\n          visibleRowStopIndex,\n        })\n    );\n\n    _callOnScroll: (\n      scrollLeft: number,\n      scrollTop: number,\n      horizontalScrollDirection: ScrollDirection,\n      verticalScrollDirection: ScrollDirection,\n      scrollUpdateWasRequested: boolean\n    ) => void;\n    _callOnScroll = memoizeOne(\n      (\n        scrollLeft: number,\n        scrollTop: number,\n        horizontalScrollDirection: ScrollDirection,\n        verticalScrollDirection: ScrollDirection,\n        scrollUpdateWasRequested: boolean\n      ) =>\n        ((this.props.onScroll: any): OnScrollCallback)({\n          horizontalScrollDirection,\n          scrollLeft,\n          scrollTop,\n          verticalScrollDirection,\n          scrollUpdateWasRequested,\n        })\n    );\n\n    _callPropsCallbacks() {\n      const { columnCount, onItemsRendered, onScroll, rowCount } = this.props;\n\n      if (typeof onItemsRendered === 'function') {\n        if (columnCount > 0 && rowCount > 0) {\n          const [\n            overscanColumnStartIndex,\n            overscanColumnStopIndex,\n            visibleColumnStartIndex,\n            visibleColumnStopIndex,\n          ] = this._getHorizontalRangeToRender();\n          const [\n            overscanRowStartIndex,\n            overscanRowStopIndex,\n            visibleRowStartIndex,\n            visibleRowStopIndex,\n          ] = this._getVerticalRangeToRender();\n          this._callOnItemsRendered(\n            overscanColumnStartIndex,\n            overscanColumnStopIndex,\n            overscanRowStartIndex,\n            overscanRowStopIndex,\n            visibleColumnStartIndex,\n            visibleColumnStopIndex,\n            visibleRowStartIndex,\n            visibleRowStopIndex\n          );\n        }\n      }\n\n      if (typeof onScroll === 'function') {\n        const {\n          horizontalScrollDirection,\n          scrollLeft,\n          scrollTop,\n          scrollUpdateWasRequested,\n          verticalScrollDirection,\n        } = this.state;\n        this._callOnScroll(\n          scrollLeft,\n          scrollTop,\n          horizontalScrollDirection,\n          verticalScrollDirection,\n          scrollUpdateWasRequested\n        );\n      }\n    }\n\n    // Lazily create and cache item styles while scrolling,\n    // So that pure component sCU will prevent re-renders.\n    // We maintain this cache, and pass a style prop rather than index,\n    // So that List can clear cached styles and force item re-render if necessary.\n    _getItemStyle: (rowIndex: number, columnIndex: number) => Object;\n    _getItemStyle = (rowIndex: number, columnIndex: number): Object => {\n      const { columnWidth, direction, rowHeight } = this.props;\n\n      const itemStyleCache = this._getItemStyleCache(\n        shouldResetStyleCacheOnItemSizeChange && columnWidth,\n        shouldResetStyleCacheOnItemSizeChange && direction,\n        shouldResetStyleCacheOnItemSizeChange && rowHeight\n      );\n\n      const key = `${rowIndex}:${columnIndex}`;\n\n      let style;\n      if (itemStyleCache.hasOwnProperty(key)) {\n        style = itemStyleCache[key];\n      } else {\n        const offset = getColumnOffset(\n          this.props,\n          columnIndex,\n          this._instanceProps\n        );\n        const isRtl = direction === 'rtl';\n        itemStyleCache[key] = style = {\n          position: 'absolute',\n          left: isRtl ? undefined : offset,\n          right: isRtl ? offset : undefined,\n          top: getRowOffset(this.props, rowIndex, this._instanceProps),\n          height: getRowHeight(this.props, rowIndex, this._instanceProps),\n          width: getColumnWidth(this.props, columnIndex, this._instanceProps),\n        };\n      }\n\n      return style;\n    };\n\n    _getItemStyleCache: (_: any, __: any, ___: any) => ItemStyleCache;\n    _getItemStyleCache = memoizeOne((_: any, __: any, ___: any) => ({}));\n\n    _getHorizontalRangeToRender(): [number, number, number, number] {\n      const {\n        columnCount,\n        overscanColumnCount,\n        overscanColumnsCount,\n        overscanCount,\n        rowCount,\n      } = this.props;\n      const { horizontalScrollDirection, isScrolling, scrollLeft } = this.state;\n\n      const overscanCountResolved: number =\n        overscanColumnCount || overscanColumnsCount || overscanCount || 1;\n\n      if (columnCount === 0 || rowCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      const startIndex = getColumnStartIndexForOffset(\n        this.props,\n        scrollLeft,\n        this._instanceProps\n      );\n      const stopIndex = getColumnStopIndexForStartIndex(\n        this.props,\n        startIndex,\n        scrollLeft,\n        this._instanceProps\n      );\n\n      // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n      const overscanBackward =\n        !isScrolling || horizontalScrollDirection === 'backward'\n          ? Math.max(1, overscanCountResolved)\n          : 1;\n      const overscanForward =\n        !isScrolling || horizontalScrollDirection === 'forward'\n          ? Math.max(1, overscanCountResolved)\n          : 1;\n\n      return [\n        Math.max(0, startIndex - overscanBackward),\n        Math.max(0, Math.min(columnCount - 1, stopIndex + overscanForward)),\n        startIndex,\n        stopIndex,\n      ];\n    }\n\n    _getVerticalRangeToRender(): [number, number, number, number] {\n      const {\n        columnCount,\n        overscanCount,\n        overscanRowCount,\n        overscanRowsCount,\n        rowCount,\n      } = this.props;\n      const { isScrolling, verticalScrollDirection, scrollTop } = this.state;\n\n      const overscanCountResolved: number =\n        overscanRowCount || overscanRowsCount || overscanCount || 1;\n\n      if (columnCount === 0 || rowCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      const startIndex = getRowStartIndexForOffset(\n        this.props,\n        scrollTop,\n        this._instanceProps\n      );\n      const stopIndex = getRowStopIndexForStartIndex(\n        this.props,\n        startIndex,\n        scrollTop,\n        this._instanceProps\n      );\n\n      // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n      const overscanBackward =\n        !isScrolling || verticalScrollDirection === 'backward'\n          ? Math.max(1, overscanCountResolved)\n          : 1;\n      const overscanForward =\n        !isScrolling || verticalScrollDirection === 'forward'\n          ? Math.max(1, overscanCountResolved)\n          : 1;\n\n      return [\n        Math.max(0, startIndex - overscanBackward),\n        Math.max(0, Math.min(rowCount - 1, stopIndex + overscanForward)),\n        startIndex,\n        stopIndex,\n      ];\n    }\n\n    _onScroll = (event: ScrollEvent): void => {\n      const {\n        clientHeight,\n        clientWidth,\n        scrollLeft,\n        scrollTop,\n        scrollHeight,\n        scrollWidth,\n      } = event.currentTarget;\n      this.setState(prevState => {\n        if (\n          prevState.scrollLeft === scrollLeft &&\n          prevState.scrollTop === scrollTop\n        ) {\n          // Scroll position may have been updated by cDM/cDU,\n          // In which case we don't need to trigger another render,\n          // And we don't want to update state.isScrolling.\n          return null;\n        }\n\n        const { direction } = this.props;\n\n        // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n        // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n        // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.\n        // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.\n        let calculatedScrollLeft = scrollLeft;\n        if (direction === 'rtl') {\n          switch (getRTLOffsetType()) {\n            case 'negative':\n              calculatedScrollLeft = -scrollLeft;\n              break;\n            case 'positive-descending':\n              calculatedScrollLeft = scrollWidth - clientWidth - scrollLeft;\n              break;\n          }\n        }\n\n        // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n        calculatedScrollLeft = Math.max(\n          0,\n          Math.min(calculatedScrollLeft, scrollWidth - clientWidth)\n        );\n        const calculatedScrollTop = Math.max(\n          0,\n          Math.min(scrollTop, scrollHeight - clientHeight)\n        );\n\n        return {\n          isScrolling: true,\n          horizontalScrollDirection:\n            prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',\n          scrollLeft: calculatedScrollLeft,\n          scrollTop: calculatedScrollTop,\n          verticalScrollDirection:\n            prevState.scrollTop < scrollTop ? 'forward' : 'backward',\n          scrollUpdateWasRequested: false,\n        };\n      }, this._resetIsScrollingDebounced);\n    };\n\n    _outerRefSetter = (ref: any): void => {\n      const { outerRef } = this.props;\n\n      this._outerRef = ((ref: any): HTMLDivElement);\n\n      if (typeof outerRef === 'function') {\n        outerRef(ref);\n      } else if (\n        outerRef != null &&\n        typeof outerRef === 'object' &&\n        outerRef.hasOwnProperty('current')\n      ) {\n        outerRef.current = ref;\n      }\n    };\n\n    _resetIsScrollingDebounced = () => {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n\n      this._resetIsScrollingTimeoutId = requestTimeout(\n        this._resetIsScrolling,\n        IS_SCROLLING_DEBOUNCE_INTERVAL\n      );\n    };\n\n    _resetIsScrolling = () => {\n      this._resetIsScrollingTimeoutId = null;\n\n      this.setState({ isScrolling: false }, () => {\n        // Clear style cache after state update has been committed.\n        // This way we don't break pure sCU for items that don't use isScrolling param.\n        this._getItemStyleCache(-1);\n      });\n    };\n  };\n}\n\nconst validateSharedProps = (\n  {\n    children,\n    direction,\n    height,\n    innerTagName,\n    outerTagName,\n    overscanColumnsCount,\n    overscanCount,\n    overscanRowsCount,\n    width,\n  }: Props<any>,\n  { instance }: State\n): void => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof overscanCount === 'number') {\n      if (devWarningsOverscanCount && !devWarningsOverscanCount.has(instance)) {\n        devWarningsOverscanCount.add(instance);\n        console.warn(\n          'The overscanCount prop has been deprecated. ' +\n            'Please use the overscanColumnCount and overscanRowCount props instead.'\n        );\n      }\n    }\n\n    if (\n      typeof overscanColumnsCount === 'number' ||\n      typeof overscanRowsCount === 'number'\n    ) {\n      if (\n        devWarningsOverscanRowsColumnsCount &&\n        !devWarningsOverscanRowsColumnsCount.has(instance)\n      ) {\n        devWarningsOverscanRowsColumnsCount.add(instance);\n        console.warn(\n          'The overscanColumnsCount and overscanRowsCount props have been deprecated. ' +\n            'Please use the overscanColumnCount and overscanRowCount props instead.'\n        );\n      }\n    }\n\n    if (innerTagName != null || outerTagName != null) {\n      if (devWarningsTagName && !devWarningsTagName.has(instance)) {\n        devWarningsTagName.add(instance);\n        console.warn(\n          'The innerTagName and outerTagName props have been deprecated. ' +\n            'Please use the innerElementType and outerElementType props instead.'\n        );\n      }\n    }\n\n    if (children == null) {\n      throw Error(\n        'An invalid \"children\" prop has been specified. ' +\n          'Value should be a React component. ' +\n          `\"${children === null ? 'null' : typeof children}\" was specified.`\n      );\n    }\n\n    switch (direction) {\n      case 'ltr':\n      case 'rtl':\n        // Valid values\n        break;\n      default:\n        throw Error(\n          'An invalid \"direction\" prop has been specified. ' +\n            'Value should be either \"ltr\" or \"rtl\". ' +\n            `\"${direction}\" was specified.`\n        );\n    }\n\n    if (typeof width !== 'number') {\n      throw Error(\n        'An invalid \"width\" prop has been specified. ' +\n          'Grids must specify a number for width. ' +\n          `\"${width === null ? 'null' : typeof width}\" was specified.`\n      );\n    }\n\n    if (typeof height !== 'number') {\n      throw Error(\n        'An invalid \"height\" prop has been specified. ' +\n          'Grids must specify a number for height. ' +\n          `\"${height === null ? 'null' : typeof height}\" was specified.`\n      );\n    }\n  }\n};\n","// @flow\n\nimport memoizeOne from 'memoize-one';\nimport { createElement, PureComponent } from 'react';\nimport { cancelTimeout, requestTimeout } from './timer';\nimport { getScrollbarSize, getRTLOffsetType } from './domHelpers';\n\nimport type { TimeoutID } from './timer';\n\nexport type ScrollToAlign = 'auto' | 'smart' | 'center' | 'start' | 'end';\n\ntype itemSize = number | ((index: number) => number);\n// TODO Deprecate directions \"horizontal\" and \"vertical\"\ntype Direction = 'ltr' | 'rtl' | 'horizontal' | 'vertical';\ntype Layout = 'horizontal' | 'vertical';\n\ntype RenderComponentProps<T> = {|\n  data: T,\n  index: number,\n  isScrolling?: boolean,\n  style: Object,\n|};\ntype RenderComponent<T> = React$ComponentType<$Shape<RenderComponentProps<T>>>;\n\ntype ScrollDirection = 'forward' | 'backward';\n\ntype onItemsRenderedCallback = ({\n  overscanStartIndex: number,\n  overscanStopIndex: number,\n  visibleStartIndex: number,\n  visibleStopIndex: number,\n}) => void;\ntype onScrollCallback = ({\n  scrollDirection: ScrollDirection,\n  scrollOffset: number,\n  scrollUpdateWasRequested: boolean,\n}) => void;\n\ntype ScrollEvent = SyntheticEvent<HTMLDivElement>;\ntype ItemStyleCache = { [index: number]: Object };\n\ntype OuterProps = {|\n  children: React$Node,\n  className: string | void,\n  onScroll: ScrollEvent => void,\n  style: {\n    [string]: mixed,\n  },\n|};\n\ntype InnerProps = {|\n  children: React$Node,\n  style: {\n    [string]: mixed,\n  },\n|};\n\nexport type Props<T> = {|\n  children: RenderComponent<T>,\n  className?: string,\n  direction: Direction,\n  height: number | string,\n  initialScrollOffset?: number,\n  innerRef?: any,\n  innerElementType?: string | React$AbstractComponent<InnerProps, any>,\n  innerTagName?: string, // deprecated\n  itemCount: number,\n  itemData: T,\n  itemKey?: (index: number, data: T) => any,\n  itemSize: itemSize,\n  layout: Layout,\n  onItemsRendered?: onItemsRenderedCallback,\n  onScroll?: onScrollCallback,\n  outerRef?: any,\n  outerElementType?: string | React$AbstractComponent<OuterProps, any>,\n  outerTagName?: string, // deprecated\n  overscanCount: number,\n  style?: Object,\n  useIsScrolling: boolean,\n  width: number | string,\n|};\n\ntype State = {|\n  instance: any,\n  isScrolling: boolean,\n  scrollDirection: ScrollDirection,\n  scrollOffset: number,\n  scrollUpdateWasRequested: boolean,\n|};\n\ntype GetItemOffset = (\n  props: Props<any>,\n  index: number,\n  instanceProps: any\n) => number;\ntype GetItemSize = (\n  props: Props<any>,\n  index: number,\n  instanceProps: any\n) => number;\ntype GetEstimatedTotalSize = (props: Props<any>, instanceProps: any) => number;\ntype GetOffsetForIndexAndAlignment = (\n  props: Props<any>,\n  index: number,\n  align: ScrollToAlign,\n  scrollOffset: number,\n  instanceProps: any\n) => number;\ntype GetStartIndexForOffset = (\n  props: Props<any>,\n  offset: number,\n  instanceProps: any\n) => number;\ntype GetStopIndexForStartIndex = (\n  props: Props<any>,\n  startIndex: number,\n  scrollOffset: number,\n  instanceProps: any\n) => number;\ntype InitInstanceProps = (props: Props<any>, instance: any) => any;\ntype ValidateProps = (props: Props<any>) => void;\n\nconst IS_SCROLLING_DEBOUNCE_INTERVAL = 150;\n\nconst defaultItemKey = (index: number, data: any) => index;\n\n// In DEV mode, this Set helps us only log a warning once per component instance.\n// This avoids spamming the console every time a render happens.\nlet devWarningsDirection = null;\nlet devWarningsTagName = null;\nif (process.env.NODE_ENV !== 'production') {\n  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {\n    devWarningsDirection = new WeakSet();\n    devWarningsTagName = new WeakSet();\n  }\n}\n\nexport default function createListComponent({\n  getItemOffset,\n  getEstimatedTotalSize,\n  getItemSize,\n  getOffsetForIndexAndAlignment,\n  getStartIndexForOffset,\n  getStopIndexForStartIndex,\n  initInstanceProps,\n  shouldResetStyleCacheOnItemSizeChange,\n  validateProps,\n}: {|\n  getItemOffset: GetItemOffset,\n  getEstimatedTotalSize: GetEstimatedTotalSize,\n  getItemSize: GetItemSize,\n  getOffsetForIndexAndAlignment: GetOffsetForIndexAndAlignment,\n  getStartIndexForOffset: GetStartIndexForOffset,\n  getStopIndexForStartIndex: GetStopIndexForStartIndex,\n  initInstanceProps: InitInstanceProps,\n  shouldResetStyleCacheOnItemSizeChange: boolean,\n  validateProps: ValidateProps,\n|}) {\n  return class List<T> extends PureComponent<Props<T>, State> {\n    _instanceProps: any = initInstanceProps(this.props, this);\n    _outerRef: ?HTMLDivElement;\n    _resetIsScrollingTimeoutId: TimeoutID | null = null;\n\n    static defaultProps = {\n      direction: 'ltr',\n      itemData: undefined,\n      layout: 'vertical',\n      overscanCount: 2,\n      useIsScrolling: false,\n    };\n\n    state: State = {\n      instance: this,\n      isScrolling: false,\n      scrollDirection: 'forward',\n      scrollOffset:\n        typeof this.props.initialScrollOffset === 'number'\n          ? this.props.initialScrollOffset\n          : 0,\n      scrollUpdateWasRequested: false,\n    };\n\n    // Always use explicit constructor for React components.\n    // It produces less code after transpilation. (#26)\n    // eslint-disable-next-line no-useless-constructor\n    constructor(props: Props<T>) {\n      super(props);\n    }\n\n    static getDerivedStateFromProps(\n      nextProps: Props<T>,\n      prevState: State\n    ): $Shape<State> | null {\n      validateSharedProps(nextProps, prevState);\n      validateProps(nextProps);\n      return null;\n    }\n\n    scrollTo(scrollOffset: number): void {\n      scrollOffset = Math.max(0, scrollOffset);\n\n      this.setState(prevState => {\n        if (prevState.scrollOffset === scrollOffset) {\n          return null;\n        }\n        return {\n          scrollDirection:\n            prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n          scrollOffset: scrollOffset,\n          scrollUpdateWasRequested: true,\n        };\n      }, this._resetIsScrollingDebounced);\n    }\n\n    scrollToItem(index: number, align: ScrollToAlign = 'auto'): void {\n      const { itemCount, layout } = this.props;\n      const { scrollOffset } = this.state;\n\n      index = Math.max(0, Math.min(index, itemCount - 1));\n\n      // The scrollbar size should be considered when scrolling an item into view, to ensure it's fully visible.\n      // But we only need to account for its size when it's actually visible.\n      // This is an edge case for lists; normally they only scroll in the dominant direction.\n      let scrollbarSize = 0;\n      if (this._outerRef) {\n        const outerRef = ((this._outerRef: any): HTMLElement);\n        if (layout === 'vertical') {\n          scrollbarSize =\n            outerRef.scrollWidth > outerRef.clientWidth\n              ? getScrollbarSize()\n              : 0;\n        } else {\n          scrollbarSize =\n            outerRef.scrollHeight > outerRef.clientHeight\n              ? getScrollbarSize()\n              : 0;\n        }\n      }\n\n      this.scrollTo(\n        getOffsetForIndexAndAlignment(\n          this.props,\n          index,\n          align,\n          scrollOffset,\n          this._instanceProps,\n          scrollbarSize\n        )\n      );\n    }\n\n    componentDidMount() {\n      const { direction, initialScrollOffset, layout } = this.props;\n\n      if (typeof initialScrollOffset === 'number' && this._outerRef != null) {\n        const outerRef = ((this._outerRef: any): HTMLElement);\n        // TODO Deprecate direction \"horizontal\"\n        if (direction === 'horizontal' || layout === 'horizontal') {\n          outerRef.scrollLeft = initialScrollOffset;\n        } else {\n          outerRef.scrollTop = initialScrollOffset;\n        }\n      }\n\n      this._callPropsCallbacks();\n    }\n\n    componentDidUpdate() {\n      const { direction, layout } = this.props;\n      const { scrollOffset, scrollUpdateWasRequested } = this.state;\n\n      if (scrollUpdateWasRequested && this._outerRef != null) {\n        const outerRef = ((this._outerRef: any): HTMLElement);\n\n        // TODO Deprecate direction \"horizontal\"\n        if (direction === 'horizontal' || layout === 'horizontal') {\n          if (direction === 'rtl') {\n            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n            // So we need to determine which browser behavior we're dealing with, and mimic it.\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                outerRef.scrollLeft = -scrollOffset;\n                break;\n              case 'positive-ascending':\n                outerRef.scrollLeft = scrollOffset;\n                break;\n              default:\n                const { clientWidth, scrollWidth } = outerRef;\n                outerRef.scrollLeft = scrollWidth - clientWidth - scrollOffset;\n                break;\n            }\n          } else {\n            outerRef.scrollLeft = scrollOffset;\n          }\n        } else {\n          outerRef.scrollTop = scrollOffset;\n        }\n      }\n\n      this._callPropsCallbacks();\n    }\n\n    componentWillUnmount() {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n    }\n\n    render() {\n      const {\n        children,\n        className,\n        direction,\n        height,\n        innerRef,\n        innerElementType,\n        innerTagName,\n        itemCount,\n        itemData,\n        itemKey = defaultItemKey,\n        layout,\n        outerElementType,\n        outerTagName,\n        style,\n        useIsScrolling,\n        width,\n      } = this.props;\n      const { isScrolling } = this.state;\n\n      // TODO Deprecate direction \"horizontal\"\n      const isHorizontal =\n        direction === 'horizontal' || layout === 'horizontal';\n\n      const onScroll = isHorizontal\n        ? this._onScrollHorizontal\n        : this._onScrollVertical;\n\n      const [startIndex, stopIndex] = this._getRangeToRender();\n\n      const items = [];\n      if (itemCount > 0) {\n        for (let index = startIndex; index <= stopIndex; index++) {\n          items.push(\n            createElement(children, {\n              data: itemData,\n              key: itemKey(index, itemData),\n              index,\n              isScrolling: useIsScrolling ? isScrolling : undefined,\n              style: this._getItemStyle(index),\n            })\n          );\n        }\n      }\n\n      // Read this value AFTER items have been created,\n      // So their actual sizes (if variable) are taken into consideration.\n      const estimatedTotalSize = getEstimatedTotalSize(\n        this.props,\n        this._instanceProps\n      );\n\n      return createElement(\n        outerElementType || outerTagName || 'div',\n        {\n          className,\n          onScroll,\n          ref: this._outerRefSetter,\n          style: {\n            position: 'relative',\n            height,\n            width,\n            overflow: 'auto',\n            WebkitOverflowScrolling: 'touch',\n            willChange: 'transform',\n            direction,\n            ...style,\n          },\n        },\n        createElement(innerElementType || innerTagName || 'div', {\n          children: items,\n          ref: innerRef,\n          style: {\n            height: isHorizontal ? '100%' : estimatedTotalSize,\n            pointerEvents: isScrolling ? 'none' : undefined,\n            width: isHorizontal ? estimatedTotalSize : '100%',\n          },\n        })\n      );\n    }\n\n    _callOnItemsRendered: (\n      overscanStartIndex: number,\n      overscanStopIndex: number,\n      visibleStartIndex: number,\n      visibleStopIndex: number\n    ) => void;\n    _callOnItemsRendered = memoizeOne(\n      (\n        overscanStartIndex: number,\n        overscanStopIndex: number,\n        visibleStartIndex: number,\n        visibleStopIndex: number\n      ) =>\n        ((this.props.onItemsRendered: any): onItemsRenderedCallback)({\n          overscanStartIndex,\n          overscanStopIndex,\n          visibleStartIndex,\n          visibleStopIndex,\n        })\n    );\n\n    _callOnScroll: (\n      scrollDirection: ScrollDirection,\n      scrollOffset: number,\n      scrollUpdateWasRequested: boolean\n    ) => void;\n    _callOnScroll = memoizeOne(\n      (\n        scrollDirection: ScrollDirection,\n        scrollOffset: number,\n        scrollUpdateWasRequested: boolean\n      ) =>\n        ((this.props.onScroll: any): onScrollCallback)({\n          scrollDirection,\n          scrollOffset,\n          scrollUpdateWasRequested,\n        })\n    );\n\n    _callPropsCallbacks() {\n      if (typeof this.props.onItemsRendered === 'function') {\n        const { itemCount } = this.props;\n        if (itemCount > 0) {\n          const [\n            overscanStartIndex,\n            overscanStopIndex,\n            visibleStartIndex,\n            visibleStopIndex,\n          ] = this._getRangeToRender();\n          this._callOnItemsRendered(\n            overscanStartIndex,\n            overscanStopIndex,\n            visibleStartIndex,\n            visibleStopIndex\n          );\n        }\n      }\n\n      if (typeof this.props.onScroll === 'function') {\n        const {\n          scrollDirection,\n          scrollOffset,\n          scrollUpdateWasRequested,\n        } = this.state;\n        this._callOnScroll(\n          scrollDirection,\n          scrollOffset,\n          scrollUpdateWasRequested\n        );\n      }\n    }\n\n    // Lazily create and cache item styles while scrolling,\n    // So that pure component sCU will prevent re-renders.\n    // We maintain this cache, and pass a style prop rather than index,\n    // So that List can clear cached styles and force item re-render if necessary.\n    _getItemStyle: (index: number) => Object;\n    _getItemStyle = (index: number): Object => {\n      const { direction, itemSize, layout } = this.props;\n\n      const itemStyleCache = this._getItemStyleCache(\n        shouldResetStyleCacheOnItemSizeChange && itemSize,\n        shouldResetStyleCacheOnItemSizeChange && layout,\n        shouldResetStyleCacheOnItemSizeChange && direction\n      );\n\n      let style;\n      if (itemStyleCache.hasOwnProperty(index)) {\n        style = itemStyleCache[index];\n      } else {\n        const offset = getItemOffset(this.props, index, this._instanceProps);\n        const size = getItemSize(this.props, index, this._instanceProps);\n\n        // TODO Deprecate direction \"horizontal\"\n        const isHorizontal =\n          direction === 'horizontal' || layout === 'horizontal';\n\n        const isRtl = direction === 'rtl';\n        const offsetHorizontal = isHorizontal ? offset : 0;\n        itemStyleCache[index] = style = {\n          position: 'absolute',\n          left: isRtl ? undefined : offsetHorizontal,\n          right: isRtl ? offsetHorizontal : undefined,\n          top: !isHorizontal ? offset : 0,\n          height: !isHorizontal ? size : '100%',\n          width: isHorizontal ? size : '100%',\n        };\n      }\n\n      return style;\n    };\n\n    _getItemStyleCache: (_: any, __: any, ___: any) => ItemStyleCache;\n    _getItemStyleCache = memoizeOne((_: any, __: any, ___: any) => ({}));\n\n    _getRangeToRender(): [number, number, number, number] {\n      const { itemCount, overscanCount } = this.props;\n      const { isScrolling, scrollDirection, scrollOffset } = this.state;\n\n      if (itemCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      const startIndex = getStartIndexForOffset(\n        this.props,\n        scrollOffset,\n        this._instanceProps\n      );\n      const stopIndex = getStopIndexForStartIndex(\n        this.props,\n        startIndex,\n        scrollOffset,\n        this._instanceProps\n      );\n\n      // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n      const overscanBackward =\n        !isScrolling || scrollDirection === 'backward'\n          ? Math.max(1, overscanCount)\n          : 1;\n      const overscanForward =\n        !isScrolling || scrollDirection === 'forward'\n          ? Math.max(1, overscanCount)\n          : 1;\n\n      return [\n        Math.max(0, startIndex - overscanBackward),\n        Math.max(0, Math.min(itemCount - 1, stopIndex + overscanForward)),\n        startIndex,\n        stopIndex,\n      ];\n    }\n\n    _onScrollHorizontal = (event: ScrollEvent): void => {\n      const { clientWidth, scrollLeft, scrollWidth } = event.currentTarget;\n      this.setState(prevState => {\n        if (prevState.scrollOffset === scrollLeft) {\n          // Scroll position may have been updated by cDM/cDU,\n          // In which case we don't need to trigger another render,\n          // And we don't want to update state.isScrolling.\n          return null;\n        }\n\n        const { direction } = this.props;\n\n        let scrollOffset = scrollLeft;\n        if (direction === 'rtl') {\n          // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n          // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n          // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.\n          // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.\n          switch (getRTLOffsetType()) {\n            case 'negative':\n              scrollOffset = -scrollLeft;\n              break;\n            case 'positive-descending':\n              scrollOffset = scrollWidth - clientWidth - scrollLeft;\n              break;\n          }\n        }\n\n        // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n        scrollOffset = Math.max(\n          0,\n          Math.min(scrollOffset, scrollWidth - clientWidth)\n        );\n\n        return {\n          isScrolling: true,\n          scrollDirection:\n            prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n          scrollOffset,\n          scrollUpdateWasRequested: false,\n        };\n      }, this._resetIsScrollingDebounced);\n    };\n\n    _onScrollVertical = (event: ScrollEvent): void => {\n      const { clientHeight, scrollHeight, scrollTop } = event.currentTarget;\n      this.setState(prevState => {\n        if (prevState.scrollOffset === scrollTop) {\n          // Scroll position may have been updated by cDM/cDU,\n          // In which case we don't need to trigger another render,\n          // And we don't want to update state.isScrolling.\n          return null;\n        }\n\n        // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n        const scrollOffset = Math.max(\n          0,\n          Math.min(scrollTop, scrollHeight - clientHeight)\n        );\n\n        return {\n          isScrolling: true,\n          scrollDirection:\n            prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n          scrollOffset,\n          scrollUpdateWasRequested: false,\n        };\n      }, this._resetIsScrollingDebounced);\n    };\n\n    _outerRefSetter = (ref: any): void => {\n      const { outerRef } = this.props;\n\n      this._outerRef = ((ref: any): HTMLDivElement);\n\n      if (typeof outerRef === 'function') {\n        outerRef(ref);\n      } else if (\n        outerRef != null &&\n        typeof outerRef === 'object' &&\n        outerRef.hasOwnProperty('current')\n      ) {\n        outerRef.current = ref;\n      }\n    };\n\n    _resetIsScrollingDebounced = () => {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n\n      this._resetIsScrollingTimeoutId = requestTimeout(\n        this._resetIsScrolling,\n        IS_SCROLLING_DEBOUNCE_INTERVAL\n      );\n    };\n\n    _resetIsScrolling = () => {\n      this._resetIsScrollingTimeoutId = null;\n\n      this.setState({ isScrolling: false }, () => {\n        // Clear style cache after state update has been committed.\n        // This way we don't break pure sCU for items that don't use isScrolling param.\n        this._getItemStyleCache(-1, null);\n      });\n    };\n  };\n}\n\n// NOTE: I considered further wrapping individual items with a pure ListItem component.\n// This would avoid ever calling the render function for the same index more than once,\n// But it would also add the overhead of a lot of components/fibers.\n// I assume people already do this (render function returning a class component),\n// So my doing it would just unnecessarily double the wrappers.\n\nconst validateSharedProps = (\n  {\n    children,\n    direction,\n    height,\n    layout,\n    innerTagName,\n    outerTagName,\n    width,\n  }: Props<any>,\n  { instance }: State\n): void => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (innerTagName != null || outerTagName != null) {\n      if (devWarningsTagName && !devWarningsTagName.has(instance)) {\n        devWarningsTagName.add(instance);\n        console.warn(\n          'The innerTagName and outerTagName props have been deprecated. ' +\n            'Please use the innerElementType and outerElementType props instead.'\n        );\n      }\n    }\n\n    // TODO Deprecate direction \"horizontal\"\n    const isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n\n    switch (direction) {\n      case 'horizontal':\n      case 'vertical':\n        if (devWarningsDirection && !devWarningsDirection.has(instance)) {\n          devWarningsDirection.add(instance);\n          console.warn(\n            'The direction prop should be either \"ltr\" (default) or \"rtl\". ' +\n              'Please use the layout prop to specify \"vertical\" (default) or \"horizontal\" orientation.'\n          );\n        }\n        break;\n      case 'ltr':\n      case 'rtl':\n        // Valid values\n        break;\n      default:\n        throw Error(\n          'An invalid \"direction\" prop has been specified. ' +\n            'Value should be either \"ltr\" or \"rtl\". ' +\n            `\"${direction}\" was specified.`\n        );\n    }\n\n    switch (layout) {\n      case 'horizontal':\n      case 'vertical':\n        // Valid values\n        break;\n      default:\n        throw Error(\n          'An invalid \"layout\" prop has been specified. ' +\n            'Value should be either \"horizontal\" or \"vertical\". ' +\n            `\"${layout}\" was specified.`\n        );\n    }\n\n    if (children == null) {\n      throw Error(\n        'An invalid \"children\" prop has been specified. ' +\n          'Value should be a React component. ' +\n          `\"${children === null ? 'null' : typeof children}\" was specified.`\n      );\n    }\n\n    if (isHorizontal && typeof width !== 'number') {\n      throw Error(\n        'An invalid \"width\" prop has been specified. ' +\n          'Horizontal lists must specify a number for width. ' +\n          `\"${width === null ? 'null' : typeof width}\" was specified.`\n      );\n    } else if (!isHorizontal && typeof height !== 'number') {\n      throw Error(\n        'An invalid \"height\" prop has been specified. ' +\n          'Vertical lists must specify a number for height. ' +\n          `\"${height === null ? 'null' : typeof height}\" was specified.`\n      );\n    }\n  }\n};\n","// @flow\n\nimport createListComponent from './createListComponent';\n\nimport type { Props, ScrollToAlign } from './createListComponent';\n\nconst DEFAULT_ESTIMATED_ITEM_SIZE = 50;\n\ntype VariableSizeProps = {|\n  estimatedItemSize: number,\n  ...Props<any>,\n|};\n\ntype itemSizeGetter = (index: number) => number;\n\ntype ItemMetadata = {|\n  offset: number,\n  size: number,\n|};\ntype InstanceProps = {|\n  itemMetadataMap: { [index: number]: ItemMetadata },\n  estimatedItemSize: number,\n  lastMeasuredIndex: number,\n|};\n\nconst getItemMetadata = (\n  props: Props<any>,\n  index: number,\n  instanceProps: InstanceProps\n): ItemMetadata => {\n  const { itemSize } = ((props: any): VariableSizeProps);\n  const { itemMetadataMap, lastMeasuredIndex } = instanceProps;\n\n  if (index > lastMeasuredIndex) {\n    let offset = 0;\n    if (lastMeasuredIndex >= 0) {\n      const itemMetadata = itemMetadataMap[lastMeasuredIndex];\n      offset = itemMetadata.offset + itemMetadata.size;\n    }\n\n    for (let i = lastMeasuredIndex + 1; i <= index; i++) {\n      let size = ((itemSize: any): itemSizeGetter)(i);\n\n      itemMetadataMap[i] = {\n        offset,\n        size,\n      };\n\n      offset += size;\n    }\n\n    instanceProps.lastMeasuredIndex = index;\n  }\n\n  return itemMetadataMap[index];\n};\n\nconst findNearestItem = (\n  props: Props<any>,\n  instanceProps: InstanceProps,\n  offset: number\n) => {\n  const { itemMetadataMap, lastMeasuredIndex } = instanceProps;\n\n  const lastMeasuredItemOffset =\n    lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;\n\n  if (lastMeasuredItemOffset >= offset) {\n    // If we've already measured items within this range just use a binary search as it's faster.\n    return findNearestItemBinarySearch(\n      props,\n      instanceProps,\n      lastMeasuredIndex,\n      0,\n      offset\n    );\n  } else {\n    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.\n    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.\n    // The overall complexity for this approach is O(log n).\n    return findNearestItemExponentialSearch(\n      props,\n      instanceProps,\n      Math.max(0, lastMeasuredIndex),\n      offset\n    );\n  }\n};\n\nconst findNearestItemBinarySearch = (\n  props: Props<any>,\n  instanceProps: InstanceProps,\n  high: number,\n  low: number,\n  offset: number\n): number => {\n  while (low <= high) {\n    const middle = low + Math.floor((high - low) / 2);\n    const currentOffset = getItemMetadata(props, middle, instanceProps).offset;\n\n    if (currentOffset === offset) {\n      return middle;\n    } else if (currentOffset < offset) {\n      low = middle + 1;\n    } else if (currentOffset > offset) {\n      high = middle - 1;\n    }\n  }\n\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\n\nconst findNearestItemExponentialSearch = (\n  props: Props<any>,\n  instanceProps: InstanceProps,\n  index: number,\n  offset: number\n): number => {\n  const { itemCount } = props;\n  let interval = 1;\n\n  while (\n    index < itemCount &&\n    getItemMetadata(props, index, instanceProps).offset < offset\n  ) {\n    index += interval;\n    interval *= 2;\n  }\n\n  return findNearestItemBinarySearch(\n    props,\n    instanceProps,\n    Math.min(index, itemCount - 1),\n    Math.floor(index / 2),\n    offset\n  );\n};\n\nconst getEstimatedTotalSize = (\n  { itemCount }: Props<any>,\n  { itemMetadataMap, estimatedItemSize, lastMeasuredIndex }: InstanceProps\n) => {\n  let totalSizeOfMeasuredItems = 0;\n\n  // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n  if (lastMeasuredIndex >= itemCount) {\n    lastMeasuredIndex = itemCount - 1;\n  }\n\n  if (lastMeasuredIndex >= 0) {\n    const itemMetadata = itemMetadataMap[lastMeasuredIndex];\n    totalSizeOfMeasuredItems = itemMetadata.offset + itemMetadata.size;\n  }\n\n  const numUnmeasuredItems = itemCount - lastMeasuredIndex - 1;\n  const totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedItemSize;\n\n  return totalSizeOfMeasuredItems + totalSizeOfUnmeasuredItems;\n};\n\nconst VariableSizeList = createListComponent({\n  getItemOffset: (\n    props: Props<any>,\n    index: number,\n    instanceProps: InstanceProps\n  ): number => getItemMetadata(props, index, instanceProps).offset,\n\n  getItemSize: (\n    props: Props<any>,\n    index: number,\n    instanceProps: InstanceProps\n  ): number => instanceProps.itemMetadataMap[index].size,\n\n  getEstimatedTotalSize,\n\n  getOffsetForIndexAndAlignment: (\n    props: Props<any>,\n    index: number,\n    align: ScrollToAlign,\n    scrollOffset: number,\n    instanceProps: InstanceProps,\n    scrollbarSize: number\n  ): number => {\n    const { direction, height, layout, width } = props;\n\n    // TODO Deprecate direction \"horizontal\"\n    const isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    const size = (((isHorizontal ? width : height): any): number);\n    const itemMetadata = getItemMetadata(props, index, instanceProps);\n\n    // Get estimated total size after ItemMetadata is computed,\n    // To ensure it reflects actual measurements instead of just estimates.\n    const estimatedTotalSize = getEstimatedTotalSize(props, instanceProps);\n\n    const maxOffset = Math.max(\n      0,\n      Math.min(estimatedTotalSize - size, itemMetadata.offset)\n    );\n    const minOffset = Math.max(\n      0,\n      itemMetadata.offset - size + itemMetadata.size + scrollbarSize\n    );\n\n    if (align === 'smart') {\n      if (\n        scrollOffset >= minOffset - size &&\n        scrollOffset <= maxOffset + size\n      ) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n      case 'end':\n        return minOffset;\n      case 'center':\n        return Math.round(minOffset + (maxOffset - minOffset) / 2);\n      case 'auto':\n      default:\n        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n          return scrollOffset;\n        } else if (scrollOffset < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n    }\n  },\n\n  getStartIndexForOffset: (\n    props: Props<any>,\n    offset: number,\n    instanceProps: InstanceProps\n  ): number => findNearestItem(props, instanceProps, offset),\n\n  getStopIndexForStartIndex: (\n    props: Props<any>,\n    startIndex: number,\n    scrollOffset: number,\n    instanceProps: InstanceProps\n  ): number => {\n    const { direction, height, itemCount, layout, width } = props;\n\n    // TODO Deprecate direction \"horizontal\"\n    const isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    const size = (((isHorizontal ? width : height): any): number);\n    const itemMetadata = getItemMetadata(props, startIndex, instanceProps);\n    const maxOffset = scrollOffset + size;\n\n    let offset = itemMetadata.offset + itemMetadata.size;\n    let stopIndex = startIndex;\n\n    while (stopIndex < itemCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata(props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n\n  initInstanceProps(props: Props<any>, instance: any): InstanceProps {\n    const { estimatedItemSize } = ((props: any): VariableSizeProps);\n\n    const instanceProps = {\n      itemMetadataMap: {},\n      estimatedItemSize: estimatedItemSize || DEFAULT_ESTIMATED_ITEM_SIZE,\n      lastMeasuredIndex: -1,\n    };\n\n    instance.resetAfterIndex = (\n      index: number,\n      shouldForceUpdate?: boolean = true\n    ) => {\n      instanceProps.lastMeasuredIndex = Math.min(\n        instanceProps.lastMeasuredIndex,\n        index - 1\n      );\n\n      // We could potentially optimize further by only evicting styles after this index,\n      // But since styles are only cached while scrolling is in progress-\n      // It seems an unnecessary optimization.\n      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.\n      instance._getItemStyleCache(-1);\n\n      if (shouldForceUpdate) {\n        instance.forceUpdate();\n      }\n    };\n\n    return instanceProps;\n  },\n\n  shouldResetStyleCacheOnItemSizeChange: false,\n\n  validateProps: ({ itemSize }: Props<any>): void => {\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof itemSize !== 'function') {\n        throw Error(\n          'An invalid \"itemSize\" prop has been specified. ' +\n            'Value should be a function. ' +\n            `\"${itemSize === null ? 'null' : typeof itemSize}\" was specified.`\n        );\n      }\n    }\n  },\n});\n\nexport default VariableSizeList;\n","import Constants from './DataArray/Constants.js';\nimport { n as newInstance$1, a as newTypedArray, b as newTypedArrayFrom, o as obj, s as set, c as macro } from '../../macros2.js';\nimport { n as norm } from './Math/index.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\nconst {\n  DefaultDataType\n} = Constants;\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\nconst EPSILON = 1e-6;\n\n// Original source from https://www.npmjs.com/package/compute-range\n// Modified to accept type arrays\nfunction fastComputeRange(arr, offset, numberOfComponents) {\n  const len = arr.length;\n  let min = Number.MAX_VALUE;\n  let max = -Number.MAX_VALUE;\n  let x;\n  let i;\n\n  // find first non-NaN value\n  for (i = offset; i < len; i += numberOfComponents) {\n    if (!Number.isNaN(arr[i])) {\n      min = arr[i];\n      max = min;\n      break;\n    }\n  }\n  for (; i < len; i += numberOfComponents) {\n    x = arr[i];\n    if (x < min) {\n      min = x;\n    } else if (x > max) {\n      max = x;\n    }\n  }\n  return {\n    min,\n    max\n  };\n}\n\n/**\n * @deprecated please use fastComputeRange instead\n */\nfunction createRangeHelper() {\n  let min = Number.MAX_VALUE;\n  let max = -Number.MAX_VALUE;\n  let count = 0;\n  let sum = 0;\n  return {\n    add(value) {\n      if (min > value) {\n        min = value;\n      }\n      if (max < value) {\n        max = value;\n      }\n      count++;\n      sum += value;\n    },\n    get() {\n      return {\n        min,\n        max,\n        count,\n        sum,\n        mean: sum / count\n      };\n    },\n    getRange() {\n      return {\n        min,\n        max\n      };\n    }\n  };\n}\nfunction computeRange(values) {\n  let component = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  let numberOfComponents = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  if (component < 0 && numberOfComponents > 1) {\n    // Compute magnitude\n    const size = values.length;\n    const numberOfValues = size / numberOfComponents;\n    const data = new Float64Array(numberOfValues);\n    for (let i = 0, j = 0; i < numberOfValues; ++i) {\n      for (let nextJ = j + numberOfComponents; j < nextJ; ++j) {\n        data[i] += values[j] * values[j];\n      }\n      data[i] **= 0.5;\n    }\n    return fastComputeRange(data, 0, 1);\n  }\n  return fastComputeRange(values, component < 0 ? 0 : component, numberOfComponents);\n}\nfunction ensureRangeSize(rangeArray) {\n  let size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  const ranges = rangeArray || [];\n  // Pad ranges with null value to get the\n  while (ranges.length <= size) {\n    ranges.push(null);\n  }\n  return ranges;\n}\nfunction getDataType(typedArray) {\n  // Expects toString() to return \"[object ...Array]\"\n  return Object.prototype.toString.call(typedArray).slice(8, -1);\n}\nfunction getMaxNorm(normArray) {\n  const numComps = normArray.getNumberOfComponents();\n  let maxNorm = 0.0;\n  const tuple = new Array(numComps);\n  for (let i = 0; i < normArray.getNumberOfTuples(); ++i) {\n    normArray.getTuple(i, tuple);\n    const norm$1 = norm(tuple, numComps);\n    if (norm$1 > maxNorm) {\n      maxNorm = norm$1;\n    }\n  }\n  return maxNorm;\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  computeRange,\n  createRangeHelper,\n  fastComputeRange,\n  getDataType,\n  getMaxNorm\n};\n\n// ----------------------------------------------------------------------------\n// vtkDataArray methods\n// ----------------------------------------------------------------------------\n\nfunction vtkDataArray(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkDataArray');\n\n  /**\n   * Resize model.values and copy the old values to the new array.\n   * @param {Number} requestedNumTuples Final expected number of tuples; must be >= 0\n   * @returns {Boolean} True if a resize occured, false otherwise\n   */\n  function resize(requestedNumTuples) {\n    if (requestedNumTuples < 0) {\n      return false;\n    }\n    const numComps = publicAPI.getNumberOfComponents();\n    const numAllocatedTuples = model.values.length / (numComps > 0 ? numComps : 1);\n    if (requestedNumTuples === numAllocatedTuples) {\n      return true;\n    }\n    if (requestedNumTuples > numAllocatedTuples) {\n      // Requested size is bigger than current size.  Allocate enough\n      // memory to fit the requested size and be more than double the\n      // currently allocated memory.\n      const oldValues = model.values;\n      model.values = newTypedArray(model.dataType, (requestedNumTuples + numAllocatedTuples) * numComps);\n      model.values.set(oldValues);\n      // The actual number of tuples is not increased, only memory is allocated.\n      return true;\n    }\n\n    // Requested size is smaller than currently allocated size\n    if (model.size > requestedNumTuples * numComps) {\n      model.size = requestedNumTuples * numComps;\n      publicAPI.dataChange();\n    }\n    return true;\n  }\n  publicAPI.dataChange = () => {\n    model.ranges = null;\n    publicAPI.modified();\n  };\n  publicAPI.allocate = extraNumTuples => {\n    resize(publicAPI.getNumberOfTuples() + extraNumTuples);\n  };\n  publicAPI.resize = requestedNumTuples => {\n    resize(requestedNumTuples);\n    const newSize = requestedNumTuples * publicAPI.getNumberOfComponents();\n    if (model.size !== newSize) {\n      model.size = newSize;\n      publicAPI.dataChange();\n      return true;\n    }\n    return false;\n  };\n\n  // Restore the array to initial state\n  publicAPI.initialize = () => {\n    publicAPI.resize(0);\n    return publicAPI;\n  };\n  publicAPI.getElementComponentSize = () => model.values.BYTES_PER_ELEMENT;\n\n  // Description:\n  // Return the data component at the location specified by tupleIdx and\n  // compIdx.\n  publicAPI.getComponent = function (tupleIdx) {\n    let compIdx = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    return model.values[tupleIdx * model.numberOfComponents + compIdx];\n  };\n\n  // Description:\n  // Set the data component at the location specified by tupleIdx and compIdx\n  // to value.\n  // Note that i is less than NumberOfTuples and j is less than\n  //  NumberOfComponents. Make sure enough memory has been allocated\n  // (use SetNumberOfTuples() and SetNumberOfComponents()).\n  publicAPI.setComponent = (tupleIdx, compIdx, value) => {\n    if (value !== model.values[tupleIdx * model.numberOfComponents + compIdx]) {\n      model.values[tupleIdx * model.numberOfComponents + compIdx] = value;\n      publicAPI.dataChange();\n    }\n  };\n  publicAPI.getValue = valueIdx => {\n    const idx = valueIdx / model.numberOfComponents;\n    const comp = valueIdx % model.numberOfComponents;\n    return publicAPI.getComponent(idx, comp);\n  };\n  publicAPI.setValue = (valueIdx, value) => {\n    const idx = valueIdx / model.numberOfComponents;\n    const comp = valueIdx % model.numberOfComponents;\n    publicAPI.setComponent(idx, comp, value);\n  };\n  publicAPI.getData = () => model.size === model.values.length ? model.values : model.values.subarray(0, model.size);\n  publicAPI.getRange = function () {\n    let componentIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : -1;\n    let rangeIdx = componentIndex;\n    if (rangeIdx < 0) {\n      // If scalar data, then store in slot 0 (same as componentIndex = 0).\n      // If vector data, then store in last slot.\n      rangeIdx = model.numberOfComponents === 1 ? 0 : model.numberOfComponents;\n    }\n    let range = null;\n    if (!model.ranges) {\n      model.ranges = ensureRangeSize(model.ranges, model.numberOfComponents);\n    }\n    range = model.ranges[rangeIdx];\n    if (range) {\n      model.rangeTuple[0] = range.min;\n      model.rangeTuple[1] = range.max;\n      return model.rangeTuple;\n    }\n\n    // Need to compute ranges...\n    range = computeRange(publicAPI.getData(), componentIndex, model.numberOfComponents);\n    model.ranges[rangeIdx] = range;\n    model.rangeTuple[0] = range.min;\n    model.rangeTuple[1] = range.max;\n    return model.rangeTuple;\n  };\n  publicAPI.setRange = (rangeValue, componentIndex) => {\n    if (!model.ranges) {\n      model.ranges = ensureRangeSize(model.ranges, model.numberOfComponents);\n    }\n    const range = {\n      min: rangeValue.min,\n      max: rangeValue.max\n    };\n    model.ranges[componentIndex] = range;\n    model.rangeTuple[0] = range.min;\n    model.rangeTuple[1] = range.max;\n    return model.rangeTuple;\n  };\n  publicAPI.getRanges = function () {\n    let computeRanges = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (!computeRanges) {\n      return structuredClone(model.ranges);\n    }\n    /** @type {import('../../../interfaces').vtkRange[]} */\n    const ranges = [];\n    for (let i = 0; i < model.numberOfComponents; i++) {\n      const [min, max] = publicAPI.getRange(i);\n      /** @type {import('../../../interfaces').vtkRange} */\n      const range = {\n        min,\n        max\n      };\n      ranges.push(range);\n    }\n    // where the number of components is greater than 1, the last element in\n    // the range array is the min,max magnitude of the entire dataset.\n    if (model.numberOfComponents > 1) {\n      const [min, max] = publicAPI.getRange(-1);\n      /** @type {import('../../../interfaces').vtkRange} */\n      const range = {\n        min,\n        max\n      };\n      ranges.push(range);\n    }\n    return ranges;\n  };\n  publicAPI.setTuple = (idx, tuple) => {\n    const offset = idx * model.numberOfComponents;\n    for (let i = 0; i < model.numberOfComponents; i++) {\n      model.values[offset + i] = tuple[i];\n    }\n  };\n  publicAPI.setTuples = (idx, tuples) => {\n    let i = idx * model.numberOfComponents;\n    const last = Math.min(tuples.length, model.size - i);\n    for (let j = 0; j < last;) {\n      model.values[i++] = tuples[j++];\n    }\n  };\n  publicAPI.insertTuple = (idx, tuple) => {\n    if (model.size <= idx * model.numberOfComponents) {\n      model.size = (idx + 1) * model.numberOfComponents;\n      resize(idx + 1);\n    }\n    publicAPI.setTuple(idx, tuple);\n    return idx;\n  };\n  publicAPI.insertTuples = (idx, tuples) => {\n    const end = idx + tuples.length / model.numberOfComponents;\n    if (model.size < end * model.numberOfComponents) {\n      model.size = end * model.numberOfComponents;\n      resize(end);\n    }\n    publicAPI.setTuples(idx, tuples);\n    return end;\n  };\n  publicAPI.insertNextTuple = tuple => {\n    const idx = model.size / model.numberOfComponents;\n    return publicAPI.insertTuple(idx, tuple);\n  };\n  publicAPI.insertNextTuples = tuples => {\n    const idx = model.size / model.numberOfComponents;\n    return publicAPI.insertTuples(idx, tuples);\n  };\n  publicAPI.findTuple = function (tuple) {\n    let precision = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : EPSILON;\n    for (let i = 0; i < model.size; i += model.numberOfComponents) {\n      if (Math.abs(tuple[0] - model.values[i]) <= precision) {\n        let match = true;\n        for (let j = 1; j < model.numberOfComponents; ++j) {\n          if (Math.abs(tuple[j] - model.values[i + j]) > precision) {\n            match = false;\n            break;\n          }\n        }\n        if (match) {\n          return i / model.numberOfComponents;\n        }\n      }\n    }\n    return -1;\n  };\n  publicAPI.getTuple = function (idx) {\n    let tupleToFill = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    const numberOfComponents = model.numberOfComponents || 1;\n    const offset = idx * numberOfComponents;\n    // Check most common component sizes first\n    // to avoid doing a for loop if possible\n    switch (numberOfComponents) {\n      case 4:\n        tupleToFill[3] = model.values[offset + 3];\n      // eslint-disable-next-line no-fallthrough\n      case 3:\n        tupleToFill[2] = model.values[offset + 2];\n      // eslint-disable-next-line no-fallthrough\n      case 2:\n        tupleToFill[1] = model.values[offset + 1];\n      // eslint-disable-next-line no-fallthrough\n      case 1:\n        tupleToFill[0] = model.values[offset];\n        break;\n      default:\n        for (let i = numberOfComponents - 1; i >= 0; --i) {\n          tupleToFill[i] = model.values[offset + i];\n        }\n    }\n    return tupleToFill;\n  };\n  publicAPI.getTuples = (fromId, toId) => {\n    const from = (fromId ?? 0) * model.numberOfComponents;\n    const to = (toId ?? publicAPI.getNumberOfTuples()) * model.numberOfComponents;\n    const arr = publicAPI.getData().subarray(from, to);\n    return arr.length > 0 ? arr : null;\n  };\n  publicAPI.getTupleLocation = function () {\n    let idx = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    return idx * model.numberOfComponents;\n  };\n  publicAPI.getNumberOfComponents = () => model.numberOfComponents;\n  publicAPI.getNumberOfValues = () => model.size;\n  publicAPI.getNumberOfTuples = () => model.size / model.numberOfComponents;\n  publicAPI.getDataType = () => model.dataType;\n  /* eslint-disable no-use-before-define */\n  publicAPI.newClone = () => newInstance({\n    empty: true,\n    name: model.name,\n    dataType: model.dataType,\n    numberOfComponents: model.numberOfComponents\n  });\n  /* eslint-enable no-use-before-define */\n\n  publicAPI.getName = () => {\n    if (!model.name) {\n      publicAPI.modified();\n      model.name = `vtkDataArray${publicAPI.getMTime()}`;\n    }\n    return model.name;\n  };\n  publicAPI.setData = (typedArray, numberOfComponents) => {\n    model.values = typedArray;\n    model.size = typedArray.length;\n    model.dataType = getDataType(typedArray);\n    if (numberOfComponents) {\n      model.numberOfComponents = numberOfComponents;\n    }\n    if (model.size % model.numberOfComponents !== 0) {\n      model.numberOfComponents = 1;\n    }\n    publicAPI.dataChange();\n  };\n\n  // Override serialization support\n  publicAPI.getState = () => {\n    if (model.deleted) {\n      return null;\n    }\n    const jsonArchive = {\n      ...model,\n      vtkClass: publicAPI.getClassName()\n    };\n\n    // Convert typed array to regular array\n    jsonArchive.values = Array.from(jsonArchive.values);\n    delete jsonArchive.buffer;\n\n    // Clean any empty data\n    Object.keys(jsonArchive).forEach(keyName => {\n      if (!jsonArchive[keyName]) {\n        delete jsonArchive[keyName];\n      }\n    });\n\n    // Sort resulting object by key name\n    const sortedObj = {};\n    Object.keys(jsonArchive).sort().forEach(name => {\n      sortedObj[name] = jsonArchive[name];\n    });\n\n    // Remove mtime\n    if (sortedObj.mtime) {\n      delete sortedObj.mtime;\n    }\n    return sortedObj;\n  };\n\n  /**\n   * @param {import(\"./index\").vtkDataArray} other\n   */\n  publicAPI.deepCopy = other => {\n    // Retain current dataType and array reference before shallowCopy call.\n    const currentType = publicAPI.getDataType();\n    const currentArray = model.values;\n    publicAPI.shallowCopy(other);\n\n    // set the ranges\n    model.ranges = structuredClone(other.getRanges());\n\n    // Avoid array reallocation if size already sufficient\n    // and dataTypes match.\n    if (currentArray?.length >= other.getNumberOfValues() && currentType === other.getDataType()) {\n      currentArray.set(other.getData());\n      model.values = currentArray;\n      publicAPI.dataChange();\n    } else {\n      publicAPI.setData(other.getData().slice());\n    }\n  };\n  publicAPI.interpolateTuple = (idx, source1, source1Idx, source2, source2Idx, t) => {\n    const numberOfComponents = model.numberOfComponents || 1;\n    if (numberOfComponents !== source1.getNumberOfComponents() || numberOfComponents !== source2.getNumberOfComponents()) {\n      vtkErrorMacro('numberOfComponents must match');\n    }\n    const tuple1 = source1.getTuple(source1Idx);\n    const tuple2 = source2.getTuple(source2Idx);\n    const out = [];\n    out.length = numberOfComponents;\n\n    // Check most common component sizes first\n    // to avoid doing a for loop if possible\n    switch (numberOfComponents) {\n      case 4:\n        out[3] = tuple1[3] + (tuple2[3] - tuple1[3]) * t;\n      // eslint-disable-next-line no-fallthrough\n      case 3:\n        out[2] = tuple1[2] + (tuple2[2] - tuple1[2]) * t;\n      // eslint-disable-next-line no-fallthrough\n      case 2:\n        out[1] = tuple1[1] + (tuple2[1] - tuple1[1]) * t;\n      // eslint-disable-next-line no-fallthrough\n      case 1:\n        out[0] = tuple1[0] + (tuple2[0] - tuple1[0]) * t;\n        break;\n      default:\n        for (let i = 0; i < numberOfComponents; i++) {\n          out[i] = tuple1[i] + (tuple2[i] - tuple1[i]) * t;\n        }\n    }\n    return publicAPI.insertTuple(idx, out);\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n// size: The current size of the dataArray.\n// NOTE: The underlying typed array may be larger than 'size'.\nconst DEFAULT_VALUES = {\n  name: '',\n  numberOfComponents: 1,\n  dataType: DefaultDataType,\n  rangeTuple: [0, 0]\n  // size: undefined,\n  // values: null,\n  // ranges: null,\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  if (Array.isArray(initialValues.values) && initialValues.dataType === undefined) {\n    console.warn('vtkDataArray.newInstance: no dataType provided, converting to Float32Array');\n  }\n  if (!model.empty && !model.values && !model.size) {\n    throw new TypeError('Cannot create vtkDataArray object without: size > 0, values');\n  }\n  if (!model.values) {\n    model.values = newTypedArray(model.dataType, model.size);\n  } else if (Array.isArray(model.values)) {\n    model.values = newTypedArrayFrom(model.dataType, model.values);\n  }\n  if (model.values) {\n    // Takes the size if provided (can be lower than `model.values`) otherwise the actual length of `values`.\n    model.size = model.size ?? model.values.length;\n    model.dataType = getDataType(model.values);\n  }\n\n  // Object methods\n  obj(publicAPI, model);\n  set(publicAPI, model, ['name', 'numberOfComponents']);\n  if (model.size % model.numberOfComponents !== 0) {\n    throw new RangeError('model.size is not a multiple of model.numberOfComponents');\n  }\n\n  // Object specific methods\n  vtkDataArray(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkDataArray');\n\n// ----------------------------------------------------------------------------\n\nvar vtkDataArray$1 = {\n  newInstance,\n  extend,\n  ...STATIC,\n  ...Constants\n};\n\nexport { STATIC, vtkDataArray$1 as default, extend, newInstance };\n","const DataTypeByteSize = {\n  Int8Array: 1,\n  Uint8Array: 1,\n  Uint8ClampedArray: 1,\n  Int16Array: 2,\n  Uint16Array: 2,\n  Int32Array: 4,\n  Uint32Array: 4,\n  Float32Array: 4,\n  Float64Array: 8\n};\nconst VtkDataTypes = {\n  VOID: '',\n  // not sure to know what that should be\n  CHAR: 'Int8Array',\n  SIGNED_CHAR: 'Int8Array',\n  UNSIGNED_CHAR: 'Uint8Array',\n  UNSIGNED_CHAR_CLAMPED: 'Uint8ClampedArray',\n  // should be used for VTK.js internal purpose only\n  SHORT: 'Int16Array',\n  UNSIGNED_SHORT: 'Uint16Array',\n  INT: 'Int32Array',\n  UNSIGNED_INT: 'Uint32Array',\n  FLOAT: 'Float32Array',\n  DOUBLE: 'Float64Array'\n};\nconst DefaultDataType = VtkDataTypes.FLOAT;\nvar Constants = {\n  DefaultDataType,\n  DataTypeByteSize,\n  VtkDataTypes\n};\n\nexport { DataTypeByteSize, DefaultDataType, VtkDataTypes, Constants as default };\n","const IDENTITY = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\nconst IDENTITY_3X3 = [1, 0, 0, 0, 1, 0, 0, 0, 1];\nconst EPSILON = 1e-6;\nconst VTK_SMALL_NUMBER = 1.0e-12;\nvar Constants = {\n  IDENTITY,\n  IDENTITY_3X3,\n  EPSILON,\n  VTK_SMALL_NUMBER\n};\n\nexport { EPSILON, IDENTITY, IDENTITY_3X3, VTK_SMALL_NUMBER, Constants as default };\n","import seedrandom from 'seedrandom';\nimport { m as macro } from '../../../macros2.js';\nimport { IDENTITY, IDENTITY_3X3, VTK_SMALL_NUMBER, EPSILON } from './Constants.js';\n\nconst {\n  vtkErrorMacro,\n  vtkWarningMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n/* eslint-disable camelcase                                                  */\n/* eslint-disable no-cond-assign                                             */\n/* eslint-disable no-bitwise                                                 */\n/* eslint-disable no-multi-assign                                            */\n// ----------------------------------------------------------------------------\nlet randomSeedValue = 0;\nconst VTK_MAX_ROTATIONS = 20;\nfunction notImplemented(method) {\n  return () => vtkErrorMacro(`vtkMath::${method} - NOT IMPLEMENTED`);\n}\n\n// Swap rows for n by n matrix\nfunction swapRowsMatrix_nxn(matrix, n, row1, row2) {\n  let tmp;\n  for (let i = 0; i < n; i++) {\n    tmp = matrix[row1 * n + i];\n    matrix[row1 * n + i] = matrix[row2 * n + i];\n    matrix[row2 * n + i] = tmp;\n  }\n}\n\n// Swap columns for n by n matrix\nfunction swapColumnsMatrix_nxn(matrix, n, column1, column2) {\n  let tmp;\n  for (let i = 0; i < n; i++) {\n    tmp = matrix[i * n + column1];\n    matrix[i * n + column1] = matrix[i * n + column2];\n    matrix[i * n + column2] = tmp;\n  }\n}\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nfunction createArray() {\n  let size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 3;\n  // faster than Array.from and/or while loop\n  const res = Array(size);\n  for (let i = 0; i < size; ++i) {\n    res[i] = 0;\n  }\n  return res;\n}\nconst Pi = () => Math.PI;\nfunction ldexp(x, exponent) {\n  if (exponent > 1023) {\n    return x * 2 ** 1023 * 2 ** (exponent - 1023);\n  }\n  if (exponent < -1074) {\n    return x * 2 ** -1074 * 2 ** (exponent + 1074);\n  }\n  return x * 2 ** exponent;\n}\nfunction radiansFromDegrees(deg) {\n  return deg / 180 * Math.PI;\n}\nfunction degreesFromRadians(rad) {\n  return rad * 180 / Math.PI;\n}\nconst {\n  round,\n  floor,\n  ceil,\n  min,\n  max\n} = Math;\nfunction arrayMin(arr) {\n  let offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  let stride = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  let minValue = Infinity;\n  for (let i = offset, len = arr.length; i < len; i += stride) {\n    if (arr[i] < minValue) {\n      minValue = arr[i];\n    }\n  }\n  return minValue;\n}\nfunction arrayMax(arr) {\n  let offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  let stride = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  let maxValue = -Infinity;\n  for (let i = offset, len = arr.length; i < len; i += stride) {\n    if (maxValue < arr[i]) {\n      maxValue = arr[i];\n    }\n  }\n  return maxValue;\n}\nfunction arrayRange(arr) {\n  let offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  let stride = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  let minValue = Infinity;\n  let maxValue = -Infinity;\n  for (let i = offset, len = arr.length; i < len; i += stride) {\n    if (arr[i] < minValue) {\n      minValue = arr[i];\n    }\n    if (maxValue < arr[i]) {\n      maxValue = arr[i];\n    }\n  }\n  return [minValue, maxValue];\n}\nconst ceilLog2 = notImplemented('ceilLog2');\nconst factorial = notImplemented('factorial');\nfunction nearestPowerOfTwo(xi) {\n  let v = 1;\n  while (v < xi) {\n    v *= 2;\n  }\n  return v;\n}\nfunction isPowerOfTwo(x) {\n  return x === nearestPowerOfTwo(x);\n}\nfunction binomial(m, n) {\n  let r = 1;\n  for (let i = 1; i <= n; ++i) {\n    r *= (m - i + 1) / i;\n  }\n  return Math.floor(r);\n}\nfunction beginCombination(m, n) {\n  if (m < n) {\n    return 0;\n  }\n  const r = createArray(n);\n  for (let i = 0; i < n; ++i) {\n    r[i] = i;\n  }\n  return r;\n}\nfunction nextCombination(m, n, r) {\n  let status = 0;\n  for (let i = n - 1; i >= 0; --i) {\n    if (r[i] < m - n + i) {\n      let j = r[i] + 1;\n      while (i < n) {\n        r[i++] = j++;\n      }\n      status = 1;\n      break;\n    }\n  }\n  return status;\n}\nfunction randomSeed(seed) {\n  seedrandom(`${seed}`, {\n    global: true\n  });\n  randomSeedValue = seed;\n}\nfunction getSeed() {\n  return randomSeedValue;\n}\nfunction random() {\n  let minValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  let maxValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  const delta = maxValue - minValue;\n  return minValue + delta * Math.random();\n}\nconst gaussian = notImplemented('gaussian');\n\n// Vect3 operations\nfunction add(a, b, out) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\nfunction subtract(a, b, out) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\nfunction multiplyScalar(vec, scalar) {\n  vec[0] *= scalar;\n  vec[1] *= scalar;\n  vec[2] *= scalar;\n  return vec;\n}\nfunction multiplyScalar2D(vec, scalar) {\n  vec[0] *= scalar;\n  vec[1] *= scalar;\n  return vec;\n}\nfunction multiplyAccumulate(a, b, scalar, out) {\n  out[0] = a[0] + b[0] * scalar;\n  out[1] = a[1] + b[1] * scalar;\n  out[2] = a[2] + b[2] * scalar;\n  return out;\n}\nfunction multiplyAccumulate2D(a, b, scalar, out) {\n  out[0] = a[0] + b[0] * scalar;\n  out[1] = a[1] + b[1] * scalar;\n  return out;\n}\nfunction dot(x, y) {\n  return x[0] * y[0] + x[1] * y[1] + x[2] * y[2];\n}\nfunction outer(x, y, out_3x3) {\n  out_3x3[0] = x[0] * y[0];\n  out_3x3[1] = x[0] * y[1];\n  out_3x3[2] = x[0] * y[2];\n  out_3x3[3] = x[1] * y[0];\n  out_3x3[4] = x[1] * y[1];\n  out_3x3[5] = x[1] * y[2];\n  out_3x3[6] = x[2] * y[0];\n  out_3x3[7] = x[2] * y[1];\n  out_3x3[8] = x[2] * y[2];\n}\nfunction cross(x, y, out) {\n  const Zx = x[1] * y[2] - x[2] * y[1];\n  const Zy = x[2] * y[0] - x[0] * y[2];\n  const Zz = x[0] * y[1] - x[1] * y[0];\n  out[0] = Zx;\n  out[1] = Zy;\n  out[2] = Zz;\n  return out;\n}\nfunction norm(x) {\n  let n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;\n  switch (n) {\n    case 1:\n      return Math.abs(x);\n    case 2:\n      return Math.sqrt(x[0] * x[0] + x[1] * x[1]);\n    case 3:\n      return Math.sqrt(x[0] * x[0] + x[1] * x[1] + x[2] * x[2]);\n    default:\n      {\n        let sum = 0;\n        for (let i = 0; i < n; i++) {\n          sum += x[i] * x[i];\n        }\n        return Math.sqrt(sum);\n      }\n  }\n}\nfunction normalize(x) {\n  const den = norm(x);\n  if (den !== 0.0) {\n    x[0] /= den;\n    x[1] /= den;\n    x[2] /= den;\n  }\n  return den;\n}\nfunction normalize4D(x) {\n  const den = norm(x, 3);\n  if (den !== 0.0) {\n    x[0] /= den;\n    x[1] /= den;\n    x[2] /= den;\n    x[3] /= den;\n  }\n  return den;\n}\nfunction perpendiculars(x, y, z, theta) {\n  const x2 = x[0] * x[0];\n  const y2 = x[1] * x[1];\n  const z2 = x[2] * x[2];\n  const r = Math.sqrt(x2 + y2 + z2);\n  let dx;\n  let dy;\n  let dz;\n\n  // transpose the vector to avoid divide-by-zero error\n  if (x2 > y2 && x2 > z2) {\n    dx = 0;\n    dy = 1;\n    dz = 2;\n  } else if (y2 > z2) {\n    dx = 1;\n    dy = 2;\n    dz = 0;\n  } else {\n    dx = 2;\n    dy = 0;\n    dz = 1;\n  }\n  const a = x[dx] / r;\n  const b = x[dy] / r;\n  const c = x[dz] / r;\n  const tmp = Math.sqrt(a * a + c * c);\n  if (theta !== 0) {\n    const sintheta = Math.sin(theta);\n    const costheta = Math.cos(theta);\n    if (y) {\n      y[dx] = (c * costheta - a * b * sintheta) / tmp;\n      y[dy] = sintheta * tmp;\n      y[dz] = (-(a * costheta) - b * c * sintheta) / tmp;\n    }\n    if (z) {\n      z[dx] = (-(c * sintheta) - a * b * costheta) / tmp;\n      z[dy] = costheta * tmp;\n      z[dz] = (a * sintheta - b * c * costheta) / tmp;\n    }\n  } else {\n    if (y) {\n      y[dx] = c / tmp;\n      y[dy] = 0;\n      y[dz] = -a / tmp;\n    }\n    if (z) {\n      z[dx] = -a * b / tmp;\n      z[dy] = tmp;\n      z[dz] = -b * c / tmp;\n    }\n  }\n}\nfunction projectVector(a, b, projection) {\n  const bSquared = dot(b, b);\n  if (bSquared === 0) {\n    projection[0] = 0;\n    projection[1] = 0;\n    projection[2] = 0;\n    return false;\n  }\n  const scale = dot(a, b) / bSquared;\n  for (let i = 0; i < 3; i++) {\n    projection[i] = b[i];\n  }\n  multiplyScalar(projection, scale);\n  return true;\n}\nfunction dot2D(x, y) {\n  return x[0] * y[0] + x[1] * y[1];\n}\nfunction projectVector2D(a, b, projection) {\n  const bSquared = dot2D(b, b);\n  if (bSquared === 0) {\n    projection[0] = 0;\n    projection[1] = 0;\n    return false;\n  }\n  const scale = dot2D(a, b) / bSquared;\n  for (let i = 0; i < 2; i++) {\n    projection[i] = b[i];\n  }\n  multiplyScalar2D(projection, scale);\n  return true;\n}\nfunction distance2BetweenPoints(x, y) {\n  return (x[0] - y[0]) * (x[0] - y[0]) + (x[1] - y[1]) * (x[1] - y[1]) + (x[2] - y[2]) * (x[2] - y[2]);\n}\nfunction angleBetweenVectors(v1, v2) {\n  const crossVect = [0, 0, 0];\n  cross(v1, v2, crossVect);\n  return Math.atan2(norm(crossVect), dot(v1, v2));\n}\nfunction signedAngleBetweenVectors(v1, v2, vN) {\n  const crossVect = [0, 0, 0];\n  cross(v1, v2, crossVect);\n  const angle = Math.atan2(norm(crossVect), dot(v1, v2));\n  return dot(crossVect, vN) >= 0 ? angle : -angle;\n}\nfunction gaussianAmplitude(mean, variance, position) {\n  const distanceFromMean = Math.abs(mean - position);\n  return 1 / Math.sqrt(2 * Math.PI * variance) * Math.exp(-(distanceFromMean ** 2) / (2 * variance));\n}\nfunction gaussianWeight(mean, variance, position) {\n  const distanceFromMean = Math.abs(mean - position);\n  return Math.exp(-(distanceFromMean ** 2) / (2 * variance));\n}\nfunction outer2D(x, y, out_2x2) {\n  out_2x2[0] = x[0] * y[0];\n  out_2x2[1] = x[0] * y[1];\n  out_2x2[2] = x[1] * y[0];\n  out_2x2[3] = x[1] * y[1];\n}\nfunction norm2D(x2D) {\n  return Math.sqrt(x2D[0] * x2D[0] + x2D[1] * x2D[1]);\n}\nfunction normalize2D(x) {\n  const den = norm2D(x);\n  if (den !== 0.0) {\n    x[0] /= den;\n    x[1] /= den;\n  }\n  return den;\n}\nfunction rowsToMat4(row0, row1, row2, row3, mat) {\n  for (let i = 0; i < 4; i++) {\n    mat[i] = row0[i];\n    mat[4 + i] = row1[i];\n    mat[8 + i] = row2[i];\n    mat[12 + i] = row3[i];\n  }\n  return mat;\n}\nfunction columnsToMat4(column0, column1, column2, column3, mat) {\n  for (let i = 0; i < 4; i++) {\n    mat[4 * i] = column0[i];\n    mat[4 * i + 1] = column1[i];\n    mat[4 * i + 2] = column2[i];\n    mat[4 * i + 3] = column3[i];\n  }\n  return mat;\n}\nfunction rowsToMat3(row0, row1, row2, mat) {\n  for (let i = 0; i < 3; i++) {\n    mat[i] = row0[i];\n    mat[3 + i] = row1[i];\n    mat[6 + i] = row2[i];\n  }\n  return mat;\n}\nfunction columnsToMat3(column0, column1, column2, mat) {\n  for (let i = 0; i < 3; i++) {\n    mat[3 * i] = column0[i];\n    mat[3 * i + 1] = column1[i];\n    mat[3 * i + 2] = column2[i];\n  }\n  return mat;\n}\nfunction determinant2x2() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  if (args.length === 2) {\n    return args[0][0] * args[1][1] - args[1][0] * args[0][1];\n  }\n  if (args.length === 4) {\n    return args[0] * args[3] - args[1] * args[2];\n  }\n  return Number.NaN;\n}\nfunction LUFactor3x3(mat_3x3, index_3) {\n  let maxI;\n  let tmp;\n  let largest;\n  const scale = [0, 0, 0];\n\n  // Loop over rows to get implicit scaling information\n  for (let i = 0; i < 3; i++) {\n    largest = Math.abs(mat_3x3[i * 3]);\n    if ((tmp = Math.abs(mat_3x3[i * 3 + 1])) > largest) {\n      largest = tmp;\n    }\n    if ((tmp = Math.abs(mat_3x3[i * 3 + 2])) > largest) {\n      largest = tmp;\n    }\n    scale[i] = 1 / largest;\n  }\n\n  // Loop over all columns using Crout's method\n\n  // first column\n  largest = scale[0] * Math.abs(mat_3x3[0]);\n  maxI = 0;\n  if ((tmp = scale[1] * Math.abs(mat_3x3[3])) >= largest) {\n    largest = tmp;\n    maxI = 1;\n  }\n  if ((tmp = scale[2] * Math.abs(mat_3x3[6])) >= largest) {\n    maxI = 2;\n  }\n  if (maxI !== 0) {\n    swapRowsMatrix_nxn(mat_3x3, 3, maxI, 0);\n    scale[maxI] = scale[0];\n  }\n  index_3[0] = maxI;\n  mat_3x3[3] /= mat_3x3[0];\n  mat_3x3[6] /= mat_3x3[0];\n\n  // second column\n  mat_3x3[4] -= mat_3x3[3] * mat_3x3[1];\n  mat_3x3[7] -= mat_3x3[6] * mat_3x3[1];\n  largest = scale[1] * Math.abs(mat_3x3[4]);\n  maxI = 1;\n  if ((tmp = scale[2] * Math.abs(mat_3x3[7])) >= largest) {\n    maxI = 2;\n    swapRowsMatrix_nxn(mat_3x3, 3, 1, 2);\n    scale[2] = scale[1];\n  }\n  index_3[1] = maxI;\n  mat_3x3[7] /= mat_3x3[4];\n\n  // third column\n  mat_3x3[5] -= mat_3x3[3] * mat_3x3[2];\n  mat_3x3[8] -= mat_3x3[6] * mat_3x3[2] + mat_3x3[7] * mat_3x3[5];\n  index_3[2] = 2;\n}\nfunction LUSolve3x3(mat_3x3, index_3, x_3) {\n  // forward substitution\n  let sum = x_3[index_3[0]];\n  x_3[index_3[0]] = x_3[0];\n  x_3[0] = sum;\n  sum = x_3[index_3[1]];\n  x_3[index_3[1]] = x_3[1];\n  x_3[1] = sum - mat_3x3[3] * x_3[0];\n  sum = x_3[index_3[2]];\n  x_3[index_3[2]] = x_3[2];\n  x_3[2] = sum - mat_3x3[6] * x_3[0] - mat_3x3[7] * x_3[1];\n\n  // back substitution\n  x_3[2] /= mat_3x3[8];\n  x_3[1] = (x_3[1] - mat_3x3[5] * x_3[2]) / mat_3x3[4];\n  x_3[0] = (x_3[0] - mat_3x3[1] * x_3[1] - mat_3x3[2] * x_3[2]) / mat_3x3[0];\n}\nfunction linearSolve3x3(mat_3x3, x_3, y_3) {\n  const a1 = mat_3x3[0];\n  const b1 = mat_3x3[1];\n  const c1 = mat_3x3[2];\n  const a2 = mat_3x3[3];\n  const b2 = mat_3x3[4];\n  const c2 = mat_3x3[5];\n  const a3 = mat_3x3[6];\n  const b3 = mat_3x3[7];\n  const c3 = mat_3x3[8];\n\n  // Compute the adjoint\n  const d1 = +determinant2x2(b2, b3, c2, c3);\n  const d2 = -determinant2x2(a2, a3, c2, c3);\n  const d3 = +determinant2x2(a2, a3, b2, b3);\n  const e1 = -determinant2x2(b1, b3, c1, c3);\n  const e2 = +determinant2x2(a1, a3, c1, c3);\n  const e3 = -determinant2x2(a1, a3, b1, b3);\n  const f1 = +determinant2x2(b1, b2, c1, c2);\n  const f2 = -determinant2x2(a1, a2, c1, c2);\n  const f3 = +determinant2x2(a1, a2, b1, b2);\n\n  // Compute the determinant\n  const det = a1 * d1 + b1 * d2 + c1 * d3;\n\n  // Multiply by the adjoint\n  const v1 = d1 * x_3[0] + e1 * x_3[1] + f1 * x_3[2];\n  const v2 = d2 * x_3[0] + e2 * x_3[1] + f2 * x_3[2];\n  const v3 = d3 * x_3[0] + e3 * x_3[1] + f3 * x_3[2];\n\n  // Divide by the determinant\n  y_3[0] = v1 / det;\n  y_3[1] = v2 / det;\n  y_3[2] = v3 / det;\n}\nfunction multiply3x3_vect3(mat_3x3, in_3, out_3) {\n  const x = mat_3x3[0] * in_3[0] + mat_3x3[1] * in_3[1] + mat_3x3[2] * in_3[2];\n  const y = mat_3x3[3] * in_3[0] + mat_3x3[4] * in_3[1] + mat_3x3[5] * in_3[2];\n  const z = mat_3x3[6] * in_3[0] + mat_3x3[7] * in_3[1] + mat_3x3[8] * in_3[2];\n  out_3[0] = x;\n  out_3[1] = y;\n  out_3[2] = z;\n}\nfunction multiply3x3_mat3(a_3x3, b_3x3, out_3x3) {\n  const copyA = [...a_3x3];\n  const copyB = [...b_3x3];\n  for (let i = 0; i < 3; i++) {\n    out_3x3[i] = copyA[0] * copyB[i] + copyA[1] * copyB[i + 3] + copyA[2] * copyB[i + 6];\n    out_3x3[i + 3] = copyA[3] * copyB[i] + copyA[4] * copyB[i + 3] + copyA[5] * copyB[i + 6];\n    out_3x3[i + 6] = copyA[6] * copyB[i] + copyA[7] * copyB[i + 3] + copyA[8] * copyB[i + 6];\n  }\n}\nfunction multiplyMatrix(a, b, rowA, colA, rowB, colB, outRowAColB) {\n  // we need colA == rowB\n  if (colA !== rowB) {\n    vtkErrorMacro('Number of columns of A must match number of rows of B.');\n  }\n\n  // If a or b is used to store the result, copying them is required\n  const copyA = [...a];\n  const copyB = [...b];\n  // output matrix is rowA*colB\n  // output row\n  for (let i = 0; i < rowA; i++) {\n    // output col\n    for (let j = 0; j < colB; j++) {\n      outRowAColB[i * colB + j] = 0;\n      // sum for this point\n      for (let k = 0; k < colA; k++) {\n        outRowAColB[i * colB + j] += copyA[i * colA + k] * copyB[j + colB * k];\n      }\n    }\n  }\n}\nfunction transpose3x3(in_3x3, outT_3x3) {\n  let tmp;\n\n  // off-diagonal elements\n  tmp = in_3x3[3];\n  outT_3x3[3] = in_3x3[1];\n  outT_3x3[1] = tmp;\n  tmp = in_3x3[6];\n  outT_3x3[6] = in_3x3[2];\n  outT_3x3[2] = tmp;\n  tmp = in_3x3[7];\n  outT_3x3[7] = in_3x3[5];\n  outT_3x3[5] = tmp;\n\n  // on-diagonal elements\n  outT_3x3[0] = in_3x3[0];\n  outT_3x3[4] = in_3x3[4];\n  outT_3x3[8] = in_3x3[8];\n}\nfunction invert3x3(in_3x3, outI_3x3) {\n  const a1 = in_3x3[0];\n  const b1 = in_3x3[1];\n  const c1 = in_3x3[2];\n  const a2 = in_3x3[3];\n  const b2 = in_3x3[4];\n  const c2 = in_3x3[5];\n  const a3 = in_3x3[6];\n  const b3 = in_3x3[7];\n  const c3 = in_3x3[8];\n\n  // Compute the adjoint\n  const d1 = +determinant2x2(b2, b3, c2, c3);\n  const d2 = -determinant2x2(a2, a3, c2, c3);\n  const d3 = +determinant2x2(a2, a3, b2, b3);\n  const e1 = -determinant2x2(b1, b3, c1, c3);\n  const e2 = +determinant2x2(a1, a3, c1, c3);\n  const e3 = -determinant2x2(a1, a3, b1, b3);\n  const f1 = +determinant2x2(b1, b2, c1, c2);\n  const f2 = -determinant2x2(a1, a2, c1, c2);\n  const f3 = +determinant2x2(a1, a2, b1, b2);\n\n  // Divide by the determinant\n  const det = a1 * d1 + b1 * d2 + c1 * d3;\n  if (det === 0) {\n    vtkWarningMacro('Matrix has 0 determinant');\n  }\n  outI_3x3[0] = d1 / det;\n  outI_3x3[3] = d2 / det;\n  outI_3x3[6] = d3 / det;\n  outI_3x3[1] = e1 / det;\n  outI_3x3[4] = e2 / det;\n  outI_3x3[7] = e3 / det;\n  outI_3x3[2] = f1 / det;\n  outI_3x3[5] = f2 / det;\n  outI_3x3[8] = f3 / det;\n}\nfunction determinant3x3(mat_3x3) {\n  return mat_3x3[0] * mat_3x3[4] * mat_3x3[8] + mat_3x3[3] * mat_3x3[7] * mat_3x3[2] + mat_3x3[6] * mat_3x3[1] * mat_3x3[5] - mat_3x3[0] * mat_3x3[7] * mat_3x3[5] - mat_3x3[3] * mat_3x3[1] * mat_3x3[8] - mat_3x3[6] * mat_3x3[4] * mat_3x3[2];\n}\n\n/**\n * Returns true if elements of both arrays are equals.\n * @param {Array} a an array of numbers (vector, point, matrix...)\n * @param {Array} b an array of numbers (vector, point, matrix...)\n * @param {Number} eps tolerance\n */\nfunction areEquals(a, b) {\n  let eps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : EPSILON;\n  if (a.length !== b.length) {\n    return false;\n  }\n  function isEqual(element, index) {\n    return Math.abs(element - b[index]) <= eps;\n  }\n  return a.every(isEqual);\n}\nconst areMatricesEqual = areEquals;\nfunction identity3x3(mat_3x3) {\n  for (let i = 0; i < 3; i++) {\n    /* eslint-disable-next-line no-multi-assign */\n    mat_3x3[i * 3] = mat_3x3[i * 3 + 1] = mat_3x3[i * 3 + 2] = 0;\n    mat_3x3[i * 3 + i] = 1;\n  }\n}\nfunction identity(n, mat) {\n  for (let i = 0; i < n; i++) {\n    for (let j = 0; j < n; j++) {\n      mat[i * n + j] = 0;\n    }\n    mat[i * n + i] = 1;\n  }\n  return mat;\n}\nfunction isIdentity(mat) {\n  let eps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : EPSILON;\n  return areMatricesEqual(mat, IDENTITY, eps);\n}\nfunction isIdentity3x3(mat) {\n  let eps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : EPSILON;\n  return areMatricesEqual(mat, IDENTITY_3X3, eps);\n}\nfunction quaternionToMatrix3x3(quat_4, mat_3x3) {\n  const ww = quat_4[0] * quat_4[0];\n  const wx = quat_4[0] * quat_4[1];\n  const wy = quat_4[0] * quat_4[2];\n  const wz = quat_4[0] * quat_4[3];\n  const xx = quat_4[1] * quat_4[1];\n  const yy = quat_4[2] * quat_4[2];\n  const zz = quat_4[3] * quat_4[3];\n  const xy = quat_4[1] * quat_4[2];\n  const xz = quat_4[1] * quat_4[3];\n  const yz = quat_4[2] * quat_4[3];\n  const rr = xx + yy + zz;\n  // normalization factor, just in case quaternion was not normalized\n  let f = 1 / (ww + rr);\n  const s = (ww - rr) * f;\n  f *= 2;\n  mat_3x3[0] = xx * f + s;\n  mat_3x3[3] = (xy + wz) * f;\n  mat_3x3[6] = (xz - wy) * f;\n  mat_3x3[1] = (xy - wz) * f;\n  mat_3x3[4] = yy * f + s;\n  mat_3x3[7] = (yz + wx) * f;\n  mat_3x3[2] = (xz + wy) * f;\n  mat_3x3[5] = (yz - wx) * f;\n  mat_3x3[8] = zz * f + s;\n}\nfunction roundNumber(num) {\n  let digits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  if (!`${num}`.includes('e')) {\n    return +`${Math.round(`${num}e+${digits}`)}e-${digits}`;\n  }\n  const arr = `${num}`.split('e');\n  let sig = '';\n  if (+arr[1] + digits > 0) {\n    sig = '+';\n  }\n  return +`${Math.round(`${+arr[0]}e${sig}${+arr[1] + digits}`)}e-${digits}`;\n}\nfunction roundVector(vector) {\n  let out = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n  let digits = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  out[0] = roundNumber(vector[0], digits);\n  out[1] = roundNumber(vector[1], digits);\n  out[2] = roundNumber(vector[2], digits);\n  return out;\n}\nfunction jacobiN(a, n, w, v) {\n  let i;\n  let j;\n  let k;\n  let iq;\n  let ip;\n  let numPos;\n  let tresh;\n  let theta;\n  let t;\n  let tau;\n  let sm;\n  let s;\n  let h;\n  let g;\n  let c;\n  let tmp;\n  const b = createArray(n);\n  const z = createArray(n);\n  const vtkROTATE = (aa, ii, jj) => {\n    g = aa[ii];\n    h = aa[jj];\n    aa[ii] = g - s * (h + g * tau);\n    aa[jj] = h + s * (g - h * tau);\n  };\n\n  // initialize\n  identity(n, v);\n  for (ip = 0; ip < n; ip++) {\n    b[ip] = w[ip] = a[ip + ip * n];\n    z[ip] = 0.0;\n  }\n\n  // begin rotation sequence\n  for (i = 0; i < VTK_MAX_ROTATIONS; i++) {\n    sm = 0.0;\n    for (ip = 0; ip < n - 1; ip++) {\n      for (iq = ip + 1; iq < n; iq++) {\n        sm += Math.abs(a[ip * n + iq]);\n      }\n    }\n    if (sm === 0.0) {\n      break;\n    }\n\n    // first 3 sweeps\n    if (i < 3) {\n      tresh = 0.2 * sm / (n * n);\n    } else {\n      tresh = 0.0;\n    }\n    for (ip = 0; ip < n - 1; ip++) {\n      for (iq = ip + 1; iq < n; iq++) {\n        g = 100.0 * Math.abs(a[ip * n + iq]);\n\n        // after 4 sweeps\n        if (i > 3 && Math.abs(w[ip]) + g === Math.abs(w[ip]) && Math.abs(w[iq]) + g === Math.abs(w[iq])) {\n          a[ip * n + iq] = 0.0;\n        } else if (Math.abs(a[ip * n + iq]) > tresh) {\n          h = w[iq] - w[ip];\n          if (Math.abs(h) + g === Math.abs(h)) {\n            t = a[ip * n + iq] / h;\n          } else {\n            theta = 0.5 * h / a[ip * n + iq];\n            t = 1.0 / (Math.abs(theta) + Math.sqrt(1.0 + theta * theta));\n            if (theta < 0.0) {\n              t = -t;\n            }\n          }\n          c = 1.0 / Math.sqrt(1 + t * t);\n          s = t * c;\n          tau = s / (1.0 + c);\n          h = t * a[ip * n + iq];\n          z[ip] -= h;\n          z[iq] += h;\n          w[ip] -= h;\n          w[iq] += h;\n          a[ip * n + iq] = 0.0;\n\n          // ip already shifted left by 1 unit\n          for (j = 0; j <= ip - 1; j++) {\n            vtkROTATE(a, j * n + ip, j * n + iq);\n          }\n          // ip and iq already shifted left by 1 unit\n          for (j = ip + 1; j <= iq - 1; j++) {\n            vtkROTATE(a, ip * n + j, j * n + iq);\n          }\n          // iq already shifted left by 1 unit\n          for (j = iq + 1; j < n; j++) {\n            vtkROTATE(a, ip * n + j, iq * n + j);\n          }\n          for (j = 0; j < n; j++) {\n            vtkROTATE(v, j * n + ip, j * n + iq);\n          }\n        }\n      }\n    }\n    for (ip = 0; ip < n; ip++) {\n      b[ip] += z[ip];\n      w[ip] = b[ip];\n      z[ip] = 0.0;\n    }\n  }\n\n  // this is NEVER called\n  if (i >= VTK_MAX_ROTATIONS) {\n    vtkWarningMacro('vtkMath::Jacobi: Error extracting eigenfunctions');\n    return 0;\n  }\n\n  // sort eigenfunctions: these changes do not affect accuracy\n  for (j = 0; j < n - 1; j++) {\n    // boundary incorrect\n    k = j;\n    tmp = w[k];\n    for (i = j + 1; i < n; i++) {\n      // boundary incorrect, shifted already\n      if (w[i] >= tmp || Math.abs(w[i] - tmp) < VTK_SMALL_NUMBER) {\n        // why exchange if same?\n        k = i;\n        tmp = w[k];\n      }\n    }\n    if (k !== j) {\n      w[k] = w[j];\n      w[j] = tmp;\n      swapColumnsMatrix_nxn(v, n, j, k);\n    }\n  }\n  // ensure eigenvector consistency (i.e., Jacobi can compute vectors that\n  // are negative of one another (.707,.707,0) and (-.707,-.707,0). This can\n  // reek havoc in hyperstreamline/other stuff. We will select the most\n  // positive eigenvector.\n  const ceil_half_n = (n >> 1) + (n & 1);\n  for (numPos = 0, i = 0; i < n * n; i++) {\n    if (v[i] >= 0.0) {\n      numPos++;\n    }\n  }\n  //    if ( numPos < ceil(double(n)/double(2.0)) )\n  if (numPos < ceil_half_n) {\n    for (i = 0; i < n; i++) {\n      v[i * n + j] *= -1.0;\n    }\n  }\n  return 1;\n}\nfunction matrix3x3ToQuaternion(mat_3x3, quat_4) {\n  const tmp = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n  // on-diagonal elements\n  tmp[0] = mat_3x3[0] + mat_3x3[4] + mat_3x3[8];\n  tmp[5] = mat_3x3[0] - mat_3x3[4] - mat_3x3[8];\n  tmp[10] = -mat_3x3[0] + mat_3x3[4] - mat_3x3[8];\n  tmp[15] = -mat_3x3[0] - mat_3x3[4] + mat_3x3[8];\n\n  // off-diagonal elements\n  tmp[1] = tmp[4] = mat_3x3[7] - mat_3x3[5];\n  tmp[2] = tmp[8] = mat_3x3[2] - mat_3x3[6];\n  tmp[3] = tmp[12] = mat_3x3[3] - mat_3x3[1];\n  tmp[6] = tmp[9] = mat_3x3[3] + mat_3x3[1];\n  tmp[7] = tmp[13] = mat_3x3[2] + mat_3x3[6];\n  tmp[11] = tmp[14] = mat_3x3[7] + mat_3x3[5];\n  const eigenvectors = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n  const eigenvalues = [0, 0, 0, 0];\n\n  // convert into format that JacobiN can use,\n  // then use Jacobi to find eigenvalues and eigenvectors\n  // tmp is copied because jacobiN may modify it\n  const NTemp = [...tmp];\n  jacobiN(NTemp, 4, eigenvalues, eigenvectors);\n\n  // the first eigenvector is the one we want\n  quat_4[0] = eigenvectors[0];\n  quat_4[1] = eigenvectors[4];\n  quat_4[2] = eigenvectors[8];\n  quat_4[3] = eigenvectors[12];\n}\nfunction multiplyQuaternion(quat_1, quat_2, quat_out) {\n  const ww = quat_1[0] * quat_2[0];\n  const wx = quat_1[0] * quat_2[1];\n  const wy = quat_1[0] * quat_2[2];\n  const wz = quat_1[0] * quat_2[3];\n  const xw = quat_1[1] * quat_2[0];\n  const xx = quat_1[1] * quat_2[1];\n  const xy = quat_1[1] * quat_2[2];\n  const xz = quat_1[1] * quat_2[3];\n  const yw = quat_1[2] * quat_2[0];\n  const yx = quat_1[2] * quat_2[1];\n  const yy = quat_1[2] * quat_2[2];\n  const yz = quat_1[2] * quat_2[3];\n  const zw = quat_1[3] * quat_2[0];\n  const zx = quat_1[3] * quat_2[1];\n  const zy = quat_1[3] * quat_2[2];\n  const zz = quat_1[3] * quat_2[3];\n  quat_out[0] = ww - xx - yy - zz;\n  quat_out[1] = wx + xw + yz - zy;\n  quat_out[2] = wy - xz + yw + zx;\n  quat_out[3] = wz + xy - yx + zw;\n}\nfunction orthogonalize3x3(a_3x3, out_3x3) {\n  // copy the matrix\n  for (let i = 0; i < 9; i++) {\n    out_3x3[i] = a_3x3[i];\n  }\n\n  // Pivot the matrix to improve accuracy\n  const scale = createArray(3);\n  const index = createArray(3);\n  let largest;\n\n  // Loop over rows to get implicit scaling information\n  for (let i = 0; i < 3; i++) {\n    const x1 = Math.abs(out_3x3[i * 3]);\n    const x2 = Math.abs(out_3x3[i * 3 + 1]);\n    const x3 = Math.abs(out_3x3[i * 3 + 2]);\n    largest = x2 > x1 ? x2 : x1;\n    largest = x3 > largest ? x3 : largest;\n    scale[i] = 1;\n    if (largest !== 0) {\n      scale[i] /= largest;\n    }\n  }\n\n  // first column\n  const x1 = Math.abs(out_3x3[0]) * scale[0];\n  const x2 = Math.abs(out_3x3[3]) * scale[1];\n  const x3 = Math.abs(out_3x3[6]) * scale[2];\n  index[0] = 0;\n  largest = x1;\n  if (x2 >= largest) {\n    largest = x2;\n    index[0] = 1;\n  }\n  if (x3 >= largest) {\n    index[0] = 2;\n  }\n  if (index[0] !== 0) {\n    // swap vectors\n    swapColumnsMatrix_nxn(out_3x3, 3, index[0], 0);\n    scale[index[0]] = scale[0];\n  }\n\n  // second column\n  const y2 = Math.abs(out_3x3[4]) * scale[1];\n  const y3 = Math.abs(out_3x3[7]) * scale[2];\n  index[1] = 1;\n  largest = y2;\n  if (y3 >= largest) {\n    index[1] = 2;\n    // swap vectors\n    swapColumnsMatrix_nxn(out_3x3, 3, 1, 2);\n  }\n\n  // third column\n  index[2] = 2;\n\n  // A quaternion can only describe a pure rotation, not\n  // a rotation with a flip, therefore the flip must be\n  // removed before the matrix is converted to a quaternion.\n  let flip = 0;\n  if (determinant3x3(out_3x3) < 0) {\n    flip = 1;\n    for (let i = 0; i < 9; i++) {\n      out_3x3[i] = -out_3x3[i];\n    }\n  }\n\n  // Do orthogonalization using a quaternion intermediate\n  // (this, essentially, does the orthogonalization via\n  // diagonalization of an appropriately constructed symmetric\n  // 4x4 matrix rather than by doing SVD of the 3x3 matrix)\n  const quat = createArray(4);\n  matrix3x3ToQuaternion(out_3x3, quat);\n  quaternionToMatrix3x3(quat, out_3x3);\n\n  // Put the flip back into the orthogonalized matrix.\n  if (flip) {\n    for (let i = 0; i < 9; i++) {\n      out_3x3[i] = -out_3x3[i];\n    }\n  }\n\n  // Undo the pivoting\n  if (index[1] !== 1) {\n    swapColumnsMatrix_nxn(out_3x3, 3, index[1], 1);\n  }\n  if (index[0] !== 0) {\n    swapColumnsMatrix_nxn(out_3x3, 3, index[0], 0);\n  }\n}\nfunction diagonalize3x3(a_3x3, w_3, v_3x3) {\n  let i;\n  let j;\n  let k;\n  let maxI;\n  let tmp;\n  let maxVal;\n\n  // a is copied because jacobiN may modify it\n  const copyA = [...a_3x3];\n\n  // diagonalize using Jacobi\n  jacobiN(copyA, 3, w_3, v_3x3);\n\n  // if all the eigenvalues are the same, return identity matrix\n  if (w_3[0] === w_3[1] && w_3[0] === w_3[2]) {\n    identity3x3(v_3x3);\n    return;\n  }\n\n  // transpose temporarily, it makes it easier to sort the eigenvectors\n  transpose3x3(v_3x3, v_3x3);\n\n  // if two eigenvalues are the same, re-orthogonalize to optimally line\n  // up the eigenvectors with the x, y, and z axes\n  for (i = 0; i < 3; i++) {\n    // two eigenvalues are the same\n    if (w_3[(i + 1) % 3] === w_3[(i + 2) % 3]) {\n      // find maximum element of the independent eigenvector\n      maxVal = Math.abs(v_3x3[i * 3]);\n      maxI = 0;\n      for (j = 1; j < 3; j++) {\n        if (maxVal < (tmp = Math.abs(v_3x3[i * 3 + j]))) {\n          maxVal = tmp;\n          maxI = j;\n        }\n      }\n      // swap the eigenvector into its proper position\n      if (maxI !== i) {\n        tmp = w_3[maxI];\n        w_3[maxI] = w_3[i];\n        w_3[i] = tmp;\n        swapRowsMatrix_nxn(v_3x3, 3, i, maxI);\n      }\n      // maximum element of eigenvector should be positive\n      if (v_3x3[maxI * 3 + maxI] < 0) {\n        v_3x3[maxI * 3] = -v_3x3[maxI * 3];\n        v_3x3[maxI * 3 + 1] = -v_3x3[maxI * 3 + 1];\n        v_3x3[maxI * 3 + 2] = -v_3x3[maxI * 3 + 2];\n      }\n\n      // re-orthogonalize the other two eigenvectors\n      j = (maxI + 1) % 3;\n      k = (maxI + 2) % 3;\n      v_3x3[j * 3] = 0.0;\n      v_3x3[j * 3 + 1] = 0.0;\n      v_3x3[j * 3 + 2] = 0.0;\n      v_3x3[j * 3 + j] = 1.0;\n      const vectTmp1 = cross([v_3x3[maxI * 3], v_3x3[maxI * 3 + 1], v_3x3[maxI * 3 + 2]], [v_3x3[j * 3], v_3x3[j * 3 + 1], v_3x3[j * 3 + 2]], []);\n      normalize(vectTmp1);\n      const vectTmp2 = cross(vectTmp1, [v_3x3[maxI * 3], v_3x3[maxI * 3 + 1], v_3x3[maxI * 3 + 2]], []);\n      for (let t = 0; t < 3; t++) {\n        v_3x3[k * 3 + t] = vectTmp1[t];\n        v_3x3[j * 3 + t] = vectTmp2[t];\n      }\n\n      // transpose vectors back to columns\n      transpose3x3(v_3x3, v_3x3);\n      return;\n    }\n  }\n\n  // the three eigenvalues are different, just sort the eigenvectors\n  // to align them with the x, y, and z axes\n\n  // find the vector with the largest x element, make that vector\n  // the first vector\n  maxVal = Math.abs(v_3x3[0]);\n  maxI = 0;\n  for (i = 1; i < 3; i++) {\n    if (maxVal < (tmp = Math.abs(v_3x3[i * 3]))) {\n      maxVal = tmp;\n      maxI = i;\n    }\n  }\n  // swap eigenvalue and eigenvector\n  if (maxI !== 0) {\n    const eigenValTmp = w_3[maxI];\n    w_3[maxI] = w_3[0];\n    w_3[0] = eigenValTmp;\n    swapRowsMatrix_nxn(v_3x3, 3, maxI, 0);\n  }\n  // do the same for the y element\n  if (Math.abs(v_3x3[4]) < Math.abs(v_3x3[7])) {\n    const eigenValTmp = w_3[2];\n    w_3[2] = w_3[1];\n    w_3[1] = eigenValTmp;\n    swapRowsMatrix_nxn(v_3x3, 3, 1, 2);\n  }\n\n  // ensure that the sign of the eigenvectors is correct\n  for (i = 0; i < 2; i++) {\n    if (v_3x3[i * 3 + i] < 0) {\n      v_3x3[i * 3] = -v_3x3[i * 3];\n      v_3x3[i * 3 + 1] = -v_3x3[i * 3 + 1];\n      v_3x3[i * 3 + 2] = -v_3x3[i * 3 + 2];\n    }\n  }\n  // set sign of final eigenvector to ensure that determinant is positive\n  if (determinant3x3(v_3x3) < 0) {\n    v_3x3[6] = -v_3x3[6];\n    v_3x3[7] = -v_3x3[7];\n    v_3x3[8] = -v_3x3[8];\n  }\n\n  // transpose the eigenvectors back again\n  transpose3x3(v_3x3, v_3x3);\n}\nfunction singularValueDecomposition3x3(a_3x3, u_3x3, w_3, vT_3x3) {\n  let i;\n  // copy so that A can be used for U or VT without risk\n  const B = [...a_3x3];\n\n  // temporarily flip if determinant is negative\n  const d = determinant3x3(B);\n  if (d < 0) {\n    for (i = 0; i < 9; i++) {\n      B[i] = -B[i];\n    }\n  }\n\n  // orthogonalize, diagonalize, etc.\n  orthogonalize3x3(B, u_3x3);\n  transpose3x3(B, B);\n  multiply3x3_mat3(B, u_3x3, vT_3x3);\n  diagonalize3x3(vT_3x3, w_3, vT_3x3);\n  multiply3x3_mat3(u_3x3, vT_3x3, u_3x3);\n  transpose3x3(vT_3x3, vT_3x3);\n\n  // re-create the flip\n  if (d < 0) {\n    w_3[0] = -w_3[0];\n    w_3[1] = -w_3[1];\n    w_3[2] = -w_3[2];\n  }\n}\n\n/**\n * Factor linear equations Ax = b using LU decomposition A = LU. Output factorization LU is in matrix A.\n * @param {Matrix} A square matrix\n * @param {Number} index integer array of pivot indices index[0->n-1]\n * @param {Number} size matrix size\n */\nfunction luFactorLinearSystem(A, index, size) {\n  let i;\n  let j;\n  let k;\n  let largest;\n  let maxI = 0;\n  let sum;\n  let temp1;\n  let temp2;\n  const scale = createArray(size);\n\n  //\n  // Loop over rows to get implicit scaling information\n  //\n  for (i = 0; i < size; i++) {\n    for (largest = 0.0, j = 0; j < size; j++) {\n      if ((temp2 = Math.abs(A[i * size + j])) > largest) {\n        largest = temp2;\n      }\n    }\n    if (largest === 0.0) {\n      vtkWarningMacro('Unable to factor linear system');\n      return 0;\n    }\n    scale[i] = 1.0 / largest;\n  }\n  //\n  // Loop over all columns using Crout's method\n  //\n  for (j = 0; j < size; j++) {\n    for (i = 0; i < j; i++) {\n      sum = A[i * size + j];\n      for (k = 0; k < i; k++) {\n        sum -= A[i * size + k] * A[k * size + j];\n      }\n      A[i * size + j] = sum;\n    }\n    //\n    // Begin search for largest pivot element\n    //\n    for (largest = 0.0, i = j; i < size; i++) {\n      sum = A[i * size + j];\n      for (k = 0; k < j; k++) {\n        sum -= A[i * size + k] * A[k * size + j];\n      }\n      A[i * size + j] = sum;\n      if ((temp1 = scale[i] * Math.abs(sum)) >= largest) {\n        largest = temp1;\n        maxI = i;\n      }\n    }\n    //\n    // Check for row interchange\n    //\n    if (j !== maxI) {\n      for (k = 0; k < size; k++) {\n        temp1 = A[maxI * size + k];\n        A[maxI * size + k] = A[j * size + k];\n        A[j * size + k] = temp1;\n      }\n      scale[maxI] = scale[j];\n    }\n    //\n    // Divide by pivot element and perform elimination\n    //\n    index[j] = maxI;\n    if (Math.abs(A[j * size + j]) <= VTK_SMALL_NUMBER) {\n      vtkWarningMacro('Unable to factor linear system');\n      return 0;\n    }\n    if (j !== size - 1) {\n      temp1 = 1.0 / A[j * size + j];\n      for (i = j + 1; i < size; i++) {\n        A[i * size + j] *= temp1;\n      }\n    }\n  }\n  return 1;\n}\nfunction luSolveLinearSystem(A, index, x, size) {\n  let i;\n  let j;\n  let ii;\n  let idx;\n  let sum;\n  //\n  // Proceed with forward and backsubstitution for L and U\n  // matrices.  First, forward substitution.\n  //\n  for (ii = -1, i = 0; i < size; i++) {\n    idx = index[i];\n    sum = x[idx];\n    x[idx] = x[i];\n    if (ii >= 0) {\n      for (j = ii; j <= i - 1; j++) {\n        sum -= A[i * size + j] * x[j];\n      }\n    } else if (sum !== 0.0) {\n      ii = i;\n    }\n    x[i] = sum;\n  }\n  //\n  // Now, back substitution\n  //\n  for (i = size - 1; i >= 0; i--) {\n    sum = x[i];\n    for (j = i + 1; j < size; j++) {\n      sum -= A[i * size + j] * x[j];\n    }\n    x[i] = sum / A[i * size + i];\n  }\n}\nfunction solveLinearSystem(A, x, size) {\n  // if we solving something simple, just solve it\n  if (size === 2) {\n    const y = createArray(2);\n    const det = determinant2x2(A[0], A[1], A[2], A[3]);\n    if (det === 0.0) {\n      // Unable to solve linear system\n      return 0;\n    }\n    y[0] = (A[3] * x[0] - A[1] * x[1]) / det;\n    y[1] = (-(A[2] * x[0]) + A[0] * x[1]) / det;\n    x[0] = y[0];\n    x[1] = y[1];\n    return 1;\n  }\n  if (size === 1) {\n    if (A[0] === 0.0) {\n      // Unable to solve linear system\n      return 0;\n    }\n    x[0] /= A[0];\n    return 1;\n  }\n\n  //\n  // System of equations is not trivial, use Crout's method\n  //\n\n  // Check on allocation of working vectors\n  const index = createArray(size);\n\n  // Factor and solve matrix\n  if (luFactorLinearSystem(A, index, size) === 0) {\n    return 0;\n  }\n  luSolveLinearSystem(A, index, x, size);\n  return 1;\n}\n\n// Note that A is modified during the inversion !\nfunction invertMatrix(A, AI, size) {\n  let index = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  let column = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n  const tmp1Size = index || createArray(size);\n  const tmp2Size = column || createArray(size);\n\n  // Factor matrix; then begin solving for inverse one column at a time.\n  // Note: tmp1Size returned value is used later, tmp2Size is just working\n  // memory whose values are not used in LUSolveLinearSystem\n  if (luFactorLinearSystem(A, tmp1Size, size) === 0) {\n    return null;\n  }\n  for (let j = 0; j < size; j++) {\n    for (let i = 0; i < size; i++) {\n      tmp2Size[i] = 0.0;\n    }\n    tmp2Size[j] = 1.0;\n    luSolveLinearSystem(A, tmp1Size, tmp2Size, size);\n    for (let i = 0; i < size; i++) {\n      AI[i * size + j] = tmp2Size[i];\n    }\n  }\n  return AI;\n}\nfunction estimateMatrixCondition(A, size) {\n  let minValue = +Number.MAX_VALUE;\n  let maxValue = -Number.MAX_VALUE;\n\n  // find the maximum value\n  for (let i = 0; i < size; i++) {\n    for (let j = i; j < size; j++) {\n      if (Math.abs(A[i * size + j]) > maxValue) {\n        maxValue = Math.abs(A[i * size + j]);\n      }\n    }\n  }\n\n  // find the minimum diagonal value\n  for (let i = 0; i < size; i++) {\n    if (Math.abs(A[i * size + i]) < minValue) {\n      minValue = Math.abs(A[i * size + i]);\n    }\n  }\n  if (minValue === 0.0) {\n    return Number.MAX_VALUE;\n  }\n  return maxValue / minValue;\n}\nfunction jacobi(a_3x3, w, v) {\n  return jacobiN(a_3x3, 3, w, v);\n}\nfunction solveHomogeneousLeastSquares(numberOfSamples, xt, xOrder, mt) {\n  // check dimensional consistency\n  if (numberOfSamples < xOrder) {\n    vtkWarningMacro('Insufficient number of samples. Underdetermined.');\n    return 0;\n  }\n  let i;\n  let j;\n  let k;\n\n  // set up intermediate variables\n  // Allocate matrix to hold X times transpose of X\n  const XXt = createArray(xOrder * xOrder); // size x by x\n  // Allocate the array of eigenvalues and eigenvectors\n  const eigenvals = createArray(xOrder);\n  const eigenvecs = createArray(xOrder * xOrder);\n\n  // Calculate XXt upper half only, due to symmetry\n  for (k = 0; k < numberOfSamples; k++) {\n    for (i = 0; i < xOrder; i++) {\n      for (j = i; j < xOrder; j++) {\n        XXt[i * xOrder + j] += xt[k * xOrder + i] * xt[k * xOrder + j];\n      }\n    }\n  }\n\n  // now fill in the lower half of the XXt matrix\n  for (i = 0; i < xOrder; i++) {\n    for (j = 0; j < i; j++) {\n      XXt[i * xOrder + j] = XXt[j * xOrder + i];\n    }\n  }\n\n  // Compute the eigenvectors and eigenvalues\n  jacobiN(XXt, xOrder, eigenvals, eigenvecs);\n\n  // Smallest eigenval is at the end of the list (xOrder-1), and solution is\n  // corresponding eigenvec.\n  for (i = 0; i < xOrder; i++) {\n    mt[i] = eigenvecs[i * xOrder + xOrder - 1];\n  }\n  return 1;\n}\nfunction solveLeastSquares(numberOfSamples, xt, xOrder, yt, yOrder, mt) {\n  let checkHomogeneous = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : true;\n  // check dimensional consistency\n  if (numberOfSamples < xOrder || numberOfSamples < yOrder) {\n    vtkWarningMacro('Insufficient number of samples. Underdetermined.');\n    return 0;\n  }\n  const homogenFlags = createArray(yOrder);\n  let allHomogeneous = 1;\n  let hmt;\n  let homogRC = 0;\n  let i;\n  let j;\n  let k;\n  let someHomogeneous = 0;\n\n  // Ok, first init some flags check and see if all the systems are homogeneous\n  if (checkHomogeneous) {\n    // If Y' is zero, it's a homogeneous system and can't be solved via\n    // the pseudoinverse method. Detect this case, warn the user, and\n    // invoke SolveHomogeneousLeastSquares instead. Note that it doesn't\n    // really make much sense for yOrder to be greater than one in this case,\n    // since that's just yOrder occurrences of a 0 vector on the RHS, but\n    // we allow it anyway. N\n\n    // Initialize homogeneous flags on a per-right-hand-side basis\n    for (j = 0; j < yOrder; j++) {\n      homogenFlags[j] = 1;\n    }\n    for (i = 0; i < numberOfSamples; i++) {\n      for (j = 0; j < yOrder; j++) {\n        if (Math.abs(yt[i * yOrder + j]) > VTK_SMALL_NUMBER) {\n          allHomogeneous = 0;\n          homogenFlags[j] = 0;\n        }\n      }\n    }\n\n    // If we've got one system, and it's homogeneous, do it and bail out quickly.\n    if (allHomogeneous && yOrder === 1) {\n      vtkWarningMacro('Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()');\n      return solveHomogeneousLeastSquares(numberOfSamples, xt, xOrder, mt);\n    }\n\n    // Ok, we've got more than one system of equations.\n    // Figure out if we need to calculate the homogeneous equation solution for\n    // any of them.\n    if (allHomogeneous) {\n      someHomogeneous = 1;\n    } else {\n      for (j = 0; j < yOrder; j++) {\n        if (homogenFlags[j]) {\n          someHomogeneous = 1;\n        }\n      }\n    }\n  }\n\n  // If necessary, solve the homogeneous problem\n  if (someHomogeneous) {\n    // hmt is the homogeneous equation version of mt, the general solution.\n    // hmt should be xOrder x yOrder, but since we are solving only the homogeneous part, here it is xOrder x 1\n    hmt = createArray(xOrder);\n\n    // Ok, solve the homogeneous problem\n    homogRC = solveHomogeneousLeastSquares(numberOfSamples, xt, xOrder, hmt);\n  }\n\n  // set up intermediate variables\n  const XXt = createArray(xOrder * xOrder); // size x by x\n  const XXtI = createArray(xOrder * xOrder); // size x by x\n  const XYt = createArray(xOrder * yOrder); // size x by y\n\n  // first find the pseudoinverse matrix\n  for (k = 0; k < numberOfSamples; k++) {\n    for (i = 0; i < xOrder; i++) {\n      // first calculate the XXt matrix, only do the upper half (symmetrical)\n      for (j = i; j < xOrder; j++) {\n        XXt[i * xOrder + j] += xt[k * xOrder + i] * xt[k * xOrder + j];\n      }\n\n      // now calculate the XYt matrix\n      for (j = 0; j < yOrder; j++) {\n        XYt[i * yOrder + j] += xt[k * xOrder + i] * yt[k * yOrder + j];\n      }\n    }\n  }\n\n  // now fill in the lower half of the XXt matrix\n  for (i = 0; i < xOrder; i++) {\n    for (j = 0; j < i; j++) {\n      XXt[i * xOrder + j] = XXt[j * xOrder + i];\n    }\n  }\n  const successFlag = invertMatrix(XXt, XXtI, xOrder);\n\n  // next get the inverse of XXt\n  if (successFlag) {\n    for (i = 0; i < xOrder; i++) {\n      for (j = 0; j < yOrder; j++) {\n        mt[i * yOrder + j] = 0.0;\n        for (k = 0; k < xOrder; k++) {\n          mt[i * yOrder + j] += XXtI[i * xOrder + k] * XYt[k * yOrder + j];\n        }\n      }\n    }\n  }\n\n  // Fix up any of the solutions that correspond to the homogeneous equation\n  // problem.\n  if (someHomogeneous) {\n    for (j = 0; j < yOrder; j++) {\n      if (homogenFlags[j]) {\n        // Fix this one\n        for (i = 0; i < xOrder; i++) {\n          mt[i * yOrder + j] = hmt[i * yOrder];\n        }\n      }\n    }\n  }\n  if (someHomogeneous) {\n    return homogRC && successFlag;\n  }\n  return successFlag;\n}\nfunction hex2float(hexStr) {\n  let outFloatArray = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0.5, 1];\n  switch (hexStr.length) {\n    case 3:\n      // abc => #aabbcc\n      outFloatArray[0] = parseInt(hexStr[0], 16) * 17 / 255;\n      outFloatArray[1] = parseInt(hexStr[1], 16) * 17 / 255;\n      outFloatArray[2] = parseInt(hexStr[2], 16) * 17 / 255;\n      return outFloatArray;\n    case 4:\n      // #abc => #aabbcc\n      outFloatArray[0] = parseInt(hexStr[1], 16) * 17 / 255;\n      outFloatArray[1] = parseInt(hexStr[2], 16) * 17 / 255;\n      outFloatArray[2] = parseInt(hexStr[3], 16) * 17 / 255;\n      return outFloatArray;\n    case 6:\n      // ab01df => #ab01df\n      outFloatArray[0] = parseInt(hexStr.substr(0, 2), 16) / 255;\n      outFloatArray[1] = parseInt(hexStr.substr(2, 2), 16) / 255;\n      outFloatArray[2] = parseInt(hexStr.substr(4, 2), 16) / 255;\n      return outFloatArray;\n    case 7:\n      // #ab01df\n      outFloatArray[0] = parseInt(hexStr.substr(1, 2), 16) / 255;\n      outFloatArray[1] = parseInt(hexStr.substr(3, 2), 16) / 255;\n      outFloatArray[2] = parseInt(hexStr.substr(5, 2), 16) / 255;\n      return outFloatArray;\n    case 9:\n      // #ab01df00\n      outFloatArray[0] = parseInt(hexStr.substr(1, 2), 16) / 255;\n      outFloatArray[1] = parseInt(hexStr.substr(3, 2), 16) / 255;\n      outFloatArray[2] = parseInt(hexStr.substr(5, 2), 16) / 255;\n      outFloatArray[3] = parseInt(hexStr.substr(7, 2), 16) / 255;\n      return outFloatArray;\n    default:\n      return outFloatArray;\n  }\n}\nfunction rgb2hsv(rgb, hsv) {\n  let h;\n  let s;\n  const [r, g, b] = rgb;\n  const onethird = 1.0 / 3.0;\n  const onesixth = 1.0 / 6.0;\n  const twothird = 2.0 / 3.0;\n  let cmax = r;\n  let cmin = r;\n  if (g > cmax) {\n    cmax = g;\n  } else if (g < cmin) {\n    cmin = g;\n  }\n  if (b > cmax) {\n    cmax = b;\n  } else if (b < cmin) {\n    cmin = b;\n  }\n  const v = cmax;\n  if (v > 0.0) {\n    s = (cmax - cmin) / cmax;\n  } else {\n    s = 0.0;\n  }\n  if (s > 0) {\n    if (r === cmax) {\n      h = onesixth * (g - b) / (cmax - cmin);\n    } else if (g === cmax) {\n      h = onethird + onesixth * (b - r) / (cmax - cmin);\n    } else {\n      h = twothird + onesixth * (r - g) / (cmax - cmin);\n    }\n    if (h < 0.0) {\n      h += 1.0;\n    }\n  } else {\n    h = 0.0;\n  }\n\n  // Set the values back to the array\n  hsv[0] = h;\n  hsv[1] = s;\n  hsv[2] = v;\n}\nfunction hsv2rgb(hsv, rgb) {\n  const [h, s, v] = hsv;\n  const onethird = 1.0 / 3.0;\n  const onesixth = 1.0 / 6.0;\n  const twothird = 2.0 / 3.0;\n  const fivesixth = 5.0 / 6.0;\n  let r;\n  let g;\n  let b;\n\n  // compute RGB from HSV\n  if (h > onesixth && h <= onethird) {\n    // green/red\n    g = 1.0;\n    r = (onethird - h) / onesixth;\n    b = 0.0;\n  } else if (h > onethird && h <= 0.5) {\n    // green/blue\n    g = 1.0;\n    b = (h - onethird) / onesixth;\n    r = 0.0;\n  } else if (h > 0.5 && h <= twothird) {\n    // blue/green\n    b = 1.0;\n    g = (twothird - h) / onesixth;\n    r = 0.0;\n  } else if (h > twothird && h <= fivesixth) {\n    // blue/red\n    b = 1.0;\n    r = (h - twothird) / onesixth;\n    g = 0.0;\n  } else if (h > fivesixth && h <= 1.0) {\n    // red/blue\n    r = 1.0;\n    b = (1.0 - h) / onesixth;\n    g = 0.0;\n  } else {\n    // red/green\n    r = 1.0;\n    g = h / onesixth;\n    b = 0.0;\n  }\n\n  // add Saturation to the equation.\n  r = s * r + (1.0 - s);\n  g = s * g + (1.0 - s);\n  b = s * b + (1.0 - s);\n  r *= v;\n  g *= v;\n  b *= v;\n\n  // Assign back to the array\n  rgb[0] = r;\n  rgb[1] = g;\n  rgb[2] = b;\n}\nfunction lab2xyz(lab, xyz) {\n  // LAB to XYZ\n  const [L, a, b] = lab;\n  let var_Y = (L + 16) / 116;\n  let var_X = a / 500 + var_Y;\n  let var_Z = var_Y - b / 200;\n  if (var_Y ** 3 > 0.008856) {\n    var_Y **= 3;\n  } else {\n    var_Y = (var_Y - 16.0 / 116.0) / 7.787;\n  }\n  if (var_X ** 3 > 0.008856) {\n    var_X **= 3;\n  } else {\n    var_X = (var_X - 16.0 / 116.0) / 7.787;\n  }\n  if (var_Z ** 3 > 0.008856) {\n    var_Z **= 3;\n  } else {\n    var_Z = (var_Z - 16.0 / 116.0) / 7.787;\n  }\n  const ref_X = 0.9505;\n  const ref_Y = 1.0;\n  const ref_Z = 1.089;\n  xyz[0] = ref_X * var_X; // ref_X = 0.9505  Observer= 2 deg Illuminant= D65\n  xyz[1] = ref_Y * var_Y; // ref_Y = 1.000\n  xyz[2] = ref_Z * var_Z; // ref_Z = 1.089\n}\n\nfunction xyz2lab(xyz, lab) {\n  const [x, y, z] = xyz;\n  const ref_X = 0.9505;\n  const ref_Y = 1.0;\n  const ref_Z = 1.089;\n  let var_X = x / ref_X; // ref_X = 0.9505  Observer= 2 deg, Illuminant= D65\n  let var_Y = y / ref_Y; // ref_Y = 1.000\n  let var_Z = z / ref_Z; // ref_Z = 1.089\n\n  if (var_X > 0.008856) var_X **= 1.0 / 3.0;else var_X = 7.787 * var_X + 16.0 / 116.0;\n  if (var_Y > 0.008856) var_Y **= 1.0 / 3.0;else var_Y = 7.787 * var_Y + 16.0 / 116.0;\n  if (var_Z > 0.008856) var_Z **= 1.0 / 3.0;else var_Z = 7.787 * var_Z + 16.0 / 116.0;\n  lab[0] = 116 * var_Y - 16;\n  lab[1] = 500 * (var_X - var_Y);\n  lab[2] = 200 * (var_Y - var_Z);\n}\nfunction xyz2rgb(xyz, rgb) {\n  const [x, y, z] = xyz;\n  let r = x * 3.2406 + y * -1.5372 + z * -0.4986;\n  let g = x * -0.9689 + y * 1.8758 + z * 0.0415;\n  let b = x * 0.0557 + y * -0.204 + z * 1.057;\n\n  // The following performs a \"gamma correction\" specified by the sRGB color\n  // space.  sRGB is defined by a canonical definition of a display monitor and\n  // has been standardized by the International Electrotechnical Commission (IEC\n  // 61966-2-1).  The nonlinearity of the correction is designed to make the\n  // colors more perceptually uniform.  This color space has been adopted by\n  // several applications including Adobe Photoshop and Microsoft Windows color\n  // management.  OpenGL is agnostic on its RGB color space, but it is reasonable\n  // to assume it is close to this one.\n  if (r > 0.0031308) r = 1.055 * r ** (1 / 2.4) - 0.055;else r *= 12.92;\n  if (g > 0.0031308) g = 1.055 * g ** (1 / 2.4) - 0.055;else g *= 12.92;\n  if (b > 0.0031308) b = 1.055 * b ** (1 / 2.4) - 0.055;else b *= 12.92;\n\n  // Clip colors. ideally we would do something that is perceptually closest\n  // (since we can see colors outside of the display gamut), but this seems to\n  // work well enough.\n  let maxVal = r;\n  if (maxVal < g) maxVal = g;\n  if (maxVal < b) maxVal = b;\n  if (maxVal > 1.0) {\n    r /= maxVal;\n    g /= maxVal;\n    b /= maxVal;\n  }\n  if (r < 0) r = 0;\n  if (g < 0) g = 0;\n  if (b < 0) b = 0;\n\n  // Push values back to array\n  rgb[0] = r;\n  rgb[1] = g;\n  rgb[2] = b;\n}\nfunction rgb2xyz(rgb, xyz) {\n  let [r, g, b] = rgb;\n  // The following performs a \"gamma correction\" specified by the sRGB color\n  // space.  sRGB is defined by a canonical definition of a display monitor and\n  // has been standardized by the International Electrotechnical Commission (IEC\n  // 61966-2-1).  The nonlinearity of the correction is designed to make the\n  // colors more perceptually uniform.  This color space has been adopted by\n  // several applications including Adobe Photoshop and Microsoft Windows color\n  // management.  OpenGL is agnostic on its RGB color space, but it is reasonable\n  // to assume it is close to this one.\n  if (r > 0.04045) r = ((r + 0.055) / 1.055) ** 2.4;else r /= 12.92;\n  if (g > 0.04045) g = ((g + 0.055) / 1.055) ** 2.4;else g /= 12.92;\n  if (b > 0.04045) b = ((b + 0.055) / 1.055) ** 2.4;else b /= 12.92;\n\n  // Observer. = 2 deg, Illuminant = D65\n  xyz[0] = r * 0.4124 + g * 0.3576 + b * 0.1805;\n  xyz[1] = r * 0.2126 + g * 0.7152 + b * 0.0722;\n  xyz[2] = r * 0.0193 + g * 0.1192 + b * 0.9505;\n}\nfunction rgb2lab(rgb, lab) {\n  const xyz = [0, 0, 0];\n  rgb2xyz(rgb, xyz);\n  xyz2lab(xyz, lab);\n}\nfunction lab2rgb(lab, rgb) {\n  const xyz = [0, 0, 0];\n  lab2xyz(lab, xyz);\n  xyz2rgb(xyz, rgb);\n}\nfunction uninitializeBounds(bounds) {\n  bounds[0] = 1.0;\n  bounds[1] = -1.0;\n  bounds[2] = 1.0;\n  bounds[3] = -1.0;\n  bounds[4] = 1.0;\n  bounds[5] = -1.0;\n  return bounds;\n}\nfunction areBoundsInitialized(bounds) {\n  return !(bounds[1] - bounds[0] < 0.0);\n}\n\n/**\n * @deprecated please use vtkBoundingBox.addPoints(vtkBoundingBox.reset([]), points)\n */\nfunction computeBoundsFromPoints(point1, point2, bounds) {\n  bounds[0] = Math.min(point1[0], point2[0]);\n  bounds[1] = Math.max(point1[0], point2[0]);\n  bounds[2] = Math.min(point1[1], point2[1]);\n  bounds[3] = Math.max(point1[1], point2[1]);\n  bounds[4] = Math.min(point1[2], point2[2]);\n  bounds[5] = Math.max(point1[2], point2[2]);\n  return bounds;\n}\nfunction clampValue(value, minValue, maxValue) {\n  if (value < minValue) {\n    return minValue;\n  }\n  if (value > maxValue) {\n    return maxValue;\n  }\n  return value;\n}\nfunction clampVector(vector, minVector, maxVector) {\n  let out = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [0, 0, 0];\n  out[0] = clampValue(vector[0], minVector[0], maxVector[0]);\n  out[1] = clampValue(vector[1], minVector[1], maxVector[1]);\n  out[2] = clampValue(vector[2], minVector[2], maxVector[2]);\n  return out;\n}\nfunction clampAndNormalizeValue(value, range) {\n  let result = 0;\n  if (range[0] !== range[1]) {\n    // clamp\n    if (value < range[0]) {\n      result = range[0];\n    } else if (value > range[1]) {\n      result = range[1];\n    } else {\n      result = value;\n    }\n    // normalize\n    result = (result - range[0]) / (range[1] - range[0]);\n  }\n  return result;\n}\nconst getScalarTypeFittingRange = notImplemented('GetScalarTypeFittingRange');\nconst getAdjustedScalarRange = notImplemented('GetAdjustedScalarRange');\nfunction extentIsWithinOtherExtent(extent1, extent2) {\n  if (!extent1 || !extent2) {\n    return 0;\n  }\n  for (let i = 0; i < 6; i += 2) {\n    if (extent1[i] < extent2[i] || extent1[i] > extent2[i + 1] || extent1[i + 1] < extent2[i] || extent1[i + 1] > extent2[i + 1]) {\n      return 0;\n    }\n  }\n  return 1;\n}\nfunction boundsIsWithinOtherBounds(bounds1_6, bounds2_6, delta_3) {\n  if (!bounds1_6 || !bounds2_6) {\n    return 0;\n  }\n  for (let i = 0; i < 6; i += 2) {\n    if (bounds1_6[i] + delta_3[i / 2] < bounds2_6[i] || bounds1_6[i] - delta_3[i / 2] > bounds2_6[i + 1] || bounds1_6[i + 1] + delta_3[i / 2] < bounds2_6[i] || bounds1_6[i + 1] - delta_3[i / 2] > bounds2_6[i + 1]) {\n      return 0;\n    }\n  }\n  return 1;\n}\nfunction pointIsWithinBounds(point_3, bounds_6, delta_3) {\n  if (!point_3 || !bounds_6 || !delta_3) {\n    return 0;\n  }\n  for (let i = 0; i < 3; i++) {\n    if (point_3[i] + delta_3[i] < bounds_6[2 * i] || point_3[i] - delta_3[i] > bounds_6[2 * i + 1]) {\n      return 0;\n    }\n  }\n  return 1;\n}\nfunction solve3PointCircle(p1, p2, p3, center) {\n  const v21 = createArray(3);\n  const v32 = createArray(3);\n  const v13 = createArray(3);\n  const v12 = createArray(3);\n  const v23 = createArray(3);\n  const v31 = createArray(3);\n  for (let i = 0; i < 3; ++i) {\n    v21[i] = p1[i] - p2[i];\n    v32[i] = p2[i] - p3[i];\n    v13[i] = p3[i] - p1[i];\n    v12[i] = -v21[i];\n    v23[i] = -v32[i];\n    v31[i] = -v13[i];\n  }\n  const norm12 = norm(v12);\n  const norm23 = norm(v23);\n  const norm13 = norm(v13);\n  const crossv21v32 = createArray(3);\n  cross(v21, v32, crossv21v32);\n  const normCross = norm(crossv21v32);\n  const radius = norm12 * norm23 * norm13 / (2 * normCross);\n  const normCross22 = 2 * normCross * normCross;\n  const alpha = norm23 * norm23 * dot(v21, v31) / normCross22;\n  const beta = norm13 * norm13 * dot(v12, v32) / normCross22;\n  const gamma = norm12 * norm12 * dot(v13, v23) / normCross22;\n  for (let i = 0; i < 3; ++i) {\n    center[i] = alpha * p1[i] + beta * p2[i] + gamma * p3[i];\n  }\n  return radius;\n}\nconst inf = Infinity;\nconst negInf = -Infinity;\nconst isInf = value => !Number.isFinite(value);\nconst {\n  isFinite,\n  isNaN\n} = Number;\nconst isNan = isNaN;\n\n// JavaScript - add-on ----------------------\n\nfunction createUninitializedBounds() {\n  return [].concat([Number.MAX_VALUE, -Number.MAX_VALUE,\n  // X\n  Number.MAX_VALUE, -Number.MAX_VALUE,\n  // Y\n  Number.MAX_VALUE, -Number.MAX_VALUE // Z\n  ]);\n}\n\nfunction getMajorAxisIndex(vector) {\n  let maxValue = -1;\n  let axisIndex = -1;\n  for (let i = 0; i < vector.length; i++) {\n    const value = Math.abs(vector[i]);\n    if (value > maxValue) {\n      axisIndex = i;\n      maxValue = value;\n    }\n  }\n  return axisIndex;\n}\n\n// Return the closest orthogonal matrix of 1, -1 and 0\n// It works for both column major and row major matrices\n// This function iteratively associate a column with a row by choosing\n// the greatest absolute value from the remaining row and columns\n// For each association, a -1 or a 1 is set in the output, depending on\n// the sign of the value in the original matrix\nfunction getSparseOrthogonalMatrix(matrix) {\n  let n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;\n  // Initialize rows and columns to available indices\n  const rows = new Array(n);\n  const cols = new Array(n);\n  for (let i = 0; i < n; ++i) {\n    rows[i] = i;\n    cols[i] = i;\n  }\n  // No need for the last iteration: i = 0\n  for (let i = n - 1; i > 0; i--) {\n    // Loop invariant:\n    // rows[0:i] and cols[0:i] contain the remaining rows and columns\n    // rows]i:n[ and cols]i:n[ contain the associations found (rows[k] is associated with cols[k])\n    let bestValue = -Infinity;\n    let bestRowI = 0;\n    let bestColI = 0;\n    for (let rowI = 0; rowI <= i; ++rowI) {\n      const row = rows[rowI];\n      for (let colI = 0; colI <= i; ++colI) {\n        const col = cols[colI];\n        const absVal = Math.abs(matrix[row + n * col]);\n        if (absVal > bestValue) {\n          bestValue = absVal;\n          bestRowI = rowI;\n          bestColI = colI;\n        }\n      }\n    }\n    // Found an association between rows[bestRowI] and cols[bestColI]\n    // Put both at the end of their array by swapping with i\n    [rows[i], rows[bestRowI]] = [rows[bestRowI], rows[i]];\n    [cols[i], cols[bestColI]] = [cols[bestColI], cols[i]];\n  }\n\n  // Convert row/column association to a matrix\n  const output = new Array(n * n).fill(0);\n  for (let i = 0; i < n; ++i) {\n    const matIdx = rows[i] + n * cols[i];\n    output[matIdx] = matrix[matIdx] < 0 ? -1 : 1;\n  }\n  return output;\n}\nfunction floatToHex2(value) {\n  const integer = Math.floor(value * 255);\n  if (integer > 15) {\n    return integer.toString(16);\n  }\n  return `0${integer.toString(16)}`;\n}\nfunction floatRGB2HexCode(rgbArray) {\n  let prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '#';\n  return `${prefix}${rgbArray.map(floatToHex2).join('')}`;\n}\nfunction floatToChar(f) {\n  return Math.round(f * 255);\n}\nfunction float2CssRGBA(rgbArray) {\n  if (rgbArray.length === 3) {\n    return `rgb(${rgbArray.map(floatToChar).join(', ')})`;\n  }\n  return `rgba(${floatToChar(rgbArray[0] || 0)}, ${floatToChar(rgbArray[1] || 0)}, ${floatToChar(rgbArray[2] || 0)}, ${rgbArray[3] || 0})`;\n}\n\n// ----------------------------------------------------------------------------\n// Only Static API\n// ----------------------------------------------------------------------------\n\nvar vtkMath = {\n  Pi,\n  ldexp,\n  radiansFromDegrees,\n  degreesFromRadians,\n  round,\n  floor,\n  ceil,\n  ceilLog2,\n  min,\n  max,\n  arrayMin,\n  arrayMax,\n  arrayRange,\n  isPowerOfTwo,\n  nearestPowerOfTwo,\n  factorial,\n  binomial,\n  beginCombination,\n  nextCombination,\n  randomSeed,\n  getSeed,\n  random,\n  gaussian,\n  add,\n  subtract,\n  multiplyScalar,\n  multiplyScalar2D,\n  multiplyAccumulate,\n  multiplyAccumulate2D,\n  dot,\n  outer,\n  cross,\n  norm,\n  normalize,\n  perpendiculars,\n  projectVector,\n  projectVector2D,\n  distance2BetweenPoints,\n  angleBetweenVectors,\n  gaussianAmplitude,\n  gaussianWeight,\n  dot2D,\n  outer2D,\n  norm2D,\n  normalize2D,\n  determinant2x2,\n  LUFactor3x3,\n  LUSolve3x3,\n  linearSolve3x3,\n  multiply3x3_vect3,\n  multiply3x3_mat3,\n  multiplyMatrix,\n  transpose3x3,\n  invert3x3,\n  identity3x3,\n  identity,\n  isIdentity,\n  isIdentity3x3,\n  determinant3x3,\n  quaternionToMatrix3x3,\n  areEquals,\n  areMatricesEqual,\n  roundNumber,\n  roundVector,\n  matrix3x3ToQuaternion,\n  multiplyQuaternion,\n  orthogonalize3x3,\n  diagonalize3x3,\n  singularValueDecomposition3x3,\n  solveLinearSystem,\n  invertMatrix,\n  luFactorLinearSystem,\n  luSolveLinearSystem,\n  estimateMatrixCondition,\n  jacobi,\n  jacobiN,\n  solveHomogeneousLeastSquares,\n  solveLeastSquares,\n  hex2float,\n  rgb2hsv,\n  hsv2rgb,\n  lab2xyz,\n  xyz2lab,\n  xyz2rgb,\n  rgb2xyz,\n  rgb2lab,\n  lab2rgb,\n  uninitializeBounds,\n  areBoundsInitialized,\n  computeBoundsFromPoints,\n  clampValue,\n  clampVector,\n  clampAndNormalizeValue,\n  getScalarTypeFittingRange,\n  getAdjustedScalarRange,\n  extentIsWithinOtherExtent,\n  boundsIsWithinOtherBounds,\n  pointIsWithinBounds,\n  solve3PointCircle,\n  inf,\n  negInf,\n  isInf,\n  isNan: isNaN,\n  isNaN,\n  isFinite,\n  // JS add-on\n  createUninitializedBounds,\n  getMajorAxisIndex,\n  getSparseOrthogonalMatrix,\n  floatToHex2,\n  floatRGB2HexCode,\n  float2CssRGBA\n};\n\nvar vtkMath$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  createArray: createArray,\n  Pi: Pi,\n  ldexp: ldexp,\n  radiansFromDegrees: radiansFromDegrees,\n  degreesFromRadians: degreesFromRadians,\n  round: round,\n  floor: floor,\n  ceil: ceil,\n  min: min,\n  max: max,\n  arrayMin: arrayMin,\n  arrayMax: arrayMax,\n  arrayRange: arrayRange,\n  ceilLog2: ceilLog2,\n  factorial: factorial,\n  nearestPowerOfTwo: nearestPowerOfTwo,\n  isPowerOfTwo: isPowerOfTwo,\n  binomial: binomial,\n  beginCombination: beginCombination,\n  nextCombination: nextCombination,\n  randomSeed: randomSeed,\n  getSeed: getSeed,\n  random: random,\n  gaussian: gaussian,\n  add: add,\n  subtract: subtract,\n  multiplyScalar: multiplyScalar,\n  multiplyScalar2D: multiplyScalar2D,\n  multiplyAccumulate: multiplyAccumulate,\n  multiplyAccumulate2D: multiplyAccumulate2D,\n  dot: dot,\n  outer: outer,\n  cross: cross,\n  norm: norm,\n  normalize: normalize,\n  normalize4D: normalize4D,\n  perpendiculars: perpendiculars,\n  projectVector: projectVector,\n  dot2D: dot2D,\n  projectVector2D: projectVector2D,\n  distance2BetweenPoints: distance2BetweenPoints,\n  angleBetweenVectors: angleBetweenVectors,\n  signedAngleBetweenVectors: signedAngleBetweenVectors,\n  gaussianAmplitude: gaussianAmplitude,\n  gaussianWeight: gaussianWeight,\n  outer2D: outer2D,\n  norm2D: norm2D,\n  normalize2D: normalize2D,\n  rowsToMat4: rowsToMat4,\n  columnsToMat4: columnsToMat4,\n  rowsToMat3: rowsToMat3,\n  columnsToMat3: columnsToMat3,\n  determinant2x2: determinant2x2,\n  LUFactor3x3: LUFactor3x3,\n  LUSolve3x3: LUSolve3x3,\n  linearSolve3x3: linearSolve3x3,\n  multiply3x3_vect3: multiply3x3_vect3,\n  multiply3x3_mat3: multiply3x3_mat3,\n  multiplyMatrix: multiplyMatrix,\n  transpose3x3: transpose3x3,\n  invert3x3: invert3x3,\n  determinant3x3: determinant3x3,\n  areEquals: areEquals,\n  areMatricesEqual: areMatricesEqual,\n  identity3x3: identity3x3,\n  identity: identity,\n  isIdentity: isIdentity,\n  isIdentity3x3: isIdentity3x3,\n  quaternionToMatrix3x3: quaternionToMatrix3x3,\n  roundNumber: roundNumber,\n  roundVector: roundVector,\n  jacobiN: jacobiN,\n  matrix3x3ToQuaternion: matrix3x3ToQuaternion,\n  multiplyQuaternion: multiplyQuaternion,\n  orthogonalize3x3: orthogonalize3x3,\n  diagonalize3x3: diagonalize3x3,\n  singularValueDecomposition3x3: singularValueDecomposition3x3,\n  luFactorLinearSystem: luFactorLinearSystem,\n  luSolveLinearSystem: luSolveLinearSystem,\n  solveLinearSystem: solveLinearSystem,\n  invertMatrix: invertMatrix,\n  estimateMatrixCondition: estimateMatrixCondition,\n  jacobi: jacobi,\n  solveHomogeneousLeastSquares: solveHomogeneousLeastSquares,\n  solveLeastSquares: solveLeastSquares,\n  hex2float: hex2float,\n  rgb2hsv: rgb2hsv,\n  hsv2rgb: hsv2rgb,\n  lab2xyz: lab2xyz,\n  xyz2lab: xyz2lab,\n  xyz2rgb: xyz2rgb,\n  rgb2xyz: rgb2xyz,\n  rgb2lab: rgb2lab,\n  lab2rgb: lab2rgb,\n  uninitializeBounds: uninitializeBounds,\n  areBoundsInitialized: areBoundsInitialized,\n  computeBoundsFromPoints: computeBoundsFromPoints,\n  clampValue: clampValue,\n  clampVector: clampVector,\n  clampAndNormalizeValue: clampAndNormalizeValue,\n  getScalarTypeFittingRange: getScalarTypeFittingRange,\n  getAdjustedScalarRange: getAdjustedScalarRange,\n  extentIsWithinOtherExtent: extentIsWithinOtherExtent,\n  boundsIsWithinOtherBounds: boundsIsWithinOtherBounds,\n  pointIsWithinBounds: pointIsWithinBounds,\n  solve3PointCircle: solve3PointCircle,\n  inf: inf,\n  negInf: negInf,\n  isInf: isInf,\n  isFinite: isFinite,\n  isNaN: isNaN,\n  isNan: isNan,\n  createUninitializedBounds: createUninitializedBounds,\n  getMajorAxisIndex: getMajorAxisIndex,\n  getSparseOrthogonalMatrix: getSparseOrthogonalMatrix,\n  floatToHex2: floatToHex2,\n  floatRGB2HexCode: floatRGB2HexCode,\n  float2CssRGBA: float2CssRGBA,\n  'default': vtkMath\n});\n\nexport { createArray as $, rowsToMat3 as A, degreesFromRadians as B, ldexp as C, xyz2rgb as D, areEquals as E, clampValue as F, arrayRange as G, getMajorAxisIndex as H, createUninitializedBounds as I, normalize4D as J, identity as K, multiplyMatrix as L, floor as M, isInf as N, rgb2hsv as O, rgb2lab as P, lab2rgb as Q, round as R, normalize2D as S, nearestPowerOfTwo as T, multiply3x3_vect3 as U, getSparseOrthogonalMatrix as V, areBoundsInitialized as W, floatRGB2HexCode as X, isPowerOfTwo as Y, angleBetweenVectors as Z, signedAngleBetweenVectors as _, areMatricesEqual as a, isNaN as a$, Pi as a0, ceil as a1, min as a2, max as a3, arrayMin as a4, arrayMax as a5, ceilLog2 as a6, factorial as a7, binomial as a8, beginCombination as a9, quaternionToMatrix3x3 as aA, roundNumber as aB, matrix3x3ToQuaternion as aC, multiplyQuaternion as aD, orthogonalize3x3 as aE, diagonalize3x3 as aF, singularValueDecomposition3x3 as aG, luFactorLinearSystem as aH, luSolveLinearSystem as aI, estimateMatrixCondition as aJ, solveHomogeneousLeastSquares as aK, solveLeastSquares as aL, hex2float as aM, lab2xyz as aN, xyz2lab as aO, rgb2xyz as aP, computeBoundsFromPoints as aQ, clampAndNormalizeValue as aR, getScalarTypeFittingRange as aS, getAdjustedScalarRange as aT, extentIsWithinOtherExtent as aU, boundsIsWithinOtherBounds as aV, pointIsWithinBounds as aW, solve3PointCircle as aX, inf as aY, negInf as aZ, isFinite as a_, nextCombination as aa, randomSeed as ab, getSeed as ac, gaussian as ad, multiplyScalar2D as ae, multiplyAccumulate2D as af, outer as ag, projectVector as ah, dot2D as ai, projectVector2D as aj, gaussianAmplitude as ak, gaussianWeight as al, outer2D as am, norm2D as an, rowsToMat4 as ao, columnsToMat4 as ap, columnsToMat3 as aq, LUFactor3x3 as ar, LUSolve3x3 as as, linearSolve3x3 as at, multiply3x3_mat3 as au, transpose3x3 as av, invert3x3 as aw, identity3x3 as ax, isIdentity as ay, isIdentity3x3 as az, vtkMath as b, floatToHex2 as b0, float2CssRGBA as b1, roundVector as c, dot as d, clampVector as e, distance2BetweenPoints as f, solveLinearSystem as g, hsv2rgb as h, isNan as i, cross as j, add as k, normalize as l, multiplyAccumulate as m, norm as n, determinant2x2 as o, invertMatrix as p, jacobiN as q, radiansFromDegrees as r, subtract as s, perpendiculars as t, uninitializeBounds as u, vtkMath$1 as v, jacobi as w, multiplyScalar as x, random as y, determinant3x3 as z };\n","import { m as macro } from '../../macros2.js';\nimport vtkDataArray from './DataArray.js';\nimport { VtkDataTypes } from './DataArray/Constants.js';\nimport { u as uninitializeBounds } from './Math/index.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\n// ----------------------------------------------------------------------------\n// vtkPoints methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPoints(publicAPI, model) {\n  // Keep track of modified time for bounds computation\n  let boundMTime = 0;\n\n  // Set our className\n  model.classHierarchy.push('vtkPoints');\n\n  // Forwarding methods\n  publicAPI.getNumberOfPoints = publicAPI.getNumberOfTuples;\n  publicAPI.setNumberOfPoints = function (nbPoints) {\n    let dimension = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;\n    if (publicAPI.getNumberOfPoints() !== nbPoints) {\n      model.size = nbPoints * dimension;\n      model.values = macro.newTypedArray(model.dataType, model.size);\n      publicAPI.setNumberOfComponents(dimension);\n      publicAPI.modified();\n    }\n  };\n  publicAPI.setPoint = function (idx) {\n    for (var _len = arguments.length, xyz = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      xyz[_key - 1] = arguments[_key];\n    }\n    publicAPI.setTuple(idx, xyz);\n  };\n  publicAPI.getPoint = publicAPI.getTuple;\n  publicAPI.findPoint = publicAPI.findTuple;\n  publicAPI.insertNextPoint = (x, y, z) => publicAPI.insertNextTuple([x, y, z]);\n  publicAPI.insertPoint = (ptId, point) => publicAPI.insertTuple(ptId, point);\n  const superGetBounds = publicAPI.getBounds;\n  publicAPI.getBounds = () => {\n    if (boundMTime < model.mtime) {\n      publicAPI.computeBounds();\n    }\n    return superGetBounds();\n  };\n  const superGetBoundsByReference = publicAPI.getBoundsByReference;\n  publicAPI.getBoundsByReference = () => {\n    if (boundMTime < model.mtime) {\n      publicAPI.computeBounds();\n    }\n    return superGetBoundsByReference();\n  };\n\n  // Trigger the computation of bounds\n  publicAPI.computeBounds = () => {\n    if (publicAPI.getNumberOfComponents() === 3) {\n      const xRange = publicAPI.getRange(0);\n      model.bounds[0] = xRange[0];\n      model.bounds[1] = xRange[1];\n      const yRange = publicAPI.getRange(1);\n      model.bounds[2] = yRange[0];\n      model.bounds[3] = yRange[1];\n      const zRange = publicAPI.getRange(2);\n      model.bounds[4] = zRange[0];\n      model.bounds[5] = zRange[1];\n    } else if (publicAPI.getNumberOfComponents() === 2) {\n      const xRange = publicAPI.getRange(0);\n      model.bounds[0] = xRange[0];\n      model.bounds[1] = xRange[1];\n      const yRange = publicAPI.getRange(1);\n      model.bounds[2] = yRange[0];\n      model.bounds[3] = yRange[1];\n      model.bounds[4] = 0;\n      model.bounds[5] = 0;\n    } else {\n      vtkErrorMacro(`getBounds called on an array with components of ${publicAPI.getNumberOfComponents()}`);\n      uninitializeBounds(model.bounds);\n    }\n    boundMTime = macro.getCurrentGlobalMTime();\n  };\n\n  // Initialize\n  publicAPI.setNumberOfComponents(model.numberOfComponents < 2 ? 3 : model.numberOfComponents);\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  empty: true,\n  numberOfComponents: 3,\n  dataType: VtkDataTypes.FLOAT,\n  bounds: [1, -1, 1, -1, 1, -1]\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  vtkDataArray.extend(publicAPI, model, initialValues);\n  macro.getArray(publicAPI, model, ['bounds'], 6);\n  vtkPoints(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkPoints');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPoints$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkPoints$1 as default, extend, newInstance };\n","const AttributeTypes = {\n  SCALARS: 0,\n  VECTORS: 1,\n  NORMALS: 2,\n  TCOORDS: 3,\n  TENSORS: 4,\n  GLOBALIDS: 5,\n  PEDIGREEIDS: 6,\n  EDGEFLAG: 7,\n  NUM_ATTRIBUTES: 8\n};\nconst AttributeLimitTypes = {\n  MAX: 0,\n  EXACT: 1,\n  NOLIMIT: 2\n};\nconst CellGhostTypes = {\n  DUPLICATECELL: 1,\n  // the cell is present on multiple processors\n  HIGHCONNECTIVITYCELL: 2,\n  // the cell has more neighbors than in a regular mesh\n  LOWCONNECTIVITYCELL: 4,\n  // the cell has less neighbors than in a regular mesh\n  REFINEDCELL: 8,\n  // other cells are present that refines it.\n  EXTERIORCELL: 16,\n  // the cell is on the exterior of the data set\n  HIDDENCELL: 32 // the cell is needed to maintain connectivity, but the data values should be ignored.\n};\n\nconst PointGhostTypes = {\n  DUPLICATEPOINT: 1,\n  // the cell is present on multiple processors\n  HIDDENPOINT: 2 // the point is needed to maintain connectivity, but the data values should be ignored.\n};\n\nconst AttributeCopyOperations = {\n  COPYTUPLE: 0,\n  INTERPOLATE: 1,\n  PASSDATA: 2,\n  ALLCOPY: 3 // all of the above\n};\n\nconst ghostArrayName = 'vtkGhostType';\nconst DesiredOutputPrecision = {\n  DEFAULT: 0,\n  // use the point type that does not truncate any data\n  SINGLE: 1,\n  // use Float32Array\n  DOUBLE: 2 // use Float64Array\n};\n\nvar Constants = {\n  AttributeCopyOperations,\n  AttributeLimitTypes,\n  AttributeTypes,\n  CellGhostTypes,\n  DesiredOutputPrecision,\n  PointGhostTypes,\n  ghostArrayName\n};\n\nexport { AttributeCopyOperations, AttributeLimitTypes, AttributeTypes, CellGhostTypes, DesiredOutputPrecision, PointGhostTypes, Constants as default, ghostArrayName };\n","import { m as macro } from '../../macros2.js';\nimport vtkDataArray from './DataArray.js';\nimport { VtkDataTypes } from './DataArray/Constants.js';\n\nconst {\n  isVtkObject\n} = macro;\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nfunction extractCellSizes(cellArray) {\n  let currentIdx = 0;\n  return cellArray.filter((value, index) => {\n    if (index === currentIdx) {\n      currentIdx += value + 1;\n      return true;\n    }\n    return false;\n  });\n}\nfunction getNumberOfCells(cellArray) {\n  let cellId = 0;\n  for (let cellArrayIndex = 0; cellArrayIndex < cellArray.length;) {\n    cellArrayIndex += cellArray[cellArrayIndex] + 1;\n    cellId++;\n  }\n  return cellId;\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  extractCellSizes,\n  getNumberOfCells\n};\n\n// ----------------------------------------------------------------------------\n// vtkCellArray methods\n// ----------------------------------------------------------------------------\n\nfunction vtkCellArray(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkCellArray');\n  const superClass = {\n    ...publicAPI\n  };\n  publicAPI.getNumberOfCells = recompute => {\n    if (model.numberOfCells !== undefined && !recompute) {\n      return model.numberOfCells;\n    }\n    if (model.cellSizes) {\n      model.numberOfCells = model.cellSizes.length;\n    } else {\n      model.numberOfCells = getNumberOfCells(publicAPI.getData());\n    }\n    return model.numberOfCells;\n  };\n  publicAPI.getCellSizes = recompute => {\n    if (model.cellSizes !== undefined && !recompute) {\n      return model.cellSizes;\n    }\n    model.cellSizes = extractCellSizes(publicAPI.getData());\n    return model.cellSizes;\n  };\n\n  /**\n   * When `resize()` is being used, you then MUST use `insertNextCell()`.\n   * @see vtkCellArray#insertNextCell\n   * @see vtkDataArray#allocate\n   */\n  publicAPI.resize = requestedNumTuples => {\n    const oldNumTuples = publicAPI.getNumberOfTuples();\n    superClass.resize(requestedNumTuples);\n    const newNumTuples = publicAPI.getNumberOfTuples();\n    if (newNumTuples < oldNumTuples) {\n      if (newNumTuples === 0) {\n        model.numberOfCells = 0;\n        model.cellSizes = [];\n      } else {\n        // We do not know how many cells are left.\n        // Set to undefined to ensure insertNextCell works correctly.\n        model.numberOfCells = undefined;\n        model.cellSizes = undefined;\n      }\n    }\n  };\n  publicAPI.setData = typedArray => {\n    superClass.setData(typedArray, 1);\n    model.numberOfCells = undefined;\n    model.cellSizes = undefined;\n  };\n  publicAPI.getCell = loc => {\n    let cellLoc = loc;\n    const numberOfPoints = model.values[cellLoc++];\n    return model.values.subarray(cellLoc, cellLoc + numberOfPoints);\n  };\n  publicAPI.insertNextCell = cell => {\n    let cellPointIds;\n    if (isVtkObject(cell)) {\n      cellPointIds = cell.getPointsIds();\n    } else {\n      cellPointIds = cell;\n    }\n    const cellId = publicAPI.getNumberOfCells();\n    publicAPI.insertNextTuples([cellPointIds.length, ...cellPointIds]);\n    // By computing the number of cells earlier, we made sure that numberOfCells is defined\n    ++model.numberOfCells;\n    if (model.cellSizes != null) {\n      model.cellSizes.push(cellPointIds.length);\n    }\n    return cellId;\n  };\n  publicAPI.getMaxCellSize = () => publicAPI.getCellSizes().reduce((a, b) => Math.max(a, b), 0);\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nfunction defaultValues(initialValues) {\n  return {\n    empty: true,\n    numberOfComponents: 1,\n    dataType: VtkDataTypes.UNSIGNED_INT,\n    ...initialValues\n  };\n}\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  vtkDataArray.extend(publicAPI, model, defaultValues(initialValues));\n  vtkCellArray(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkCellArray');\n\n// ----------------------------------------------------------------------------\n\nvar vtkCellArray$1 = {\n  newInstance,\n  extend,\n  ...STATIC\n};\n\nexport { STATIC, vtkCellArray$1 as default, extend, newInstance };\n","import { m as macro } from '../../macros2.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\n// ----------------------------------------------------------------------------\n// vtkImplicitFunction methods\n// ----------------------------------------------------------------------------\n\nfunction vtkImplicitFunction(publicAPI, model) {\n  model.classHierarchy.push('vtkImplicitFunction');\n  publicAPI.functionValue = xyz => {\n    if (!model.transform) {\n      return publicAPI.evaluateFunction(xyz);\n    }\n    const transformedXYZ = [];\n    model.transform.transformPoint(xyz, transformedXYZ);\n    return publicAPI.evaluateFunction(transformedXYZ);\n  };\n  publicAPI.evaluateFunction = _xyz => {\n    macro.vtkErrorMacro('not implemented');\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\nconst DEFAULT_VALUES = {\n  // transform : null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['transform']);\n  vtkImplicitFunction(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkImplicitFunction');\n\n// ----------------------------------------------------------------------------\n\nvar vtkImplicitFunction$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkImplicitFunction$1 as default, extend, newInstance };\n","import { s as subtract, d as dot, j as cross, k as add } from '../Core/Math/index.js';\nimport { m as macro } from '../../macros2.js';\nimport vtkImplicitFunction from './ImplicitFunction.js';\n\nconst PLANE_TOLERANCE = 1.0e-6;\nconst COINCIDE = 'coincide';\nconst DISJOINT = 'disjoint';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nfunction evaluate(normal, origin, x) {\n  return normal[0] * (x[0] - origin[0]) + normal[1] * (x[1] - origin[1]) + normal[2] * (x[2] - origin[2]);\n}\nfunction distanceToPlane(x, origin, normal) {\n  const distance = normal[0] * (x[0] - origin[0]) + normal[1] * (x[1] - origin[1]) + normal[2] * (x[2] - origin[2]);\n  return Math.abs(distance);\n}\nfunction projectPoint(x, origin, normal, xproj) {\n  const xo = [];\n  subtract(x, origin, xo);\n  const t = dot(normal, xo);\n  xproj[0] = x[0] - t * normal[0];\n  xproj[1] = x[1] - t * normal[1];\n  xproj[2] = x[2] - t * normal[2];\n}\nfunction projectVector(v, normal, vproj) {\n  const t = dot(v, normal);\n  let n2 = dot(normal, normal);\n  if (n2 === 0) {\n    n2 = 1.0;\n  }\n  vproj[0] = v[0] - t * normal[0] / n2;\n  vproj[1] = v[1] - t * normal[1] / n2;\n  vproj[2] = v[2] - t * normal[2] / n2;\n  return vproj;\n}\nfunction generalizedProjectPoint(x, origin, normal, xproj) {\n  const xo = [];\n  subtract(x, origin, xo);\n  const t = dot(normal, xo);\n  const n2 = dot(normal, normal);\n  if (n2 !== 0) {\n    xproj[0] = x[0] - t * normal[0] / n2;\n    xproj[1] = x[1] - t * normal[1] / n2;\n    xproj[2] = x[2] - t * normal[2] / n2;\n  } else {\n    xproj[0] = x[0];\n    xproj[1] = x[1];\n    xproj[2] = x[2];\n  }\n}\nfunction intersectWithLine(p1, p2, origin, normal) {\n  const outObj = {\n    intersection: false,\n    betweenPoints: false,\n    t: Number.MAX_VALUE,\n    x: []\n  };\n  const p21 = [];\n  const p1Origin = [];\n  // Compute line vector\n  subtract(p2, p1, p21);\n  subtract(origin, p1, p1Origin);\n\n  // Compute denominator.  If ~0, line and plane are parallel.\n  // const num = vtkMath.dot(normal, origin) - vtkMath.dot(normal, p1);\n  const num = dot(normal, p1Origin);\n  const den = dot(normal, p21);\n\n  // If denominator with respect to numerator is \"zero\", then the line and\n  // plane are considered parallel.\n  let fabsden;\n  let fabstolerance;\n\n  // Trying to avoid an expensive call to fabs()\n  if (den < 0.0) {\n    fabsden = -den;\n  } else {\n    fabsden = den;\n  }\n  if (num < 0.0) {\n    fabstolerance = -num * PLANE_TOLERANCE;\n  } else {\n    fabstolerance = num * PLANE_TOLERANCE;\n  }\n  if (fabsden <= fabstolerance) {\n    return outObj;\n  }\n\n  // Where on the line between p1 and p2 is the intersection\n  // If between 0 and 1, it is between the two points. If < 0 it's before p1, if > 1 it's after p2\n  outObj.t = num / den;\n  outObj.x[0] = p1[0] + outObj.t * p21[0];\n  outObj.x[1] = p1[1] + outObj.t * p21[1];\n  outObj.x[2] = p1[2] + outObj.t * p21[2];\n  outObj.intersection = true;\n  outObj.betweenPoints = outObj.t >= 0.0 && outObj.t <= 1.0;\n  return outObj;\n}\nfunction intersectWithPlane(plane1Origin, plane1Normal, plane2Origin, plane2Normal) {\n  const outObj = {\n    intersection: false,\n    l0: [],\n    l1: [],\n    error: null\n  };\n  const cross$1 = [];\n  cross(plane1Normal, plane2Normal, cross$1);\n  const absCross = cross$1.map(n => Math.abs(n));\n\n  // test if the two planes are parallel\n  if (absCross[0] + absCross[1] + absCross[2] < PLANE_TOLERANCE) {\n    // test if disjoint or coincide\n    const v = [];\n    subtract(plane1Origin, plane2Origin, v);\n    if (dot(plane1Normal, v) === 0) {\n      outObj.error = COINCIDE;\n    } else {\n      outObj.error = DISJOINT;\n    }\n    return outObj;\n  }\n\n  // Plane1 and Plane2 intersect in a line\n  // first determine max abs coordinate of the cross product\n  let maxc;\n  if (absCross[0] > absCross[1] && absCross[0] > absCross[2]) {\n    maxc = 'x';\n  } else if (absCross[1] > absCross[2]) {\n    maxc = 'y';\n  } else {\n    maxc = 'z';\n  }\n\n  // To get a point on the intersect line, zero the max coord, and solve for the other two\n  const iP = []; // intersectionPoint\n  // the constants in the 2 plane equations\n  const d1 = -dot(plane1Normal, plane1Origin);\n  const d2 = -dot(plane2Normal, plane2Origin);\n\n  // eslint-disable-next-line default-case\n  switch (maxc) {\n    case 'x':\n      // intersect with x=0\n      iP[0] = 0;\n      iP[1] = (d2 * plane1Normal[2] - d1 * plane2Normal[2]) / cross$1[0];\n      iP[2] = (d1 * plane2Normal[1] - d2 * plane1Normal[1]) / cross$1[0];\n      break;\n    case 'y':\n      // intersect with y=0\n      iP[0] = (d1 * plane2Normal[2] - d2 * plane1Normal[2]) / cross$1[1];\n      iP[1] = 0;\n      iP[2] = (d2 * plane1Normal[0] - d1 * plane2Normal[0]) / cross$1[1];\n      break;\n    case 'z':\n      // intersect with z=0\n      iP[0] = (d2 * plane1Normal[1] - d1 * plane2Normal[1]) / cross$1[2];\n      iP[1] = (d1 * plane2Normal[0] - d2 * plane1Normal[0]) / cross$1[2];\n      iP[2] = 0;\n      break;\n  }\n  outObj.l0 = iP;\n  add(iP, cross$1, outObj.l1);\n  outObj.intersection = true;\n  return outObj;\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  evaluate,\n  distanceToPlane,\n  projectPoint,\n  projectVector,\n  generalizedProjectPoint,\n  intersectWithLine,\n  intersectWithPlane,\n  DISJOINT,\n  COINCIDE\n};\n\n// ----------------------------------------------------------------------------\n// vtkPlane methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPlane(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkPlane');\n  publicAPI.distanceToPlane = x => distanceToPlane(x, model.origin, model.normal);\n  publicAPI.projectPoint = (x, xproj) => {\n    projectPoint(x, model.origin, model.normal, xproj);\n  };\n  publicAPI.projectVector = (v, vproj) => projectVector(v, model.normal, vproj);\n  publicAPI.push = distance => {\n    if (distance === 0.0) {\n      return;\n    }\n    for (let i = 0; i < 3; i++) {\n      model.origin[i] += distance * model.normal[i];\n    }\n  };\n  publicAPI.generalizedProjectPoint = (x, xproj) => {\n    generalizedProjectPoint(x, model.origin, model.normal, xproj);\n  };\n  publicAPI.evaluateFunction = (x, y, z) => {\n    if (!Array.isArray(x)) {\n      return model.normal[0] * (x - model.origin[0]) + model.normal[1] * (y - model.origin[1]) + model.normal[2] * (z - model.origin[2]);\n    }\n    return model.normal[0] * (x[0] - model.origin[0]) + model.normal[1] * (x[1] - model.origin[1]) + model.normal[2] * (x[2] - model.origin[2]);\n  };\n  publicAPI.evaluateGradient = xyz => {\n    const retVal = [model.normal[0], model.normal[1], model.normal[2]];\n    return retVal;\n  };\n  publicAPI.intersectWithLine = (p1, p2) => intersectWithLine(p1, p2, model.origin, model.normal);\n  publicAPI.intersectWithPlane = (planeOrigin, planeNormal) => intersectWithPlane(planeOrigin, planeNormal, model.origin, model.normal);\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  normal: [0.0, 0.0, 1.0],\n  origin: [0.0, 0.0, 0.0]\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  vtkImplicitFunction.extend(publicAPI, model, initialValues);\n  macro.setGetArray(publicAPI, model, ['normal', 'origin'], 3);\n  vtkPlane(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkPlane');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPlane$1 = {\n  newInstance,\n  extend,\n  ...STATIC\n};\n\nexport { STATIC, vtkPlane$1 as default, extend, newInstance, vtkPlane };\n","import { d as dot } from '../Core/Math/index.js';\nimport { vec3 } from 'gl-matrix';\nimport vtkPlane from './Plane.js';\n\nconst INIT_BOUNDS = [Number.MAX_VALUE, -Number.MAX_VALUE,\n// X\nNumber.MAX_VALUE, -Number.MAX_VALUE,\n// Y\nNumber.MAX_VALUE, -Number.MAX_VALUE // Z\n];\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nfunction equals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5];\n}\nfunction isValid(bounds) {\n  return bounds?.length >= 6 && bounds[0] <= bounds[1] && bounds[2] <= bounds[3] && bounds[4] <= bounds[5];\n}\nfunction setBounds(bounds, otherBounds) {\n  bounds[0] = otherBounds[0];\n  bounds[1] = otherBounds[1];\n  bounds[2] = otherBounds[2];\n  bounds[3] = otherBounds[3];\n  bounds[4] = otherBounds[4];\n  bounds[5] = otherBounds[5];\n  return bounds;\n}\nfunction reset(bounds) {\n  return setBounds(bounds, INIT_BOUNDS);\n}\nfunction addPoint(bounds, x, y, z) {\n  const [xMin, xMax, yMin, yMax, zMin, zMax] = bounds;\n  bounds[0] = xMin < x ? xMin : x;\n  bounds[1] = xMax > x ? xMax : x;\n  bounds[2] = yMin < y ? yMin : y;\n  bounds[3] = yMax > y ? yMax : y;\n  bounds[4] = zMin < z ? zMin : z;\n  bounds[5] = zMax > z ? zMax : z;\n  return bounds;\n}\nfunction addPoints(bounds, points) {\n  if (points.length === 0) {\n    return bounds;\n  }\n  if (Array.isArray(points[0])) {\n    for (let i = 0; i < points.length; ++i) {\n      addPoint(bounds, ...points[i]);\n    }\n  } else {\n    for (let i = 0; i < points.length; i += 3) {\n      addPoint(bounds, ...points.slice(i, i + 3));\n    }\n  }\n  return bounds;\n}\nfunction addBounds(bounds, xMin, xMax, yMin, yMax, zMin, zMax) {\n  const [_xMin, _xMax, _yMin, _yMax, _zMin, _zMax] = bounds;\n  if (zMax === undefined) {\n    bounds[0] = Math.min(xMin[0], _xMin);\n    bounds[1] = Math.max(xMin[1], _xMax);\n    bounds[2] = Math.min(xMin[2], _yMin);\n    bounds[3] = Math.max(xMin[3], _yMax);\n    bounds[4] = Math.min(xMin[4], _zMin);\n    bounds[5] = Math.max(xMin[5], _zMax);\n  } else {\n    bounds[0] = Math.min(xMin, _xMin);\n    bounds[1] = Math.max(xMax, _xMax);\n    bounds[2] = Math.min(yMin, _yMin);\n    bounds[3] = Math.max(yMax, _yMax);\n    bounds[4] = Math.min(zMin, _zMin);\n    bounds[5] = Math.max(zMax, _zMax);\n  }\n  return bounds;\n}\nfunction setMinPoint(bounds, x, y, z) {\n  const [xMin, xMax, yMin, yMax, zMin, zMax] = bounds;\n  bounds[0] = x;\n  bounds[1] = x > xMax ? x : xMax;\n  bounds[2] = y;\n  bounds[3] = y > yMax ? y : yMax;\n  bounds[4] = z;\n  bounds[5] = z > zMax ? z : zMax;\n  return xMin !== x || yMin !== y || zMin !== z;\n}\nfunction setMaxPoint(bounds, x, y, z) {\n  const [xMin, xMax, yMin, yMax, zMin, zMax] = bounds;\n  bounds[0] = x < xMin ? x : xMin;\n  bounds[1] = x;\n  bounds[2] = y < yMin ? y : yMin;\n  bounds[3] = y;\n  bounds[4] = z < zMin ? z : zMin;\n  bounds[5] = z;\n  return xMax !== x || yMax !== y || zMax !== z;\n}\nfunction inflate(bounds, delta) {\n  if (delta == null) {\n    // eslint-disable-next-line no-use-before-define\n    return minInflate(bounds);\n  }\n  bounds[0] -= delta;\n  bounds[1] += delta;\n  bounds[2] -= delta;\n  bounds[3] += delta;\n  bounds[4] -= delta;\n  bounds[5] += delta;\n  return bounds;\n}\nfunction minInflate(bounds) {\n  const nonZero = [0, 0, 0];\n  let maxIdx = -1;\n  let max = 0.0;\n  let w = 0.0;\n  for (let i = 0; i < 3; ++i) {\n    w = bounds[i * 2 + 1] - bounds[i * 2];\n    if (w > max) {\n      max = w;\n      maxIdx = i;\n    }\n    nonZero[i] = w > 0.0 ? 1 : 0;\n  }\n  if (maxIdx < 0) {\n    return inflate(bounds, 0.5);\n  }\n\n  // Any zero width sides are bumped out 1% of max side\n  for (let i = 0; i < 3; ++i) {\n    if (!nonZero[i]) {\n      const d = 0.005 * max;\n      bounds[i * 2] -= d;\n      bounds[i * 2 + 1] += d;\n    }\n  }\n  return bounds;\n}\nfunction scale(bounds, sx, sy, sz) {\n  if (!isValid(bounds)) {\n    return false;\n  }\n  if (sx >= 0.0) {\n    bounds[0] *= sx;\n    bounds[1] *= sx;\n  } else {\n    bounds[0] = sx * bounds[1];\n    bounds[1] = sx * bounds[0];\n  }\n  if (sy >= 0.0) {\n    bounds[2] *= sy;\n    bounds[3] *= sy;\n  } else {\n    bounds[2] = sy * bounds[3];\n    bounds[3] = sy * bounds[2];\n  }\n  if (sz >= 0.0) {\n    bounds[4] *= sz;\n    bounds[5] *= sz;\n  } else {\n    bounds[4] = sz * bounds[5];\n    bounds[5] = sz * bounds[4];\n  }\n  return true;\n}\nfunction getCenter(bounds) {\n  return [0.5 * (bounds[0] + bounds[1]), 0.5 * (bounds[2] + bounds[3]), 0.5 * (bounds[4] + bounds[5])];\n}\nfunction scaleAboutCenter(bounds, sx, sy, sz) {\n  if (!isValid(bounds)) {\n    return false;\n  }\n  const center = getCenter(bounds);\n  bounds[0] -= center[0];\n  bounds[1] -= center[0];\n  bounds[2] -= center[1];\n  bounds[3] -= center[1];\n  bounds[4] -= center[2];\n  bounds[5] -= center[2];\n  scale(bounds, sx, sy, sz);\n  bounds[0] += center[0];\n  bounds[1] += center[0];\n  bounds[2] += center[1];\n  bounds[3] += center[1];\n  bounds[4] += center[2];\n  bounds[5] += center[2];\n  return true;\n}\nfunction getLength(bounds, index) {\n  return bounds[index * 2 + 1] - bounds[index * 2];\n}\nfunction getLengths(bounds) {\n  return [getLength(bounds, 0), getLength(bounds, 1), getLength(bounds, 2)];\n}\nfunction getXRange(bounds) {\n  return bounds.slice(0, 2);\n}\nfunction getYRange(bounds) {\n  return bounds.slice(2, 4);\n}\nfunction getZRange(bounds) {\n  return bounds.slice(4, 6);\n}\nfunction getMaxLength(bounds) {\n  const l = getLengths(bounds);\n  if (l[0] > l[1]) {\n    if (l[0] > l[2]) {\n      return l[0];\n    }\n    return l[2];\n  }\n  if (l[1] > l[2]) {\n    return l[1];\n  }\n  return l[2];\n}\nfunction getDiagonalLength2(bounds) {\n  if (isValid(bounds)) {\n    const l = getLengths(bounds);\n    return l[0] * l[0] + l[1] * l[1] + l[2] * l[2];\n  }\n  return null;\n}\nfunction getDiagonalLength(bounds) {\n  const lenght2 = getDiagonalLength2(bounds);\n  return lenght2 !== null ? Math.sqrt(lenght2) : null;\n}\nfunction getMinPoint(bounds) {\n  return [bounds[0], bounds[2], bounds[4]];\n}\nfunction getMaxPoint(bounds) {\n  return [bounds[1], bounds[3], bounds[5]];\n}\nfunction oppositeSign(a, b) {\n  return a <= 0 && b >= 0 || a >= 0 && b <= 0;\n}\nfunction getCorners(bounds, corners) {\n  corners[0] = [bounds[0], bounds[2], bounds[4]];\n  corners[1] = [bounds[0], bounds[2], bounds[5]];\n  corners[2] = [bounds[0], bounds[3], bounds[4]];\n  corners[3] = [bounds[0], bounds[3], bounds[5]];\n  corners[4] = [bounds[1], bounds[2], bounds[4]];\n  corners[5] = [bounds[1], bounds[2], bounds[5]];\n  corners[6] = [bounds[1], bounds[3], bounds[4]];\n  corners[7] = [bounds[1], bounds[3], bounds[5]];\n  return corners;\n}\n\n// Computes the two corners with minimal and maximal coordinates\nfunction computeCornerPoints(bounds, point1, point2) {\n  point1[0] = bounds[0];\n  point1[1] = bounds[2];\n  point1[2] = bounds[4];\n  point2[0] = bounds[1];\n  point2[1] = bounds[3];\n  point2[2] = bounds[5];\n  return point1;\n}\nfunction transformBounds(bounds, transform) {\n  let out = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  const corners = getCorners(bounds, []);\n  for (let i = 0; i < corners.length; ++i) {\n    vec3.transformMat4(corners[i], corners[i], transform);\n  }\n  reset(out);\n  return addPoints(out, corners);\n}\nfunction computeScale3(bounds) {\n  let scale3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  scale3[0] = 0.5 * (bounds[1] - bounds[0]);\n  scale3[1] = 0.5 * (bounds[3] - bounds[2]);\n  scale3[2] = 0.5 * (bounds[5] - bounds[4]);\n  return scale3;\n}\n\n/**\n * Compute local bounds.\n * Not as fast as vtkPoints.getBounds() if u, v, w form a natural basis.\n * @param {vtkPoints} points\n * @param {array} u first vector\n * @param {array} v second vector\n * @param {array} w third vector\n */\nfunction computeLocalBounds(points, u, v, w) {\n  const bounds = [].concat(INIT_BOUNDS);\n  const pointsData = points.getData();\n  for (let i = 0; i < pointsData.length; i += 3) {\n    const point = [pointsData[i], pointsData[i + 1], pointsData[i + 2]];\n    const du = dot(point, u);\n    bounds[0] = Math.min(du, bounds[0]);\n    bounds[1] = Math.max(du, bounds[1]);\n    const dv = dot(point, v);\n    bounds[2] = Math.min(dv, bounds[2]);\n    bounds[3] = Math.max(dv, bounds[3]);\n    const dw = dot(point, w);\n    bounds[4] = Math.min(dw, bounds[4]);\n    bounds[5] = Math.max(dw, bounds[5]);\n  }\n  return bounds;\n}\n\n// The method returns a non-zero value if the bounding box is hit.\n// Origin[3] starts the ray, dir[3] is the vector components of the ray in the x-y-z\n// directions, coord[3] is the location of hit, and t is the parametric\n// coordinate along line. (Notes: the intersection ray dir[3] is NOT\n// normalized.  Valid intersections will only occur between 0<=t<=1.)\nfunction intersectBox(bounds, origin, dir, coord, tolerance) {\n  let inside = true;\n  const quadrant = [];\n  let whichPlane = 0;\n  const maxT = [];\n  const candidatePlane = [0.0, 0.0, 0.0];\n  const RIGHT = 0;\n  const LEFT = 1;\n  const MIDDLE = 2;\n\n  // First find closest planes\n  for (let i = 0; i < 3; i++) {\n    if (origin[i] < bounds[2 * i]) {\n      quadrant[i] = LEFT;\n      candidatePlane[i] = bounds[2 * i];\n      inside = false;\n    } else if (origin[i] > bounds[2 * i + 1]) {\n      quadrant[i] = RIGHT;\n      candidatePlane[i] = bounds[2 * i + 1];\n      inside = false;\n    } else {\n      quadrant[i] = MIDDLE;\n    }\n  }\n\n  // Check whether origin of ray is inside bbox\n  if (inside) {\n    coord[0] = origin[0];\n    coord[1] = origin[1];\n    coord[2] = origin[2];\n    tolerance[0] = 0;\n    return 1;\n  }\n\n  // Calculate parametric distance to plane\n  for (let i = 0; i < 3; i++) {\n    if (quadrant[i] !== MIDDLE && dir[i] !== 0.0) {\n      maxT[i] = (candidatePlane[i] - origin[i]) / dir[i];\n    } else {\n      maxT[i] = -1.0;\n    }\n  }\n\n  // Find the largest parametric value of intersection\n  for (let i = 0; i < 3; i++) {\n    if (maxT[whichPlane] < maxT[i]) {\n      whichPlane = i;\n    }\n  }\n\n  // Check for value intersection along line\n  if (maxT[whichPlane] > 1.0 || maxT[whichPlane] < 0.0) {\n    return 0;\n  }\n  tolerance[0] = maxT[whichPlane];\n\n  // Intersection point along line is okay. Check bbox.\n  for (let i = 0; i < 3; i++) {\n    if (whichPlane !== i) {\n      coord[i] = origin[i] + maxT[whichPlane] * dir[i];\n      if (coord[i] < bounds[2 * i] || coord[i] > bounds[2 * i + 1]) {\n        return 0;\n      }\n    } else {\n      coord[i] = candidatePlane[i];\n    }\n  }\n  return 1;\n}\n\n// Plane intersection with box\n// The plane is infinite in extent and defined by an origin and normal.The function indicates\n// whether the plane intersects, not the particulars of intersection points and such\n// The function returns non-zero if the plane and box intersect; zero otherwise.\nfunction intersectPlane(bounds, origin, normal) {\n  const p = [];\n  let d = 0;\n  let sign = 1;\n  let firstOne = 1;\n\n  // Evaluate the eight points. If there is a sign change, there is an intersection\n  for (let z = 4; z <= 5; ++z) {\n    p[2] = bounds[z];\n    for (let y = 2; y <= 3; ++y) {\n      p[1] = bounds[y];\n      for (let x = 0; x <= 1; ++x) {\n        p[0] = bounds[x];\n        d = vtkPlane.evaluate(normal, origin, p);\n        if (firstOne) {\n          sign = d >= 0 ? 1 : -1;\n          firstOne = 0;\n        }\n        if (d === 0.0 || sign > 0 && d < 0.0 || sign < 0 && d > 0.0) {\n          return 1;\n        }\n      }\n    }\n  }\n  return 0; // no intersection\n}\n\nfunction intersect(bounds, bBounds) {\n  if (!(isValid(bounds) && isValid(bBounds))) {\n    return false;\n  }\n  const newBounds = [0, 0, 0, 0, 0, 0];\n  let intersection;\n  for (let i = 0; i < 3; i++) {\n    intersection = false;\n    if (bBounds[i * 2] >= bounds[i * 2] && bBounds[i * 2] <= bounds[i * 2 + 1]) {\n      intersection = true;\n      newBounds[i * 2] = bBounds[i * 2];\n    } else if (bounds[i * 2] >= bBounds[i * 2] && bounds[i * 2] <= bBounds[i * 2 + 1]) {\n      intersection = true;\n      newBounds[i * 2] = bounds[i * 2];\n    }\n    if (bBounds[i * 2 + 1] >= bounds[i * 2] && bBounds[i * 2 + 1] <= bounds[i * 2 + 1]) {\n      intersection = true;\n      newBounds[i * 2 + 1] = bBounds[2 * i + 1];\n    } else if (bounds[i * 2 + 1] >= bBounds[i * 2] && bounds[i * 2 + 1] <= bBounds[i * 2 + 1]) {\n      intersection = true;\n      newBounds[i * 2 + 1] = bounds[i * 2 + 1];\n    }\n    if (!intersection) {\n      return false;\n    }\n  }\n\n  // OK they did intersect - set the box to be the result\n  bounds[0] = newBounds[0];\n  bounds[1] = newBounds[1];\n  bounds[2] = newBounds[2];\n  bounds[3] = newBounds[3];\n  bounds[4] = newBounds[4];\n  bounds[5] = newBounds[5];\n  return true;\n}\nfunction intersects(bounds, bBounds) {\n  if (!(isValid(bounds) && isValid(bBounds))) {\n    return false;\n  }\n  /* eslint-disable no-continue */\n  for (let i = 0; i < 3; i++) {\n    if (bBounds[i * 2] >= bounds[i * 2] && bBounds[i * 2] <= bounds[i * 2 + 1]) {\n      continue;\n    } else if (bounds[i * 2] >= bBounds[i * 2] && bounds[i * 2] <= bBounds[i * 2 + 1]) {\n      continue;\n    }\n    if (bBounds[i * 2 + 1] >= bounds[i * 2] && bBounds[i * 2 + 1] <= bounds[i * 2 + 1]) {\n      continue;\n    } else if (bounds[i * 2 + 1] >= bBounds[i * 2] && bounds[i * 2 + 1] <= bBounds[i * 2 + 1]) {\n      continue;\n    }\n    return false;\n  }\n  /* eslint-enable no-continue */\n\n  return true;\n}\nfunction containsPoint(bounds, x, y, z) {\n  if (x < bounds[0] || x > bounds[1]) {\n    return false;\n  }\n  if (y < bounds[2] || y > bounds[3]) {\n    return false;\n  }\n  if (z < bounds[4] || z > bounds[5]) {\n    return false;\n  }\n  return true;\n}\nfunction contains(bounds, otherBounds) {\n  // if either box is not valid or they don't intersect\n  if (!intersects(bounds, otherBounds)) {\n    return false;\n  }\n  if (!containsPoint(bounds, ...getMinPoint(otherBounds))) {\n    return false;\n  }\n  if (!containsPoint(bounds, ...getMaxPoint(otherBounds))) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Returns true if plane intersects bounding box.\n * If so, the box is cut by the plane\n * @param {array} origin\n * @param {array} normal\n */\nfunction cutWithPlane(bounds, origin, normal) {\n  // Index[0..2] represents the order of traversing the corners of a cube\n  // in (x,y,z), (y,x,z) and (z,x,y) ordering, respectively\n  const index = [[0, 1, 2, 3, 4, 5, 6, 7], [0, 1, 4, 5, 2, 3, 6, 7], [0, 2, 4, 6, 1, 3, 5, 7]];\n\n  // stores the signed distance to a plane\n  const d = [0, 0, 0, 0, 0, 0, 0, 0];\n  let idx = 0;\n  for (let ix = 0; ix < 2; ix++) {\n    for (let iy = 2; iy < 4; iy++) {\n      for (let iz = 4; iz < 6; iz++) {\n        const x = [bounds[ix], bounds[iy], bounds[iz]];\n        d[idx++] = vtkPlane.evaluate(normal, origin, x);\n      }\n    }\n  }\n  let dir = 2;\n  while (dir--) {\n    // in each direction, we test if the vertices of two orthogonal faces\n    // are on either side of the plane\n    if (oppositeSign(d[index[dir][0]], d[index[dir][4]]) && oppositeSign(d[index[dir][1]], d[index[dir][5]]) && oppositeSign(d[index[dir][2]], d[index[dir][6]]) && oppositeSign(d[index[dir][3]], d[index[dir][7]])) {\n      break;\n    }\n  }\n  if (dir < 0) {\n    return false;\n  }\n  const sign = Math.sign(normal[dir]);\n  const size = Math.abs((bounds[dir * 2 + 1] - bounds[dir * 2]) * normal[dir]);\n  let t = sign > 0 ? 1 : 0;\n  /* eslint-disable no-continue */\n  for (let i = 0; i < 4; i++) {\n    if (size === 0) {\n      continue; // shouldn't happen\n    }\n\n    const ti = Math.abs(d[index[dir][i]]) / size;\n    if (sign > 0 && ti < t) {\n      t = ti;\n    }\n    if (sign < 0 && ti > t) {\n      t = ti;\n    }\n  }\n  /* eslint-enable no-continue */\n  const bound = (1.0 - t) * bounds[dir * 2] + t * bounds[dir * 2 + 1];\n  if (sign > 0) {\n    bounds[dir * 2] = bound;\n  } else {\n    bounds[dir * 2 + 1] = bound;\n  }\n  return true;\n}\n\n/**\n * Clamp the divisions to ensure the total number doesn't exceed targetBins\n * @param {Number} targetBins - Maximum number of bins allowed\n * @param {Array} divs - Divisions array to adjust [divX, divY, divZ]\n */\nfunction clampDivisions(targetBins, divs) {\n  for (let i = 0; i < 3; ++i) {\n    divs[i] = divs[i] < 1 ? 1 : divs[i];\n  }\n  let numBins = divs[0] * divs[1] * divs[2];\n  while (numBins > targetBins) {\n    for (let i = 0; i < 3; ++i) {\n      divs[i] = divs[i] > 1 ? divs[i] - 1 : 1;\n    }\n    numBins = divs[0] * divs[1] * divs[2];\n  }\n}\n\n/**\n * Compute the number of divisions given the current bounding box and a\n * target number of buckets/bins. Handles degenerate bounding boxes properly.\n * @param {Bounds} bounds - The bounding box\n * @param {Number} totalBins - Target number of bins\n * @param {Array} divs - Output array to store divisions [divX, divY, divZ]\n * @param {Array} [adjustedBounds] - Output array to store adjusted bounds if needed\n * @returns {Number} The actual total number of bins\n */\nfunction computeDivisions(bounds, totalBins, divs) {\n  let adjustedBounds = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  // This will always produce at least one bin\n  // eslint-disable-next-line no-param-reassign\n  totalBins = totalBins <= 0 ? 1 : totalBins;\n\n  // First determine the maximum length of the side of the bounds. Keep track\n  // of zero width sides of the bounding box.\n  let numNonZero = 0;\n  const nonZero = [0, 0, 0];\n  let maxIdx = -1;\n  let max = 0.0;\n  const lengths = getLengths(bounds);\n\n  // Use a finite tolerance when detecting zero width sides\n  const totLen = lengths[0] + lengths[1] + lengths[2];\n  const zeroDetectionTolerance = totLen * (0.001 / 3.0);\n  for (let i = 0; i < 3; ++i) {\n    if (lengths[i] > max) {\n      maxIdx = i;\n      max = lengths[i];\n    }\n    if (lengths[i] > zeroDetectionTolerance) {\n      nonZero[i] = 1;\n      numNonZero++;\n    } else {\n      nonZero[i] = 0;\n    }\n  }\n\n  // Get min and max points\n  const minPoint = getMinPoint(bounds);\n  const maxPoint = getMaxPoint(bounds);\n\n  // If the bounding box is degenerate, then one bin of arbitrary size\n  if (numNonZero < 1) {\n    divs[0] = 1;\n    divs[1] = 1;\n    divs[2] = 1;\n    adjustedBounds[0] = minPoint[0] - 0.5;\n    adjustedBounds[1] = maxPoint[0] + 0.5;\n    adjustedBounds[2] = minPoint[1] - 0.5;\n    adjustedBounds[3] = maxPoint[1] + 0.5;\n    adjustedBounds[4] = minPoint[2] - 0.5;\n    adjustedBounds[5] = maxPoint[2] + 0.5;\n    return 1;\n  }\n\n  // Compute the divisions roughly in proportion to the bounding box edge lengths\n  let f = totalBins;\n  f /= nonZero[0] ? lengths[0] / totLen : 1.0;\n  f /= nonZero[1] ? lengths[1] / totLen : 1.0;\n  f /= nonZero[2] ? lengths[2] / totLen : 1.0;\n  f **= 1.0 / numNonZero;\n  for (let i = 0; i < 3; ++i) {\n    divs[i] = nonZero[i] ? Math.floor(f * lengths[i] / totLen) : 1;\n    divs[i] = divs[i] < 1 ? 1 : divs[i];\n  }\n\n  // Make sure that we do not exceed the totalBins\n  clampDivisions(totalBins, divs);\n\n  // Now compute the final bounds, making sure it is a non-zero volume\n  const delta = 0.5 * lengths[maxIdx] / divs[maxIdx];\n  for (let i = 0; i < 3; ++i) {\n    if (nonZero[i]) {\n      adjustedBounds[2 * i] = minPoint[i];\n      adjustedBounds[2 * i + 1] = maxPoint[i];\n    } else {\n      adjustedBounds[2 * i] = minPoint[i] - delta;\n      adjustedBounds[2 * i + 1] = maxPoint[i] + delta;\n    }\n  }\n  return divs[0] * divs[1] * divs[2];\n}\n\n/**\n * Calculate the squared distance from point x to the specified bounds.\n * @param {Vector3} x  The point coordinates\n * @param {Bounds} bounds  The bounding box coordinates\n * @returns {Number} The squared distance to the bounds\n */\nfunction distance2ToBounds(x, bounds) {\n  // Are we within the bounds?\n  if (x[0] >= bounds[0] && x[0] <= bounds[1] && x[1] >= bounds[2] && x[1] <= bounds[3] && x[2] >= bounds[4] && x[2] <= bounds[5]) {\n    return 0.0;\n  }\n  const deltas = [0.0, 0.0, 0.0];\n\n  // dx\n  if (x[0] < bounds[0]) {\n    deltas[0] = bounds[0] - x[0];\n  } else if (x[0] > bounds[1]) {\n    deltas[0] = x[0] - bounds[1];\n  }\n\n  // dy\n  if (x[1] < bounds[2]) {\n    deltas[1] = bounds[2] - x[1];\n  } else if (x[1] > bounds[3]) {\n    deltas[1] = x[1] - bounds[3];\n  }\n\n  // dz\n  if (x[2] < bounds[4]) {\n    deltas[2] = bounds[4] - x[2];\n  } else if (x[2] > bounds[5]) {\n    deltas[2] = x[2] - bounds[5];\n  }\n  return dot(deltas, deltas);\n}\n\n// ----------------------------------------------------------------------------\n// Light Weight class\n// ----------------------------------------------------------------------------\n\nclass BoundingBox {\n  constructor(refBounds) {\n    this.bounds = refBounds;\n    if (!this.bounds) {\n      this.bounds = new Float64Array(INIT_BOUNDS);\n    }\n  }\n  getBounds() {\n    return this.bounds;\n  }\n  equals(otherBounds) {\n    return equals(this.bounds, otherBounds);\n  }\n  isValid() {\n    return isValid(this.bounds);\n  }\n  setBounds(otherBounds) {\n    return setBounds(this.bounds, otherBounds);\n  }\n  reset() {\n    return reset(this.bounds);\n  }\n  addPoint() {\n    for (var _len = arguments.length, xyz = new Array(_len), _key = 0; _key < _len; _key++) {\n      xyz[_key] = arguments[_key];\n    }\n    return addPoint(this.bounds, ...xyz);\n  }\n  addPoints(points) {\n    return addPoints(this.bounds, points);\n  }\n  addBounds(xMin, xMax, yMin, yMax, zMin, zMax) {\n    return addBounds(this.bounds, xMin, xMax, yMin, yMax, zMin, zMax);\n  }\n  setMinPoint(x, y, z) {\n    return setMinPoint(this.bounds, x, y, z);\n  }\n  setMaxPoint(x, y, z) {\n    return setMaxPoint(this.bounds, x, y, z);\n  }\n  inflate(delta) {\n    return inflate(this.bounds, delta);\n  }\n  scale(sx, sy, sz) {\n    return scale(this.bounds, sx, sy, sz);\n  }\n  getCenter() {\n    return getCenter(this.bounds);\n  }\n  getLength(index) {\n    return getLength(this.bounds, index);\n  }\n  getLengths() {\n    return getLengths(this.bounds);\n  }\n  getMaxLength() {\n    return getMaxLength(this.bounds);\n  }\n  getDiagonalLength() {\n    return getDiagonalLength(this.bounds);\n  }\n  getDiagonalLength2() {\n    return getDiagonalLength2(this.bounds);\n  }\n  getMinPoint() {\n    return getMinPoint(this.bounds);\n  }\n  getMaxPoint() {\n    return getMaxPoint(this.bounds);\n  }\n  getXRange() {\n    return getXRange(this.bounds);\n  }\n  getYRange() {\n    return getYRange(this.bounds);\n  }\n  getZRange() {\n    return getZRange(this.bounds);\n  }\n  getCorners(corners) {\n    return getCorners(this.bounds, corners);\n  }\n  computeCornerPoints(point1, point2) {\n    return computeCornerPoints(this.bounds, point1, point2);\n  }\n  computeLocalBounds(u, v, w) {\n    return computeLocalBounds(this.bounds, u, v, w);\n  }\n  transformBounds(transform) {\n    let out = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    return transformBounds(this.bounds, transform, out);\n  }\n  computeScale3(scale3) {\n    return computeScale3(this.bounds, scale3);\n  }\n  cutWithPlane(origin, normal) {\n    return cutWithPlane(this.bounds, origin, normal);\n  }\n  intersectBox(origin, dir, coord, tolerance) {\n    return intersectBox(this.bounds, origin, dir, coord, tolerance);\n  }\n  intersectPlane(origin, normal) {\n    return intersectPlane(this.bounds, origin, normal);\n  }\n  intersect(otherBounds) {\n    return intersect(this.bounds, otherBounds);\n  }\n  intersects(otherBounds) {\n    return intersects(this.bounds, otherBounds);\n  }\n  containsPoint(x, y, z) {\n    return containsPoint(this.bounds, x, y, z);\n  }\n  contains(otherBounds) {\n    return intersects(this.bounds, otherBounds);\n  }\n  computeDivisions(totalBins, divs) {\n    let adjustedBounds = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    return computeDivisions(this.bounds, totalBins, divs, adjustedBounds);\n  }\n  distance2ToBounds(x) {\n    return distance2ToBounds(x, this.bounds);\n  }\n}\nfunction newInstance(initialValues) {\n  const bounds = initialValues && initialValues.bounds;\n  return new BoundingBox(bounds);\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  equals,\n  isValid,\n  setBounds,\n  reset,\n  addPoint,\n  addPoints,\n  addBounds,\n  setMinPoint,\n  setMaxPoint,\n  inflate,\n  scale,\n  scaleAboutCenter,\n  getCenter,\n  getLength,\n  getLengths,\n  getMaxLength,\n  getDiagonalLength,\n  getDiagonalLength2,\n  getMinPoint,\n  getMaxPoint,\n  getXRange,\n  getYRange,\n  getZRange,\n  getCorners,\n  computeCornerPoints,\n  computeLocalBounds,\n  transformBounds,\n  computeScale3,\n  cutWithPlane,\n  intersectBox,\n  intersectPlane,\n  intersect,\n  intersects,\n  containsPoint,\n  contains,\n  computeDivisions,\n  clampDivisions,\n  distance2ToBounds,\n  INIT_BOUNDS\n};\nvar vtkBoundingBox = {\n  newInstance,\n  ...STATIC\n};\n\nexport { STATIC, addBounds, addPoint, addPoints, clampDivisions, computeCornerPoints, computeDivisions, computeLocalBounds, computeScale3, contains, containsPoint, cutWithPlane, vtkBoundingBox as default, distance2ToBounds, equals, getCenter, getCorners, getDiagonalLength, getDiagonalLength2, getLength, getLengths, getMaxLength, getMaxPoint, getMinPoint, getXRange, getYRange, getZRange, intersect, intersectBox, intersectPlane, intersects, isValid, reset, scale, scaleAboutCenter, setBounds, setMaxPoint, setMinPoint, transformBounds };\n","import { m as macro } from '../../macros2.js';\nimport vtkBoundingBox from './BoundingBox.js';\nimport vtkPoints from '../Core/Points.js';\n\n// ----------------------------------------------------------------------------\n// vtkCell methods\n// ----------------------------------------------------------------------------\n\nfunction vtkCell(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkCell');\n  publicAPI.initialize = function (points) {\n    let pointIdsList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    if (!pointIdsList) {\n      model.points = points;\n      model.pointsIds = new Array(points.getNumberOfPoints());\n      for (let i = points.getNumberOfPoints() - 1; i >= 0; --i) {\n        model.pointsIds[i] = i;\n      }\n    } else {\n      model.pointsIds = pointIdsList;\n      let triangleData = model.points.getData();\n      if (triangleData.length !== 3 * model.pointsIds.length) {\n        triangleData = macro.newTypedArray(points.getDataType(), 3 * model.pointsIds.length);\n      }\n      const pointsData = points.getData();\n      model.pointsIds.forEach((pointId, index) => {\n        // const start = 3 * pointId;\n        // pointsData.set(p.subarray(start, start + 3), 3 * index);\n        let pointOffset = 3 * pointId;\n        let trianglePointOffset = 3 * index;\n        triangleData[trianglePointOffset] = pointsData[pointOffset];\n        triangleData[++trianglePointOffset] = pointsData[++pointOffset];\n        triangleData[++trianglePointOffset] = pointsData[++pointOffset];\n      });\n      model.points.setData(triangleData);\n    }\n  };\n  publicAPI.getBounds = () => model.points.getBounds();\n  publicAPI.getLength2 = () => {\n    const lengths = vtkBoundingBox.getLengths(publicAPI.getBounds());\n    return lengths[0] * lengths[0] + lengths[1] * lengths[1] + lengths[2] * lengths[2];\n  };\n  publicAPI.getParametricDistance = pcoords => {\n    let pDist;\n    let pDistMax = 0.0;\n    for (let i = 0; i < 3; i++) {\n      if (pcoords[i] < 0.0) {\n        pDist = -pcoords[i];\n      } else if (pcoords[i] > 1.0) {\n        pDist = pcoords[i] - 1.0;\n      } else {\n        // inside the cell in the parametric direction\n        pDist = 0.0;\n      }\n      if (pDist > pDistMax) {\n        pDistMax = pDist;\n      }\n    }\n    return pDistMax;\n  };\n  publicAPI.getNumberOfPoints = () => model.points.getNumberOfPoints();\n  publicAPI.deepCopy = cell => {\n    cell.initialize(model.points, model.pointsIds);\n  };\n  publicAPI.getCellDimension = () => {}; // virtual\n  publicAPI.intersectWithLine = (p1, p2, tol, t, x, pcoords, subId) => {}; // virtual\n  publicAPI.evaluatePosition = (x, closestPoint, subId, pcoords, dist2, weights) => {\n    macro.vtkErrorMacro('vtkCell.evaluatePosition is not implemented.');\n  }; // virtual\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  bounds: [-1, -1, -1, -1, -1, -1],\n  pointsIds: []\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  macro.obj(publicAPI, model);\n  if (!model.points) {\n    model.points = vtkPoints.newInstance();\n  }\n  macro.get(publicAPI, model, ['points', 'pointsIds']);\n  vtkCell(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkCell');\n\n// ----------------------------------------------------------------------------\n\nvar vtkCell$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkCell$1 as default, extend, newInstance };\n","import { m as macro } from '../../macros2.js';\nimport vtkCell from './Cell.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\nconst InitLink = {\n  ncells: 0,\n  cells: null\n};\nfunction resize(model, sz) {\n  let newSize = sz;\n  if (sz >= model.array.length) {\n    newSize += model.array.length;\n  }\n  while (newSize > model.array.length) model.array.push({\n    ncells: 0,\n    cells: null\n  });\n  model.array.length = newSize;\n}\n\n// ----------------------------------------------------------------------------\n// vtkCellLinks methods\n// ----------------------------------------------------------------------------\n\nfunction vtkCellLinks(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkCellLinks');\n\n  /**\n   * Build the link list array. All subclasses of vtkAbstractCellLinks\n   * must support this method.\n   */\n  publicAPI.buildLinks = data => {\n    const numPts = data.getPoints().getNumberOfPoints();\n    const numCells = data.getNumberOfCells();\n\n    // fill out lists with number of references to cells\n    const linkLoc = new Uint32Array(numPts);\n\n    // Use fast path if polydata\n    if (data.isA('vtkPolyData')) {\n      // traverse data to determine number of uses of each point\n      for (let cellId = 0; cellId < numCells; ++cellId) {\n        const {\n          cellPointIds\n        } = data.getCellPoints(cellId);\n        cellPointIds.forEach(cellPointId => {\n          publicAPI.incrementLinkCount(cellPointId);\n        });\n      }\n\n      // now allocate storage for the links\n      publicAPI.allocateLinks(numPts);\n      model.maxId = numPts - 1;\n      for (let cellId = 0; cellId < numCells; ++cellId) {\n        const {\n          cellPointIds\n        } = data.getCellPoints(cellId);\n        cellPointIds.forEach(cellPointId => {\n          publicAPI.insertCellReference(cellPointId, linkLoc[cellPointId]++, cellId);\n        });\n      }\n    } // any other type of dataset\n    else {\n      // traverse data to determine number of uses of each point\n      for (let cellId = 0; cellId < numCells; cellId++) {\n        // TODO: Currently not supported: const cell = data.getCell(cellId);\n        const cell = vtkCell.newInstance();\n        cell.getPointsIds().forEach(cellPointId => {\n          publicAPI.incrementLinkCount(cellPointId);\n        });\n      }\n\n      // now allocate storage for the links\n      publicAPI.allocateLinks(numPts);\n      model.maxId = numPts - 1;\n      for (let cellId = 0; cellId < numCells; ++cellId) {\n        // TODO: Currently not supported: const cell = data.getCell(cellId);\n        const cell = vtkCell.newInstance();\n        cell.getPointsIds().forEach(cellPointId => {\n          publicAPI.insertCellReference(cellPointId, linkLoc[cellPointId]++, cellId);\n        });\n      }\n    } // end else\n  };\n\n  /**\n   * Build the link list array with a provided connectivity array.\n   */\n  // publicAPI.buildLinks = (data, connectivity) => {};\n\n  /**\n   * Allocate the specified number of links (i.e., number of points) that\n   * will be built.\n   */\n  publicAPI.allocate = function (numLinks) {\n    let ext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n    model.array = Array(numLinks).fill().map(() => ({\n      ncells: 0,\n      cells: null\n    }));\n    model.extend = ext;\n    model.maxId = -1;\n  };\n  publicAPI.initialize = () => {\n    model.array = null;\n  };\n\n  /**\n   * Get a link structure given a point id.\n   */\n  publicAPI.getLink = ptId => model.array[ptId];\n\n  /**\n   * Get the number of cells using the point specified by ptId.\n   */\n  publicAPI.getNcells = ptId => model.array[ptId].ncells;\n\n  /**\n   * Return a list of cell ids using the point.\n   */\n  publicAPI.getCells = ptId => model.array[ptId].cells;\n\n  /**\n   * Insert a new point into the cell-links data structure. The size parameter\n   * is the initial size of the list.\n   */\n  publicAPI.insertNextPoint = numLinks => {\n    model.array.push({\n      ncells: numLinks,\n      cells: Array(numLinks)\n    });\n    ++model.maxId;\n  };\n\n  /**\n   * Insert a cell id into the list of cells (at the end) using the cell id\n   * provided. (Make sure to extend the link list (if necessary) using the\n   * method resizeCellList().)\n   */\n  publicAPI.insertNextCellReference = (ptId, cellId) => {\n    model.array[ptId].cells[model.array[ptId].ncells++] = cellId;\n  };\n\n  /**\n   * Delete point (and storage) by destroying links to using cells.\n   */\n  publicAPI.deletePoint = ptId => {\n    model.array[ptId].ncells = 0;\n    model.array[ptId].cells = null;\n  };\n\n  /**\n   * Delete the reference to the cell (cellId) from the point (ptId). This\n   * removes the reference to the cellId from the cell list, but does not\n   * resize the list (recover memory with resizeCellList(), if necessary).\n   */\n  publicAPI.removeCellReference = (cellId, ptId) => {\n    model.array[ptId].cells = model.array[ptId].cells.filter(cell => cell !== cellId);\n    model.array[ptId].ncells = model.array[ptId].cells.length;\n  };\n\n  /**\n   * Add the reference to the cell (cellId) from the point (ptId). This\n   * adds a reference to the cellId from the cell list, but does not resize\n   * the list (extend memory with resizeCellList(), if necessary).\n   */\n  publicAPI.addCellReference = (cellId, ptId) => {\n    model.array[ptId].cells[model.array[ptId].ncells++] = cellId;\n  };\n\n  /**\n   * Change the length of a point's link list (i.e., list of cells using a\n   * point) by the size specified.\n   */\n  publicAPI.resizeCellList = (ptId, size) => {\n    model.array[ptId].cells.length = size;\n  };\n\n  /**\n   * Reclaim any unused memory.\n   */\n  publicAPI.squeeze = () => {\n    resize(model, model.maxId + 1);\n  };\n\n  /**\n   * Reset to a state of no entries without freeing the memory.\n   */\n  publicAPI.reset = () => {\n    model.maxId = -1;\n  };\n\n  /**\n   * Standard DeepCopy method.  Since this object contains no reference\n   * to other objects, there is no ShallowCopy.\n   */\n  publicAPI.deepCopy = src => {\n    model.array = [...src.array];\n    model.extend = src.extend;\n    model.maxId = src.maxId;\n  };\n\n  /**\n   * Increment the count of the number of cells using the point.\n   */\n  publicAPI.incrementLinkCount = ptId => {\n    ++model.array[ptId].ncells;\n  };\n  publicAPI.allocateLinks = n => {\n    for (let i = 0; i < n; ++i) {\n      model.array[i].cells = new Array(model.array[i].ncells);\n    }\n  };\n\n  /**\n   * Insert a cell id into the list of cells using the point.\n   */\n  publicAPI.insertCellReference = (ptId, pos, cellId) => {\n    model.array[ptId].cells[pos] = cellId;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  array: null,\n  // pointer to data\n  maxId: 0,\n  // maximum index inserted thus far\n  extend: 0 // grow array by this point\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  macro.obj(publicAPI, model);\n  vtkCellLinks(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkCellLinks');\n\n// ----------------------------------------------------------------------------\n\nvar vtkCellLinks$1 = {\n  newInstance,\n  extend\n};\n\nexport { InitLink, vtkCellLinks$1 as default, extend, newInstance };\n","const CellType = {\n  // Linear cells\n  VTK_EMPTY_CELL: 0,\n  VTK_VERTEX: 1,\n  VTK_POLY_VERTEX: 2,\n  VTK_LINE: 3,\n  VTK_POLY_LINE: 4,\n  VTK_TRIANGLE: 5,\n  VTK_TRIANGLE_STRIP: 6,\n  VTK_POLYGON: 7,\n  VTK_PIXEL: 8,\n  VTK_QUAD: 9,\n  VTK_TETRA: 10,\n  VTK_VOXEL: 11,\n  VTK_HEXAHEDRON: 12,\n  VTK_WEDGE: 13,\n  VTK_PYRAMID: 14,\n  VTK_PENTAGONAL_PRISM: 15,\n  VTK_HEXAGONAL_PRISM: 16,\n  // Quadratic, isoparametric cells\n  VTK_QUADRATIC_EDGE: 21,\n  VTK_QUADRATIC_TRIANGLE: 22,\n  VTK_QUADRATIC_QUAD: 23,\n  VTK_QUADRATIC_POLYGON: 36,\n  VTK_QUADRATIC_TETRA: 24,\n  VTK_QUADRATIC_HEXAHEDRON: 25,\n  VTK_QUADRATIC_WEDGE: 26,\n  VTK_QUADRATIC_PYRAMID: 27,\n  VTK_BIQUADRATIC_QUAD: 28,\n  VTK_TRIQUADRATIC_HEXAHEDRON: 29,\n  VTK_QUADRATIC_LINEAR_QUAD: 30,\n  VTK_QUADRATIC_LINEAR_WEDGE: 31,\n  VTK_BIQUADRATIC_QUADRATIC_WEDGE: 32,\n  VTK_BIQUADRATIC_QUADRATIC_HEXAHEDRON: 33,\n  VTK_BIQUADRATIC_TRIANGLE: 34,\n  // Cubic, isoparametric cell\n  VTK_CUBIC_LINE: 35,\n  // Special class of cells formed by convex group of points\n  VTK_CONVEX_POINT_SET: 41,\n  // Polyhedron cell (consisting of polygonal faces)\n  VTK_POLYHEDRON: 42,\n  // Higher order cells in parametric form\n  VTK_PARAMETRIC_CURVE: 51,\n  VTK_PARAMETRIC_SURFACE: 52,\n  VTK_PARAMETRIC_TRI_SURFACE: 53,\n  VTK_PARAMETRIC_QUAD_SURFACE: 54,\n  VTK_PARAMETRIC_TETRA_REGION: 55,\n  VTK_PARAMETRIC_HEX_REGION: 56,\n  // Higher order cells\n  VTK_HIGHER_ORDER_EDGE: 60,\n  VTK_HIGHER_ORDER_TRIANGLE: 61,\n  VTK_HIGHER_ORDER_QUAD: 62,\n  VTK_HIGHER_ORDER_POLYGON: 63,\n  VTK_HIGHER_ORDER_TETRAHEDRON: 64,\n  VTK_HIGHER_ORDER_WEDGE: 65,\n  VTK_HIGHER_ORDER_PYRAMID: 66,\n  VTK_HIGHER_ORDER_HEXAHEDRON: 67,\n  // Arbitrary order Lagrange elements (formulated separated from generic higher order cells)\n  VTK_LAGRANGE_CURVE: 68,\n  VTK_LAGRANGE_TRIANGLE: 69,\n  VTK_LAGRANGE_QUADRILATERAL: 70,\n  VTK_LAGRANGE_TETRAHEDRON: 71,\n  VTK_LAGRANGE_HEXAHEDRON: 72,\n  VTK_LAGRANGE_WEDGE: 73,\n  VTK_LAGRANGE_PYRAMID: 74,\n  VTK_NUMBER_OF_CELL_TYPES: 75\n};\n\n// This list should contain the cell class names in\n// the same order as in CellType.\nconst CellTypesStrings = ['vtkEmptyCell', 'vtkVertex', 'vtkPolyVertex', 'vtkLine', 'vtkPolyLine', 'vtkTriangle', 'vtkTriangleStrip', 'vtkPolygon', 'vtkPixel', 'vtkQuad', 'vtkTetra', 'vtkVoxel', 'vtkHexahedron', 'vtkWedge', 'vtkPyramid', 'vtkPentagonalPrism', 'vtkHexagonalPrism', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'vtkQuadraticEdge', 'vtkQuadraticTriangle', 'vtkQuadraticQuad', 'vtkQuadraticTetra', 'vtkQuadraticHexahedron', 'vtkQuadraticWedge', 'vtkQuadraticPyramid', 'vtkBiQuadraticQuad', 'vtkTriQuadraticHexahedron', 'vtkQuadraticLinearQuad', 'vtkQuadraticLinearWedge', 'vtkBiQuadraticQuadraticWedge', 'vtkBiQuadraticQuadraticHexahedron', 'vtkBiQuadraticTriangle', 'vtkCubicLine', 'vtkQuadraticPolygon', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'vtkConvexPointSet', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'vtkParametricCurve', 'vtkParametricSurface', 'vtkParametricTriSurface', 'vtkParametricQuadSurface', 'vtkParametricTetraRegion', 'vtkParametricHexRegion', 'UnknownClass', 'UnknownClass', 'UnknownClass', 'vtkHigherOrderEdge', 'vtkHigherOrderTriangle', 'vtkHigherOrderQuad', 'vtkHigherOrderPolygon', 'vtkHigherOrderTetrahedron', 'vtkHigherOrderWedge', 'vtkHigherOrderPyramid', 'vtkHigherOrderHexahedron'];\nvar Constants = {\n  CellType,\n  CellTypesStrings\n};\n\nexport { CellType, CellTypesStrings, Constants as default };\n","import { m as macro } from '../../macros2.js';\nimport { CellTypesStrings, CellType } from './CellTypes/Constants.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n/**\n * Given an int (as defined in vtkCellType.h) identifier for a class\n * return it's classname.\n */\nfunction getClassNameFromTypeId(typeId) {\n  return typeId < CellTypesStrings.length ? CellTypesStrings[typeId] : 'UnknownClass';\n}\n\n/**\n * Given a data object classname, return it's int identified (as\n * defined in vtkCellType.h)\n */\nfunction getTypeIdFromClassName(cellTypeString) {\n  return CellTypesStrings.findIndex(cellTypeString);\n}\n\n/**\n * This convenience method is a fast check to determine if a cell type\n * represents a linear or nonlinear cell.  This is generally much more\n * efficient than getting the appropriate vtkCell and checking its IsLinear\n * method.\n */\nfunction isLinear(type) {\n  return type < CellType.VTK_QUADRATIC_EDGE || type === CellType.VTK_CONVEX_POINT_SET || type === CellType.VTK_POLYHEDRON;\n}\nfunction hasSubCells(cellType) {\n  return cellType === CellType.VTK_TRIANGLE_STRIP || cellType === CellType.VTK_POLY_LINE || cellType === CellType.VTK_POLY_VERTEX;\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  getClassNameFromTypeId,\n  getTypeIdFromClassName,\n  isLinear,\n  hasSubCells\n};\n\n// ----------------------------------------------------------------------------\n// vtkCellTypes methods\n// ----------------------------------------------------------------------------\n\nfunction vtkCellTypes(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkCellTypes');\n\n  /**\n   * Allocate memory for this array. Delete old storage only if necessary.\n   */\n  publicAPI.allocate = function () {\n    let sz = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 512;\n    let ext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n    model.size = sz > 0 ? sz : 1;\n    model.extend = ext > 0 ? ext : 1;\n    model.maxId = -1;\n    model.typeArray = new Uint8Array(sz);\n    model.locationArray = new Uint32Array(sz);\n  };\n\n  /**\n   * Add a cell at specified id.\n   */\n  publicAPI.insertCell = (cellId, type, loc) => {\n    model.typeArray[cellId] = type;\n    model.locationArray[cellId] = loc;\n    if (cellId > model.maxId) {\n      model.maxId = cellId;\n    }\n  };\n\n  /**\n   * Add a cell to the object in the next available slot.\n   */\n  publicAPI.insertNextCell = (type, loc) => {\n    publicAPI.insertCell(++model.maxId, type, loc);\n    return model.maxId;\n  };\n\n  /**\n   * Specify a group of cell types. This version is provided to maintain\n   * backwards compatibility and does a copy of the cellLocations\n   */\n  publicAPI.setCellTypes = (ncells, cellTypes, cellLocations) => {\n    model.size = ncells;\n    model.typeArray = cellTypes;\n    model.locationArray = cellLocations;\n    model.maxId = ncells - 1;\n  };\n\n  /**\n   * Return the location of the cell in the associated vtkCellArray.\n   */\n  publicAPI.getCellLocation = cellId => model.locationArray[cellId];\n\n  /**\n   * Delete cell by setting to nullptr cell type.\n   */\n  publicAPI.deleteCell = cellId => {\n    model.typeArray[cellId] = CellType.VTK_EMPTY_CELL;\n  };\n\n  /**\n   * Return the number of types in the list.\n   */\n  publicAPI.getNumberOfTypes = () => model.maxId + 1;\n\n  /**\n   * Return true if type specified is contained in list; false otherwise.\n   */\n  publicAPI.isType = type => {\n    const numTypes = publicAPI.getNumberOfTypes();\n    for (let i = 0; i < numTypes; ++i) {\n      if (type === publicAPI.getCellType(i)) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  /**\n   * Add the type specified to the end of the list. Range checking is performed.\n   */\n  publicAPI.insertNextType = type => publicAPI.insertNextCell(type, -1);\n\n  /**\n   * Return the type of cell.\n   */\n  publicAPI.getCellType = cellId => model.typeArray[cellId];\n\n  /**\n   * Reclaim any extra memory.\n   */\n  // TODO: publicAPI.squeeze = () =>  {};\n\n  /**\n   * Initialize object without releasing memory.\n   */\n  publicAPI.reset = () => {\n    model.maxId = -1;\n  };\n\n  /**\n   * Standard DeepCopy method.  Since this object contains no reference\n   * to other objects, there is no ShallowCopy.\n   */\n  publicAPI.deepCopy = src => {\n    publicAPI.allocate(src.getSize(), src.getExtend());\n    model.typeArray.set(src.getTypeArray());\n    model.locationArray.set(src.getLocationArray());\n    model.maxId = src.getMaxId();\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // typeArray: null, // pointer to types array\n  // locationArray: null;   // pointer to array of offsets\n  size: 0,\n  // allocated size of data\n  maxId: -1,\n  // maximum index inserted thus far\n  extend: 1000 // grow array by this point\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['size', 'maxId', 'extend']);\n  macro.getArray(publicAPI, model, ['typeArray', 'locationArray']);\n  vtkCellTypes(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkCellTypes');\n\n// ----------------------------------------------------------------------------\n\nvar vtkCellTypes$1 = {\n  newInstance,\n  extend,\n  ...STATIC\n};\n\nexport { STATIC, vtkCellTypes$1 as default, extend, newInstance };\n","const IntersectionState = {\n  NO_INTERSECTION: 0,\n  YES_INTERSECTION: 1,\n  ON_LINE: 2\n};\nvar Constants = {\n  IntersectionState\n};\n\nexport { IntersectionState, Constants as default };\n","import { m as macro } from '../../macros2.js';\nimport Constants from './Line/Constants.js';\nimport vtkCell from './Cell.js';\nimport { d as dot, f as distance2BetweenPoints, s as subtract, g as solveLinearSystem } from '../Core/Math/index.js';\nimport { quat } from 'gl-matrix';\n\nconst {\n  IntersectionState\n} = Constants;\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\nfunction distanceToLine(x, p1, p2) {\n  let closestPoint = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  const outObj = {\n    t: Number.MIN_VALUE,\n    distance: 0\n  };\n  const p21 = [];\n  let closest;\n  // Determine appropriate vector\n  p21[0] = p2[0] - p1[0];\n  p21[1] = p2[1] - p1[1];\n  p21[2] = p2[2] - p1[2];\n\n  // Get parametric location\n  const num = p21[0] * (x[0] - p1[0]) + p21[1] * (x[1] - p1[1]) + p21[2] * (x[2] - p1[2]);\n  const denom = dot(p21, p21);\n\n  // trying to avoid an expensive fabs\n  let tolerance = 1e-5 * num;\n  if (denom !== 0.0) {\n    outObj.t = num / denom;\n  }\n  if (tolerance < 0.0) {\n    tolerance = -tolerance;\n  }\n  if (-tolerance < denom && denom < tolerance) {\n    closest = p1;\n  } else if (denom <= 0.0 || outObj.t < 0.0) {\n    // If parametric coordinate is within 0<=p<=1, then the point is closest to\n    // the line.  Otherwise, it's closest to a point at the end of the line.\n    closest = p1;\n  } else if (outObj.t > 1.0) {\n    closest = p2;\n  } else {\n    closest = p21;\n    p21[0] = p1[0] + outObj.t * p21[0];\n    p21[1] = p1[1] + outObj.t * p21[1];\n    p21[2] = p1[2] + outObj.t * p21[2];\n  }\n  if (closestPoint) {\n    closestPoint[0] = closest[0];\n    closestPoint[1] = closest[1];\n    closestPoint[2] = closest[2];\n  }\n  outObj.distance = distance2BetweenPoints(closest, x);\n  return outObj;\n}\nfunction intersection(a1, a2, b1, b2, u, v) {\n  const a21 = [];\n  const b21 = [];\n  const b1a1 = [];\n  u[0] = 0.0;\n  v[0] = 0.0;\n\n  // Determine line vectors.\n  subtract(a2, a1, a21);\n  subtract(b2, b1, b21);\n  subtract(b1, a1, b1a1);\n\n  // Compute the system (least squares) matrix.\n  const A = [dot(a21, a21), -dot(a21, b21), -dot(a21, b21), dot(b21, b21)];\n\n  // Compute the least squares system constant term.\n  const c = [];\n  c[0] = dot(a21, b1a1);\n  c[1] = -dot(b21, b1a1);\n  // Solve the system of equations\n  if (solveLinearSystem(A, c, 2) === 0) {\n    // The lines are colinear. Therefore, one of the four endpoints is the\n    // point of closest approach\n    let minDist = Number.MAX_VALUE;\n    const p = [a1, a2, b1, b2];\n    const l1 = [b1, b1, a1, a1];\n    const l2 = [b2, b2, a2, a2];\n    [v[0], v[0], u[0], u[0]];\n    [u[0], u[0], v[0], v[0]];\n    let obj;\n    for (let i = 0; i < 4; i++) {\n      obj = distanceToLine(p[i], l1[i], l2[i]);\n      if (obj.distance < minDist) {\n        minDist = obj.distance;\n        obj.t;\n      }\n    }\n    return IntersectionState.ON_LINE;\n  }\n  u[0] = c[0];\n  v[0] = c[1];\n\n  // Check parametric coordinates for intersection.\n  if (u[0] >= 0.0 && u[0] <= 1.0 && v[0] >= 0.0 && v[0] <= 1.0) {\n    return IntersectionState.YES_INTERSECTION;\n  }\n  return IntersectionState.NO_INTERSECTION;\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  distanceToLine,\n  intersection\n};\n\n// ----------------------------------------------------------------------------\n// vtkLine methods\n// ----------------------------------------------------------------------------\n\nfunction vtkLine(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkLine');\n  function isBetweenPoints(t) {\n    return t >= 0.0 && t <= 1.0;\n  }\n  publicAPI.getCellDimension = () => 1;\n  publicAPI.intersectWithLine = (p1, p2, tol, x, pcoords) => {\n    const outObj = {\n      intersect: 0,\n      t: Number.MAX_VALUE,\n      subId: 0,\n      betweenPoints: null\n    };\n    pcoords[1] = 0.0;\n    pcoords[2] = 0.0;\n    const projXYZ = [];\n    const a1 = [];\n    const a2 = [];\n    model.points.getPoint(0, a1);\n    model.points.getPoint(1, a2);\n    const u = [];\n    const v = [];\n    const intersect = intersection(p1, p2, a1, a2, u, v);\n    outObj.t = u[0];\n    outObj.betweenPoints = isBetweenPoints(outObj.t);\n    pcoords[0] = v[0];\n    if (intersect === IntersectionState.YES_INTERSECTION) {\n      // make sure we are within tolerance\n      for (let i = 0; i < 3; i++) {\n        x[i] = a1[i] + pcoords[0] * (a2[i] - a1[i]);\n        projXYZ[i] = p1[i] + outObj.t * (p2[i] - p1[i]);\n      }\n      if (distance2BetweenPoints(x, projXYZ) <= tol * tol) {\n        outObj.intersect = 1;\n        return outObj;\n      }\n    } else {\n      let outDistance;\n      // check to see if it lies within tolerance\n      // one of the parametric coords must be outside 0-1\n      if (outObj.t < 0.0) {\n        outDistance = distanceToLine(p1, a1, a2, x);\n        if (outDistance.distance <= tol * tol) {\n          outObj.t = 0.0;\n          outObj.intersect = 1;\n          outObj.betweenPoints = true; // Intersection is near p1\n          return outObj;\n        }\n        return outObj;\n      }\n      if (outObj.t > 1.0) {\n        outDistance = distanceToLine(p2, a1, a2, x);\n        if (outDistance.distance <= tol * tol) {\n          outObj.t = 1.0;\n          outObj.intersect = 1;\n          outObj.betweenPoints = true; // Intersection is near p2\n          return outObj;\n        }\n        return outObj;\n      }\n      if (pcoords[0] < 0.0) {\n        pcoords[0] = 0.0;\n        outDistance = distanceToLine(a1, p1, p2, x);\n        outObj.t = outDistance.t;\n        if (outDistance.distance <= tol * tol) {\n          outObj.intersect = 1;\n          return outObj;\n        }\n        return outObj;\n      }\n      if (pcoords[0] > 1.0) {\n        pcoords[0] = 1.0;\n        outDistance = distanceToLine(a2, p1, p2, x);\n        outObj.t = outDistance.t;\n        if (outDistance.distance <= tol * tol) {\n          outObj.intersect = 1;\n          return outObj;\n        }\n        return outObj;\n      }\n    }\n    return outObj;\n  };\n  publicAPI.evaluateLocation = (pcoords, x, weights) => {\n    const a1 = [];\n    const a2 = [];\n    model.points.getPoint(0, a1);\n    model.points.getPoint(1, a2);\n    for (let i = 0; i < 3; i++) {\n      x[i] = a1[i] + pcoords[0] * (a2[i] - a1[i]);\n    }\n    weights[0] = 1.0 - pcoords[0];\n    weights[1] = pcoords[0];\n  };\n  publicAPI.evaluateOrientation = (pcoords, q, weights) => {\n    if (model.orientations) {\n      quat.slerp(q, model.orientations[0], model.orientations[1], pcoords[0]);\n      weights[0] = 1.0 - pcoords[0];\n      weights[1] = pcoords[0];\n      return true;\n    }\n    return false;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  orientations: null // an array of two quat or null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  vtkCell.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['orientations']);\n  vtkLine(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkLine');\n\n// ----------------------------------------------------------------------------\n\nvar vtkLine$1 = {\n  newInstance,\n  extend,\n  ...STATIC,\n  ...Constants\n};\n\nexport { STATIC, vtkLine$1 as default, extend, newInstance };\n","import vtk from '../../../vtk.js';\nimport { m as macro } from '../../../macros2.js';\nimport vtkDataArray from '../../Core/DataArray.js';\n\nconst {\n  vtkErrorMacro,\n  vtkWarningMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// vtkFieldData methods\n// ----------------------------------------------------------------------------\n\nfunction vtkFieldData(publicAPI, model) {\n  model.classHierarchy.push('vtkFieldData');\n  const superGetState = publicAPI.getState;\n\n  // Decode serialized data if any\n  if (model.arrays) {\n    model.arrays = model.arrays.map(item => ({\n      data: vtk(item.data)\n    }));\n  }\n  publicAPI.initialize = () => {\n    publicAPI.initializeFields();\n    publicAPI.copyAllOn();\n    publicAPI.clearFieldFlags();\n  };\n  publicAPI.initializeFields = () => {\n    model.arrays = [];\n    model.copyFieldFlags = {};\n    publicAPI.modified();\n  };\n  publicAPI.copyStructure = other => {\n    publicAPI.initializeFields();\n    model.copyFieldFlags = other.getCopyFieldFlags().map(x => x); // Deep-copy\n    model.arrays = other.getArrays().map(x => ({\n      data: x\n    })); // Deep-copy\n    // TODO: Copy array information objects (once we support information objects)\n  };\n\n  publicAPI.getNumberOfArrays = () => model.arrays.length;\n  publicAPI.getNumberOfActiveArrays = () => model.arrays.length;\n  publicAPI.addArray = arr => {\n    const name = arr.getName();\n    const {\n      array,\n      index\n    } = publicAPI.getArrayWithIndex(name);\n    if (array != null) {\n      model.arrays[index] = {\n        data: arr\n      };\n      return index;\n    }\n    model.arrays = [].concat(model.arrays, {\n      data: arr\n    });\n    return model.arrays.length - 1;\n  };\n  publicAPI.removeAllArrays = () => {\n    model.arrays = [];\n  };\n  publicAPI.removeArray = arrayName => {\n    const index = model.arrays.findIndex(array => array.data.getName() === arrayName);\n    return publicAPI.removeArrayByIndex(index);\n  };\n  publicAPI.removeArrayByIndex = arrayIdx => {\n    if (arrayIdx !== -1 && arrayIdx < model.arrays.length) {\n      model.arrays.splice(arrayIdx, 1);\n      // TBD modified() ?\n      return true;\n    }\n    return false;\n  };\n  publicAPI.getArrays = () => model.arrays.map(entry => entry.data);\n  publicAPI.getArray = arraySpec => typeof arraySpec === 'number' ? publicAPI.getArrayByIndex(arraySpec) : publicAPI.getArrayByName(arraySpec);\n  publicAPI.getArrayByName = arrayName => model.arrays.reduce((a, b, i) => b.data.getName() === arrayName ? b.data : a, null);\n  publicAPI.getArrayWithIndex = arrayName => {\n    const index = model.arrays.findIndex(array => array.data.getName() === arrayName);\n    return {\n      array: index !== -1 ? model.arrays[index].data : null,\n      index\n    };\n  };\n  publicAPI.getArrayByIndex = idx => idx >= 0 && idx < model.arrays.length ? model.arrays[idx].data : null;\n  publicAPI.hasArray = arrayName => publicAPI.getArrayWithIndex(arrayName).index >= 0;\n  publicAPI.getArrayName = idx => {\n    const arr = model.arrays[idx];\n    return arr ? arr.data.getName() : '';\n  };\n  publicAPI.getCopyFieldFlags = () => model.copyFieldFlags;\n  publicAPI.getFlag = arrayName => model.copyFieldFlags[arrayName];\n  publicAPI.passData = function (other) {\n    let fromId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n    let toId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;\n    other.getArrays().forEach(arr => {\n      const copyFlag = publicAPI.getFlag(arr.getName());\n      if (copyFlag !== false && !(model.doCopyAllOff && copyFlag !== true) && arr) {\n        let destArr = publicAPI.getArrayByName(arr.getName());\n        if (!destArr) {\n          if (fromId < 0 || fromId > arr.getNumberOfTuples()) {\n            // TBD: should this be a deep or a shallow copy?\n            publicAPI.addArray(arr);\n            other.getAttributes(arr).forEach(attrType => {\n              publicAPI.setAttribute(arr, attrType);\n            });\n          } else {\n            const ncomps = arr.getNumberOfComponents();\n            let newSize = arr.getNumberOfValues();\n            const tId = toId > -1 ? toId : fromId;\n            if (newSize <= tId * ncomps) {\n              newSize = (tId + 1) * ncomps;\n            }\n            destArr = vtkDataArray.newInstance({\n              name: arr.getName(),\n              dataType: arr.getDataType(),\n              numberOfComponents: ncomps,\n              values: macro.newTypedArray(arr.getDataType(), newSize),\n              size: 0\n            });\n            destArr.insertTuple(tId, arr.getTuple(fromId));\n            publicAPI.addArray(destArr);\n            other.getAttributes(arr).forEach(attrType => {\n              publicAPI.setAttribute(destArr, attrType);\n            });\n          }\n        } else if (arr.getNumberOfComponents() === destArr.getNumberOfComponents()) {\n          if (fromId > -1 && fromId < arr.getNumberOfTuples()) {\n            const tId = toId > -1 ? toId : fromId;\n            destArr.insertTuple(tId, arr.getTuple(fromId));\n          } else {\n            // if `fromId` is not provided, just copy all (or as much possible)\n            // from `arr` to `destArr`.\n            destArr.insertTuples(0, arr.getTuples());\n          }\n        } else {\n          vtkErrorMacro('Unhandled case in passData');\n        }\n      }\n    });\n  };\n  publicAPI.interpolateData = function (other) {\n    let fromId1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n    let fromId2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;\n    let toId = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : -1;\n    let t = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0.5;\n    other.getArrays().forEach(arr => {\n      const copyFlag = publicAPI.getFlag(arr.getName());\n      if (copyFlag !== false && !(model.doCopyAllOff && copyFlag !== true) && arr) {\n        let destArr = publicAPI.getArrayByName(arr.getName());\n        if (!destArr) {\n          if (fromId1 < 0 || fromId2 < 0 || fromId1 > arr.getNumberOfTuples()) {\n            // TBD: should this be a deep or a shallow copy?\n            publicAPI.addArray(arr);\n            other.getAttributes(arr).forEach(attrType => {\n              publicAPI.setAttribute(arr, attrType);\n            });\n          } else {\n            const ncomps = arr.getNumberOfComponents();\n            let newSize = arr.getNumberOfValues();\n            // TODO: Is this supposed to happen?\n            const tId = toId > -1 ? toId : fromId1;\n            if (newSize <= tId * ncomps) {\n              newSize = (tId + 1) * ncomps;\n            }\n            destArr = vtkDataArray.newInstance({\n              name: arr.getName(),\n              dataType: arr.getDataType(),\n              numberOfComponents: ncomps,\n              values: macro.newTypedArray(arr.getDataType(), newSize),\n              size: 0\n            });\n            destArr.interpolateTuple(tId, arr, fromId1, arr, fromId2, t);\n            publicAPI.addArray(destArr);\n            other.getAttributes(arr).forEach(attrType => {\n              publicAPI.setAttribute(destArr, attrType);\n            });\n          }\n        } else if (arr.getNumberOfComponents() === destArr.getNumberOfComponents()) {\n          if (fromId1 > -1 && fromId1 < arr.getNumberOfTuples()) {\n            const tId = toId > -1 ? toId : fromId1;\n            destArr.interpolateTuple(tId, arr, fromId1, arr, fromId2, t);\n            vtkWarningMacro('Unexpected case in interpolateData');\n          } else {\n            // if `fromId` is not provided, just copy all (or as much possible)\n            // from `arr` to `destArr`.\n            destArr.insertTuples(arr.getTuples());\n          }\n        } else {\n          vtkErrorMacro('Unhandled case in interpolateData');\n        }\n      }\n    });\n  };\n  publicAPI.copyFieldOn = arrayName => {\n    model.copyFieldFlags[arrayName] = true;\n  };\n  publicAPI.copyFieldOff = arrayName => {\n    model.copyFieldFlags[arrayName] = false;\n  };\n  publicAPI.copyAllOn = () => {\n    if (!model.doCopyAllOn || model.doCopyAllOff) {\n      model.doCopyAllOn = true;\n      model.doCopyAllOff = false;\n      publicAPI.modified();\n    }\n  };\n  publicAPI.copyAllOff = () => {\n    if (model.doCopyAllOn || !model.doCopyAllOff) {\n      model.doCopyAllOn = false;\n      model.doCopyAllOff = true;\n      publicAPI.modified();\n    }\n  };\n  publicAPI.clearFieldFlags = () => {\n    model.copyFieldFlags = {};\n  };\n  publicAPI.deepCopy = other => {\n    model.arrays = other.getArrays().map(arr => {\n      const arrNew = arr.newClone();\n      arrNew.deepCopy(arr);\n      return {\n        data: arrNew\n      };\n    });\n  };\n  publicAPI.copyFlags = other => other.getCopyFieldFlags().map(x => x);\n  // TODO: publicAPI.squeeze = () => model.arrays.forEach(entry => entry.data.squeeze());\n  publicAPI.reset = () => model.arrays.forEach(entry => entry.data.reset());\n  // TODO: getActualMemorySize\n  publicAPI.getMTime = () => model.arrays.reduce((a, b) => b.data.getMTime() > a ? b.data.getMTime() : a, model.mtime);\n  // TODO: publicAPI.getField = (ids, other) => { copy ids from other into this model's arrays }\n  // TODO: publicAPI.getArrayContainingComponent = (component) => ...\n  publicAPI.getNumberOfComponents = () => model.arrays.reduce((a, b) => a + b.data.getNumberOfComponents(), 0);\n  publicAPI.getNumberOfTuples = () => model.arrays.length > 0 ? model.arrays[0].getNumberOfTuples() : 0;\n  publicAPI.getState = () => {\n    const result = superGetState();\n    if (result) {\n      result.arrays = model.arrays.map(item => ({\n        data: item.data.getState()\n      }));\n    }\n    return result;\n  };\n}\nconst DEFAULT_VALUES = {\n  arrays: [],\n  copyFieldFlags: [],\n  // fields not to copy\n  doCopyAllOn: true,\n  doCopyAllOff: false\n};\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  macro.obj(publicAPI, model);\n  vtkFieldData(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkFieldData');\n\n// ----------------------------------------------------------------------------\n\nvar vtkFieldData$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkFieldData$1 as default, extend, newInstance };\n","import { m as macro } from '../../macros2.js';\nimport vtkFieldData from './DataSetAttributes/FieldData.js';\nimport Constants from './DataSetAttributes/Constants.js';\nimport vtkDataArray from '../Core/DataArray.js';\n\nconst {\n  AttributeTypes,\n  AttributeCopyOperations\n} = Constants;\nconst {\n  vtkWarningMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// vtkDataSetAttributes methods\n// ----------------------------------------------------------------------------\n\nfunction vtkDataSetAttributes(publicAPI, model) {\n  const attrTypes = ['Scalars', 'Vectors', 'Normals', 'TCoords', 'Tensors', 'GlobalIds', 'PedigreeIds'];\n  function cleanAttributeType(attType) {\n    // Given an integer or string, convert the result to one of the\n    // strings in the \"attrTypes\" array above or null (if\n    // no match is found)\n    let cleanAttType = attrTypes.find(ee => AttributeTypes[ee.toUpperCase()] === attType || typeof attType !== 'number' && ee.toLowerCase() === attType.toLowerCase());\n    if (typeof cleanAttType === 'undefined') {\n      cleanAttType = null;\n    }\n    return cleanAttType;\n  }\n\n  // Set our className\n  model.classHierarchy.push('vtkDataSetAttributes');\n  const superClass = {\n    ...publicAPI\n  };\n  publicAPI.checkNumberOfComponents = x => true; // TODO\n\n  publicAPI.setAttribute = (arr, uncleanAttType) => {\n    const attType = cleanAttributeType(uncleanAttType);\n    if (arr && attType.toUpperCase() === 'PEDIGREEIDS' && !arr.isA('vtkDataArray')) {\n      vtkWarningMacro(`Cannot set attribute ${attType}. The attribute must be a vtkDataArray.`);\n      return -1;\n    }\n    if (arr && !publicAPI.checkNumberOfComponents(arr, attType)) {\n      vtkWarningMacro(`Cannot set attribute ${attType}. Incorrect number of components.`);\n      return -1;\n    }\n    let currentAttribute = model[`active${attType}`];\n    if (currentAttribute >= 0 && currentAttribute < model.arrays.length) {\n      if (model.arrays[currentAttribute] === arr) {\n        return currentAttribute;\n      }\n      // FIXME setting an array actually changes its index\n      publicAPI.removeArrayByIndex(currentAttribute);\n    }\n    if (arr) {\n      currentAttribute = publicAPI.addArray(arr);\n      model[`active${attType}`] = currentAttribute;\n    } else {\n      model[`active${attType}`] = -1;\n    }\n    publicAPI.modified();\n    return model[`active${attType}`];\n  };\n  publicAPI.getAttributes = arr => attrTypes.filter(attrType => publicAPI[`get${attrType}`]() === arr);\n  publicAPI.setActiveAttributeByName = (arrayName, attType) => publicAPI.setActiveAttributeByIndex(publicAPI.getArrayWithIndex(arrayName).index, attType);\n  publicAPI.setActiveAttributeByIndex = (arrayIdx, uncleanAttType) => {\n    const attType = cleanAttributeType(uncleanAttType);\n    if (arrayIdx >= 0 && arrayIdx < model.arrays.length) {\n      if (attType.toUpperCase() !== 'PEDIGREEIDS') {\n        const arr = publicAPI.getArrayByIndex(arrayIdx);\n        if (!arr.isA('vtkDataArray')) {\n          vtkWarningMacro(`Cannot set attribute ${attType}. Only vtkDataArray subclasses can be set as active attributes.`);\n          return -1;\n        }\n        if (!publicAPI.checkNumberOfComponents(arr, attType)) {\n          vtkWarningMacro(`Cannot set attribute ${attType}. Incorrect number of components.`);\n          return -1;\n        }\n      }\n      model[`active${attType}`] = arrayIdx;\n      publicAPI.modified();\n      return arrayIdx;\n    }\n    if (arrayIdx === -1) {\n      model[`active${attType}`] = arrayIdx;\n      publicAPI.modified();\n    }\n    return -1;\n  };\n  publicAPI.getActiveAttribute = attType => {\n    // Given an integer enum value or a string (with random capitalization),\n    // find the matching string in attrTypes.\n    const cleanAttType = cleanAttributeType(attType);\n    return publicAPI[`get${cleanAttType}`]();\n  };\n\n  // Override to allow proper handling of active attributes\n  publicAPI.removeAllArrays = () => {\n    attrTypes.forEach(attType => {\n      model[`active${attType}`] = -1;\n    });\n    superClass.removeAllArrays();\n  };\n\n  // Override to allow proper handling of active attributes\n  publicAPI.removeArrayByIndex = arrayIdx => {\n    if (arrayIdx !== -1) {\n      attrTypes.forEach(attType => {\n        if (arrayIdx === model[`active${attType}`]) {\n          model[`active${attType}`] = -1;\n        } else if (arrayIdx < model[`active${attType}`]) {\n          model[`active${attType}`] -= 1;\n        }\n      });\n    }\n    return superClass.removeArrayByIndex(arrayIdx);\n  };\n  attrTypes.forEach(value => {\n    const activeVal = `active${value}`;\n    publicAPI[`get${value}`] = () => publicAPI.getArrayByIndex(model[activeVal]);\n    publicAPI[`set${value}`] = da => publicAPI.setAttribute(da, value);\n    publicAPI[`setActive${value}`] = arrayName => publicAPI.setActiveAttributeByIndex(publicAPI.getArrayWithIndex(arrayName).index, value);\n    publicAPI[`copy${value}Off`] = () => {\n      const attType = value.toUpperCase();\n      model.copyAttributeFlags[AttributeCopyOperations.PASSDATA][AttributeTypes[attType]] = false;\n    };\n    publicAPI[`copy${value}On`] = () => {\n      const attType = value.toUpperCase();\n      model.copyAttributeFlags[AttributeCopyOperations.PASSDATA][AttributeTypes[attType]] = true;\n    };\n  });\n  publicAPI.initializeAttributeCopyFlags = () => {\n    // Default to copying all attributes in every circumstance:\n    model.copyAttributeFlags = [];\n    Object.keys(AttributeCopyOperations).filter(op => op !== 'ALLCOPY').forEach(attCopyOp => {\n      model.copyAttributeFlags[AttributeCopyOperations[attCopyOp]] = Object.keys(AttributeTypes).filter(ty => ty !== 'NUM_ATTRIBUTES').reduce((a, b) => {\n        a[AttributeTypes[b]] = true;\n        return a;\n      }, []);\n    });\n    // Override some operations where we don't want to copy:\n    model.copyAttributeFlags[AttributeCopyOperations.COPYTUPLE][AttributeTypes.GLOBALIDS] = false;\n    model.copyAttributeFlags[AttributeCopyOperations.INTERPOLATE][AttributeTypes.GLOBALIDS] = false;\n    model.copyAttributeFlags[AttributeCopyOperations.COPYTUPLE][AttributeTypes.PEDIGREEIDS] = false;\n  };\n  publicAPI.initialize = macro.chain(publicAPI.initialize, publicAPI.initializeAttributeCopyFlags);\n\n  // Process dataArrays if any\n  if (model.dataArrays && Object.keys(model.dataArrays).length) {\n    Object.keys(model.dataArrays).forEach(name => {\n      if (!model.dataArrays[name].ref && model.dataArrays[name].type === 'vtkDataArray') {\n        publicAPI.addArray(vtkDataArray.newInstance(model.dataArrays[name]));\n      }\n    });\n  }\n  const superShallowCopy = publicAPI.shallowCopy;\n  publicAPI.shallowCopy = (other, debug) => {\n    superShallowCopy(other, debug);\n    model.arrays = other.getArrays().map(arr => {\n      const arrNew = arr.newClone();\n      arrNew.shallowCopy(arr, debug);\n      return {\n        data: arrNew\n      };\n    });\n  };\n  publicAPI.initializeAttributeCopyFlags();\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  activeScalars: -1,\n  activeVectors: -1,\n  activeTensors: -1,\n  activeNormals: -1,\n  activeTCoords: -1,\n  activeGlobalIds: -1,\n  activePedigreeIds: -1\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  vtkFieldData.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['activeScalars', 'activeNormals', 'activeTCoords', 'activeVectors', 'activeTensors', 'activeGlobalIds', 'activePedigreeIds']);\n  if (!model.arrays) {\n    model.arrays = {};\n  }\n\n  // Object specific methods\n  vtkDataSetAttributes(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkDataSetAttributes');\n\n// ----------------------------------------------------------------------------\n\nvar vtkDataSetAttributes$1 = {\n  newInstance,\n  extend,\n  ...Constants\n};\n\nexport { vtkDataSetAttributes$1 as default, extend, newInstance };\n","// Specify how data arrays can be used by data objects\nconst FieldDataTypes = {\n  UNIFORM: 0,\n  // data that does not vary over points/cells/etc.\n  DATA_OBJECT_FIELD: 0,\n  // to match VTK\n\n  COORDINATE: 1,\n  // data that specifies the location of each point\n  POINT_DATA: 1,\n  // to match VTK\n\n  POINT: 2,\n  // data defined at each point, but that does not specify the point location\n  POINT_FIELD_DATA: 2,\n  // to match VTK\n\n  CELL: 3,\n  // data defined at each cell, but that does not specify the cell\n  CELL_FIELD_DATA: 3,\n  // to match VTK\n\n  VERTEX: 4,\n  // data defined at each graph vertex, but that does not specify the graph vertex\n  VERTEX_FIELD_DATA: 4,\n  // to match VTK\n\n  EDGE: 5,\n  // data defined at each graph edge, but that does not specify the graph edge\n  EDGE_FIELD_DATA: 5,\n  // to match VTK\n\n  ROW: 6,\n  // data specifying a table row\n  ROW_DATA: 6 // to match VTK\n};\n\nconst FieldAssociations = {\n  FIELD_ASSOCIATION_POINTS: 0,\n  FIELD_ASSOCIATION_CELLS: 1,\n  FIELD_ASSOCIATION_NONE: 2,\n  FIELD_ASSOCIATION_POINTS_THEN_CELLS: 3,\n  FIELD_ASSOCIATION_VERTICES: 4,\n  FIELD_ASSOCIATION_EDGES: 5,\n  FIELD_ASSOCIATION_ROWS: 6,\n  NUMBER_OF_ASSOCIATIONS: 7\n};\nvar Constants = {\n  FieldDataTypes,\n  FieldAssociations\n};\n\nexport { FieldAssociations, FieldDataTypes, Constants as default };\n","import { m as macro } from '../../macros2.js';\nimport vtk from '../../vtk.js';\nimport vtkBoundingBox from './BoundingBox.js';\nimport vtkDataSetAttributes from './DataSetAttributes.js';\nimport { b as vtkMath } from '../Core/Math/index.js';\nimport Constants from './DataSet/Constants.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nconst DATASET_FIELDS = ['pointData', 'cellData', 'fieldData'];\n\n// ----------------------------------------------------------------------------\n// vtkDataSet methods\n// ----------------------------------------------------------------------------\n\nfunction vtkDataSet(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkDataSet');\n\n  // Add dataset attributes\n  DATASET_FIELDS.forEach(fieldName => {\n    if (!model[fieldName]) {\n      model[fieldName] = vtkDataSetAttributes.newInstance();\n    } else {\n      model[fieldName] = vtk(model[fieldName]);\n    }\n  });\n\n  //------------------------------------------------------------------------------\n  // Compute the data bounding box from data points.\n  publicAPI.computeBounds = () => {\n    if (model.modifiedTime && model.computeTime && model.modifiedTime > model.computeTime || !model.computeTime) {\n      const points = publicAPI.getPoints();\n      if (points?.getNumberOfPoints()) {\n        // Compute bounds from points\n        vtkBoundingBox.setBounds(model.bounds, points.getBoundsByReference());\n      } else {\n        model.bounds = vtkMath.createUninitializedBounds();\n      }\n      // Update computeTime\n      model.computeTime = macro.getCurrentGlobalMTime();\n    }\n  };\n\n  /**\n   * Returns the squared length of the diagonal of the bounding box\n   */\n  publicAPI.getLength2 = () => {\n    const bounds = publicAPI.getBoundsByReference();\n    if (!bounds || bounds.length !== 6) return 0;\n    return vtkBoundingBox.getDiagonalLength2(bounds);\n  };\n\n  /**\n   * Returns the length of the diagonal of the bounding box\n   */\n  publicAPI.getLength = () => Math.sqrt(publicAPI.getLength2());\n\n  /**\n   * Returns the center of the bounding box as [x, y, z]\n   */\n  publicAPI.getCenter = () => {\n    const bounds = publicAPI.getBoundsByReference();\n    if (!bounds || bounds.length !== 6) return [0, 0, 0];\n    return vtkBoundingBox.getCenter(bounds);\n  };\n\n  /**\n   * Get the bounding box of a cell with the given cellId\n   * @param {Number} cellId - The id of the cell\n   * @returns {Number[]} - The bounds as [xmin, xmax, ymin, ymax, zmin, zmax]\n   */\n  publicAPI.getCellBounds = cellId => {\n    const cell = publicAPI.getCell(cellId);\n    if (cell) {\n      return cell.getBounds();\n    }\n    return vtkMath.createUninitializedBounds();\n  };\n  publicAPI.getBounds = macro.chain(() => publicAPI.computeBounds, publicAPI.getBounds);\n  publicAPI.getBoundsByReference = macro.chain(() => publicAPI.computeBounds, publicAPI.getBoundsByReference);\n  const superShallowCopy = publicAPI.shallowCopy;\n  publicAPI.shallowCopy = function (other) {\n    let debug = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    superShallowCopy(other, debug);\n    DATASET_FIELDS.forEach(fieldName => {\n      model[fieldName] = vtkDataSetAttributes.newInstance();\n      model[fieldName].shallowCopy(other.getReferenceByName(fieldName));\n    });\n  };\n  const superGetMTime = publicAPI.getMTime;\n  publicAPI.getMTime = () => DATASET_FIELDS.reduce((mTime, fieldName) => Math.max(mTime, model[fieldName]?.getMTime() ?? mTime), superGetMTime());\n  publicAPI.initialize = () => {\n    DATASET_FIELDS.forEach(fieldName => model[fieldName]?.initialize());\n    return publicAPI;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // pointData: null,\n  // cellData: null,\n  // fieldData: null,\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, DATASET_FIELDS);\n  macro.getArray(publicAPI, model, ['bounds'], 6);\n  // Object specific methods\n  vtkDataSet(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkDataSet');\n\n// ----------------------------------------------------------------------------\n\nvar vtkDataSet$1 = {\n  newInstance,\n  extend,\n  ...Constants\n};\n\nexport { vtkDataSet$1 as default, extend, newInstance };\n","import vtk from '../../vtk.js';\nimport { m as macro } from '../../macros2.js';\nimport vtkDataSet from './DataSet.js';\nimport vtkPoints from '../Core/Points.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n// ----------------------------------------------------------------------------\n// vtkPointSet methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPointSet(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkPointSet');\n\n  // Create empty points\n  if (!model.points) {\n    model.points = vtkPoints.newInstance();\n  } else {\n    model.points = vtk(model.points);\n  }\n  publicAPI.getNumberOfPoints = () => model.points.getNumberOfPoints();\n  publicAPI.getBounds = () => model.points.getBounds();\n  publicAPI.computeBounds = () => {\n    publicAPI.getBounds();\n  };\n  const superShallowCopy = publicAPI.shallowCopy;\n  publicAPI.shallowCopy = function (other) {\n    let debug = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    superShallowCopy(other, debug);\n    model.points = vtkPoints.newInstance();\n    model.points.shallowCopy(other.getPoints());\n  };\n  const superGetMTime = publicAPI.getMTime;\n  publicAPI.getMTime = () => {\n    const mTime = superGetMTime();\n    return Math.max(mTime, model.points?.getMTime() ?? mTime);\n  };\n  const superInitialize = publicAPI.initialize;\n  publicAPI.initialize = () => {\n    model.points?.initialize();\n    return superInitialize();\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // points: null,\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkDataSet.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['points']);\n\n  // Object specific methods\n  vtkPointSet(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkPointSet');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPointSet$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkPointSet$1 as default, extend, newInstance };\n","import { m as macro } from '../../macros2.js';\nimport vtkCell from './Cell.js';\nimport vtkLine from './Line.js';\nimport { vec3 } from 'gl-matrix';\n\nfunction vtkPolyLine(publicAPI, model) {\n  model.classHierarchy.push('vtkPolyLine');\n  const line = vtkLine.newInstance();\n  line.getPoints().setNumberOfPoints(2);\n  publicAPI.getCellDimension = () => 1;\n  publicAPI.intersectWithLine = (t1, t2, p1, p2, tol, x, pcoords) => {\n    const outObj = {\n      intersect: 0,\n      t: Number.MAX_VALUE,\n      subId: 0,\n      betweenPoints: null\n    };\n    const numLines = publicAPI.getNumberOfPoints() - 1;\n    let pDistMin = Number.MAX_VALUE;\n    for (let subId = 0; subId < numLines; subId++) {\n      const pCoords = [0, 0, 0];\n      line.getPoints().getData().set(model.points.getData().subarray(3 * subId, 3 * (subId + 2)));\n      const lineIntersected = line.intersectWithLine(p1, p2, tol, x, pcoords);\n      if (lineIntersected.intersect === 1 && lineIntersected.t <= outObj.t + tol && lineIntersected.t >= t1 && lineIntersected.t <= t2) {\n        outObj.intersect = 1;\n        const pDist = line.getParametricDistance(pCoords);\n        if (pDist < pDistMin || pDist === pDistMin && lineIntersected.t < outObj.t) {\n          outObj.subId = subId;\n          outObj.t = lineIntersected.t;\n          pDistMin = pDist;\n          for (let k = 0; k < 3; k++) {\n            x[k];\n            pCoords[k];\n          }\n        }\n      }\n    }\n    return outObj;\n  };\n  publicAPI.evaluateLocation = (subId, pcoords, x, weights) => {\n    line.getPoints().getData().set(model.points.getData().subarray(3 * subId, 3 * (subId + 2)));\n    return line.evaluateLocation(pcoords, x, weights);\n  };\n  publicAPI.evaluateOrientation = (subId, pcoords, q, weights) => {\n    if (model.orientations) {\n      line.setOrientations([model.orientations[subId], model.orientations[subId + 1]]);\n    } else {\n      line.setOrientations(null);\n    }\n    return line.evaluateOrientation(pcoords, q, weights);\n  };\n  publicAPI.getDistancesToFirstPoint = () => {\n    const dTime = model.distancesTime.getMTime();\n    if (dTime < model.points.getMTime() || dTime < publicAPI.getMTime()) {\n      const numPoints = publicAPI.getNumberOfPoints();\n      if (!model.distances) {\n        model.distances = new Array(numPoints);\n      } else {\n        model.distances.length = numPoints;\n      }\n      if (numPoints > 0) {\n        const previousPoint = new Array(3);\n        const currentPoint = new Array(3);\n        let totalDistance = 0;\n        model.distances[0] = totalDistance;\n        model.points.getPoint(0, previousPoint);\n        for (let i = 1; i < numPoints; ++i) {\n          model.points.getPoint(i, currentPoint);\n          totalDistance += model.distanceFunction(previousPoint, currentPoint);\n          model.distances[i] = totalDistance;\n          vec3.copy(previousPoint, currentPoint);\n        }\n      }\n      model.distancesTime.modified();\n    }\n    return model.distances;\n  };\n  publicAPI.findPointIdAtDistanceFromFirstPoint = distance => {\n    const distances = publicAPI.getDistancesToFirstPoint();\n    // At least two points to return an ID\n    if (distances.length < 2) {\n      return -1;\n    }\n    // Binary search in the distance array\n    let minId = 0;\n    let maxId = distances.length - 1;\n    if (distance < distances[minId] || distance > distances[maxId] || distances[maxId] === 0) {\n      return -1;\n    }\n    while (maxId - minId > 1) {\n      const midId = Math.floor((minId + maxId) / 2);\n      if (distances[midId] <= distance) {\n        minId = midId;\n      } else {\n        maxId = midId;\n      }\n    }\n    return minId;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  orientations: null,\n  // an array of quat or null\n  distanceFunction: vec3.dist\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  vtkCell.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['orientations', 'distanceFunction']);\n  model.distancesTime = {};\n  macro.obj(model.distancesTime, {\n    mtime: 0\n  });\n  vtkPolyLine(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkPolyLine');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPolyLine$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkPolyLine$1 as default, extend, newInstance };\n","import { m as macro } from '../../macros2.js';\n\n// ----------------------------------------------------------------------------\n// vtkPriorityQueue methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPriorityQueue(publicAPI, model) {\n  // Set our classname\n  model.classHierarchy.push('vtkPriorityQueue');\n  publicAPI.push = (priority, element) => {\n    // naive algo\n    const i = model.elements.findIndex(e => e.priority > priority);\n    model.elements.splice(i, 0, {\n      priority,\n      element\n    });\n  };\n  publicAPI.pop = () => {\n    if (model.elements.length > 0) {\n      return model.elements.shift().element;\n    }\n    return null;\n  };\n  publicAPI.deleteById = id => {\n    model.elements = model.elements.filter(_ref => {\n      let {\n        element\n      } = _ref;\n      return element.id !== id;\n    });\n  };\n  publicAPI.length = () => model.elements.length;\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  elements: []\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  vtkPriorityQueue(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkPriorityQueue');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPriorityQueue$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkPriorityQueue$1 as default, extend, newInstance };\n","const EPSILON = 1e-6;\nconst FLOAT_EPSILON = 1.1920929e-7;\nconst TOLERANCE = 1e-8;\nconst PolygonWithPointIntersectionState = {\n  FAILURE: -1,\n  OUTSIDE: 0,\n  INSIDE: 1,\n  INTERSECTION: 2,\n  ON_LINE: 3\n};\n\nexport { EPSILON, FLOAT_EPSILON, PolygonWithPointIntersectionState, TOLERANCE };\n","import { m as macro } from '../../macros2.js';\nimport { d as dot, s as subtract, j as cross, k as add, l as normalize, f as distance2BetweenPoints, n as norm } from '../Core/Math/index.js';\nimport vtkLine from './Line.js';\nimport vtkPlane from './Plane.js';\nimport vtkPriorityQueue from '../Core/PriorityQueue.js';\nimport vtkBoundingBox from './BoundingBox.js';\nimport { IntersectionState } from './Line/Constants.js';\nimport { PolygonWithPointIntersectionState, FLOAT_EPSILON, TOLERANCE, EPSILON } from './Polygon/Constants.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n// Given the line (p0,p1), determine if the given point is located to the left\n// of, on, or to the right of a line (with the function returning >0, ==0, or\n// <0 respectively). The points are assumed 3D points, but projected into\n// one of x-y-z planes; hence the indices axis0 and axis1 specify which plane\n// the computation is to be performed on.\nfunction pointLocation(axis0, axis1, p0, p1, point) {\n  return (p1[axis0] - p0[axis0]) * (point[axis1] - p0[axis1]) - (point[axis0] - p0[axis0]) * (p1[axis1] - p0[axis1]);\n}\n\n//------------------------------------------------------------------------------\n\nfunction pointInPolygon(point, vertices, bounds, normal) {\n  // Do a quick bounds check to throw out trivial cases.\n  // winding plane.\n  if (point[0] < bounds[0] || point[0] > bounds[1] || point[1] < bounds[2] || point[1] > bounds[3] || point[2] < bounds[4] || point[2] > bounds[5]) {\n    return PolygonWithPointIntersectionState.OUTSIDE;\n  }\n\n  //  Check that the normal is non-zero.\n  if (normalize(normal) <= FLOAT_EPSILON) {\n    return PolygonWithPointIntersectionState.FAILURE;\n  }\n\n  // Assess whether the point lies on the boundary of the polygon. Points on\n  // the boundary are considered inside the polygon. Need to define a small\n  // tolerance relative to the bounding box diagonal length of the polygon.\n  let tol2 = TOLERANCE * ((bounds[1] - bounds[0]) * (bounds[1] - bounds[0]) + (bounds[3] - bounds[2]) * (bounds[3] - bounds[2]) + (bounds[5] - bounds[4]) * (bounds[5] - bounds[4]));\n  tol2 *= tol2;\n  tol2 = tol2 === 0.0 ? FLOAT_EPSILON : tol2;\n  const p0 = [];\n  const p1 = [];\n  for (let i = 0; i < vertices.length;) {\n    // Check coincidence to polygon vertices\n    p0[0] = vertices[i++];\n    p0[1] = vertices[i++];\n    p0[2] = vertices[i++];\n    if (distance2BetweenPoints(point, p0) <= tol2) {\n      return PolygonWithPointIntersectionState.INSIDE;\n    }\n\n    // Check coincidence to polygon edges\n    const {\n      distance,\n      t\n    } = vtkLine.distanceToLine(point, p0, p1);\n    if (distance <= tol2 && t > 0.0 && t < 1.0) {\n      return PolygonWithPointIntersectionState.INSIDE;\n    }\n  }\n\n  // If here, begin computation of the winding number. This method works for\n  // points/polygons arbitrarily oriented in 3D space.  Hence a projection\n  // onto one of the x-y-z coordinate planes using the maximum normal\n  // component. The computation will be performed in the (axis0, axis1) plane.\n  let axis0;\n  let axis1;\n  if (Math.abs(normal[0]) > Math.abs(normal[1])) {\n    if (Math.abs(normal[0]) > Math.abs(normal[2])) {\n      axis0 = 1;\n      axis1 = 2;\n    } else {\n      axis0 = 0;\n      axis1 = 1;\n    }\n  } else if (Math.abs(normal[1]) > Math.abs(normal[2])) {\n    axis0 = 0;\n    axis1 = 2;\n  } else {\n    axis0 = 0;\n    axis1 = 1;\n  }\n\n  // Compute the winding number wn. If after processing all polygon edges\n  // wn == 0, then the point is outside.  Otherwise, the point is inside the\n  // polygon. Process all polygon edges determining if there are ascending or\n  // descending crossings of the line axis1=constant.\n  let wn = 0;\n  for (let i = 0; i < vertices.length;) {\n    p0[0] = vertices[i++];\n    p0[1] = vertices[i++];\n    p0[2] = vertices[i++];\n    if (i < vertices.length) {\n      p1[0] = vertices[i];\n      p1[1] = vertices[i + 1];\n      p1[2] = vertices[i + 2];\n    } else {\n      p1[0] = vertices[0];\n      p1[1] = vertices[1];\n      p1[2] = vertices[2];\n    }\n    if (p0[axis1] <= point[axis1]) {\n      if (p1[axis1] > point[axis1]) {\n        // if an upward crossing\n        if (pointLocation(axis0, axis1, p0, p1, point) > 0) {\n          // if x left of edge\n          ++wn; // a valid up intersect, increment the winding number\n        }\n      }\n    } else if (p1[axis1] <= point[axis1]) {\n      // if a downward crossing\n      if (pointLocation(axis0, axis1, p0, p1, point) < 0) {\n        // if x right of edge\n        --wn; // a valid down intersect, decrement the winding number\n      }\n    }\n  } // Over all polygon edges\n\n  // A winding number == 0 is outside the polygon\n  return wn === 0 ? PolygonWithPointIntersectionState.OUTSIDE : PolygonWithPointIntersectionState.INSIDE;\n}\n\n// ---------------------------------------------------\n/**\n * Simple utility method for computing polygon bounds.\n * Returns the sum of the squares of the dimensions.\n * Requires a poly with at least one point.\n *\n * @param {Array<Number>|TypedArray<Number>} poly\n * @param {vtkPoints} points\n * @param {Bound} bounds\n */\nfunction getBounds(poly, points, bounds) {\n  const n = poly.length;\n  const p = [];\n  points.getPoint(poly[0], p);\n  bounds[0] = p[0];\n  bounds[1] = p[0];\n  bounds[2] = p[1];\n  bounds[3] = p[1];\n  bounds[4] = p[2];\n  bounds[5] = p[2];\n  for (let j = 1; j < n; j++) {\n    points.getPoint(poly[j], p);\n    vtkBoundingBox.addPoint(bounds, ...p);\n  }\n  const length = vtkBoundingBox.getLengths(bounds);\n  return dot(length, length);\n}\n\n// ---------------------------------------------------\n/**\n * Compute the normal of a polygon and return its norm.\n *\n * TBD: This does the same thing as vtkPolygon.computeNormal,\n * but in a more generic way. Maybe we can keep the public\n * static method somehow and have the private method use it instead.\n *\n * @param {Array<Number>|TypedArray<Number>} poly\n * @param {vtkPoints} points\n * @param {Vector3} normal\n * @returns {Number}\n */\nfunction getNormal(poly, points, normal) {\n  normal.length = 3;\n  normal[0] = 0.0;\n  normal[1] = 0.0;\n  normal[2] = 0.0;\n  const p0 = [];\n  let p1 = [];\n  let p2 = [];\n  const v1 = [];\n  const v2 = [];\n  points.getPoint(poly[0], p0);\n  points.getPoint(poly[1], p1);\n  for (let j = 2; j < poly.length; j++) {\n    points.getPoint(poly[j], p2);\n    subtract(p2, p1, v1);\n    subtract(p0, p1, v2);\n    const n = [0, 0, 0];\n    cross(v1, v2, n);\n    add(normal, n, normal);\n    [p1, p2] = [p2, p1];\n  }\n  return normalize(normal);\n}\n\n/**\n * Compute the centroid of a polygon.\n * @param {Array<number>} poly - Array of point indices for the polygon\n * @param {vtkPoints} points - vtkPoints instance\n * @param {Vector3} [centroid] - Optional output array (length 3)\n * @returns {Vector3} The centroid as [x, y, z]\n */\nfunction computeCentroid(poly, points) {\n  let centroid = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0, 0, 0];\n  centroid[0] = 0;\n  centroid[1] = 0;\n  centroid[2] = 0;\n  const n = poly.length;\n  const p = [];\n  for (let i = 0; i < n; i++) {\n    points.getPoint(poly[i], p);\n    centroid[0] += p[0];\n    centroid[1] += p[1];\n    centroid[2] += p[2];\n  }\n  centroid[0] /= n;\n  centroid[1] /= n;\n  centroid[2] /= n;\n  return centroid;\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  PolygonWithPointIntersectionState,\n  pointInPolygon,\n  getBounds,\n  getNormal,\n  computeCentroid\n};\n\n// ----------------------------------------------------------------------------\n// vtkPolygon methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPolygon(publicAPI, model) {\n  // Set our classname\n  model.classHierarchy.push('vtkPolygon');\n  function computeNormal() {\n    const v1 = [0, 0, 0];\n    const v2 = [0, 0, 0];\n    model.normal = [0, 0, 0];\n    const anchor = [...model.firstPoint.point];\n    let point = model.firstPoint;\n    for (let i = 0; i < model.pointCount; i++) {\n      subtract(point.point, anchor, v1);\n      subtract(point.next.point, anchor, v2);\n      const n = [0, 0, 0];\n      cross(v1, v2, n);\n      add(model.normal, n, model.normal);\n      point = point.next;\n    }\n    return normalize(model.normal);\n  }\n  function computeMeasure(point) {\n    const v1 = [0, 0, 0];\n    const v2 = [0, 0, 0];\n    const v3 = [0, 0, 0];\n    const v4 = [0, 0, 0];\n    subtract(point.point, point.previous.point, v1);\n    subtract(point.next.point, point.point, v2);\n    subtract(point.previous.point, point.next.point, v3);\n    cross(v1, v2, v4);\n    const area = dot(v4, model.normal);\n    if (area <= 0) {\n      return -1;\n    }\n    const perimeter = norm(v1) + norm(v2) + norm(v3);\n    return perimeter * perimeter / area;\n  }\n  function canRemoveVertex(point) {\n    if (model.pointCount <= 3) {\n      return true;\n    }\n    const previous = point.previous;\n    const next = point.next;\n    const v = [0, 0, 0];\n    subtract(next.point, previous.point, v);\n    const sN = [0, 0, 0];\n    cross(v, model.normal, sN);\n    normalize(sN);\n    if (norm(sN) === 0) {\n      return false;\n    }\n    let val = vtkPlane.evaluate(sN, previous.point, next.next.point);\n    // eslint-disable-next-line no-nested-ternary\n    let currentSign = val > EPSILON ? 1 : val < -EPSILON ? -1 : 0;\n    let oneNegative = currentSign < 0 ? 1 : 0;\n    for (let vertex = next.next.next; vertex.id !== previous.id; vertex = vertex.next) {\n      const previousVertex = vertex.previous;\n      val = vtkPlane.evaluate(sN, previous.point, vertex.point);\n      // eslint-disable-next-line no-nested-ternary\n      const sign = val > EPSILON ? 1 : val < -EPSILON ? -1 : 0;\n      if (sign !== currentSign) {\n        if (!oneNegative) {\n          oneNegative = sign <= 0 ? 1 : 0;\n        }\n        if (vtkLine.intersection(previous.point, next.point, vertex.point, previousVertex.point, [0], [0]) === IntersectionState.YES_INTERSECTION) {\n          return false;\n        }\n        currentSign = sign;\n      }\n    }\n    return oneNegative === 1;\n  }\n  function removePoint(point, queue) {\n    model.pointCount -= 1;\n    const previous = point.previous;\n    const next = point.next;\n    model.tris = model.tris.concat(point.point);\n    model.tris = model.tris.concat(next.point);\n    model.tris = model.tris.concat(previous.point);\n    previous.next = next;\n    next.previous = previous;\n    queue.deleteById(previous.id);\n    queue.deleteById(next.id);\n    const previousMeasure = computeMeasure(previous);\n    if (previousMeasure > 0) {\n      queue.push(previousMeasure, previous);\n    }\n    const nextMeasure = computeMeasure(next);\n    if (nextMeasure > 0) {\n      queue.push(nextMeasure, next);\n    }\n    if (point.id === model.firstPoint.id) {\n      model.firstPoint = next;\n    }\n  }\n  function earCutTriangulation() {\n    computeNormal();\n    const vertexQueue = vtkPriorityQueue.newInstance();\n    let point = model.firstPoint;\n    for (let i = 0; i < model.pointCount; i++) {\n      const measure = computeMeasure(point);\n      if (measure > 0) {\n        vertexQueue.push(measure, point);\n      }\n      point = point.next;\n    }\n    while (model.pointCount > 2 && vertexQueue.length() > 0) {\n      if (model.pointCount === vertexQueue.length()) {\n        // convex\n        const pointToRemove = vertexQueue.pop();\n        removePoint(pointToRemove, vertexQueue);\n      } else {\n        // concave\n        const pointToRemove = vertexQueue.pop();\n        if (canRemoveVertex(pointToRemove)) {\n          removePoint(pointToRemove, vertexQueue);\n        }\n      }\n    }\n    return model.pointCount <= 2;\n  }\n  publicAPI.triangulate = () => {\n    if (!model.firstPoint) {\n      return null;\n    }\n    return earCutTriangulation();\n  };\n  publicAPI.setPoints = points => {\n    model.pointCount = points.length;\n    model.firstPoint = {\n      id: 0,\n      point: points[0],\n      next: null,\n      previous: null\n    };\n    let currentPoint = model.firstPoint;\n    for (let i = 1; i < model.pointCount; i++) {\n      currentPoint.next = {\n        id: i,\n        point: points[i],\n        next: null,\n        previous: currentPoint\n      };\n      currentPoint = currentPoint.next;\n    }\n    model.firstPoint.previous = currentPoint;\n    currentPoint.next = model.firstPoint;\n  };\n  publicAPI.getPointArray = () => model.tris;\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  firstPoint: null,\n  pointCount: 0,\n  tris: []\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  vtkPolygon(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkPolygon');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPolygon$1 = {\n  newInstance,\n  extend,\n  ...STATIC\n};\n\nexport { computeCentroid, vtkPolygon$1 as default, extend, getBounds, getNormal, newInstance };\n","import { m as macro, T as TYPED_ARRAYS } from '../../macros2.js';\nimport vtkCell from './Cell.js';\nimport { d as dot, j as cross, l as normalize, m as multiplyAccumulate, f as distance2BetweenPoints, o as determinant2x2, s as subtract, p as invertMatrix } from '../Core/Math/index.js';\nimport vtkLine from './Line.js';\nimport vtkPlane from './Plane.js';\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nfunction computeNormalDirection(v1, v2, v3, n) {\n  // order is important!!! maintain consistency with triangle vertex order\n  const ax = v3[0] - v2[0];\n  const ay = v3[1] - v2[1];\n  const az = v3[2] - v2[2];\n  const bx = v1[0] - v2[0];\n  const by = v1[1] - v2[1];\n  const bz = v1[2] - v2[2];\n  n[0] = ay * bz - az * by;\n  n[1] = az * bx - ax * bz;\n  n[2] = ax * by - ay * bx;\n}\nfunction computeNormal(v1, v2, v3, n) {\n  computeNormalDirection(v1, v2, v3, n);\n  const length = Math.sqrt(n[0] * n[0] + n[1] * n[1] + n[2] * n[2]);\n  if (length !== 0.0) {\n    n[0] /= length;\n    n[1] /= length;\n    n[2] /= length;\n  }\n}\nfunction interpolationDerivs(derivs) {\n  // Order: [dN1/dr, dN2/dr, dN3/dr, dN1/ds, dN2/ds, dN3/ds]\n  // r-derivatives\n  derivs[0] = -1.0;\n  derivs[1] = 1.0;\n  derivs[2] = 0.0;\n\n  // s-derivatives\n  derivs[3] = -1.0;\n  derivs[4] = 0.0;\n  derivs[5] = 1.0;\n}\nfunction intersectWithTriangle(p1, q1, r1, p2, q2, r2) {\n  let tolerance = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 1e-6;\n  let coplanar = false;\n  const pt1 = [];\n  const pt2 = [];\n  const surfaceId = [];\n  const n1 = [];\n  const n2 = [];\n\n  // Compute supporting plane normals.\n  computeNormal(p1, q1, r1, n1);\n  computeNormal(p2, q2, r2, n2);\n  const s1 = -dot(n1, p1);\n  const s2 = -dot(n2, p2);\n\n  // Compute signed distances of points p1, q1, r1 from supporting\n  // plane of second triangle.\n  const dist1 = [dot(n2, p1) + s2, dot(n2, q1) + s2, dot(n2, r1) + s2];\n\n  // If signs of all points are the same, all the points lie on the\n  // same side of the supporting plane, and we can exit early.\n  if (dist1[0] * dist1[1] > tolerance && dist1[0] * dist1[2] > tolerance) {\n    // vtkDebugMacro(<<\"Same side supporting plane 1!\");\n    return {\n      intersect: false,\n      coplanar,\n      pt1,\n      pt2,\n      surfaceId\n    };\n  }\n  // Do the same for p2, q2, r2 and supporting plane of first\n  // triangle.\n  const dist2 = [dot(n1, p2) + s1, dot(n1, q2) + s1, dot(n1, r2) + s1];\n\n  // If signs of all points are the same, all the points lie on the\n  // same side of the supporting plane, and we can exit early.\n  if (dist2[0] * dist2[1] > tolerance && dist2[0] * dist2[2] > tolerance) {\n    // vtkDebugMacro(<<\"Same side supporting plane 2!\");\n    return {\n      intersect: false,\n      coplanar,\n      pt1,\n      pt2,\n      surfaceId\n    };\n  }\n  // Check for coplanarity of the supporting planes.\n  if (Math.abs(n1[0] - n2[0]) < 1e-9 && Math.abs(n1[1] - n2[1]) < 1e-9 && Math.abs(n1[2] - n2[2]) < 1e-9 && Math.abs(s1 - s2) < 1e-9) {\n    coplanar = true;\n    // vtkDebugMacro(<<\"Coplanar!\");\n    return {\n      intersect: false,\n      coplanar,\n      pt1,\n      pt2,\n      surfaceId\n    };\n  }\n\n  // There are more efficient ways to find the intersection line (if\n  // it exists), but this is clear enough.\n  const pts1 = [p1, q1, r1];\n  const pts2 = [p2, q2, r2];\n\n  // Find line of intersection (L = p + t*v) between two planes.\n  const n1n2 = dot(n1, n2);\n  const a = (s1 - s2 * n1n2) / (n1n2 * n1n2 - 1.0);\n  const b = (s2 - s1 * n1n2) / (n1n2 * n1n2 - 1.0);\n  const p = [a * n1[0] + b * n2[0], a * n1[1] + b * n2[1], a * n1[2] + b * n2[2]];\n  const v = cross(n1, n2, []);\n  normalize(v);\n  let index1 = 0;\n  let index2 = 0;\n  const t1 = [];\n  const t2 = [];\n  let ts1 = 50;\n  let ts2 = 50;\n  for (let i = 0; i < 3; i++) {\n    const id1 = i;\n    const id2 = (i + 1) % 3;\n\n    // Find t coordinate on line of intersection between two planes.\n    const val1 = vtkPlane.intersectWithLine(pts1[id1], pts1[id2], p2, n2);\n    if (val1.intersection && val1.t > 0 - tolerance && val1.t < 1 + tolerance) {\n      if (val1.t < 1 + tolerance && val1.t > 1 - tolerance) {\n        ts1 = index1;\n      }\n      t1[index1++] = dot(val1.x, v) - dot(p, v);\n    }\n    const val2 = vtkPlane.intersectWithLine(pts2[id1], pts2[id2], p1, n1);\n    if (val2.intersection && val2.t > 0 - tolerance && val2.t < 1 + tolerance) {\n      if (val2.t < 1 + tolerance && val2.t > 1 - tolerance) {\n        ts2 = index2;\n      }\n      t2[index2++] = dot(val2.x, v) - dot(p, v);\n    }\n  }\n\n  // If the value of the index is greater than 2, the intersecting point\n  // actually is intersected by all three edges. In this case, set the two\n  // edges to the two edges where the intersecting point is not the end point\n  if (index1 > 2) {\n    index1--;\n    // swap\n    const t12 = t1[2];\n    t1[2] = t1[ts1];\n    t1[ts1] = t12;\n  }\n  if (index2 > 2) {\n    index2--;\n    const t22 = t2[2];\n    t2[2] = t2[ts2];\n    t2[ts2] = t22;\n  }\n  // Check if only one edge or all edges intersect the supporting\n  // planes intersection.\n  if (index1 !== 2 || index2 !== 2) {\n    // vtkDebugMacro(<<\"Only one edge intersecting!\");\n    return {\n      intersect: false,\n      coplanar,\n      pt1,\n      pt2,\n      surfaceId\n    };\n  }\n\n  // Check for NaNs\n  if (Number.isNaN(t1[0]) || Number.isNaN(t1[1]) || Number.isNaN(t2[0]) || Number.isNaN(t2[1])) {\n    // vtkWarningMacro(<<\"NaNs!\");\n    return {\n      intersect: false,\n      coplanar,\n      pt1,\n      pt2,\n      surfaceId\n    };\n  }\n  if (t1[0] > t1[1]) {\n    // swap\n    const t11 = t1[1];\n    t1[1] = t1[0];\n    t1[0] = t11;\n  }\n  if (t2[0] > t2[1]) {\n    // swap\n    const t21 = t2[1];\n    t2[1] = t2[0];\n    t2[0] = t21;\n  }\n  // Handle the different interval configuration cases.\n  let tt1;\n  let tt2;\n  if (t1[1] < t2[0] || t2[1] < t1[0]) {\n    // vtkDebugMacro(<<\"No Overlap!\");\n    return {\n      intersect: false,\n      coplanar,\n      pt1,\n      pt2,\n      surfaceId\n    }; // No overlap\n  }\n\n  if (t1[0] < t2[0]) {\n    if (t1[1] < t2[1]) {\n      // First point on surface 2, second point on surface 1\n      surfaceId[0] = 2;\n      surfaceId[1] = 1;\n      tt1 = t2[0];\n      tt2 = t1[1];\n    } else {\n      // Both points belong to lines on surface 2\n      surfaceId[0] = 2;\n      surfaceId[1] = 2;\n      tt1 = t2[0];\n      tt2 = t2[1];\n    }\n  } // t1[0] >= t2[0]\n  else if (t1[1] < t2[1]) {\n    // Both points belong to lines on surface 1\n    surfaceId[0] = 1;\n    surfaceId[1] = 1;\n    tt1 = t1[0];\n    tt2 = t1[1];\n  } else {\n    // First point on surface 1, second point on surface 2\n    surfaceId[0] = 1;\n    surfaceId[1] = 2;\n    tt1 = t1[0];\n    tt2 = t2[1];\n  }\n\n  // Create actual intersection points.\n  multiplyAccumulate(p, v, tt1, pt1);\n  multiplyAccumulate(p, v, tt2, pt2);\n  return {\n    intersect: true,\n    coplanar,\n    pt1,\n    pt2,\n    surfaceId\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  computeNormalDirection,\n  computeNormal,\n  interpolationDerivs,\n  intersectWithTriangle\n};\n\n// ----------------------------------------------------------------------------\n// vtkTriangle methods\n// ----------------------------------------------------------------------------\n\nfunction vtkTriangle(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkTriangle');\n  publicAPI.getCellDimension = () => 2;\n  publicAPI.intersectWithLine = (p1, p2, tol, x, pcoords) => {\n    const outObj = {\n      subId: 0,\n      t: Number.MAX_VALUE,\n      intersect: 0,\n      betweenPoints: false\n    };\n    pcoords[2] = 0.0;\n    const closestPoint = [];\n    const tol2 = tol * tol;\n\n    // Get normal for triangle\n    const pt1 = [];\n    const pt2 = [];\n    const pt3 = [];\n    model.points.getPoint(0, pt1);\n    model.points.getPoint(1, pt2);\n    model.points.getPoint(2, pt3);\n    const n = [];\n    const weights = [];\n    computeNormal(pt1, pt2, pt3, n);\n    if (n[0] !== 0 || n[1] !== 0 || n[2] !== 0) {\n      // Intersect plane of triangle with line\n      const plane = vtkPlane.intersectWithLine(p1, p2, pt1, n);\n      outObj.betweenPoints = plane.betweenPoints;\n      outObj.t = plane.t;\n      x[0] = plane.x[0];\n      x[1] = plane.x[1];\n      x[2] = plane.x[2];\n      if (!plane.intersection) {\n        pcoords[0] = 0.0;\n        pcoords[1] = 0.0;\n        outObj.intersect = 0;\n        return outObj;\n      }\n\n      // Evaluate position\n      const inside = publicAPI.evaluatePosition(x, closestPoint, pcoords, weights);\n      if (inside.evaluation >= 0) {\n        if (inside.dist2 <= tol2) {\n          outObj.intersect = 1;\n          return outObj;\n        }\n        outObj.intersect = inside.evaluation;\n        return outObj;\n      }\n    }\n\n    // Normals are null, so the triangle is degenerated and\n    // we still need to check intersection between line and\n    // the longest edge.\n    const dist2Pt1Pt2 = distance2BetweenPoints(pt1, pt2);\n    const dist2Pt2Pt3 = distance2BetweenPoints(pt2, pt3);\n    const dist2Pt3Pt1 = distance2BetweenPoints(pt3, pt1);\n    if (!model.line) {\n      model.line = vtkLine.newInstance();\n    }\n    if (dist2Pt1Pt2 > dist2Pt2Pt3 && dist2Pt1Pt2 > dist2Pt3Pt1) {\n      model.line.getPoints().setPoint(0, pt1);\n      model.line.getPoints().setPoint(1, pt2);\n    } else if (dist2Pt2Pt3 > dist2Pt3Pt1 && dist2Pt2Pt3 > dist2Pt1Pt2) {\n      model.line.getPoints().setPoint(0, pt2);\n      model.line.getPoints().setPoint(1, pt3);\n    } else {\n      model.line.getPoints().setPoint(0, pt3);\n      model.line.getPoints().setPoint(1, pt1);\n    }\n    const intersectLine = model.line.intersectWithLine(p1, p2, tol, x, pcoords);\n    outObj.betweenPoints = intersectLine.betweenPoints;\n    outObj.t = intersectLine.t;\n    if (intersectLine.intersect) {\n      const pt3Pt1 = [];\n      const pt3Pt2 = [];\n      const pt3X = [];\n      // Compute r and s manually, using dot and norm.\n      for (let i = 0; i < 3; i++) {\n        pt3Pt1[i] = pt1[i] - pt3[i];\n        pt3Pt2[i] = pt2[i] - pt3[i];\n        pt3X[i] = x[i] - pt3[i];\n      }\n      pcoords[0] = dot(pt3X, pt3Pt1) / dist2Pt3Pt1;\n      pcoords[1] = dot(pt3X, pt3Pt2) / dist2Pt2Pt3;\n      outObj.intersect = 1;\n      return outObj;\n    }\n    pcoords[0] = 0.0;\n    pcoords[1] = 0.0;\n    outObj.intersect = 0;\n    return outObj;\n  };\n\n  /**\n   * Evaluates whether the specified point is inside (1), outside (0), or\n   * indeterminate (-1) for the cell; computes parametric coordinates, sub-cell\n   * ID (if applicable), squared distance to the cell (and closest point if\n   * requested), and interpolation weights for the cell.\n   *\n   * @param {Vector3} x The x point coordinate.\n   * @param {Vector3} closestPoint The closest point coordinate.\n   * @param {Vector3} pcoords The parametric coordinates.\n   * @param {Number[]} weights The number of weights.\n   */\n  publicAPI.evaluatePosition = (x, closestPoint, pcoords, weights) => {\n    // will return obj\n    const outObj = {\n      subId: 0,\n      dist2: 0,\n      evaluation: -1\n    };\n    let i;\n    let j;\n    const pt1 = [];\n    const pt2 = [];\n    const pt3 = [];\n    const n = [];\n    let fabsn;\n    const rhs = [];\n    const c1 = [];\n    const c2 = [];\n    let det = 0;\n    let idx = 0;\n    const indices = [];\n    let dist2Point;\n    let dist2Line1;\n    let dist2Line2;\n    let closest = [];\n    const closestPoint1 = [];\n    const closestPoint2 = [];\n    const cp = [];\n    outObj.subId = 0;\n    pcoords[2] = 0.0;\n\n    // Get normal for triangle, only the normal direction is needed, i.e. the\n    // normal need not be normalized (unit length)\n    //\n    model.points.getPoint(1, pt1);\n    model.points.getPoint(2, pt2);\n    model.points.getPoint(0, pt3);\n    computeNormalDirection(pt1, pt2, pt3, n);\n\n    // Project point to plane\n    vtkPlane.generalizedProjectPoint(x, pt1, n, cp);\n\n    // Construct matrices.  Since we have over determined system, need to find\n    // which 2 out of 3 equations to use to develop equations. (Any 2 should\n    // work since we've projected point to plane.)\n    let maxComponent = 0.0;\n    for (i = 0; i < 3; i++) {\n      // trying to avoid an expensive call to fabs()\n      if (n[i] < 0) {\n        fabsn = -n[i];\n      } else {\n        fabsn = n[i];\n      }\n      if (fabsn > maxComponent) {\n        maxComponent = fabsn;\n        idx = i;\n      }\n    }\n    for (j = 0, i = 0; i < 3; i++) {\n      if (i !== idx) {\n        indices[j++] = i;\n      }\n    }\n    for (i = 0; i < 2; i++) {\n      rhs[i] = cp[indices[i]] - pt3[indices[i]];\n      c1[i] = pt1[indices[i]] - pt3[indices[i]];\n      c2[i] = pt2[indices[i]] - pt3[indices[i]];\n    }\n    det = determinant2x2(c1, c2);\n    if (det === 0.0) {\n      pcoords[0] = 0.0;\n      pcoords[1] = 0.0;\n      outObj.evaluation = -1;\n      return outObj;\n    }\n    pcoords[0] = determinant2x2(rhs, c2) / det;\n    pcoords[1] = determinant2x2(c1, rhs) / det;\n\n    // Okay, now find closest point to element\n    weights[0] = 1 - (pcoords[0] + pcoords[1]);\n    weights[1] = pcoords[0];\n    weights[2] = pcoords[1];\n    if (weights[0] >= 0.0 && weights[0] <= 1.0 && weights[1] >= 0.0 && weights[1] <= 1.0 && weights[2] >= 0.0 && weights[2] <= 1.0) {\n      // projection distance\n      if (closestPoint) {\n        outObj.dist2 = distance2BetweenPoints(cp, x);\n        closestPoint[0] = cp[0];\n        closestPoint[1] = cp[1];\n        closestPoint[2] = cp[2];\n      }\n      outObj.evaluation = 1;\n    } else {\n      let t;\n      if (closestPoint) {\n        if (weights[1] < 0.0 && weights[2] < 0.0) {\n          dist2Point = distance2BetweenPoints(x, pt3);\n          dist2Line1 = vtkLine.distanceToLine(x, pt1, pt3, t, closestPoint1);\n          dist2Line2 = vtkLine.distanceToLine(x, pt3, pt2, t, closestPoint2);\n          if (dist2Point < dist2Line1) {\n            outObj.dist2 = dist2Point;\n            closest = pt3;\n          } else {\n            outObj.dist2 = dist2Line1;\n            closest = closestPoint1;\n          }\n          if (dist2Line2 < outObj.dist2) {\n            outObj.dist2 = dist2Line2;\n            closest = closestPoint2;\n          }\n          for (i = 0; i < 3; i++) {\n            closestPoint[i] = closest[i];\n          }\n        } else if (weights[2] < 0.0 && weights[0] < 0.0) {\n          dist2Point = distance2BetweenPoints(x, pt1);\n          dist2Line1 = vtkLine.distanceToLine(x, pt1, pt3, t, closestPoint1);\n          dist2Line2 = vtkLine.distanceToLine(x, pt1, pt2, t, closestPoint2);\n          if (dist2Point < dist2Line1) {\n            outObj.dist2 = dist2Point;\n            closest = pt1;\n          } else {\n            outObj.dist2 = dist2Line1;\n            closest = closestPoint1;\n          }\n          if (dist2Line2 < outObj.dist2) {\n            outObj.dist2 = dist2Line2;\n            closest = closestPoint2;\n          }\n          for (i = 0; i < 3; i++) {\n            closestPoint[i] = closest[i];\n          }\n        } else if (weights[1] < 0.0 && weights[0] < 0.0) {\n          dist2Point = distance2BetweenPoints(x, pt2);\n          dist2Line1 = vtkLine.distanceToLine(x, pt2, pt3, t, closestPoint1);\n          dist2Line2 = vtkLine.distanceToLine(x, pt1, pt2, t, closestPoint2);\n          if (dist2Point < dist2Line1) {\n            outObj.dist2 = dist2Point;\n            closest = pt2;\n          } else {\n            outObj.dist2 = dist2Line1;\n            closest = closestPoint1;\n          }\n          if (dist2Line2 < outObj.dist2) {\n            outObj.dist2 = dist2Line2;\n            closest = closestPoint2;\n          }\n          for (i = 0; i < 3; i++) {\n            closestPoint[i] = closest[i];\n          }\n        } else if (weights[0] < 0.0) {\n          const lineDistance = vtkLine.distanceToLine(x, pt1, pt2, closestPoint);\n          outObj.dist2 = lineDistance.distance;\n        } else if (weights[1] < 0.0) {\n          const lineDistance = vtkLine.distanceToLine(x, pt2, pt3, closestPoint);\n          outObj.dist2 = lineDistance.distance;\n        } else if (weights[2] < 0.0) {\n          const lineDistance = vtkLine.distanceToLine(x, pt1, pt3, closestPoint);\n          outObj.dist2 = lineDistance.distance;\n        }\n      }\n      outObj.evaluation = 0;\n    }\n    return outObj;\n  };\n\n  /**\n   * Determine global coordinates (x) from the given subId and parametric\n   * coordinates.\n   * @param {Vector3} pcoords The parametric coordinates.\n   * @param {Vector3} x The x point coordinate.\n   * @param {Number[]} weights The number of weights.\n   */\n  publicAPI.evaluateLocation = (pcoords, x, weights) => {\n    const p0 = [];\n    const p1 = [];\n    const p2 = [];\n    model.points.getPoint(0, p0);\n    model.points.getPoint(1, p1);\n    model.points.getPoint(2, p2);\n    const u3 = 1.0 - pcoords[0] - pcoords[1];\n    for (let i = 0; i < 3; i++) {\n      x[i] = p0[i] * u3 + p1[i] * pcoords[0] + p2[i] * pcoords[1];\n    }\n    weights[0] = u3;\n    weights[1] = pcoords[0];\n    weights[2] = pcoords[1];\n  };\n\n  /**\n   * Get the distance of the parametric coordinate provided to the cell.\n   * @param {Vector3} pcoords The parametric coordinates.\n   */\n  publicAPI.getParametricDistance = pcoords => {\n    let pDist;\n    let pDistMax = 0.0;\n    const pc = [];\n    pc[0] = pcoords[0];\n    pc[1] = pcoords[1];\n    pc[2] = 1.0 - pcoords[0] - pcoords[1];\n    for (let i = 0; i < 3; i++) {\n      if (pc[i] < 0.0) {\n        pDist = -pc[i];\n      } else if (pc[i] > 1.0) {\n        pDist = pc[i] - 1.0;\n      } else {\n        // inside the cell in the parametric direction\n        pDist = 0.0;\n      }\n      if (pDist > pDistMax) {\n        pDistMax = pDist;\n      }\n    }\n    return pDistMax;\n  };\n\n  /**\n   * Get the derivatives of the triangle strip.\n   * @param {Number} subId - The sub-id of the triangle.\n   * @param {Vector3} pcoords - The parametric coordinates.\n   * @param {Number[]} values - The values at the points.\n   * @param {Number} dim - The dimension.\n   * @param {Number[]} derivs - The derivatives.\n   */\n  publicAPI.derivatives = (subId, pcoords, values, dim, derivs) => {\n    const x0 = model.points.getPoint(0);\n    const x1 = model.points.getPoint(1);\n    const x2 = model.points.getPoint(2);\n    const n = [];\n    const v10 = [];\n    const v20 = [];\n    const v = [];\n    computeNormal(x0, x1, x2, n);\n    subtract(x1, x0, v10);\n    subtract(x2, x0, v);\n    cross(n, v10, v20);\n    const lenX = normalize(v10); // check for degenerate triangle\n\n    if (lenX <= 0.0 || normalize(v20) <= 0.0) {\n      // degenerate\n      for (let j = 0; j < dim; j++) {\n        for (let i = 0; i < 3; i++) {\n          derivs[j * dim + i] = 0.0;\n        }\n      }\n      return;\n    }\n\n    // 2D coordinates\n    const v0 = [0, 0];\n    const v1 = [lenX, 0];\n    const v2 = [dot(v, v10), dot(v, v20)];\n    const functionDerivs = new Array(6);\n    interpolationDerivs(functionDerivs);\n\n    // Compute Jacobian: Jacobian is constant for a triangle.\n    const J = [v1[0] - v0[0], v1[1] - v0[1], v2[0] - v0[0], v2[1] - v0[1]];\n\n    // Compute inverse Jacobian (expects flat array)\n    const JI = macro.newTypedArray(TYPED_ARRAYS.Float64Array, 4);\n    invertMatrix(J, JI, 2); // returns flat array [JI00, JI01, JI10, JI11]\n\n    // Compute derivatives\n    for (let j = 0; j < dim; j++) {\n      let sum0 = 0.0;\n      let sum1 = 0.0;\n      for (let i = 0; i < 3; i++) {\n        sum0 += functionDerivs[i] * values[dim * i + j];\n        sum1 += functionDerivs[3 + i] * values[dim * i + j];\n      }\n      const dBydx = sum0 * JI[0] + sum1 * JI[1];\n      const dBydy = sum0 * JI[2] + sum1 * JI[3];\n\n      // Transform into global system (dot product with global axes)\n      derivs[3 * j] = dBydx * v10[0] + dBydy * v20[0];\n      derivs[3 * j + 1] = dBydx * v10[1] + dBydy * v20[1];\n      derivs[3 * j + 2] = dBydx * v10[2] + dBydy * v20[2];\n    }\n  };\n\n  /**\n   * Get the nearest cell boundary to the specified parametric\n   * coordinates and whether the point is inside or outside the cell.\n   * @param {Number} subId The sub-id of the cell.\n   * @param {Vector3} pcoords The parametric coordinates.\n   * @param {Vector2} pts The points of the cell.\n   */\n  publicAPI.cellBoundary = (subId, pcoords, pts) => {\n    const t1 = pcoords[0] - pcoords[1];\n    const t2 = 0.5 * (1.0 - pcoords[0]) - pcoords[1];\n    const t3 = 2.0 * pcoords[0] + pcoords[1] - 1.0;\n\n    // compare against three lines in parametric space that divide element\n    // into three pieces\n    if (t1 >= 0.0 && t2 >= 0.0) {\n      pts[0] = model.pointsIds[0];\n      pts[1] = model.pointsIds[1];\n    } else if (t2 < 0.0 && t3 >= 0.0) {\n      pts[0] = model.pointsIds[1];\n      pts[1] = model.pointsIds[2];\n    } // ( t1 < 0.0 && t3 < 0.0 )\n    else {\n      pts[0] = model.pointsIds[2];\n      pts[1] = model.pointsIds[0];\n    }\n    if (pcoords[0] < 0.0 || pcoords[1] < 0.0 || pcoords[0] > 1.0 || pcoords[1] > 1.0 || 1.0 - pcoords[0] - pcoords[1] < 0.0) {\n      return false; // outside of triangle\n    }\n\n    return true; // inside triangle\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  vtkCell.extend(publicAPI, model, initialValues);\n  vtkTriangle(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkTriangle');\n\n// ----------------------------------------------------------------------------\n\nvar vtkTriangle$1 = {\n  newInstance,\n  extend,\n  ...STATIC\n};\n\nexport { STATIC, vtkTriangle$1 as default, extend, newInstance };\n","import { m as macro } from '../../macros2.js';\nimport vtkCell from './Cell.js';\nimport { f as distance2BetweenPoints } from '../Core/Math/index.js';\nimport { CellType } from './CellTypes/Constants.js';\nimport vtkTriangle from './Triangle.js';\nimport vtkPoints from '../Core/Points.js';\n\nfunction intersectionStruct() {\n  return {\n    intersected: false,\n    subId: -1,\n    x: [0.0, 0.0, 0.0],\n    pCoords: [0.0, 0.0, 0.0],\n    t: -1\n  };\n}\nfunction vtkQuad(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkQuad');\n  publicAPI.getCellDimension = () => 2;\n  publicAPI.getCellType = () => CellType.VTK_QUAD;\n  publicAPI.getNumberOfEdges = () => 4;\n  publicAPI.getNumberOfFaces = () => 0;\n  publicAPI.intersectWithLine = (p1, p2, tol, x, pcoords) => {\n    let outObj = {\n      subId: 0,\n      t: Number.MAX_VALUE,\n      intersect: 0,\n      betweenPoints: false\n    };\n    let diagonalCase;\n    const point0 = model.points.getPoint(0, []);\n    const point1 = model.points.getPoint(1, []);\n    const point2 = model.points.getPoint(2, []);\n    const point3 = model.points.getPoint(3, []);\n    const d1 = distance2BetweenPoints(point0, point2);\n    const d2 = distance2BetweenPoints(point1, point3);\n\n    /* Figure out how to uniquely tessellate the quad. Watch out for\n     * equivalent triangulations (i.e., the triangulation is equivalent\n     * no matter where the diagonal). In this case use the point ids as\n     * a tie breaker to ensure unique triangulation across the quad.\n     */\n\n    // rare case; discriminate based on point id\n    if (d1 === d2) {\n      // find the maximum id\n      let id;\n      let maxId = 0;\n      let maxIdx = 0;\n      for (let i = 0; i < 4; i++) {\n        id = model.pointsIds[i];\n        if (id > maxId) {\n          maxId = id;\n          maxIdx = i;\n        }\n      }\n      if (maxIdx === 0 || maxIdx === 2) {\n        diagonalCase = 0;\n      } else {\n        diagonalCase = 1;\n      }\n    } else if (d1 < d2) {\n      diagonalCase = 0;\n    } else {\n      diagonalCase = 1;\n    }\n    let points = null;\n    if (!model.triangle) {\n      model.triangle = vtkTriangle.newInstance();\n      points = vtkPoints.newInstance();\n      points.setNumberOfPoints(3);\n      model.triangle.initialize(points);\n    } else {\n      points = model.triangle.getPoints();\n    }\n    let firstIntersect;\n    const firstIntersectTmpObj = intersectionStruct();\n    let secondIntersect;\n    const secondIntersectTmpObj = intersectionStruct();\n    let useFirstIntersection;\n    let useSecondIntersection;\n    switch (diagonalCase) {\n      case 0:\n        points.setPoint(0, ...point0);\n        points.setPoint(1, ...point1);\n        points.setPoint(2, ...point2);\n        firstIntersect = model.triangle.intersectWithLine(p1, p2, tol, firstIntersectTmpObj.x, firstIntersectTmpObj.pCoords);\n        points.setPoint(0, ...point2);\n        points.setPoint(1, ...point3);\n        points.setPoint(2, ...point0);\n        secondIntersect = model.triangle.intersectWithLine(p1, p2, tol, secondIntersectTmpObj.x, secondIntersectTmpObj.pCoords);\n        useFirstIntersection = firstIntersect.intersect && secondIntersect.intersect ? firstIntersect.t <= secondIntersect.t : firstIntersect.intersect;\n        useSecondIntersection = firstIntersect.intersect && secondIntersect.intersect ? secondIntersect.t < firstIntersect.t : secondIntersect.intersect;\n        if (useFirstIntersection) {\n          outObj = firstIntersect;\n          x[0] = firstIntersectTmpObj.x[0];\n          x[1] = firstIntersectTmpObj.x[1];\n          x[2] = firstIntersectTmpObj.x[2];\n          pcoords[0] = firstIntersectTmpObj.pCoords[0] + firstIntersectTmpObj.pCoords[1];\n          pcoords[1] = firstIntersectTmpObj.pCoords[1];\n          pcoords[2] = firstIntersectTmpObj.pCoords[2];\n        } else if (useSecondIntersection) {\n          outObj = secondIntersect;\n          x[0] = secondIntersectTmpObj.x[0];\n          x[1] = secondIntersectTmpObj.x[1];\n          x[2] = secondIntersectTmpObj.x[2];\n          pcoords[0] = 1.0 - (secondIntersectTmpObj.pCoords[0] + secondIntersectTmpObj.pCoords[1]);\n          pcoords[1] = 1 - secondIntersectTmpObj.pCoords[1];\n          pcoords[2] = secondIntersectTmpObj.pCoords[2];\n        }\n        break;\n      case 1:\n        points.setPoint(0, ...point0);\n        points.setPoint(1, ...point1);\n        points.setPoint(2, ...point3);\n        firstIntersect = model.triangle.intersectWithLine(p1, p2, tol, firstIntersectTmpObj.x, firstIntersectTmpObj.pCoords);\n        points.setPoint(0, ...point2);\n        points.setPoint(1, ...point3);\n        points.setPoint(2, ...point1);\n        secondIntersect = model.triangle.intersectWithLine(p1, p2, tol, secondIntersectTmpObj.x, secondIntersectTmpObj.pCoords);\n        useFirstIntersection = firstIntersect.intersect && secondIntersect.intersect ? firstIntersect.t <= secondIntersect.t : firstIntersect.intersect;\n        useSecondIntersection = firstIntersect.intersect && secondIntersect.intersect ? secondIntersect.t < firstIntersect.t : secondIntersect.intersect;\n        if (useFirstIntersection) {\n          outObj = firstIntersect;\n          x[0] = firstIntersectTmpObj.x[0];\n          x[1] = firstIntersectTmpObj.x[1];\n          x[2] = firstIntersectTmpObj.x[2];\n          pcoords[0] = firstIntersectTmpObj.pCoords[0];\n          pcoords[1] = firstIntersectTmpObj.pCoords[1];\n          pcoords[2] = firstIntersectTmpObj.pCoords[2];\n        } else if (useSecondIntersection) {\n          outObj = secondIntersect;\n          x[0] = secondIntersectTmpObj.x[0];\n          x[1] = secondIntersectTmpObj.x[1];\n          x[2] = secondIntersectTmpObj.x[2];\n          pcoords[0] = 1 - secondIntersectTmpObj.pCoords[0];\n          pcoords[1] = 1 - secondIntersectTmpObj.pCoords[1];\n          pcoords[2] = secondIntersectTmpObj.pCoords[2];\n        }\n        break;\n    }\n    return outObj;\n  };\n  publicAPI.interpolationFunctions = (pcoords, weights) => {\n    const rm = 1 - pcoords[0];\n    const sm = 1 - pcoords[1];\n    weights[0] = rm * sm;\n    weights[1] = pcoords[0] * sm;\n    weights[2] = pcoords[0] * pcoords[1];\n    weights[3] = rm * pcoords[1];\n  };\n  publicAPI.evaluateLocation = (pcoords, x, weights) => {\n    const point = [];\n\n    // Calculate the weights\n    publicAPI.interpolationFunctions(pcoords, weights);\n    x[0] = 0.0;\n    x[1] = 0.0;\n    x[2] = 0.0;\n    for (let i = 0; i < 4; i++) {\n      model.points.getPoint(i, point);\n      for (let j = 0; j < 3; j++) {\n        x[j] += point[j] * weights[i];\n      }\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  vtkCell.extend(publicAPI, model, initialValues);\n  vtkQuad(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkQuad');\n\n// ----------------------------------------------------------------------------\n\nvar vtkQuad$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkQuad$1 as default, extend, newInstance };\n","import { m as macro } from '../../macros2.js';\nimport vtkCell from './Cell.js';\nimport vtkLine from './Line.js';\nimport vtkTriangle from './Triangle.js';\nimport { CellType } from './CellTypes/Constants.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nfunction notImplemented(method) {\n  return () => vtkErrorMacro(`vtkTriangleStrip.${method} - NOT IMPLEMENTED`);\n}\n\n/**\n * Decomposes a triangle strip into individual triangles.\n * @param {*} pts Points of the triangle strip\n * @param {*} polys Cell array to store the resulting triangles\n */\nfunction decomposeStrip(pts, polys) {\n  if (!Array.isArray(pts) || pts.length < 3) {\n    vtkErrorMacro('decomposeStrip - Invalid points array');\n    return;\n  }\n  let p1 = pts[0];\n  let p2 = pts[1];\n  for (let i = 0; i < pts.length - 2; i++) {\n    const p3 = pts[i + 2];\n    if (i % 2) {\n      // Flip ordering to preserve consistency\n      polys.insertNextCell([p2, p1, p3]);\n    } else {\n      polys.insertNextCell([p1, p2, p3]);\n    }\n    p1 = p2;\n    p2 = p3;\n  }\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\n\nconst STATIC = {\n  decomposeStrip\n};\n\n// ----------------------------------------------------------------------------\n// vtkTriangleStrip methods\n// ----------------------------------------------------------------------------\n\nfunction vtkTriangleStrip(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkTriangleStrip');\n  const superInitialize = publicAPI.initialize;\n  publicAPI.initialize = (points, pointsIds) => {\n    model.triangle.initialize(points, pointsIds);\n    superInitialize(points, pointsIds);\n  };\n\n  /**\n   * Get the cell type.\n   * @returns {number} Cell type\n   */\n  publicAPI.getCellType = () => CellType.VTK_TRIANGLE_STRIP;\n\n  /**\n   * Get the cell dimension.\n   * The dimension of a triangle strip is always 2.\n   * @returns {number} Cell dimension\n   */\n  publicAPI.getCellDimension = () => 2;\n\n  /**\n   * Get the number of edges.\n   * @returns {number} Number of edges\n   */\n  publicAPI.getNumberOfEdges = () => model.pointsIds.length;\n\n  /**\n   * Get the number of faces.\n   * @returns {number} Number of faces\n   */\n  publicAPI.getNumberOfFaces = () => 0;\n\n  /**\n   * Evaluate the position within the triangle strip.\n   * @param {*} x Intersection point\n   * @param {*} closestPoint Closest point on the triangle\n   * @param {*} pcoords Parametric coordinates\n   * @param {*} dist2 Squared distance to the closest point\n   * @param {*} weights Weights for interpolation\n   * @returns {number} Evaluation status\n   */\n  publicAPI.evaluatePosition = (x, closestPoint, pcoords, dist2, weights) => {\n    const pc = [0, 0, 0];\n    let minDist2 = Number.MAX_VALUE;\n    let returnStatus = 0;\n    const tempWeights = [];\n    const activeWeights = [];\n    const closest = [];\n    pcoords[2] = 0.0;\n    activeWeights[0] = 0.0;\n    activeWeights[1] = 0.0;\n    activeWeights[2] = 0.0;\n    const points = model.triangle.getPoints();\n    points.setNumberOfPoints(3);\n    const pointsIds = model.triangle.getPointsIds();\n    const numPoints = pointsIds.length;\n\n    // Initialize weights\n    for (let i = 0; i < numPoints; i++) {\n      weights[i] = 0.0;\n    }\n\n    // Iterate through triangles in the strip\n    for (let i = 0; i < numPoints - 2; i++) {\n      // Set triangle points\n      const pt0 = [];\n      points.getPoint(i, pt0);\n      const pt1 = [];\n      points.getPoint(i + 1, pt1);\n      const pt2 = [];\n      points.getPoint(i + 2, pt2);\n      points.setData(Float32Array.from([...pt0, ...pt1, ...pt2]), 3);\n\n      // Use dist2 from triangle's evaluatePosition return value\n      const status = model.triangle.evaluatePosition(x, closest, pc, tempWeights);\n      const currentDist2 = status.dist2;\n      if (status.evaluation >= 0 && (currentDist2 < minDist2 || currentDist2 === minDist2 && returnStatus === 0)) {\n        returnStatus = status;\n        if (closestPoint) {\n          closestPoint[0] = closest[0];\n          closestPoint[1] = closest[1];\n          closestPoint[2] = closest[2];\n        }\n        pcoords[0] = pc[0];\n        pcoords[1] = pc[1];\n        minDist2 = currentDist2;\n        activeWeights[0] = tempWeights[0];\n        activeWeights[1] = tempWeights[1];\n        activeWeights[2] = tempWeights[2];\n      }\n    }\n    dist2[0] = minDist2;\n    weights[0] = activeWeights[0];\n    weights[1] = activeWeights[1];\n    weights[2] = activeWeights[2];\n    return returnStatus;\n  };\n\n  /**\n   * Evaluate the location within the triangle strip.\n   * @param {*} subId Sub-Id of the triangle\n   * @param {*} pcoords Parametric coordinates\n   * @param {*} x Intersection point\n   * @param {*} weights Weights for interpolation\n   */\n  publicAPI.evaluateLocation = (subId, pcoords, x, weights) => {\n    const idx = [[0, 1, 2], [1, 0, 2]];\n    const order = subId % 2;\n    const numPoints = model.pointsIds.length;\n\n    // Initialize weights\n    for (let i = 0; i < numPoints; i++) {\n      weights[i] = 0.0;\n    }\n    const u3 = 1.0 - pcoords[0] - pcoords[1];\n    weights[subId] = u3;\n    weights[subId + 1] = pcoords[0];\n    weights[subId + 2] = pcoords[1];\n\n    // Get points\n    const pt1 = [];\n    model.points.getPoint(subId + idx[order][0], pt1);\n    const pt2 = [];\n    model.points.getPoint(subId + idx[order][1], pt2);\n    const pt3 = [];\n    model.points.getPoint(subId + idx[order][2], pt3);\n\n    // Interpolate position\n    for (let i = 0; i < 3; i++) {\n      x[i] = pt1[i] * weights[subId] + pt2[i] * weights[subId + 1] + pt3[i] * weights[subId + 2];\n    }\n  };\n\n  /**\n   * Get the cell boundary of the triangle strip.\n   * @param {Number} subId The sub-id of the cell.\n   * @param {Vector3} pcoords The parametric coordinates.\n   * @param {Vector2} pts The points of the cell.\n   */\n  publicAPI.cellBoundary = (subId, pcoords, pts) => {\n    const idx = [[0, 1, 2], [1, 0, 2]];\n    const order = subId % 2;\n    const pointsIds = model.triangle.getPointsIds();\n    pointsIds[0] = model.pointsIds[idx[order][0]];\n    pointsIds[1] = model.pointsIds[idx[order][1]];\n    pointsIds[2] = model.pointsIds[idx[order][2]];\n    return model.triangle.cellBoundary(0, pcoords, pts);\n  };\n\n  /**\n   * Get the edge of the triangle strip.\n   * @param {Number} edgeId Edge index (0 to n-1)\n   * @returns {vtkLine} The edge as a vtkLine instance\n   */\n  publicAPI.getEdge = edgeId => {\n    let id1;\n    let id2;\n    const numPoints = model.pointsIds.length;\n    if (edgeId === 0) {\n      id1 = 0;\n      id2 = 1;\n    } else if (edgeId === numPoints - 1) {\n      id1 = edgeId - 1;\n      id2 = edgeId;\n    } else {\n      id1 = edgeId - 1;\n      id2 = edgeId + 1;\n    }\n    model.line.getPointsIds()[0] = model.pointsIds[id1];\n    model.line.getPointsIds()[1] = model.pointsIds[id2];\n    model.line.getPoints().setPoint(0, model.points.getPoint(id1));\n    model.line.getPoints().setPoint(1, model.points.getPoint(id2));\n    return model.line;\n  };\n\n  /**\n   * Intersects a line with the triangle strip.\n   * @param {Vector3} p1 Start point of the line\n   * @param {Vector3} p2 End point of the line\n   * @param {number} tol Tolerance for intersection\n   * @param {Vector3} x Intersection point\n   * @param {Vector3} pcoords Parametric coordinates of the intersection\n   * @returns {Boolean} True if the line intersects the triangle strip\n   */\n  publicAPI.intersectWithLine = (p1, p2, tol, x, pcoords) => {\n    const numTris = model.pointsIds.length - 2;\n    const points = model.triangle.getPoints();\n    points.setNumberOfPoints(3);\n    for (let i = 0; i < numTris; i++) {\n      const pt0 = [];\n      model.points.getPoint(model.pointsIds[i], pt0);\n      const pt1 = [];\n      model.points.getPoint(model.pointsIds[i + 1], pt1);\n      const pt2 = [];\n      model.points.getPoint(model.pointsIds[i + 2], pt2);\n      points.setData(Float32Array.from([...pt0, ...pt1, ...pt2]), 3);\n      const ret = model.triangle.intersectWithLine(p1, p2, tol, x, pcoords);\n      if (ret.intersect) {\n        return ret;\n      }\n    }\n    return false;\n  };\n\n  // Triangulate\n  /**\n   * Triangulate the triangle strip.\n   * @returns {Boolean} True if the triangulation is successful.\n   */\n  publicAPI.triangulate = () => {\n    const numTris = model.points.getNumberOfPoints() - 2;\n    model.tris = new Array(3 * numTris);\n    const idx = [[0, 1, 2], [1, 0, 2]];\n    for (let subId = 0; subId < numTris; subId++) {\n      const order = subId % 2;\n      for (let i = 0; i < 3; i++) {\n        model.tris[subId * 3 + i] = subId + idx[order][i];\n      }\n    }\n    return true;\n  };\n\n  /**\n   * Get the point array of the triangle strip.\n   * @returns {Array} The point array.\n   */\n  publicAPI.getPointArray = () => model.tris;\n\n  // Derivatives\n  /**\n   * Get the derivatives of the triangle strip.\n   * @param {Number} subId - The sub-id of the triangle.\n   * @param {Vector3} pcoords - The parametric coordinates.\n   * @param {Number[]} values - The values at the points.\n   * @param {Number} dim - The dimension.\n   * @param {Number[]} derivs - The derivatives.\n   */\n  publicAPI.derivatives = (subId, pcoords, values, dim, derivs) => {\n    const pt0 = [];\n    model.points.getPoint(subId, pt0);\n    const pt1 = [];\n    model.points.getPoint(subId + 1, pt1);\n    const pt2 = [];\n    model.points.getPoint(subId + 2, pt2);\n    const points = model.triangle.getPoints();\n    points.setPoint(0, ...pt0);\n    points.setPoint(1, ...pt1);\n    points.setPoint(2, ...pt2);\n    model.triangle.derivatives(0, pcoords, values, dim, derivs);\n  };\n\n  /**\n   * Get the parametric center of the triangle strip.\n   * @param {Vector3} pcoords - The parametric coordinates.\n   * @returns {Number} The parametric center.\n   */\n  publicAPI.getParametricCenter = pcoords => {\n    pcoords[0] = 0.333333;\n    pcoords[1] = 0.333333;\n    pcoords[2] = 0.0;\n    return Math.floor((model.pointsIds.length - 2) / 2);\n  };\n\n  /**\n   * Contour the triangle strip.\n   * @param {*} value\n   * @param {*} cellScalars\n   * @param {*} locator\n   * @param {*} verts\n   * @param {*} lines\n   * @param {*} polys\n   * @param {*} inPd\n   * @param {*} outPd\n   * @param {*} inCd\n   * @param {*} cellId\n   * @param {*} outCd\n   * @returns\n   */\n  publicAPI.contour = (value, cellScalars, locator, verts, lines, polys, inPd, outPd, inCd, cellId, outCd) => notImplemented('contour')();\n\n  /**\n   * Clip the triangle strip.\n   * @param {*} value Clipping value\n   * @param {*} cellScalars Cell scalars\n   * @param {*} locator Locator\n   * @param {*} tris Triangle indices\n   * @param {*} inPd Input point data\n   * @param {*} outPd Output point data\n   * @param {*} inCd\n   * @param {*} cellId\n   * @param {*} outCd\n   * @param {*} insideOut\n   * @returns\n   */\n  publicAPI.clip = (value, cellScalars, locator, tris, inPd, outPd, inCd, cellId, outCd, insideOut) => notImplemented('clip')();\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  line: null,\n  triangle: null,\n  tris: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkCell.extend(publicAPI, model, initialValues);\n  if (!model.line) {\n    model.line = vtkLine.newInstance();\n  }\n  if (!model.triangle) {\n    model.triangle = vtkTriangle.newInstance();\n  }\n\n  // Build VTK API\n  vtkTriangleStrip(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkTriangleStrip');\n\n// ----------------------------------------------------------------------------\n\nvar vtkTriangleStrip$1 = {\n  newInstance,\n  extend,\n  ...STATIC\n};\n\nexport { STATIC, vtkTriangleStrip$1 as default, extend, newInstance };\n","const POLYDATA_FIELDS = ['verts', 'lines', 'polys', 'strips'];\nvar Constants = {\n  POLYDATA_FIELDS\n};\n\nexport { POLYDATA_FIELDS, Constants as default };\n","import { m as macro } from '../../macros2.js';\nimport vtk from '../../vtk.js';\nimport vtkCellArray from '../Core/CellArray.js';\nimport vtkCellLinks from './CellLinks.js';\nimport vtkCellTypes from './CellTypes.js';\nimport vtkLine from './Line.js';\nimport vtkPointSet from './PointSet.js';\nimport vtkPolyLine from './PolyLine.js';\nimport vtkPolygon from './Polygon.js';\nimport vtkQuad from './Quad.js';\nimport vtkTriangle from './Triangle.js';\nimport vtkTriangleStrip from './TriangleStrip.js';\nimport { CellType } from './CellTypes/Constants.js';\nimport { POLYDATA_FIELDS } from './PolyData/Constants.js';\n\nconst {\n  vtkWarningMacro\n} = macro;\nconst CELL_FACTORY = {\n  [CellType.VTK_LINE]: vtkLine,\n  [CellType.VTK_QUAD]: vtkQuad,\n  [CellType.VTK_POLY_LINE]: vtkLine,\n  [CellType.VTK_TRIANGLE]: vtkTriangle,\n  [CellType.VTK_TRIANGLE_STRIP]: vtkTriangleStrip,\n  [CellType.VTK_POLY_LINE]: vtkPolyLine,\n  [CellType.VTK_POLYGON]: vtkPolygon\n};\n\n// ----------------------------------------------------------------------------\n// vtkPolyData methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPolyData(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkPolyData');\n  function camelize(str) {\n    return str.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, letter => letter.toUpperCase()).replace(/\\s+/g, '');\n  }\n\n  // build empty cell arrays and set methods\n  POLYDATA_FIELDS.forEach(type => {\n    publicAPI[`getNumberOf${camelize(type)}`] = () => model[type].getNumberOfCells();\n    if (!model[type]) {\n      model[type] = vtkCellArray.newInstance();\n    } else {\n      model[type] = vtk(model[type]);\n    }\n  });\n  publicAPI.getNumberOfCells = () => POLYDATA_FIELDS.reduce((num, cellType) => num + model[cellType].getNumberOfCells(), 0);\n  const superShallowCopy = publicAPI.shallowCopy;\n  publicAPI.shallowCopy = function (other) {\n    let debug = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    superShallowCopy(other, debug);\n    POLYDATA_FIELDS.forEach(type => {\n      model[type] = vtkCellArray.newInstance();\n      model[type].shallowCopy(other.getReferenceByName(type));\n    });\n  };\n  const superGetMTime = publicAPI.getMTime;\n  publicAPI.getMTime = () => POLYDATA_FIELDS.reduce((mTime, type) => Math.max(mTime, model[type]?.getMTime() ?? mTime), superGetMTime());\n  const superInitialize = publicAPI.initialize;\n  publicAPI.initialize = () => {\n    POLYDATA_FIELDS.forEach(type => model[type]?.initialize());\n    return superInitialize();\n  };\n  publicAPI.buildCells = () => {\n    // here are the number of cells we have\n    const nVerts = publicAPI.getNumberOfVerts();\n    const nLines = publicAPI.getNumberOfLines();\n    const nPolys = publicAPI.getNumberOfPolys();\n    const nStrips = publicAPI.getNumberOfStrips();\n\n    // pre-allocate the space we need\n    const nCells = nVerts + nLines + nPolys + nStrips;\n    const types = new Uint8Array(nCells);\n    let pTypes = types;\n    const locs = new Uint32Array(nCells);\n    let pLocs = locs;\n\n    // record locations and type of each cell.\n    // verts\n    if (nVerts) {\n      let nextCellPts = 0;\n      model.verts.getCellSizes().forEach((numCellPts, index) => {\n        pLocs[index] = nextCellPts;\n        pTypes[index] = numCellPts > 1 ? CellType.VTK_POLY_VERTEX : CellType.VTK_VERTEX;\n        nextCellPts += numCellPts + 1;\n      });\n      pLocs = pLocs.subarray(nVerts);\n      pTypes = pTypes.subarray(nVerts);\n    }\n\n    // lines\n    if (nLines) {\n      let nextCellPts = 0;\n      model.lines.getCellSizes().forEach((numCellPts, index) => {\n        pLocs[index] = nextCellPts;\n        pTypes[index] = numCellPts > 2 ? CellType.VTK_POLY_LINE : CellType.VTK_LINE;\n        if (numCellPts === 1) {\n          vtkWarningMacro('Building VTK_LINE ', index, ' with only one point, but VTK_LINE needs at least two points. Check the input.');\n        }\n        nextCellPts += numCellPts + 1;\n      });\n      pLocs = pLocs.subarray(nLines);\n      pTypes = pTypes.subarray(nLines);\n    }\n\n    // polys\n    if (nPolys) {\n      let nextCellPts = 0;\n      model.polys.getCellSizes().forEach((numCellPts, index) => {\n        pLocs[index] = nextCellPts;\n        switch (numCellPts) {\n          case 3:\n            pTypes[index] = CellType.VTK_TRIANGLE;\n            break;\n          case 4:\n            pTypes[index] = CellType.VTK_QUAD;\n            break;\n          default:\n            pTypes[index] = CellType.VTK_POLYGON;\n            break;\n        }\n        if (numCellPts < 3) {\n          vtkWarningMacro('Building VTK_TRIANGLE ', index, ' with less than three points, but VTK_TRIANGLE needs at least three points. Check the input.');\n        }\n        nextCellPts += numCellPts + 1;\n      });\n      pLocs += pLocs.subarray(nPolys);\n      pTypes += pTypes.subarray(nPolys);\n    }\n\n    // strips\n    if (nStrips) {\n      let nextCellPts = 0;\n      pTypes.fill(CellType.VTK_TRIANGLE_STRIP, 0, nStrips);\n      model.strips.getCellSizes().forEach((numCellPts, index) => {\n        pLocs[index] = nextCellPts;\n        nextCellPts += numCellPts + 1;\n      });\n    }\n\n    // set up the cell types data structure\n    model.cells = vtkCellTypes.newInstance();\n    model.cells.setCellTypes(nCells, types, locs);\n  };\n\n  /**\n   * Create upward links from points to cells that use each point. Enables\n   * topologically complex queries.\n   */\n  publicAPI.buildLinks = function () {\n    let initialSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (model.cells === undefined) {\n      publicAPI.buildCells();\n    }\n    model.links = vtkCellLinks.newInstance();\n    if (initialSize > 0) {\n      model.links.allocate(initialSize);\n    } else {\n      model.links.allocate(publicAPI.getPoints().getNumberOfPoints());\n    }\n    model.links.buildLinks(publicAPI);\n  };\n  publicAPI.getCellType = cellId => model.cells.getCellType(cellId);\n  publicAPI.getCellPoints = cellId => {\n    const cellType = publicAPI.getCellType(cellId);\n    let cells = null;\n    switch (cellType) {\n      case CellType.VTK_VERTEX:\n      case CellType.VTK_POLY_VERTEX:\n        cells = model.verts;\n        break;\n      case CellType.VTK_LINE:\n      case CellType.VTK_POLY_LINE:\n        cells = model.lines;\n        break;\n      case CellType.VTK_TRIANGLE:\n      case CellType.VTK_QUAD:\n      case CellType.VTK_POLYGON:\n        cells = model.polys;\n        break;\n      case CellType.VTK_TRIANGLE_STRIP:\n        cells = model.strips;\n        break;\n      default:\n        cells = null;\n        return {\n          type: 0,\n          cellPointIds: null\n        };\n    }\n    const loc = model.cells.getCellLocation(cellId);\n    const cellPointIds = cells.getCell(loc);\n    return {\n      cellType,\n      cellPointIds\n    };\n  };\n  publicAPI.getPointCells = ptId => model.links.getCells(ptId);\n  publicAPI.getCellEdgeNeighbors = (cellId, point1, point2) => {\n    const link1 = model.links.getLink(point1);\n    const link2 = model.links.getLink(point2);\n    return link1.cells.filter(cell => cell !== cellId && link2.cells.indexOf(cell) !== -1);\n  };\n\n  /**\n   * If you know the type of cell, you may provide it to improve performances.\n   */\n  publicAPI.getCell = function (cellId) {\n    let cellHint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    const cellInfo = publicAPI.getCellPoints(cellId);\n    const cell = cellHint || CELL_FACTORY[cellInfo.cellType].newInstance();\n    cell.initialize(publicAPI.getPoints(), cellInfo.cellPointIds);\n    return cell;\n  };\n  publicAPI.getMaxCellSize = () => POLYDATA_FIELDS.reduce((max, type) => Math.max(max, model[type]?.getMaxCellSize?.() ?? 0), 0);\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // verts: null,\n  // lines: null,\n  // polys: null,\n  // strips: null,\n  // cells: null,\n  // links: null,\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkPointSet.extend(publicAPI, model, initialValues);\n  macro.get(publicAPI, model, ['cells', 'links']);\n  macro.setGet(publicAPI, model, ['verts', 'lines', 'polys', 'strips']);\n\n  // Object specific methods\n  vtkPolyData(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkPolyData');\n\n// ----------------------------------------------------------------------------\n\nvar vtkPolyData$1 = {\n  newInstance,\n  extend\n};\n\nexport { CELL_FACTORY, vtkPolyData$1 as default, extend, newInstance };\n","import { m as macro } from '../../macros2.js';\nimport { b as vtkMath } from '../Core/Math/index.js';\nimport { IDENTITY } from '../Core/Math/Constants.js';\nimport { vec3, mat4, quat, mat3 } from 'gl-matrix';\n\nconst {\n  vtkWarningMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// vtkTransform methods\n// ----------------------------------------------------------------------------\n// eslint-disable-next-line import/no-mutable-exports\nlet newInstance;\nfunction vtkTransform(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkAbstractTransform', 'vtkHomogeneousTransform', 'vtkTransform');\n  publicAPI.transformPoint = (point, out) => {\n    vec3.transformMat4(out, point, model.matrix);\n    return out;\n  };\n  publicAPI.transformPoints = (points, out) => {\n    const inPoint = new Float64Array(3);\n    const outPoint = new Float64Array(3);\n    for (let i = 0; i < points.length; i += 3) {\n      inPoint[0] = points[i];\n      inPoint[1] = points[i + 1];\n      inPoint[2] = points[i + 2];\n      vec3.transformMat4(outPoint, inPoint, model.matrix);\n      out[i] = outPoint[0];\n      out[i + 1] = outPoint[1];\n      out[i + 2] = outPoint[2];\n    }\n    return out;\n  };\n\n  /**\n   * Sets the internal state of the transform to PreMultiply.\n   * All subsequent operations will occur before those already represented in the current transformation.\n   * In homogeneous matrix notation, M = M*A where M is the current transformation matrix and A is the applied matrix.\n   * The default is PreMultiply.\n   */\n  publicAPI.preMultiply = () => {\n    publicAPI.setPreMultiplyFlag(true);\n  };\n\n  /**\n   * Sets the internal state of the transform to PostMultiply.\n   * All subsequent operations will occur after those already represented in the current transformation.\n   * In homogeneous matrix notation, M = A*M where M is the current transformation matrix and A is the applied matrix.\n   * The default is PreMultiply.\n   */\n  publicAPI.postMultiply = () => {\n    publicAPI.setPreMultiplyFlag(false);\n  };\n  publicAPI.transformMatrix = (matrix, out) => {\n    if (model.preMultiplyFlag) {\n      mat4.multiply(out, model.matrix, matrix);\n    } else {\n      mat4.multiply(out, matrix, model.matrix);\n    }\n    return out;\n  };\n\n  // Apply the transform to each matrix in the same way as transformMatrix\n  // `matrices` can be a contiguous array of float or an array of array\n  publicAPI.transformMatrices = (matrices, out) => {\n    const inMat = new Float64Array(16);\n    const outMat = new Float64Array(16);\n    const transform = model.preMultiplyFlag ? () => mat4.multiply(outMat, model.matrix, inMat) : () => mat4.multiply(outMat, inMat, model.matrix);\n    for (let i = 0; i < matrices.length; i += 16) {\n      for (let j = 0; j < 16; ++j) {\n        inMat[j] = matrices[i + j];\n      }\n      transform();\n      for (let j = 0; j < 16; ++j) {\n        out[i + j] = outMat[j];\n      }\n    }\n    return out;\n  };\n  publicAPI.getInverse = () => newInstance({\n    matrix: vtkMath.invertMatrix(Array.from(model.matrix), [], 4),\n    preMultiplyFlag: model.preMultiplyFlag\n  });\n\n  /**\n   * Create a translation matrix and concatenate it with the current\n   * transformation according to preMultiply or postMultiply semantics.\n   * @param {Number} x X component of the translation\n   * @param {Number} y Y component of the translation\n   * @param {Number} z Z component of the translation\n   */\n  publicAPI.translate = (x, y, z) => {\n    if (x === 0 && y === 0 && z === 0) {\n      return;\n    }\n    const tMat = mat4.create();\n    mat4.fromTranslation(tMat, [x, y, z]);\n    if (model.preMultiplyFlag) {\n      mat4.multiply(model.matrix, model.matrix, tMat);\n    } else {\n      mat4.multiply(model.matrix, tMat, model.matrix);\n    }\n    publicAPI.modified();\n  };\n\n  /**\n   * Create a rotation matrix and concatenate it with the current transformation\n   * according to preMultiply or postMultiply semantics.\n   * The angle is expressed in degrees.\n   * @param {Number} angle Angle in degrees\n   * @param {Number} x X component of the rotation axis\n   * @param {Number} y Y component of the rotation axis\n   * @param {Number} z Z component of the rotation axis\n   */\n  publicAPI.rotateWXYZ = (degrees, x, y, z) => {\n    if (x === 0.0 && y === 0.0 && z === 0.0) {\n      vtkWarningMacro('No rotation applied, axis is zero vector.');\n      return;\n    }\n    if (degrees === 0.0) {\n      return;\n    }\n\n    // convert to radians\n    const angle = vtkMath.radiansFromDegrees(degrees);\n    const q = quat.create();\n    quat.setAxisAngle(q, [x, y, z], angle);\n    const quatMat = new Float64Array(16);\n    mat4.fromQuat(quatMat, q);\n    if (model.preMultiplyFlag) {\n      mat4.multiply(model.matrix, model.matrix, quatMat);\n    } else {\n      mat4.multiply(model.matrix, quatMat, model.matrix);\n    }\n    publicAPI.modified();\n  };\n\n  /**\n   * Create a rotation matrix about the X, Y, or Z axis and concatenate it with\n   * the current transformation according to preMultiply or postMultiply\n   * semantics.\n   * The angle is expressed in degrees.\n   * @param {Number} angle Angle in degrees\n   */\n  publicAPI.rotateX = angle => {\n    publicAPI.rotateWXYZ(angle, 1, 0, 0);\n  };\n\n  /**\n   * Create a rotation matrix about the X, Y, or Z axis and concatenate it with\n   * the current transformation according to preMultiply or postMultiply\n   * semantics.\n   * @param {Number} angle Angle in degrees\n   */\n  publicAPI.rotateY = angle => {\n    publicAPI.rotateWXYZ(angle, 0, 1, 0);\n  };\n\n  /**\n   * Create a rotation matrix about the X, Y, or Z axis and concatenate it with\n   * the current transformation according to preMultiply or postMultiply\n   * semantics.\n   * @param {Number} angle Angle in degrees\n   */\n  publicAPI.rotateZ = angle => {\n    publicAPI.rotateWXYZ(angle, 0, 0, 1);\n  };\n\n  /**\n   * Create a scale matrix (i.e. set the diagonal elements to x, y, z) and\n   * concatenate it with the current transformation according to preMultiply or\n   * postMultiply semantics.\n   * @param {Number} x Diagonal element for X axis\n   * @param {Number} y Diagonal element for Y axis\n   * @param {Number} z Diagonal element for Z axis\n   */\n  publicAPI.scale = (x, y, z) => {\n    if (x === 1 && y === 1 && z === 1) {\n      return;\n    }\n    const sMat = mat4.create();\n    mat4.fromScaling(sMat, [x, y, z]);\n    if (model.preMultiplyFlag) {\n      mat4.multiply(model.matrix, model.matrix, sMat);\n    } else {\n      mat4.multiply(model.matrix, sMat, model.matrix);\n    }\n    publicAPI.modified();\n  };\n\n  /**\n   * Apply the transformation to a normal.\n   * @param {vec3} inNormal The normal vector to transform\n   * @param {vec3} outNormal The output vector\n   * @returns {vec3} The transformed normal vector\n   */\n  publicAPI.transformNormal = function (inNormal) {\n    let outNormal = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    const matrix3x3 = mat3.fromMat4(mat3.create(), model.matrix);\n    // Invert the upper 3x3 part of the matrix\n    const invMat3 = mat3.create();\n    mat3.invert(invMat3, matrix3x3);\n    // Transpose\n    const tMat3 = mat3.create();\n    mat3.transpose(tMat3, invMat3);\n    // Multiply normal\n    publicAPI.transformVector(inNormal, outNormal, tMat3);\n    // Ensure the output normal is normalized\n    vtkMath.normalize(outNormal);\n    return outNormal;\n  };\n\n  /**\n   * Apply the transformation to a series of normals, and append the results to\n   * outNormals.\n   * @param {vtkDataArray} inNormals The normal vectors to transform\n   * @param {vtkDataArray} outNormals The output array\n   */\n  publicAPI.transformNormals = (inNormals, outNormals) => {\n    const inArr = inNormals.getData();\n    const outArr = outNormals.getData();\n    const tmp = [0, 0, 0];\n    const matrix3x3 = mat3.fromMat4(mat3.create(), model.matrix);\n    // Invert the upper 3x3 part of the matrix\n    const invMat3 = mat3.create();\n    mat3.invert(invMat3, matrix3x3);\n    // Transpose\n    const tMat3 = mat3.create();\n    mat3.transpose(tMat3, invMat3);\n    for (let i = 0; i < inArr.length; i += 3) {\n      tmp[0] = inArr[i];\n      tmp[1] = inArr[i + 1];\n      tmp[2] = inArr[i + 2];\n      // matrix has been transposed & inverted, so use transformVector directly\n      // to apply the transformation\n      publicAPI.transformVector(tmp, tmp, tMat3);\n      vtkMath.normalize(tmp);\n      outArr[i] = tmp[0];\n      outArr[i + 1] = tmp[1];\n      outArr[i + 2] = tmp[2];\n    }\n  };\n\n  /**\n   * Apply the transformation to a vector.\n   * @param {vec3} inVector The vector to transform\n   * @param {vec3} outVector The output vector\n   * @param {mat3} [matrix=null] if null (default), the Transform matrix is being used.\n   * @returns {vec3} The transformed vector\n   */\n  publicAPI.transformVector = function (inVector) {\n    let outVector = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    let matrix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    const matrix3x3 = matrix || mat3.fromMat4(mat3.create(), model.matrix);\n    vec3.transformMat3(outVector, inVector, matrix3x3);\n    return outVector;\n  };\n\n  /**\n   * Apply the transformation to a series of vectors, and append the results to\n   * outVectors.\n   * @param {vtkDataArray} inVectors The vectors to transform\n   * @param {vtkDataArray} outVectors The output array\n   */\n  publicAPI.transformVectors = (inVectors, outVectors) => {\n    const inArr = inVectors.getData();\n    const outArr = outVectors.getData();\n    const tmp = [0, 0, 0];\n    for (let i = 0; i < inArr.length; i += 3) {\n      tmp[0] = inArr[i];\n      tmp[1] = inArr[i + 1];\n      tmp[2] = inArr[i + 2];\n      publicAPI.transformVector(tmp, tmp);\n      vtkMath.normalize(tmp);\n      outArr[i] = tmp[0];\n      outArr[i + 1] = tmp[1];\n      outArr[i + 2] = tmp[2];\n    }\n  };\n\n  /**\n   * Transform points, normals, and vectors simultaneously.\n   * @param {vtkPoints} inPoints Input points\n   * @param {vtkPoints} outPoints Output points\n   * @param {vtkDataArray} inNormals Input normals\n   * @param {vtkDataArray} outNormals Output normals\n   * @param {vtkDataArray} inVectors Input vectors\n   * @param {vtkDataArray} outVectors Output vectors\n   * @param {Array<vtkDataArray>} inVectorsArr Optional input vector arrays\n   * @param {Array<vtkDataArray>} outVectorsArr Optional output vector arrays\n   */\n  publicAPI.transformPointsNormalsVectors = function (inPoints, outPoints, inNormals, outNormals, inVectors, outVectors) {\n    let inVectorsArr = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n    let outVectorsArr = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n    const n = inPoints.getNumberOfPoints();\n    const nOptionalVectors = inVectorsArr?.length ?? 0;\n    const point = new Float64Array(3);\n    const oldPoint = new Float64Array(3);\n    const oldVector = new Float64Array(3);\n    const oldNormal = new Float64Array(3);\n    let modifiedPoint = false;\n    let modifiedVector = false;\n    let modifiedNormal = false;\n    const modifiedVectorsArr = [];\n    for (let ptId = 0; ptId < n; ptId++) {\n      // Transform point\n      inPoints.getPoint(ptId, point);\n      oldPoint.set(point);\n      publicAPI.transformPoint(point, point);\n      outPoints.setPoint(ptId, ...point);\n      if (!vtkMath.areEquals(oldPoint, point)) {\n        modifiedPoint = true;\n      }\n\n      // Transform vectors\n      if (inVectors) {\n        const inData = inVectors.getData();\n        const outData = outVectors.getData();\n        point[0] = inData[ptId * 3];\n        point[1] = inData[ptId * 3 + 1];\n        point[2] = inData[ptId * 3 + 2];\n        oldVector.set(point);\n        publicAPI.transformVector(point, point);\n        outData[ptId * 3] = point[0];\n        outData[ptId * 3 + 1] = point[1];\n        outData[ptId * 3 + 2] = point[2];\n        if (!vtkMath.areEquals(oldVector, point)) {\n          modifiedVector = true;\n        }\n      }\n\n      // Transform normals\n      if (inNormals) {\n        const inData = inNormals.getData();\n        const outData = outNormals.getData();\n        point[0] = inData[ptId * 3];\n        point[1] = inData[ptId * 3 + 1];\n        point[2] = inData[ptId * 3 + 2];\n        oldNormal.set(point);\n        publicAPI.transformNormal(point, point);\n        outData[ptId * 3] = point[0];\n        outData[ptId * 3 + 1] = point[1];\n        outData[ptId * 3 + 2] = point[2];\n        if (!vtkMath.areEquals(oldNormal, point)) {\n          modifiedNormal = true;\n        }\n      }\n\n      // Transform optional vectors\n      if (inVectorsArr) {\n        for (let iArr = 0; iArr < nOptionalVectors; iArr++) {\n          const inData = inVectorsArr[iArr].getData();\n          const outData = outVectorsArr[iArr].getData();\n          point[0] = inData[ptId * 3];\n          point[1] = inData[ptId * 3 + 1];\n          point[2] = inData[ptId * 3 + 2];\n          oldVector.set(point);\n          publicAPI.transformVector(point, point);\n          outData[ptId * 3] = point[0];\n          outData[ptId * 3 + 1] = point[1];\n          outData[ptId * 3 + 2] = point[2];\n          if (!vtkMath.arrayEqual(oldVector, point) && !modifiedVectorsArr.includes(iArr)) {\n            modifiedVectorsArr.push(iArr);\n          }\n        }\n      }\n    }\n    if (modifiedPoint) {\n      outPoints.modified();\n    }\n    if (modifiedVector) {\n      outVectors.modified();\n    }\n    if (modifiedNormal) {\n      outNormals.modified();\n    }\n    modifiedVectorsArr.forEach(idx => outVectorsArr[idx].modified());\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  preMultiplyFlag: false,\n  matrix: [...IDENTITY]\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['preMultiplyFlag']);\n  macro.setGetArray(publicAPI, model, ['matrix'], 16);\n  vtkTransform(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\nnewInstance = macro.newInstance(extend, 'vtkTransform');\n\n// ----------------------------------------------------------------------------\n\nvar vtkTransform$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkTransform$1 as default, extend, newInstance };\n","import { m as macro } from '../../macros2.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport vtkPoints from '../../Common/Core/Points.js';\nimport vtkPolyData from '../../Common/DataModel/PolyData.js';\nimport { DesiredOutputPrecision } from '../../Common/DataModel/DataSetAttributes/Constants.js';\nimport { VtkDataTypes } from '../../Common/Core/DataArray/Constants.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// vtkTransformPolyDataFilter methods\n// ----------------------------------------------------------------------------\n\nfunction vtkTransformPolyDataFilter(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkTransformPolyDataFilter');\n\n  // Internal method to handle the actual transformation\n  function transformPolyData(input, output) {\n    if (!model.transform) {\n      vtkErrorMacro('No transform defined!');\n      return false;\n    }\n    const inPts = input.getPoints();\n    const inPtData = input.getPointData();\n    const outPD = output.getPointData();\n    const inCellData = input.getCellData();\n    const outCD = output.getCellData();\n    if (!inPts) {\n      // Input polydata is empty. This is not an error, the output will be just empty, too.\n      return true;\n    }\n    const numPoints = inPts.getNumberOfPoints();\n\n    // Get input vectors and normals (points and cells)\n    const inVectors = inPtData.getVectors();\n    const inNormals = inPtData.getNormals();\n    const inCellVectors = inCellData.getVectors();\n    const inCellNormals = inCellData.getNormals();\n\n    // Set the desired precision for the points in the output\n    let pointType = inPts.getDataType();\n    if (model.outputPointsPrecision === DesiredOutputPrecision.SINGLE) {\n      pointType = VtkDataTypes.FLOAT;\n    } else if (model.outputPointsPrecision === DesiredOutputPrecision.DOUBLE) {\n      pointType = VtkDataTypes.DOUBLE;\n    }\n\n    // Create output points with appropriate precision\n    const outPts = vtkPoints.newInstance({\n      dataType: pointType\n    });\n\n    // Transform points\n    const inPtsData = inPts.getData();\n    outPts.setNumberOfPoints(numPoints);\n    const outPtsData = outPts.getData();\n\n    // Transform vectors if present\n    let outVectors = null;\n    if (inVectors) {\n      outVectors = vtkDataArray.newInstance({\n        name: inVectors.getName(),\n        numberOfComponents: 3,\n        size: numPoints * 3\n      });\n    }\n\n    // Transform normals if present\n    let outNormals = null;\n    if (inNormals) {\n      outNormals = vtkDataArray.newInstance({\n        name: inNormals.getName(),\n        numberOfComponents: 3,\n        size: numPoints * 3\n      });\n    }\n    if (inVectors || inNormals) {\n      model.transform.transformPointsNormalsVectors(inPts, outPts, inNormals, outNormals, inVectors, outVectors);\n    } else {\n      model.transform.transformPoints(inPtsData, outPtsData);\n    }\n\n    // Transform cell vectors if present\n    let outCellVectors = null;\n    if (inCellVectors) {\n      const numCells = inCellVectors.getNumberOfTuples();\n      outCellVectors = vtkDataArray.newInstance({\n        name: inCellVectors.getName(),\n        numberOfComponents: 3,\n        size: numCells * 3\n      });\n      model.transform.transformVectors(inCellVectors, outCellVectors);\n    }\n\n    // Transform cell normals if present\n    let outCellNormals = null;\n    if (inCellNormals) {\n      const numCells = inCellNormals.getNumberOfTuples();\n      outCellNormals = vtkDataArray.newInstance({\n        name: inCellNormals.getName(),\n        numberOfComponents: 3,\n        size: numCells * 3\n      });\n      model.transform.transformNormals(inCellNormals, outCellNormals);\n    }\n\n    // Set output data\n    output.setPoints(outPts);\n\n    // Copy cell topology\n    output.setVerts(input.getVerts());\n    output.setLines(input.getLines());\n    output.setPolys(input.getPolys());\n    output.setStrips(input.getStrips());\n\n    // Set transformed point data\n    if (outNormals) {\n      outPD.setNormals(outNormals);\n      outPD.copyFieldOff(outNormals.getName());\n    }\n    if (outVectors) {\n      outPD.setVectors(outVectors);\n      outPD.copyFieldOff(outVectors.getName());\n    }\n\n    // Set transformed cell data\n    if (outCellNormals) {\n      outCD.setNormals(outCellNormals);\n      outCD.copyFieldOff(outCellNormals.getName());\n    }\n    if (outCellVectors) {\n      outCD.setVectors(outCellVectors);\n      outCD.copyFieldOff(outCellVectors.getName());\n    }\n\n    // Pass through other data\n    outPD.passData(inPtData);\n    outCD.passData(inCellData);\n    return true;\n  }\n  publicAPI.requestData = (inData, outData) => {\n    const input = inData[0];\n    const output = outData[0]?.initialize() || vtkPolyData.newInstance();\n    if (transformPolyData(input, output)) {\n      outData[0] = output;\n    } else {\n      vtkErrorMacro('TransformPolyDataFilter failed to transform input data.');\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  transform: null,\n  outputPointsPrecision: DesiredOutputPrecision.DEFAULT\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Make this a VTK object\n  macro.obj(publicAPI, model);\n\n  // Also make it an algorithm with one input and one output\n  macro.algo(publicAPI, model, 1, 1);\n\n  // Set/Get methods\n  macro.setGet(publicAPI, model, ['transform', 'outputPointsPrecision']);\n\n  // Object specific methods\n  vtkTransformPolyDataFilter(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkTransformPolyDataFilter');\n\n// ----------------------------------------------------------------------------\n\nvar vtkTransformPolyDataFilter$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkTransformPolyDataFilter$1 as default, extend, newInstance };\n","/**\n * Converts a binary buffer in an ArrayBuffer to a string.\n *\n * Note this does not take encoding into consideration, so don't\n * expect proper Unicode or any other encoding.\n */\nfunction arrayBufferToString(arrayBuffer) {\n  const decoder = new TextDecoder('latin1');\n  return decoder.decode(arrayBuffer);\n}\n\n/**\n * Extracts binary data out of a file ArrayBuffer given a prefix/suffix.\n */\nfunction extractBinary(arrayBuffer, prefixRegex) {\n  let suffixRegex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  const str = arrayBufferToString(arrayBuffer);\n  const prefixMatch = prefixRegex.exec(str);\n  if (!prefixMatch) {\n    return {\n      text: str\n    };\n  }\n  const dataStartIndex = prefixMatch.index + prefixMatch[0].length;\n  const strFirstHalf = str.substring(0, dataStartIndex);\n  let retVal = null;\n  const suffixMatch = suffixRegex ? suffixRegex.exec(str) : null;\n  if (suffixMatch) {\n    const strSecondHalf = str.substr(suffixMatch.index);\n    retVal = {\n      text: strFirstHalf + strSecondHalf,\n      binaryBuffer: arrayBuffer.slice(dataStartIndex, suffixMatch.index)\n    };\n  } else {\n    // no suffix, so just take all the data starting from dataStartIndex\n    retVal = {\n      text: strFirstHalf,\n      binaryBuffer: arrayBuffer.slice(dataStartIndex)\n    };\n  }\n  return retVal;\n}\nvar BinaryHelper = {\n  arrayBufferToString,\n  extractBinary\n};\n\nexport { BinaryHelper as default };\n","const TYPE_MAPPING = {};\nfunction has(type) {\n  return !!TYPE_MAPPING[type];\n}\nfunction get() {\n  let type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'http';\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return TYPE_MAPPING[type](options);\n}\nfunction registerType(type, fn) {\n  TYPE_MAPPING[type] = fn;\n}\nvar DataAccessHelper = {\n  get,\n  has,\n  registerType\n};\n\nexport { DataAccessHelper as default, get, has, registerType };\n","import { mat4, glMatrix, vec3 } from 'gl-matrix';\nimport { a as areMatricesEqual } from './Math/index.js';\nimport { IDENTITY } from './Math/Constants.js';\n\nconst NoOp = v => v;\nconst EPSILON = 1e-6;\nclass Transform {\n  constructor() {\n    let useDegree = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    this.matrix = mat4.identity(new Float64Array(16));\n    this.tmp = new Float64Array(3);\n    this.angleConv = useDegree ? glMatrix.toRadian : NoOp;\n  }\n  rotateFromDirections(originDirection, targetDirection) {\n    const src = new Float64Array(3);\n    const dst = new Float64Array(3);\n    const transf = new Float64Array(16);\n    vec3.set(src, originDirection[0], originDirection[1], originDirection[2]);\n    vec3.set(dst, targetDirection[0], targetDirection[1], targetDirection[2]);\n    vec3.normalize(src, src);\n    vec3.normalize(dst, dst);\n    const cosAlpha = vec3.dot(src, dst);\n    if (cosAlpha >= 1) {\n      return this;\n    }\n    vec3.cross(this.tmp, src, dst);\n    if (vec3.length(this.tmp) < EPSILON) {\n      // cross product is 0, so pick arbitrary axis perpendicular\n      // to originDirection.\n      vec3.cross(this.tmp, [1, 0, 0], originDirection);\n      if (vec3.length(this.tmp) < EPSILON) {\n        vec3.cross(this.tmp, [0, 1, 0], originDirection);\n      }\n    }\n    mat4.fromRotation(transf, Math.acos(cosAlpha), this.tmp);\n    mat4.multiply(this.matrix, this.matrix, transf);\n    return this;\n  }\n  rotate(angle, axis) {\n    vec3.set(this.tmp, ...axis);\n    vec3.normalize(this.tmp, this.tmp);\n    mat4.rotate(this.matrix, this.matrix, this.angleConv(angle), this.tmp);\n    return this;\n  }\n  rotateX(angle) {\n    mat4.rotateX(this.matrix, this.matrix, this.angleConv(angle));\n    return this;\n  }\n  rotateY(angle) {\n    mat4.rotateY(this.matrix, this.matrix, this.angleConv(angle));\n    return this;\n  }\n  rotateZ(angle) {\n    mat4.rotateZ(this.matrix, this.matrix, this.angleConv(angle));\n    return this;\n  }\n  translate(x, y, z) {\n    vec3.set(this.tmp, x, y, z);\n    mat4.translate(this.matrix, this.matrix, this.tmp);\n    return this;\n  }\n  scale(sx, sy, sz) {\n    vec3.set(this.tmp, sx, sy, sz);\n    mat4.scale(this.matrix, this.matrix, this.tmp);\n    return this;\n  }\n  multiply(mat4x4) {\n    mat4.multiply(this.matrix, this.matrix, mat4x4);\n    return this;\n  }\n  multiply3x3(mat3x3) {\n    mat4.multiply(this.matrix, this.matrix, [mat3x3[0], mat3x3[1], mat3x3[2], 0, mat3x3[3], mat3x3[4], mat3x3[5], 0, mat3x3[6], mat3x3[7], mat3x3[8], 0, 0, 0, 0, 1]);\n    return this;\n  }\n  invert() {\n    mat4.invert(this.matrix, this.matrix);\n    return this;\n  }\n  identity() {\n    mat4.identity(this.matrix);\n    return this;\n  }\n\n  //-----------\n\n  apply(typedArray) {\n    let offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    let nbIterations = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;\n    if (areMatricesEqual(IDENTITY, this.matrix)) {\n      // Make sure we can chain apply...\n      return this;\n    }\n    const size = nbIterations === -1 ? typedArray.length : offset + nbIterations * 3;\n    for (let i = offset; i < size; i += 3) {\n      vec3.set(this.tmp, typedArray[i], typedArray[i + 1], typedArray[i + 2]);\n      vec3.transformMat4(this.tmp, this.tmp, this.matrix);\n      typedArray[i] = this.tmp[0];\n      typedArray[i + 1] = this.tmp[1];\n      typedArray[i + 2] = this.tmp[2];\n    }\n\n    // Make sure we can chain apply...\n    return this;\n  }\n  getMatrix() {\n    return this.matrix;\n  }\n  setMatrix(mat4x4) {\n    if (!!mat4x4 && mat4x4.length === 16) {\n      mat4.copy(this.matrix, mat4x4);\n    }\n    return this;\n  }\n}\nfunction buildFromDegree() {\n  return new Transform(true);\n}\nfunction buildFromRadian() {\n  return new Transform(false);\n}\nvar vtkMatrixBuilder = {\n  buildFromDegree,\n  buildFromRadian\n};\n\nexport { vtkMatrixBuilder as default };\n","function getEndianness() {\n  const a = new ArrayBuffer(4);\n  const b = new Uint8Array(a);\n  const c = new Uint32Array(a);\n  b[0] = 0xa1;\n  b[1] = 0xb2;\n  b[2] = 0xc3;\n  b[3] = 0xd4;\n  if (c[0] === 0xd4c3b2a1) return 'LittleEndian';\n  if (c[0] === 0xa1b2c3d4) return 'BigEndian';\n  return null;\n}\nconst ENDIANNESS = getEndianness();\nfunction swapBytes(buffer, wordSize) {\n  if (wordSize < 2) {\n    return;\n  }\n  const bytes = new Int8Array(buffer);\n  const size = bytes.length;\n  const tempBuffer = [];\n  for (let i = 0; i < size; i += wordSize) {\n    for (let j = 0; j < wordSize; j++) {\n      tempBuffer.push(bytes[i + j]);\n    }\n    for (let j = 0; j < wordSize; j++) {\n      bytes[i + j] = tempBuffer.pop();\n    }\n  }\n}\nvar Endian = {\n  ENDIANNESS,\n  getEndianness,\n  swapBytes\n};\n\nexport { ENDIANNESS, Endian as default, getEndianness, swapBytes };\n","import { m as macro } from '../../../macros2.js';\nimport Endian from '../../../Common/Core/Endian.js';\nimport { DataTypeByteSize } from '../../../Common/Core/DataArray/Constants.js';\nimport { has, registerType } from '../DataAccessHelper.js';\n\nconst {\n  vtkErrorMacro,\n  vtkDebugMacro\n} = macro;\nconst REJECT_COMPRESSION = () => {\n  vtkErrorMacro('LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead.');\n  return Promise.reject(new Error('LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead.'));\n};\n\n/* eslint-disable prefer-promise-reject-errors */\nlet requestCount = 0;\nfunction openAsyncXHR(method, url) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const xhr = new XMLHttpRequest();\n  xhr.open(method, url, true);\n  if (options.headers) {\n    Object.entries(options.headers).forEach(_ref => {\n      let [key, value] = _ref;\n      return xhr.setRequestHeader(key, value);\n    });\n  }\n  if (options.progressCallback) {\n    xhr.addEventListener('progress', options.progressCallback);\n  }\n  return xhr;\n}\nfunction fetchBinary(url) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return new Promise((resolve, reject) => {\n    const xhr = openAsyncXHR('GET', url, options);\n    xhr.onreadystatechange = e => {\n      if (xhr.readyState === 4) {\n        if (xhr.status === 200 || xhr.status === 0) {\n          resolve(xhr.response);\n        } else {\n          reject({\n            xhr,\n            e\n          });\n        }\n      }\n    };\n\n    // Make request\n    xhr.responseType = 'arraybuffer';\n    xhr.send();\n  });\n}\nfunction fetchArray(instance, baseURL, array) {\n  let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  if (options && options.compression) {\n    return REJECT_COMPRESSION();\n  }\n  if (array.ref && !array.ref.pending) {\n    return new Promise((resolve, reject) => {\n      const url = [baseURL, array.ref.basepath, array.ref.id].join('/');\n      const xhr = openAsyncXHR('GET', url, options);\n      xhr.onreadystatechange = e => {\n        if (xhr.readyState === 1) {\n          array.ref.pending = true;\n          if (++requestCount === 1 && instance?.invokeBusy) {\n            instance.invokeBusy(true);\n          }\n        }\n        if (xhr.readyState === 4) {\n          array.ref.pending = false;\n          if (xhr.status === 200 || xhr.status === 0) {\n            array.buffer = xhr.response;\n            if (array.ref.encode === 'JSON') {\n              array.values = JSON.parse(array.buffer);\n            } else {\n              if (Endian.ENDIANNESS !== array.ref.encode && Endian.ENDIANNESS) {\n                // Need to swap bytes\n                vtkDebugMacro(`Swap bytes of ${array.name}`);\n                Endian.swapBytes(array.buffer, DataTypeByteSize[array.dataType]);\n              }\n              array.values = macro.newTypedArray(array.dataType, array.buffer);\n            }\n            if (array.values.length !== array.size) {\n              vtkErrorMacro(`Error in FetchArray: ${array.name}, does not have the proper array size. Got ${array.values.length}, instead of ${array.size}`);\n            }\n\n            // Done with the ref and work\n            delete array.ref;\n            if (--requestCount === 0 && instance?.invokeBusy) {\n              instance.invokeBusy(false);\n            }\n            if (instance?.modified) {\n              instance.modified();\n            }\n            resolve(array);\n          } else {\n            reject({\n              xhr,\n              e\n            });\n          }\n        }\n      };\n\n      // Make request\n      xhr.responseType = array.dataType !== 'string' ? 'arraybuffer' : 'text';\n      xhr.send();\n    });\n  }\n  return Promise.resolve(array);\n}\n\n// ----------------------------------------------------------------------------\n\nfunction fetchJSON(instance, url) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  if (options && options.compression) {\n    return REJECT_COMPRESSION();\n  }\n  return new Promise((resolve, reject) => {\n    const xhr = openAsyncXHR('GET', url, options);\n    xhr.onreadystatechange = e => {\n      if (xhr.readyState === 1) {\n        if (++requestCount === 1 && instance?.invokeBusy) {\n          instance.invokeBusy(true);\n        }\n      }\n      if (xhr.readyState === 4) {\n        if (--requestCount === 0 && instance?.invokeBusy) {\n          instance.invokeBusy(false);\n        }\n        if (xhr.status === 200 || xhr.status === 0) {\n          resolve(JSON.parse(xhr.responseText));\n        } else {\n          reject({\n            xhr,\n            e\n          });\n        }\n      }\n    };\n\n    // Make request\n    xhr.responseType = 'text';\n    xhr.send();\n  });\n}\n\n// ----------------------------------------------------------------------------\n\nfunction fetchText(instance, url) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  if (options && options.compression) {\n    return REJECT_COMPRESSION();\n  }\n  return new Promise((resolve, reject) => {\n    const xhr = openAsyncXHR('GET', url, options);\n    xhr.onreadystatechange = e => {\n      if (xhr.readyState === 1) {\n        if (++requestCount === 1 && instance?.invokeBusy) {\n          instance.invokeBusy(true);\n        }\n      }\n      if (xhr.readyState === 4) {\n        if (--requestCount === 0 && instance?.invokeBusy) {\n          instance.invokeBusy(false);\n        }\n        if (xhr.status === 200 || xhr.status === 0) {\n          resolve(xhr.responseText);\n        } else {\n          reject({\n            xhr,\n            e\n          });\n        }\n      }\n    };\n\n    // Make request\n    xhr.responseType = 'text';\n    xhr.send();\n  });\n}\n\n// ----------------------------------------------------------------------------\n\nfunction fetchImage(instance, url) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    if (options.crossOrigin) {\n      img.crossOrigin = options.crossOrigin;\n    }\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n    img.src = url;\n  });\n}\n/* eslint-enable prefer-promise-reject-errors */\n\n// ----------------------------------------------------------------------------\n\nconst LiteHttpDataAccessHelper = {\n  fetchArray,\n  fetchJSON,\n  fetchText,\n  fetchBinary,\n  // Only for HTTP\n  fetchImage\n};\n\n// The lite version should never override a full feature one...\nif (!has('http')) {\n  registerType('http', options => LiteHttpDataAccessHelper);\n}\n\nexport { LiteHttpDataAccessHelper as default };\n","import BinaryHelper from '../Core/BinaryHelper.js';\nimport DataAccessHelper from '../Core/DataAccessHelper.js';\nimport { m as macro } from '../../macros2.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport vtkMatrixBuilder from '../../Common/Core/MatrixBuilder.js';\nimport vtkPolyData from '../../Common/DataModel/PolyData.js';\nimport '../Core/DataAccessHelper/LiteHttpDataAccessHelper.js';\n\n// import 'vtk.js/Sources/IO/Core/DataAccessHelper/HttpDataAccessHelper'; // HTTP + zip\n// import 'vtk.js/Sources/IO/Core/DataAccessHelper/HtmlDataAccessHelper'; // html + base64 + zip\n// import 'vtk.js/Sources/IO/Core/DataAccessHelper/JSZipDataAccessHelper'; // zip\n\nconst {\n  vtkErrorMacro\n} = macro;\nfunction parseHeader(headerString) {\n  const headerSubStr = headerString.split(' ');\n  const fieldValues = headerSubStr.filter(e => e.indexOf('=') > -1);\n  const header = {};\n  for (let i = 0; i < fieldValues.length; ++i) {\n    const fieldValueStr = fieldValues[i];\n    const fieldValueSubStr = fieldValueStr.split('=');\n    if (fieldValueSubStr.length === 2) {\n      header[fieldValueSubStr[0]] = fieldValueSubStr[1];\n    }\n  }\n  return header;\n}\nfunction addValuesToArray(src, dst) {\n  for (let i = 0; i < src.length; i++) {\n    dst.push(src[i]);\n  }\n}\n\n// facet normal ni nj nk\n//     outer loop\n//         vertex v1x v1y v1z\n//         vertex v2x v2y v2z\n//         vertex v3x v3y v3z\n//     endloop\n// endfacet\nfunction readTriangle(lines, offset, points, cellArray, cellNormals) {\n  const normalLine = lines[offset];\n  if (normalLine === undefined) {\n    return -1;\n  }\n  if (normalLine.indexOf('endfacet') !== -1) {\n    return offset + 1;\n  }\n  if (normalLine.indexOf('facet') === -1) {\n    return offset + 1; // Move to next line\n  }\n\n  let nbVertex = 0;\n  let nbConsumedLines = 2;\n  const firstVertexIndex = points.length / 3;\n  const normal = normalLine.split(/[ \\t]+/).filter(i => i).slice(-3).map(Number);\n  addValuesToArray(normal, cellNormals);\n  while (lines[offset + nbConsumedLines].indexOf('vertex') !== -1) {\n    const line = lines[offset + nbConsumedLines];\n    const coords = line.split(/[ \\t]+/).filter(i => i).slice(-3).map(Number);\n    addValuesToArray(coords, points);\n    nbVertex++;\n    nbConsumedLines++;\n  }\n  cellArray.push(nbVertex);\n  for (let i = 0; i < nbVertex; i++) {\n    cellArray.push(firstVertexIndex + i);\n  }\n  while (lines[offset + nbConsumedLines] && lines[offset + nbConsumedLines].indexOf('endfacet') !== -1) {\n    nbConsumedLines++;\n  }\n  // +1 (endfacet) +1 (next facet)\n  return offset + nbConsumedLines + 2;\n}\n\n// ----------------------------------------------------------------------------\n// vtkSTLReader methods\n// ----------------------------------------------------------------------------\n\nfunction vtkSTLReader(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkSTLReader');\n\n  // Create default dataAccessHelper if not available\n  if (!model.dataAccessHelper) {\n    model.dataAccessHelper = DataAccessHelper.get('http');\n  }\n\n  // Internal method to fetch Array\n  function fetchData(url) {\n    let option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const compression = option.compression !== undefined ? option.compression : model.compression;\n    const progressCallback = option.progressCallback !== undefined ? option.progressCallback : model.progressCallback;\n    if (option.binary) {\n      return model.dataAccessHelper.fetchBinary(url, {\n        compression,\n        progressCallback\n      });\n    }\n    return model.dataAccessHelper.fetchText(publicAPI, url, {\n      compression,\n      progressCallback\n    });\n  }\n  function removeDuplicateVertices(tolerance) {\n    const polydata = model.output[0];\n    const points = polydata.getPoints().getData();\n    const faces = polydata.getPolys().getData();\n    if (!points || !faces) {\n      console.warn('No valid polydata.');\n      return;\n    }\n    const vMap = new Map();\n    const vIndexMap = new Map();\n    let vInc = 0;\n    let pointsChanged = false;\n    for (let i = 0; i < points.length; i += 3) {\n      const k1 = (points[i] * 10 ** tolerance).toFixed(0);\n      const k2 = (points[i + 1] * 10 ** tolerance).toFixed(0);\n      const k3 = (points[i + 2] * 10 ** tolerance).toFixed(0);\n      const key = `${k1},${k2},${k3}`;\n      if (vMap.get(key) !== undefined) {\n        vIndexMap.set(i / 3, vMap.get(key));\n        pointsChanged = true;\n      } else {\n        vIndexMap.set(i / 3, vInc);\n        vMap.set(key, vInc);\n        vInc++;\n      }\n    }\n    if (pointsChanged) {\n      const outVerts = new Float32Array(vMap.size * 3);\n      const keys = Array.from(vMap.keys());\n      for (let i = 0; i < keys.length; i++) {\n        const k = keys[i];\n        const j = vMap.get(k) * 3;\n        const coords = k.split(',').map(e => +e * 10 ** -tolerance);\n        outVerts[j] = coords[0];\n        outVerts[j + 1] = coords[1];\n        outVerts[j + 2] = coords[2];\n      }\n      const outFaces = new Int32Array(faces.length);\n      for (let i = 0; i < faces.length; i += 4) {\n        outFaces[i] = 3;\n        outFaces[i + 1] = vIndexMap.get(faces[i + 1]);\n        outFaces[i + 2] = vIndexMap.get(faces[i + 2]);\n        outFaces[i + 3] = vIndexMap.get(faces[i + 3]);\n      }\n      polydata.getPoints().setData(outVerts);\n      polydata.getPolys().setData(outFaces);\n      polydata.modified();\n    }\n  }\n\n  // Set DataSet url\n  publicAPI.setUrl = function (url) {\n    let option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      binary: true\n    };\n    model.url = url;\n\n    // Remove the file in the URL\n    const path = url.split('/');\n    path.pop();\n    model.baseURL = path.join('/');\n\n    // Fetch metadata\n    return publicAPI.loadData(option);\n  };\n\n  // Fetch the actual data arrays\n  publicAPI.loadData = function () {\n    let option = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const promise = fetchData(model.url, option);\n    promise.then(publicAPI.parse);\n    return promise;\n  };\n  publicAPI.parse = content => {\n    if (typeof content === 'string') {\n      publicAPI.parseAsText(content);\n    } else {\n      publicAPI.parseAsArrayBuffer(content);\n    }\n  };\n  publicAPI.parseAsArrayBuffer = content => {\n    if (!content) {\n      return;\n    }\n    if (content !== model.parseData) {\n      publicAPI.modified();\n    } else {\n      return;\n    }\n    model.parseData = content;\n\n    // ascii/binary detection\n    let isBinary = false;\n    // 80=STL header, 4=uint32 of num of triangles (le)\n    const dview = new DataView(content, 0, 80 + 4);\n    const numTriangles = dview.getUint32(80, true);\n    // 50 bytes per triangle\n    isBinary = 84 + numTriangles * 50 === content.byteLength;\n\n    // Check if ascii format\n    if (!isBinary) {\n      publicAPI.parseAsText(BinaryHelper.arrayBufferToString(content));\n      return;\n    }\n\n    // Binary parsing\n    // Header\n    const headerData = content.slice(0, 80);\n    const headerStr = BinaryHelper.arrayBufferToString(headerData);\n    const header = parseHeader(headerStr);\n\n    // Data\n    const dataView = new DataView(content, 84);\n    // global.dataview = dataView;\n    const nbFaces = (content.byteLength - 84) / 50;\n    const pointValues = new Float32Array(nbFaces * 9);\n    const normalValues = new Float32Array(nbFaces * 3);\n    const cellValues = new Uint32Array(nbFaces * 4);\n    const cellDataValues = new Uint16Array(nbFaces);\n    let cellOffset = 0;\n    for (let faceIdx = 0; faceIdx < nbFaces; faceIdx++) {\n      const offset = faceIdx * 50;\n      normalValues[faceIdx * 3 + 0] = dataView.getFloat32(offset + 0, true);\n      normalValues[faceIdx * 3 + 1] = dataView.getFloat32(offset + 4, true);\n      normalValues[faceIdx * 3 + 2] = dataView.getFloat32(offset + 8, true);\n      pointValues[faceIdx * 9 + 0] = dataView.getFloat32(offset + 12, true);\n      pointValues[faceIdx * 9 + 1] = dataView.getFloat32(offset + 16, true);\n      pointValues[faceIdx * 9 + 2] = dataView.getFloat32(offset + 20, true);\n      pointValues[faceIdx * 9 + 3] = dataView.getFloat32(offset + 24, true);\n      pointValues[faceIdx * 9 + 4] = dataView.getFloat32(offset + 28, true);\n      pointValues[faceIdx * 9 + 5] = dataView.getFloat32(offset + 32, true);\n      pointValues[faceIdx * 9 + 6] = dataView.getFloat32(offset + 36, true);\n      pointValues[faceIdx * 9 + 7] = dataView.getFloat32(offset + 40, true);\n      pointValues[faceIdx * 9 + 8] = dataView.getFloat32(offset + 44, true);\n      cellValues[cellOffset++] = 3;\n      cellValues[cellOffset++] = faceIdx * 3 + 0;\n      cellValues[cellOffset++] = faceIdx * 3 + 1;\n      cellValues[cellOffset++] = faceIdx * 3 + 2;\n      cellDataValues[faceIdx] = dataView.getUint16(offset + 48, true);\n    }\n\n    // Rotate points\n    const orientationField = 'SPACE';\n    if (orientationField in header && header[orientationField] !== 'LPS') {\n      const XYZ = header[orientationField];\n      const mat4 = new Float32Array(16);\n      mat4[15] = 1;\n      switch (XYZ[0]) {\n        case 'L':\n          mat4[0] = 1;\n          break;\n        case 'R':\n          mat4[0] = -1;\n          break;\n        default:\n          vtkErrorMacro(`Can not convert STL file from ${XYZ} to LPS space: ` + `permutations not supported. Use itk.js STL reader instead.`);\n          return;\n      }\n      switch (XYZ[1]) {\n        case 'P':\n          mat4[5] = 1;\n          break;\n        case 'A':\n          mat4[5] = -1;\n          break;\n        default:\n          vtkErrorMacro(`Can not convert STL file from ${XYZ} to LPS space: ` + `permutations not supported. Use itk.js STL reader instead.`);\n          return;\n      }\n      switch (XYZ[2]) {\n        case 'S':\n          mat4[10] = 1;\n          break;\n        case 'I':\n          mat4[10] = -1;\n          break;\n        default:\n          vtkErrorMacro(`Can not convert STL file from ${XYZ} to LPS space: ` + `permutations not supported. Use itk.js STL reader instead.`);\n          return;\n      }\n      vtkMatrixBuilder.buildFromDegree().setMatrix(mat4).apply(pointValues).apply(normalValues);\n    }\n    const polydata = vtkPolyData.newInstance();\n    polydata.getPoints().setData(pointValues, 3);\n    polydata.getPolys().setData(cellValues);\n    polydata.getCellData().setScalars(vtkDataArray.newInstance({\n      name: 'Attribute',\n      values: cellDataValues\n    }));\n    polydata.getCellData().setNormals(vtkDataArray.newInstance({\n      name: 'Normals',\n      values: normalValues,\n      numberOfComponents: 3\n    }));\n\n    // Add new output\n    model.output[0] = polydata;\n    if (model.removeDuplicateVertices >= 0) {\n      removeDuplicateVertices(model.removeDuplicateVertices);\n    }\n  };\n  publicAPI.parseAsText = content => {\n    if (!content) {\n      return;\n    }\n    if (content !== model.parseData) {\n      publicAPI.modified();\n    } else {\n      return;\n    }\n    model.parseData = content;\n    const lines = content.split('\\n');\n    let offset = 1;\n    const points = [];\n    const cellArray = [];\n    const cellNormals = [];\n    while (offset !== -1) {\n      offset = readTriangle(lines, offset, points, cellArray, cellNormals);\n    }\n    const polydata = vtkPolyData.newInstance();\n    polydata.getPoints().setData(Float32Array.from(points), 3);\n    polydata.getPolys().setData(Uint32Array.from(cellArray));\n    polydata.getCellData().setNormals(vtkDataArray.newInstance({\n      name: 'Normals',\n      values: Float32Array.from(cellNormals),\n      numberOfComponents: 3\n    }));\n\n    // Add new output\n    model.output[0] = polydata;\n    if (model.removeDuplicateVertices >= 0) {\n      removeDuplicateVertices(model.removeDuplicateVertices);\n    }\n  };\n  publicAPI.requestData = (inData, outData) => {\n    publicAPI.parse(model.parseData);\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // baseURL: null,\n  // dataAccessHelper: null,\n  // url: null,\n  removeDuplicateVertices: -1\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['url', 'baseURL']);\n  macro.setGet(publicAPI, model, ['dataAccessHelper', 'removeDuplicateVertices']);\n  macro.algo(publicAPI, model, 0, 1);\n\n  // vtkSTLReader methods\n  vtkSTLReader(publicAPI, model);\n\n  // To support destructuring\n  if (!model.compression) {\n    model.compression = null;\n  }\n  if (!model.progressCallback) {\n    model.progressCallback = null;\n  }\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkSTLReader');\n\n// ----------------------------------------------------------------------------\n\nvar vtkSTLReader$1 = {\n  extend,\n  newInstance\n};\n\nexport { vtkSTLReader$1 as default, extend, newInstance };\n","/* eslint-disable prefer-rest-params */\nclass ClassHierarchy extends Array {\n  push() {\n    for (let i = 0; i < arguments.length; i++) {\n      if (!this.includes(arguments[i])) {\n        super.push(arguments[i]);\n      }\n    }\n    return this.length;\n  }\n}\n\nexport { ClassHierarchy as default };\n","import DeepEqual from 'fast-deep-equal';\nimport vtk, { vtkGlobal } from './vtk.js';\nimport ClassHierarchy from './Common/Core/ClassHierarchy.js';\n\n/**\n * macros.js is the old macro.js.\n * The name change is so we do not get eaten by babel-plugin-macros.\n */\nlet globalMTime = 0;\nconst requiredParam = name => {\n  throw new Error(`Named parameter '${name}' is missing`);\n};\nconst VOID = Symbol('void');\nfunction getCurrentGlobalMTime() {\n  return globalMTime;\n}\n\n// ----------------------------------------------------------------------------\n// Logging function calls\n// ----------------------------------------------------------------------------\n/* eslint-disable no-prototype-builtins                                      */\n\nconst fakeConsole = {};\nfunction noOp() {}\nconst consoleMethods = ['log', 'debug', 'info', 'warn', 'error', 'time', 'timeEnd', 'group', 'groupEnd'];\nconsoleMethods.forEach(methodName => {\n  fakeConsole[methodName] = noOp;\n});\nvtkGlobal.console = console.hasOwnProperty('log') ? console : fakeConsole;\nconst loggerFunctions = {\n  debug: noOp,\n  // Don't print debug by default\n  error: vtkGlobal.console.error || noOp,\n  info: vtkGlobal.console.info || noOp,\n  log: vtkGlobal.console.log || noOp,\n  warn: vtkGlobal.console.warn || noOp\n};\nfunction setLoggerFunction(name, fn) {\n  if (loggerFunctions[name]) {\n    loggerFunctions[name] = fn || noOp;\n  }\n}\nfunction vtkLogMacro() {\n  loggerFunctions.log(...arguments);\n}\nfunction vtkInfoMacro() {\n  loggerFunctions.info(...arguments);\n}\nfunction vtkDebugMacro() {\n  loggerFunctions.debug(...arguments);\n}\nfunction vtkErrorMacro() {\n  loggerFunctions.error(...arguments);\n}\nfunction vtkWarningMacro() {\n  loggerFunctions.warn(...arguments);\n}\nconst ERROR_ONCE_MAP = {};\nfunction vtkOnceErrorMacro(str) {\n  if (!ERROR_ONCE_MAP[str]) {\n    loggerFunctions.error(str);\n    ERROR_ONCE_MAP[str] = true;\n  }\n}\n\n// ----------------------------------------------------------------------------\n// TypedArray\n// ----------------------------------------------------------------------------\n\nconst TYPED_ARRAYS = Object.create(null);\nTYPED_ARRAYS.Float32Array = Float32Array;\nTYPED_ARRAYS.Float64Array = Float64Array;\nTYPED_ARRAYS.Uint8Array = Uint8Array;\nTYPED_ARRAYS.Int8Array = Int8Array;\nTYPED_ARRAYS.Uint16Array = Uint16Array;\nTYPED_ARRAYS.Int16Array = Int16Array;\nTYPED_ARRAYS.Uint32Array = Uint32Array;\nTYPED_ARRAYS.Int32Array = Int32Array;\nTYPED_ARRAYS.Uint8ClampedArray = Uint8ClampedArray;\ntry {\n  TYPED_ARRAYS.BigInt64Array = BigInt64Array;\n  TYPED_ARRAYS.BigUint64Array = BigUint64Array;\n} catch {\n  // ignore\n}\nfunction newTypedArray(type) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  return new (TYPED_ARRAYS[type] || Float64Array)(...args);\n}\nfunction newTypedArrayFrom(type) {\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n  return (TYPED_ARRAYS[type] || Float64Array).from(...args);\n}\n\n// ----------------------------------------------------------------------------\n// capitilize provided string\n// ----------------------------------------------------------------------------\n\nfunction capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\nfunction _capitalize(str) {\n  return capitalize(str[0] === '_' ? str.slice(1) : str);\n}\nfunction uncapitalize(str) {\n  return str.charAt(0).toLowerCase() + str.slice(1);\n}\n\n// ----------------------------------------------------------------------------\n// Convert byte size into a well formatted string\n// ----------------------------------------------------------------------------\n\nfunction formatBytesToProperUnit(size) {\n  let precision = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n  let chunkSize = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n  const units = ['TB', 'GB', 'MB', 'KB'];\n  let value = Number(size);\n  let currentUnit = 'B';\n  while (value > chunkSize) {\n    value /= chunkSize;\n    currentUnit = units.pop();\n  }\n  return `${value.toFixed(precision)} ${currentUnit}`;\n}\n\n// ----------------------------------------------------------------------------\n// Convert thousand number with proper separator\n// ----------------------------------------------------------------------------\n\nfunction formatNumbersWithThousandSeparator(n) {\n  let separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ' ';\n  const sections = [];\n  let size = n;\n  while (size > 1000) {\n    sections.push(`000${size % 1000}`.slice(-3));\n    size = Math.floor(size / 1000);\n  }\n  if (size > 0) {\n    sections.push(size);\n  }\n  sections.reverse();\n  return sections.join(separator);\n}\n\n// ----------------------------------------------------------------------------\n// Array helper\n// ----------------------------------------------------------------------------\n\nfunction safeArrays(model) {\n  Object.keys(model).forEach(key => {\n    if (Array.isArray(model[key])) {\n      model[key] = [].concat(model[key]);\n    }\n  });\n}\nfunction isTypedArray(value) {\n  return Object.values(TYPED_ARRAYS).some(ctor => value instanceof ctor);\n}\n\n// ----------------------------------------------------------------------------\n// shallow equals\n// ----------------------------------------------------------------------------\n\nfunction shallowEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (Array.isArray(a) && Array.isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n    for (let i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n\n// ----------------------------------------------------------------------------\n\nfunction enumToString(e, value) {\n  return Object.keys(e).find(key => e[key] === value);\n}\nfunction getStateArrayMapFunc(item) {\n  if (item && item.isA) {\n    return item.getState();\n  }\n  return item;\n}\n\n// ----------------------------------------------------------------------------\n// setImmediate\n// ----------------------------------------------------------------------------\n\nfunction setImmediateVTK(fn) {\n  setTimeout(fn, 0);\n}\n\n// ----------------------------------------------------------------------------\n// measurePromiseExecution\n//\n// Measures the time it takes for a promise to finish from\n//   the time this function is invoked.\n// The callback receives the time it took for the promise to resolve or reject.\n// ----------------------------------------------------------------------------\n\nfunction measurePromiseExecution(promise, callback) {\n  const start = performance.now();\n  promise.finally(() => {\n    const delta = performance.now() - start;\n    callback(delta);\n  });\n}\n\n// ----------------------------------------------------------------------------\n// vtkObject: modified(), onModified(callback), delete()\n// ----------------------------------------------------------------------------\n\nfunction obj() {\n  let publicAPI = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let model = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  // Ensure each instance as a unique ref of array\n  safeArrays(model);\n  const callbacks = [];\n  if (!Number.isInteger(model.mtime)) {\n    model.mtime = ++globalMTime;\n  }\n  if (!('classHierarchy' in model)) {\n    model.classHierarchy = new ClassHierarchy('vtkObject');\n  } else if (!(model.classHierarchy instanceof ClassHierarchy)) {\n    const hierarchy = new ClassHierarchy();\n    for (let i = 0; i < model.classHierarchy.length; i++) {\n      hierarchy.push(model.classHierarchy[i]);\n    }\n    model.classHierarchy = hierarchy;\n  }\n  function off(index) {\n    callbacks[index] = null;\n  }\n  function on(index) {\n    function unsubscribe() {\n      off(index);\n    }\n    return Object.freeze({\n      unsubscribe\n    });\n  }\n  publicAPI.isDeleted = () => !!model.deleted;\n  publicAPI.modified = otherMTime => {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    if (otherMTime && otherMTime < publicAPI.getMTime()) {\n      return;\n    }\n    model.mtime = ++globalMTime;\n    callbacks.forEach(callback => callback && callback(publicAPI));\n  };\n  publicAPI.onModified = callback => {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return null;\n    }\n    const index = callbacks.length;\n    callbacks.push(callback);\n    return on(index);\n  };\n  publicAPI.getMTime = () => model.mtime;\n  publicAPI.isA = className => {\n    let count = model.classHierarchy.length;\n    // we go backwards as that is more likely for\n    // early termination\n    while (count--) {\n      if (model.classHierarchy[count] === className) {\n        return true;\n      }\n    }\n    return false;\n  };\n  publicAPI.getClassName = function () {\n    let depth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    return model.classHierarchy[model.classHierarchy.length - 1 - depth];\n  };\n  publicAPI.set = function () {\n    let map = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let noWarning = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let noFunction = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    let ret = false;\n    Object.keys(map).forEach(name => {\n      const fn = noFunction ? null : publicAPI[`set${capitalize(name)}`];\n      if (fn && Array.isArray(map[name]) && fn.length > 1) {\n        ret = fn(...map[name]) || ret;\n      } else if (fn) {\n        ret = fn(map[name]) || ret;\n      } else {\n        // Set data on model directly\n        if (['mtime'].indexOf(name) === -1 && !noWarning) {\n          vtkWarningMacro(`Warning: Set value to model directly ${name}, ${map[name]}`);\n        }\n        ret = model[name] !== map[name] || ret;\n        model[name] = map[name];\n      }\n    });\n    return ret;\n  };\n  publicAPI.get = function () {\n    for (var _len3 = arguments.length, list = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      list[_key3] = arguments[_key3];\n    }\n    if (!list.length) {\n      return model;\n    }\n    const subset = {};\n    list.forEach(name => {\n      subset[name] = model[name];\n    });\n    return subset;\n  };\n  publicAPI.getReferenceByName = val => model[val];\n  publicAPI.delete = () => {\n    Object.keys(model).forEach(field => delete model[field]);\n    callbacks.forEach((el, index) => off(index));\n\n    // Flag the instance being deleted\n    model.deleted = true;\n  };\n\n  // Add serialization support\n  publicAPI.getState = () => {\n    if (model.deleted) {\n      return null;\n    }\n    const jsonArchive = {\n      ...model,\n      vtkClass: publicAPI.getClassName()\n    };\n\n    // Convert every vtkObject to its serializable form\n    Object.keys(jsonArchive).forEach(keyName => {\n      if (jsonArchive[keyName] === null || jsonArchive[keyName] === undefined || keyName[0] === '_' // protected members start with _\n      ) {\n        delete jsonArchive[keyName];\n      } else if (jsonArchive[keyName].isA) {\n        jsonArchive[keyName] = jsonArchive[keyName].getState();\n      } else if (Array.isArray(jsonArchive[keyName])) {\n        jsonArchive[keyName] = jsonArchive[keyName].map(getStateArrayMapFunc);\n      } else if (isTypedArray(jsonArchive[keyName])) {\n        jsonArchive[keyName] = Array.from(jsonArchive[keyName]);\n      }\n    });\n\n    // Sort resulting object by key name\n    const sortedObj = {};\n    Object.keys(jsonArchive).sort().forEach(name => {\n      sortedObj[name] = jsonArchive[name];\n    });\n\n    // Remove mtime\n    if (sortedObj.mtime) {\n      delete sortedObj.mtime;\n    }\n    return sortedObj;\n  };\n\n  // Add shallowCopy(otherInstance) support\n  publicAPI.shallowCopy = function (other) {\n    let debug = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (other.getClassName() !== publicAPI.getClassName()) {\n      throw new Error(`Cannot ShallowCopy ${other.getClassName()} into ${publicAPI.getClassName()}`);\n    }\n    const otherModel = other.get();\n    const keyList = Object.keys(model).sort();\n    const otherKeyList = Object.keys(otherModel).sort();\n    otherKeyList.forEach(key => {\n      const keyIdx = keyList.indexOf(key);\n      if (keyIdx === -1) {\n        if (debug) {\n          vtkDebugMacro(`add ${key} in shallowCopy`);\n        }\n      } else {\n        keyList.splice(keyIdx, 1);\n      }\n      model[key] = otherModel[key];\n    });\n    if (keyList.length && debug) {\n      vtkDebugMacro(`Untouched keys: ${keyList.join(', ')}`);\n    }\n    publicAPI.modified();\n  };\n\n  // This function will get called when one invoke JSON.stringify(vtkObject)\n  // JSON.stringify will only stringify the return value of this function\n  publicAPI.toJSON = function vtkObjToJSON() {\n    return publicAPI.getState();\n  };\n\n  // Allow usage as decorator\n  return publicAPI;\n}\n\n// ----------------------------------------------------------------------------\n// getXXX: add getters\n// ----------------------------------------------------------------------------\n\nconst objectGetterMap = {\n  object(publicAPI, model, field) {\n    return function getter() {\n      return {\n        ...model[field.name]\n      };\n    };\n  }\n};\nfunction get(publicAPI, model, fieldNames) {\n  fieldNames.forEach(field => {\n    if (typeof field === 'object') {\n      const getter = objectGetterMap[field.type];\n      if (getter) {\n        publicAPI[`get${_capitalize(field.name)}`] = getter(publicAPI, model, field);\n      } else {\n        publicAPI[`get${_capitalize(field.name)}`] = () => model[field.name];\n      }\n    } else {\n      publicAPI[`get${_capitalize(field)}`] = () => model[field];\n    }\n  });\n}\n\n// ----------------------------------------------------------------------------\n// setXXX: add setters\n// ----------------------------------------------------------------------------\n\nconst objectSetterMap = {\n  enum(publicAPI, model, field) {\n    const onChanged = `_on${_capitalize(field.name)}Changed`;\n    return value => {\n      if (typeof value === 'string') {\n        if (field.enum[value] !== undefined) {\n          if (model[field.name] !== field.enum[value]) {\n            model[field.name] = field.enum[value];\n            publicAPI.modified();\n            return true;\n          }\n          return false;\n        }\n        vtkErrorMacro(`Set Enum with invalid argument ${field}, ${value}`);\n        throw new RangeError('Set Enum with invalid string argument');\n      }\n      if (typeof value === 'number') {\n        if (model[field.name] !== value) {\n          if (Object.keys(field.enum).map(key => field.enum[key]).indexOf(value) !== -1) {\n            const previousValue = model[field.name];\n            model[field.name] = value;\n            model[onChanged]?.(publicAPI, model, value, previousValue);\n            publicAPI.modified();\n            return true;\n          }\n          vtkErrorMacro(`Set Enum outside numeric range ${field}, ${value}`);\n          throw new RangeError('Set Enum outside numeric range');\n        }\n        return false;\n      }\n      vtkErrorMacro(`Set Enum with invalid argument (String/Number) ${field}, ${value}`);\n      throw new TypeError('Set Enum with invalid argument (String/Number)');\n    };\n  },\n  object(publicAPI, model, field) {\n    if (field.params?.length === 1) {\n      vtkWarningMacro('Setter of type \"object\" with a single \"param\" field is not supported');\n    }\n    const onChanged = `_on${_capitalize(field.name)}Changed`;\n    return function () {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      let value;\n      if (args.length > 1 && field.params?.length) {\n        value = field.params.reduce((acc, prop, idx) => Object.assign(acc, {\n          [prop]: args[idx]\n        }), {});\n      } else {\n        value = args[0];\n      }\n      if (!DeepEqual(model[field.name], value)) {\n        const previousValue = model[field.name];\n        model[field.name] = value;\n        model[onChanged]?.(publicAPI, model, value, previousValue);\n        publicAPI.modified();\n        return true;\n      }\n      return false;\n    };\n  }\n};\nfunction findSetter(field) {\n  if (typeof field === 'object') {\n    const fn = objectSetterMap[field.type];\n    if (fn) {\n      return (publicAPI, model) => fn(publicAPI, model, field);\n    }\n    vtkErrorMacro(`No setter for field ${field}`);\n    throw new TypeError('No setter for field');\n  }\n  return function getSetter(publicAPI, model) {\n    const onChanged = `_on${_capitalize(field)}Changed`;\n    return function setter(value) {\n      if (model.deleted) {\n        vtkErrorMacro('instance deleted - cannot call any method');\n        return false;\n      }\n      if (model[field] !== value) {\n        const previousValue = model[field.name];\n        model[field] = value;\n        model[onChanged]?.(publicAPI, model, value, previousValue);\n        publicAPI.modified();\n        return true;\n      }\n      return false;\n    };\n  };\n}\nfunction set(publicAPI, model, fields) {\n  fields.forEach(field => {\n    if (typeof field === 'object') {\n      publicAPI[`set${_capitalize(field.name)}`] = findSetter(field)(publicAPI, model);\n    } else {\n      publicAPI[`set${_capitalize(field)}`] = findSetter(field)(publicAPI, model);\n    }\n  });\n}\n\n// ----------------------------------------------------------------------------\n// set/get XXX: add both setters and getters\n// ----------------------------------------------------------------------------\n\nfunction setGet(publicAPI, model, fieldNames) {\n  get(publicAPI, model, fieldNames);\n  set(publicAPI, model, fieldNames);\n}\n\n// ----------------------------------------------------------------------------\n// getXXX: add getters for object of type array with copy to be safe\n// getXXXByReference: add getters for object of type array without copy\n// ----------------------------------------------------------------------------\n\nfunction getArray(publicAPI, model, fieldNames) {\n  fieldNames.forEach(field => {\n    publicAPI[`get${_capitalize(field)}`] = () => model[field] ? Array.from(model[field]) : model[field];\n    publicAPI[`get${_capitalize(field)}ByReference`] = () => model[field];\n  });\n}\n\n// ----------------------------------------------------------------------------\n// setXXX: add setter for object of type array\n// if 'defaultVal' is supplied, shorter arrays will be padded to 'size' with 'defaultVal'\n// set...From: fast path to copy the content of an array to the current one without call to modified.\n// ----------------------------------------------------------------------------\n\nfunction setArray(publicAPI, model, fieldNames, size) {\n  let defaultVal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : undefined;\n  fieldNames.forEach(field => {\n    if (model[field] && size && model[field].length !== size) {\n      throw new RangeError(`Invalid initial number of values for array (${field})`);\n    }\n    const onChanged = `_on${_capitalize(field)}Changed`;\n    publicAPI[`set${_capitalize(field)}`] = function () {\n      if (model.deleted) {\n        vtkErrorMacro('instance deleted - cannot call any method');\n        return false;\n      }\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n      let array = args;\n      let changeDetected;\n      let needCopy = false;\n      // allow null or an array to be passed as a single arg.\n      if (array.length === 1 && (array[0] == null || array[0].length >= 0)) {\n        /* eslint-disable prefer-destructuring */\n        array = array[0];\n        /* eslint-enable prefer-destructuring */\n        needCopy = true;\n      }\n      if (array == null) {\n        changeDetected = model[field] !== array;\n      } else {\n        if (size && array.length !== size) {\n          if (array.length < size && defaultVal !== undefined) {\n            array = Array.from(array);\n            needCopy = false;\n            while (array.length < size) array.push(defaultVal);\n          } else {\n            throw new RangeError(`Invalid number of values for array setter (${field})`);\n          }\n        }\n        changeDetected = model[field] == null || model[field].length !== array.length;\n        for (let i = 0; !changeDetected && i < array.length; ++i) {\n          changeDetected = model[field][i] !== array[i];\n        }\n        if (changeDetected && needCopy) {\n          array = Array.from(array);\n        }\n      }\n      if (changeDetected) {\n        const previousValue = model[field.name];\n        model[field] = array;\n        model[onChanged]?.(publicAPI, model, array, previousValue);\n        publicAPI.modified();\n      }\n      return changeDetected;\n    };\n    publicAPI[`set${_capitalize(field)}From`] = otherArray => {\n      const target = model[field];\n      otherArray.forEach((v, i) => {\n        target[i] = v;\n      });\n    };\n  });\n}\n\n// ----------------------------------------------------------------------------\n// set/get XXX: add setter and getter for object of type array\n// ----------------------------------------------------------------------------\n\nfunction setGetArray(publicAPI, model, fieldNames, size) {\n  let defaultVal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : undefined;\n  getArray(publicAPI, model, fieldNames);\n  setArray(publicAPI, model, fieldNames, size, defaultVal);\n}\nfunction moveToProtected(publicAPI, model, fieldNames) {\n  for (let i = 0; i < fieldNames.length; i++) {\n    const fieldName = fieldNames[i];\n    if (model[fieldName] !== undefined) {\n      model[`_${fieldName}`] = model[fieldName];\n      delete model[fieldName];\n    }\n  }\n}\n// ----------------------------------------------------------------------------\n// vtkAlgorithm: setInputData(), setInputConnection(), getOutputData(), getOutputPort()\n// ----------------------------------------------------------------------------\n\nfunction algo(publicAPI, model, numberOfInputs, numberOfOutputs) {\n  if (model.inputData) {\n    model.inputData = model.inputData.map(vtk);\n  } else {\n    model.inputData = [];\n  }\n  if (model.inputConnection) {\n    model.inputConnection = model.inputConnection.map(vtk);\n  } else {\n    model.inputConnection = [];\n  }\n  if (model.output) {\n    model.output = model.output.map(vtk);\n  } else {\n    model.output = [];\n  }\n  if (model.inputArrayToProcess) {\n    model.inputArrayToProcess = model.inputArrayToProcess.map(vtk);\n  } else {\n    model.inputArrayToProcess = [];\n  }\n\n  // Cache the argument for later manipulation\n  model.numberOfInputs = numberOfInputs;\n\n  // Methods\n  function setInputData(dataset) {\n    let port = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    if (port >= model.numberOfInputs) {\n      vtkErrorMacro(`algorithm ${publicAPI.getClassName()} only has ${model.numberOfInputs} input ports. To add more input ports, use addInputData()`);\n      return;\n    }\n    if (model.inputData[port] !== dataset || model.inputConnection[port]) {\n      model.inputData[port] = dataset;\n      model.inputConnection[port] = null;\n      if (publicAPI.modified) {\n        publicAPI.modified();\n      }\n    }\n  }\n  function getInputData() {\n    let port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (model.inputConnection[port]) {\n      model.inputData[port] = model.inputConnection[port]();\n    }\n    return model.inputData[port];\n  }\n  function setInputConnection(outputPort) {\n    let port = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    if (port >= model.numberOfInputs) {\n      let msg = `algorithm ${publicAPI.getClassName()} only has `;\n      msg += `${model.numberOfInputs}`;\n      msg += ' input ports. To add more input ports, use addInputConnection()';\n      vtkErrorMacro(msg);\n      return;\n    }\n    model.inputData[port] = null;\n    model.inputConnection[port] = outputPort;\n  }\n  function getInputConnection() {\n    let port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    return model.inputConnection[port];\n  }\n  function getPortToFill() {\n    let portToFill = model.numberOfInputs;\n    while (portToFill && !model.inputData[portToFill - 1] && !model.inputConnection[portToFill - 1]) {\n      portToFill--;\n    }\n    if (portToFill === model.numberOfInputs) {\n      model.numberOfInputs++;\n    }\n    return portToFill;\n  }\n  function addInputConnection(outputPort) {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    setInputConnection(outputPort, getPortToFill());\n  }\n  function addInputData(dataset) {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    setInputData(dataset, getPortToFill());\n  }\n  function getOutputData() {\n    let port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return null;\n    }\n    if (publicAPI.shouldUpdate()) {\n      publicAPI.update();\n    }\n    return model.output[port];\n  }\n  publicAPI.shouldUpdate = () => {\n    const localMTime = publicAPI.getMTime();\n    let minOutputMTime = Infinity;\n    let count = numberOfOutputs;\n    while (count--) {\n      if (!model.output[count] || model.output[count].isDeleted()) {\n        return true;\n      }\n      const mt = model.output[count].getMTime();\n      if (mt < localMTime) {\n        return true;\n      }\n      if (mt < minOutputMTime) {\n        minOutputMTime = mt;\n      }\n    }\n    count = model.numberOfInputs;\n    while (count--) {\n      if (model.inputConnection[count]?.filter.shouldUpdate() || publicAPI.getInputData(count)?.getMTime() > minOutputMTime) {\n        return true;\n      }\n    }\n    return false;\n  };\n  function getOutputPort() {\n    let port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    const outputPortAccess = () => getOutputData(port);\n    // Add reference to filter\n    outputPortAccess.filter = publicAPI;\n    return outputPortAccess;\n  }\n\n  // Handle input if needed\n  if (model.numberOfInputs) {\n    // Reserve inputs\n    let count = model.numberOfInputs;\n    while (count--) {\n      model.inputData.push(null);\n      model.inputConnection.push(null);\n    }\n\n    // Expose public methods\n    publicAPI.setInputData = setInputData;\n    publicAPI.setInputConnection = setInputConnection;\n    publicAPI.addInputData = addInputData;\n    publicAPI.addInputConnection = addInputConnection;\n    publicAPI.getInputData = getInputData;\n    publicAPI.getInputConnection = getInputConnection;\n  }\n  if (numberOfOutputs) {\n    publicAPI.getOutputData = getOutputData;\n    publicAPI.getOutputPort = getOutputPort;\n  }\n  publicAPI.update = () => {\n    const ins = [];\n    if (model.numberOfInputs) {\n      let count = 0;\n      while (count < model.numberOfInputs) {\n        ins[count] = publicAPI.getInputData(count);\n        count++;\n      }\n    }\n    if (publicAPI.requestData && !publicAPI.isDeleted() && publicAPI.shouldUpdate()) {\n      publicAPI.requestData(ins, model.output);\n    }\n  };\n  publicAPI.getNumberOfInputPorts = () => model.numberOfInputs;\n  publicAPI.getNumberOfOutputPorts = () => numberOfOutputs || model.output.length;\n  publicAPI.getInputArrayToProcess = inputPort => {\n    const arrayDesc = model.inputArrayToProcess[inputPort];\n    const ds = model.inputData[inputPort];\n    if (arrayDesc && ds) {\n      return ds[`get${arrayDesc.fieldAssociation}`]().getArray(arrayDesc.arrayName);\n    }\n    return null;\n  };\n  publicAPI.setInputArrayToProcess = function (inputPort, arrayName, fieldAssociation) {\n    let attributeType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'Scalars';\n    while (model.inputArrayToProcess.length < inputPort) {\n      model.inputArrayToProcess.push(null);\n    }\n    model.inputArrayToProcess[inputPort] = {\n      arrayName,\n      fieldAssociation,\n      attributeType\n    };\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Event handling: onXXX(callback), invokeXXX(args...)\n// ----------------------------------------------------------------------------\n\nconst EVENT_ABORT = Symbol('Event abort');\nfunction event(publicAPI, model, eventName) {\n  const callbacks = [];\n  const previousDelete = publicAPI.delete;\n  let curCallbackID = 1;\n  function off(callbackID) {\n    for (let i = 0; i < callbacks.length; ++i) {\n      const [cbID] = callbacks[i];\n      if (cbID === callbackID) {\n        callbacks.splice(i, 1);\n        return;\n      }\n    }\n  }\n  function on(callbackID) {\n    function unsubscribe() {\n      off(callbackID);\n    }\n    return Object.freeze({\n      unsubscribe\n    });\n  }\n  function invoke() {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    /* eslint-disable prefer-rest-params */\n    // Go through a copy of the callbacks array in case new callbacks\n    // get prepended within previous callbacks\n    const currentCallbacks = callbacks.slice();\n    for (let index = 0; index < currentCallbacks.length; ++index) {\n      const [, cb, priority] = currentCallbacks[index];\n      if (!cb) {\n        continue; // eslint-disable-line\n      }\n\n      if (priority < 0) {\n        setTimeout(() => cb.apply(publicAPI, arguments), 1 - priority);\n      } else {\n        // Abort only if the callback explicitly returns false\n        const continueNext = cb.apply(publicAPI, arguments);\n        if (continueNext === EVENT_ABORT) {\n          break;\n        }\n      }\n    }\n    /* eslint-enable prefer-rest-params */\n  }\n\n  publicAPI[`invoke${_capitalize(eventName)}`] = invoke;\n  publicAPI[`on${_capitalize(eventName)}`] = function (callback) {\n    let priority = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.0;\n    if (!callback.apply) {\n      console.error(`Invalid callback for event ${eventName}`);\n      return null;\n    }\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return null;\n    }\n    const callbackID = curCallbackID++;\n    callbacks.push([callbackID, callback, priority]);\n    callbacks.sort((cb1, cb2) => cb2[2] - cb1[2]);\n    return on(callbackID);\n  };\n  publicAPI.delete = () => {\n    previousDelete();\n    callbacks.forEach(_ref => {\n      let [cbID] = _ref;\n      return off(cbID);\n    });\n  };\n}\n\n// ----------------------------------------------------------------------------\n// newInstance\n// ----------------------------------------------------------------------------\n\nfunction newInstance(extend, className) {\n  const constructor = function () {\n    let initialValues = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const model = {};\n    const publicAPI = {};\n    extend(publicAPI, model, initialValues);\n    return Object.freeze(publicAPI);\n  };\n\n  // Register constructor to factory\n  if (className) {\n    vtk.register(className, constructor);\n  }\n  return constructor;\n}\n\n// ----------------------------------------------------------------------------\n// Chain function calls\n// ----------------------------------------------------------------------------\n\nfunction chain() {\n  for (var _len6 = arguments.length, fn = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    fn[_key6] = arguments[_key6];\n  }\n  return function () {\n    for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n      args[_key7] = arguments[_key7];\n    }\n    return fn.filter(i => !!i).map(i => i(...args));\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Some utility methods for vtk objects\n// ----------------------------------------------------------------------------\n\nfunction isVtkObject(instance) {\n  return instance && instance.isA && instance.isA('vtkObject');\n}\nfunction traverseInstanceTree(instance, extractFunction) {\n  let accumulator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  let visitedInstances = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  if (isVtkObject(instance)) {\n    if (visitedInstances.indexOf(instance) >= 0) {\n      // avoid cycles\n      return accumulator;\n    }\n    visitedInstances.push(instance);\n    const result = extractFunction(instance);\n    if (result !== undefined) {\n      accumulator.push(result);\n    }\n\n    // Now go through this instance's model\n    const model = instance.get();\n    Object.keys(model).forEach(key => {\n      const modelObj = model[key];\n      if (Array.isArray(modelObj)) {\n        modelObj.forEach(subObj => {\n          traverseInstanceTree(subObj, extractFunction, accumulator, visitedInstances);\n        });\n      } else {\n        traverseInstanceTree(modelObj, extractFunction, accumulator, visitedInstances);\n      }\n    });\n  }\n  return accumulator;\n}\n\n// ----------------------------------------------------------------------------\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n\nfunction debounce(func, wait, immediate) {\n  var _this = this;\n  let timeout;\n  const debounced = function () {\n    for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n      args[_key8] = arguments[_key8];\n    }\n    const context = _this;\n    const later = () => {\n      timeout = null;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n  debounced.cancel = () => clearTimeout(timeout);\n  return debounced;\n}\n\n// ----------------------------------------------------------------------------\n// Creates a throttled function that only invokes `func` at most once per\n// every `wait` milliseconds.\n\nfunction throttle(callback, delay) {\n  let isThrottled = false;\n  let argsToUse = null;\n  function next() {\n    isThrottled = false;\n    if (argsToUse !== null) {\n      wrapper(...argsToUse); // eslint-disable-line\n      argsToUse = null;\n    }\n  }\n  function wrapper() {\n    for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {\n      args[_key9] = arguments[_key9];\n    }\n    if (isThrottled) {\n      argsToUse = args;\n      return;\n    }\n    isThrottled = true;\n    callback(...args);\n    setTimeout(next, delay);\n  }\n  return wrapper;\n}\n\n// ----------------------------------------------------------------------------\n// keystore(publicAPI, model, initialKeystore)\n//\n//    - initialKeystore: Initial keystore. This can be either a Map or an\n//      object.\n//\n// Generated API\n//  setKey(key, value) : mixed (returns value)\n//  getKey(key) : mixed\n//  getAllKeys() : [mixed]\n//  deleteKey(key) : Boolean\n// ----------------------------------------------------------------------------\n\nfunction keystore(publicAPI, model) {\n  let initialKeystore = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  model.keystore = Object.assign(model.keystore || {}, initialKeystore);\n  publicAPI.setKey = (key, value) => {\n    model.keystore[key] = value;\n  };\n  publicAPI.getKey = key => model.keystore[key];\n  publicAPI.getAllKeys = () => Object.keys(model.keystore);\n  publicAPI.deleteKey = key => delete model.keystore[key];\n  publicAPI.clearKeystore = () => publicAPI.getAllKeys().forEach(key => delete model.keystore[key]);\n}\n\n// ----------------------------------------------------------------------------\n// proxy(publicAPI, model, sectionName, propertyUI)\n//\n//    - sectionName: Name of the section for UI\n//    - propertyUI: List of props with their UI description\n//\n// Generated API\n//  getProxyId() : String\n//  listProxyProperties() : [string]\n//  updateProxyProperty(name, prop)\n//  getProxySection() => List of properties for UI generation\n// ----------------------------------------------------------------------------\nlet nextProxyId = 1;\nconst ROOT_GROUP_NAME = '__root__';\nfunction proxy(publicAPI, model) {\n  // Proxies are keystores\n  keystore(publicAPI, model);\n  const parentDelete = publicAPI.delete;\n\n  // getProxyId\n  model.proxyId = `${nextProxyId++}`;\n\n  // ui handling\n  model.ui = JSON.parse(JSON.stringify(model.ui || [])); // deep copy\n  get(publicAPI, model, ['proxyId', 'proxyGroup', 'proxyName']);\n  setGet(publicAPI, model, ['proxyManager']);\n\n  // group properties\n  const propertyMap = {};\n  const groupChildrenNames = {};\n  function registerProperties(descriptionList, currentGroupName) {\n    if (!groupChildrenNames[currentGroupName]) {\n      groupChildrenNames[currentGroupName] = [];\n    }\n    const childrenNames = groupChildrenNames[currentGroupName];\n    for (let i = 0; i < descriptionList.length; i++) {\n      childrenNames.push(descriptionList[i].name);\n      propertyMap[descriptionList[i].name] = descriptionList[i];\n      if (descriptionList[i].children && descriptionList[i].children.length) {\n        registerProperties(descriptionList[i].children, descriptionList[i].name);\n      }\n    }\n  }\n  registerProperties(model.ui, ROOT_GROUP_NAME);\n  publicAPI.updateUI = ui => {\n    model.ui = JSON.parse(JSON.stringify(ui || [])); // deep copy\n    Object.keys(propertyMap).forEach(k => delete propertyMap[k]);\n    Object.keys(groupChildrenNames).forEach(k => delete groupChildrenNames[k]);\n    registerProperties(model.ui, ROOT_GROUP_NAME);\n    publicAPI.modified();\n  };\n  function listProxyProperties() {\n    let gName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ROOT_GROUP_NAME;\n    return groupChildrenNames[gName];\n  }\n  publicAPI.updateProxyProperty = (propertyName, propUI) => {\n    const prop = propertyMap[propertyName];\n    if (prop) {\n      Object.assign(prop, propUI);\n    } else {\n      propertyMap[propertyName] = {\n        ...propUI\n      };\n    }\n  };\n  publicAPI.activate = () => {\n    if (model.proxyManager) {\n      const setActiveMethod = `setActive${_capitalize(publicAPI.getProxyGroup().slice(0, -1))}`;\n      if (model.proxyManager[setActiveMethod]) {\n        model.proxyManager[setActiveMethod](publicAPI);\n      }\n    }\n  };\n\n  // property link\n  model.propertyLinkSubscribers = {};\n  publicAPI.registerPropertyLinkForGC = (otherLink, type) => {\n    if (!(type in model.propertyLinkSubscribers)) {\n      model.propertyLinkSubscribers[type] = [];\n    }\n    model.propertyLinkSubscribers[type].push(otherLink);\n  };\n  publicAPI.gcPropertyLinks = type => {\n    const subscribers = model.propertyLinkSubscribers[type] || [];\n    while (subscribers.length) {\n      subscribers.pop().unbind(publicAPI);\n    }\n  };\n  model.propertyLinkMap = {};\n  publicAPI.getPropertyLink = function (id) {\n    let persistent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (model.propertyLinkMap[id]) {\n      return model.propertyLinkMap[id];\n    }\n    let value = null;\n    const links = [];\n    let count = 0;\n    let updateInProgress = false;\n    function update(source) {\n      let force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (updateInProgress) {\n        return null;\n      }\n      const needUpdate = [];\n      let sourceLink = null;\n      count = links.length;\n      while (count--) {\n        const link = links[count];\n        if (link.instance === source) {\n          sourceLink = link;\n        } else {\n          needUpdate.push(link);\n        }\n      }\n      if (!sourceLink) {\n        return null;\n      }\n      const newValue = sourceLink.instance[`get${_capitalize(sourceLink.propertyName)}`]();\n      if (!shallowEquals(newValue, value) || force) {\n        value = newValue;\n        updateInProgress = true;\n        while (needUpdate.length) {\n          const linkToUpdate = needUpdate.pop();\n          linkToUpdate.instance.set({\n            [linkToUpdate.propertyName]: value\n          });\n        }\n        updateInProgress = false;\n      }\n      if (model.propertyLinkMap[id].persistent) {\n        model.propertyLinkMap[id].value = newValue;\n      }\n      return newValue;\n    }\n    function unbind(instance, propertyName) {\n      const indexToDelete = [];\n      count = links.length;\n      while (count--) {\n        const link = links[count];\n        if (link.instance === instance && (link.propertyName === propertyName || propertyName === undefined)) {\n          link.subscription.unsubscribe();\n          indexToDelete.push(count);\n        }\n      }\n      while (indexToDelete.length) {\n        links.splice(indexToDelete.pop(), 1);\n      }\n    }\n    function bind(instance, propertyName) {\n      let updateMe = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      const subscription = instance.onModified(update);\n      const other = links[0];\n      links.push({\n        instance,\n        propertyName,\n        subscription\n      });\n      if (updateMe) {\n        if (model.propertyLinkMap[id].persistent && model.propertyLinkMap[id].value !== undefined) {\n          instance.set({\n            [propertyName]: model.propertyLinkMap[id].value\n          });\n        } else if (other) {\n          update(other.instance, true);\n        }\n      }\n      return {\n        unsubscribe: () => unbind(instance, propertyName)\n      };\n    }\n    function unsubscribe() {\n      while (links.length) {\n        links.pop().subscription.unsubscribe();\n      }\n    }\n    const linkHandler = {\n      bind,\n      unbind,\n      unsubscribe,\n      persistent\n    };\n    model.propertyLinkMap[id] = linkHandler;\n    return linkHandler;\n  };\n\n  // extract values\n  function getProperties() {\n    let groupName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ROOT_GROUP_NAME;\n    const values = [];\n    const id = model.proxyId;\n    const propertyNames = listProxyProperties(groupName) || [];\n    for (let i = 0; i < propertyNames.length; i++) {\n      const name = propertyNames[i];\n      const method = publicAPI[`get${_capitalize(name)}`];\n      const value = method ? method() : undefined;\n      const prop = {\n        id,\n        name,\n        value\n      };\n      const children = getProperties(name);\n      if (children.length) {\n        prop.children = children;\n      }\n      values.push(prop);\n    }\n    return values;\n  }\n  publicAPI.listPropertyNames = () => getProperties().map(p => p.name);\n  publicAPI.getPropertyByName = name => getProperties().find(p => p.name === name);\n  publicAPI.getPropertyDomainByName = name => (propertyMap[name] || {}).domain;\n\n  // ui section\n  publicAPI.getProxySection = () => ({\n    id: model.proxyId,\n    name: model.proxyGroup,\n    ui: model.ui,\n    properties: getProperties()\n  });\n\n  // free resources\n  publicAPI.delete = () => {\n    const list = Object.keys(model.propertyLinkMap);\n    let count = list.length;\n    while (count--) {\n      model.propertyLinkMap[list[count]].unsubscribe();\n    }\n    Object.keys(model.propertyLinkSubscribers).forEach(publicAPI.gcPropertyLinks);\n    parentDelete();\n  };\n\n  // @todo fix infinite recursion due to active source\n  publicAPI.getState = () => null;\n  function registerLinks() {\n    // Allow dynamic registration of links at the application level\n    if (model.links) {\n      for (let i = 0; i < model.links.length; i++) {\n        const {\n          link,\n          property,\n          persistent,\n          updateOnBind,\n          type\n        } = model.links[i];\n        if (type === 'application') {\n          const sLink = model.proxyManager.getPropertyLink(link, persistent);\n          publicAPI.registerPropertyLinkForGC(sLink, 'application');\n          sLink.bind(publicAPI, property, updateOnBind);\n        }\n      }\n    }\n  }\n  setImmediateVTK(registerLinks);\n}\n\n// ----------------------------------------------------------------------------\n// proxyPropertyMapping(publicAPI, model, map)\n//\n//   map = {\n//      opacity: { modelKey: 'property', property: 'opacity' },\n//   }\n//\n// Generated API:\n//  Elevate set/get methods from internal object stored in the model to current one\n// ----------------------------------------------------------------------------\n\nfunction proxyPropertyMapping(publicAPI, model, map) {\n  const parentDelete = publicAPI.delete;\n  const subscriptions = [];\n  const propertyNames = Object.keys(map);\n  let count = propertyNames.length;\n  while (count--) {\n    const propertyName = propertyNames[count];\n    const {\n      modelKey,\n      property,\n      modified = true\n    } = map[propertyName];\n    const methodSrc = _capitalize(property);\n    const methodDst = _capitalize(propertyName);\n    publicAPI[`get${methodDst}`] = model[modelKey][`get${methodSrc}`];\n    publicAPI[`set${methodDst}`] = model[modelKey][`set${methodSrc}`];\n    if (modified) {\n      subscriptions.push(model[modelKey].onModified(publicAPI.modified));\n    }\n  }\n  publicAPI.delete = () => {\n    while (subscriptions.length) {\n      subscriptions.pop().unsubscribe();\n    }\n    parentDelete();\n  };\n}\n\n// ----------------------------------------------------------------------------\n// proxyPropertyState(publicAPI, model, state, defaults)\n//\n//   state = {\n//     representation: {\n//       'Surface with edges': { property: { edgeVisibility: true, representation: 2 } },\n//       Surface: { property: { edgeVisibility: false, representation: 2 } },\n//       Wireframe: { property: { edgeVisibility: false, representation: 1 } },\n//       Points: { property: { edgeVisibility: false, representation: 0 } },\n//     },\n//   }\n//\n//   defaults = {\n//      representation: 'Surface',\n//   }\n//\n// Generated API\n//   get / set Representation ( string ) => push state to various internal objects\n// ----------------------------------------------------------------------------\n\nfunction proxyPropertyState(publicAPI, model) {\n  let state = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  let defaults = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  model.this = publicAPI;\n  function applyState(map) {\n    const modelKeys = Object.keys(map);\n    let count = modelKeys.length;\n    while (count--) {\n      const modelKey = modelKeys[count];\n      model[modelKey].set(map[modelKey]);\n    }\n  }\n  const modelKeys = Object.keys(defaults);\n  let count = modelKeys.length;\n  while (count--) {\n    // Add default\n    const key = modelKeys[count];\n    model[key] = defaults[key];\n\n    // Add set method\n    const mapping = state[key];\n    publicAPI[`set${_capitalize(key)}`] = value => {\n      if (value !== model[key]) {\n        model[key] = value;\n        const propValues = mapping[value];\n        applyState(propValues);\n        publicAPI.modified();\n      }\n    };\n  }\n\n  // Add getter\n  if (modelKeys.length) {\n    get(publicAPI, model, modelKeys);\n  }\n}\n\n// ----------------------------------------------------------------------------\n// From : https://github.com/facebookarchive/fixed-data-table/blob/master/src/vendor_upstream/dom/normalizeWheel.js\n//\n//\n// Copyright (c) 2015, Facebook, Inc.\n// All rights reserved.\n//\n// This source code is licensed under the BSD-style license found in the\n// LICENSE file in the root directory of this source tree. An additional grant\n// of patent rights can be found in the PATENTS file in the same directory.\n//\n//\n// Mouse wheel (and 2-finger trackpad) support on the web sucks.  It is\n// complicated, thus this doc is long and (hopefully) detailed enough to answer\n// your questions.\n//\n// If you need to react to the mouse wheel in a predictable way, this code is\n// like your bestest friend.// hugs//\n//\n// As of today, there are 4 DOM event types you can listen to:\n//\n//   'wheel'                -- Chrome(31+), FF(17+), IE(9+)\n//   'mousewheel'           -- Chrome, IE(6+), Opera, Safari\n//   'MozMousePixelScroll'  -- FF(3.5 only!) (2010-2013) -- don't bother!\n//   'DOMMouseScroll'       -- FF(0.9.7+) since 2003\n//\n// So what to do?  The is the best:\n//\n//   normalizeWheel.getEventType();\n//\n// In your event callback, use this code to get sane interpretation of the\n// deltas.  This code will return an object with properties:\n//\n//   spinX   -- normalized spin speed (use for zoom) - x plane\n//   spinY   -- \" - y plane\n//   pixelX  -- normalized distance (to pixels) - x plane\n//   pixelY  -- \" - y plane\n//\n// Wheel values are provided by the browser assuming you are using the wheel to\n// scroll a web page by a number of lines or pixels (or pages).  Values can vary\n// significantly on different platforms and browsers, forgetting that you can\n// scroll at different speeds.  Some devices (like trackpads) emit more events\n// at smaller increments with fine granularity, and some emit massive jumps with\n// linear speed or acceleration.\n//\n// This code does its best to normalize the deltas for you:\n//\n//   - spin is trying to normalize how far the wheel was spun (or trackpad\n//     dragged).  This is super useful for zoom support where you want to\n//     throw away the chunky scroll steps on the PC and make those equal to\n//     the slow and smooth tiny steps on the Mac. Key data: This code tries to\n//     resolve a single slow step on a wheel to 1.\n//\n//   - pixel is normalizing the desired scroll delta in pixel units.  You'll\n//     get the crazy differences between browsers, but at least it'll be in\n//     pixels!\n//\n//   - positive value indicates scrolling DOWN/RIGHT, negative UP/LEFT.  This\n//     should translate to positive value zooming IN, negative zooming OUT.\n//     This matches the newer 'wheel' event.\n//\n// Why are there spinX, spinY (or pixels)?\n//\n//   - spinX is a 2-finger side drag on the trackpad, and a shift + wheel turn\n//     with a mouse.  It results in side-scrolling in the browser by default.\n//\n//   - spinY is what you expect -- it's the classic axis of a mouse wheel.\n//\n//   - I dropped spinZ/pixelZ.  It is supported by the DOM 3 'wheel' event and\n//     probably is by browsers in conjunction with fancy 3D controllers .. but\n//     you know.\n//\n// Implementation info:\n//\n// Examples of 'wheel' event if you scroll slowly (down) by one step with an\n// average mouse:\n//\n//   OS X + Chrome  (mouse)     -    4   pixel delta  (wheelDelta -120)\n//   OS X + Safari  (mouse)     -  N/A   pixel delta  (wheelDelta  -12)\n//   OS X + Firefox (mouse)     -    0.1 line  delta  (wheelDelta  N/A)\n//   Win8 + Chrome  (mouse)     -  100   pixel delta  (wheelDelta -120)\n//   Win8 + Firefox (mouse)     -    3   line  delta  (wheelDelta -120)\n//\n// On the trackpad:\n//\n//   OS X + Chrome  (trackpad)  -    2   pixel delta  (wheelDelta   -6)\n//   OS X + Firefox (trackpad)  -    1   pixel delta  (wheelDelta  N/A)\n//\n// On other/older browsers.. it's more complicated as there can be multiple and\n// also missing delta values.\n//\n// The 'wheel' event is more standard:\n//\n// http://www.w3.org/TR/DOM-Level-3-Events/#events-wheelevents\n//\n// The basics is that it includes a unit, deltaMode (pixels, lines, pages), and\n// deltaX, deltaY and deltaZ.  Some browsers provide other values to maintain\n// backward compatibility with older events.  Those other values help us\n// better normalize spin speed.  Example of what the browsers provide:\n//\n//                          | event.wheelDelta | event.detail\n//        ------------------+------------------+--------------\n//          Safari v5/OS X  |       -120       |       0\n//          Safari v5/Win7  |       -120       |       0\n//         Chrome v17/OS X  |       -120       |       0\n//         Chrome v17/Win7  |       -120       |       0\n//                IE9/Win7  |       -120       |   undefined\n//         Firefox v4/OS X  |     undefined    |       1\n//         Firefox v4/Win7  |     undefined    |       3\n//\n// ----------------------------------------------------------------------------\n\n// Reasonable defaults\nconst PIXEL_STEP = 10;\nconst LINE_HEIGHT = 40;\nconst PAGE_HEIGHT = 800;\nfunction normalizeWheel(wheelEvent) {\n  let sX = 0; // spinX\n  let sY = 0; // spinY\n  let pX = 0; // pixelX\n  let pY = 0; // pixelY\n\n  // Legacy\n  if ('detail' in wheelEvent) {\n    sY = wheelEvent.detail;\n  }\n  if ('wheelDelta' in wheelEvent) {\n    sY = -wheelEvent.wheelDelta / 120;\n  }\n  if ('wheelDeltaY' in wheelEvent) {\n    sY = -wheelEvent.wheelDeltaY / 120;\n  }\n  if ('wheelDeltaX' in wheelEvent) {\n    sX = -wheelEvent.wheelDeltaX / 120;\n  }\n\n  // side scrolling on FF with DOMMouseScroll\n  if ('axis' in wheelEvent && wheelEvent.axis === wheelEvent.HORIZONTAL_AXIS) {\n    sX = sY;\n    sY = 0;\n  }\n  pX = sX * PIXEL_STEP;\n  pY = sY * PIXEL_STEP;\n  if ('deltaY' in wheelEvent) {\n    pY = wheelEvent.deltaY;\n  }\n  if ('deltaX' in wheelEvent) {\n    pX = wheelEvent.deltaX;\n  }\n  if ((pX || pY) && wheelEvent.deltaMode) {\n    if (wheelEvent.deltaMode === 1) {\n      // delta in LINE units\n      pX *= LINE_HEIGHT;\n      pY *= LINE_HEIGHT;\n    } else {\n      // delta in PAGE units\n      pX *= PAGE_HEIGHT;\n      pY *= PAGE_HEIGHT;\n    }\n  }\n\n  // Fall-back if spin cannot be determined\n  if (pX && !sX) {\n    sX = pX < 1 ? -1 : 1;\n  }\n  if (pY && !sY) {\n    sY = pY < 1 ? -1 : 1;\n  }\n  return {\n    spinX: sX,\n    spinY: sY || sX,\n    pixelX: pX,\n    pixelY: pY || pX\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Default export\n// ----------------------------------------------------------------------------\n\nvar macro = {\n  algo,\n  capitalize,\n  chain,\n  debounce,\n  enumToString,\n  event,\n  EVENT_ABORT,\n  formatBytesToProperUnit,\n  formatNumbersWithThousandSeparator,\n  get,\n  getArray,\n  getCurrentGlobalMTime,\n  getStateArrayMapFunc,\n  isVtkObject,\n  keystore,\n  measurePromiseExecution,\n  moveToProtected,\n  newInstance,\n  newTypedArray,\n  newTypedArrayFrom,\n  normalizeWheel,\n  obj,\n  proxy,\n  proxyPropertyMapping,\n  proxyPropertyState,\n  safeArrays,\n  set,\n  setArray,\n  setGet,\n  setGetArray,\n  setImmediate: setImmediateVTK,\n  setLoggerFunction,\n  throttle,\n  traverseInstanceTree,\n  TYPED_ARRAYS,\n  // deprecated todo remove on breaking API revision\n  uncapitalize,\n  VOID,\n  vtkDebugMacro,\n  vtkErrorMacro,\n  vtkInfoMacro,\n  vtkLogMacro,\n  vtkOnceErrorMacro,\n  vtkWarningMacro,\n  // vtk.js internal use\n  objectSetterMap,\n  requiredParam\n};\n\nvar macro$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  requiredParam: requiredParam,\n  VOID: VOID,\n  setLoggerFunction: setLoggerFunction,\n  vtkLogMacro: vtkLogMacro,\n  vtkInfoMacro: vtkInfoMacro,\n  vtkDebugMacro: vtkDebugMacro,\n  vtkErrorMacro: vtkErrorMacro,\n  vtkWarningMacro: vtkWarningMacro,\n  vtkOnceErrorMacro: vtkOnceErrorMacro,\n  TYPED_ARRAYS: TYPED_ARRAYS,\n  newTypedArray: newTypedArray,\n  newTypedArrayFrom: newTypedArrayFrom,\n  capitalize: capitalize,\n  _capitalize: _capitalize,\n  uncapitalize: uncapitalize,\n  formatBytesToProperUnit: formatBytesToProperUnit,\n  formatNumbersWithThousandSeparator: formatNumbersWithThousandSeparator,\n  setImmediateVTK: setImmediateVTK,\n  measurePromiseExecution: measurePromiseExecution,\n  obj: obj,\n  get: get,\n  set: set,\n  setGet: setGet,\n  getArray: getArray,\n  setArray: setArray,\n  setGetArray: setGetArray,\n  moveToProtected: moveToProtected,\n  algo: algo,\n  EVENT_ABORT: EVENT_ABORT,\n  event: event,\n  newInstance: newInstance,\n  chain: chain,\n  isVtkObject: isVtkObject,\n  traverseInstanceTree: traverseInstanceTree,\n  debounce: debounce,\n  throttle: throttle,\n  keystore: keystore,\n  proxy: proxy,\n  proxyPropertyMapping: proxyPropertyMapping,\n  proxyPropertyState: proxyPropertyState,\n  normalizeWheel: normalizeWheel,\n  'default': macro\n});\n\nexport { vtkOnceErrorMacro as A, uncapitalize as B, formatBytesToProperUnit as C, formatNumbersWithThousandSeparator as D, setImmediateVTK as E, measurePromiseExecution as F, setArray as G, EVENT_ABORT as H, isVtkObject as I, debounce as J, throttle as K, keystore as L, proxyPropertyState as M, normalizeWheel as N, TYPED_ARRAYS as T, VOID as V, _capitalize as _, newTypedArray as a, newTypedArrayFrom as b, macro$1 as c, algo as d, setGet as e, event as f, get as g, chain as h, moveToProtected as i, proxyPropertyMapping as j, getArray as k, setGetArray as l, macro as m, newInstance as n, obj as o, proxy as p, capitalize as q, vtkErrorMacro as r, set as s, traverseInstanceTree as t, requiredParam as u, vtkWarningMacro as v, setLoggerFunction as w, vtkLogMacro as x, vtkInfoMacro as y, vtkDebugMacro as z };\n","import globalThisShim from 'globalthis';\n\nconst vtkGlobal = globalThisShim(); // returns native globalThis if compliant\n\nconst factoryMapping = {\n  vtkObject: () => null\n};\nfunction vtk(obj) {\n  if (obj === null || obj === undefined) {\n    return obj;\n  }\n  if (obj.isA) {\n    return obj;\n  }\n  if (!obj.vtkClass) {\n    if (vtkGlobal.console && vtkGlobal.console.error) {\n      vtkGlobal.console.error('Invalid VTK object');\n    }\n    return null;\n  }\n  const constructor = factoryMapping[obj.vtkClass];\n  if (!constructor) {\n    if (vtkGlobal.console && vtkGlobal.console.error) {\n      vtkGlobal.console.error(`No vtk class found for Object of type ${obj.vtkClass}`);\n    }\n    return null;\n  }\n\n  // Shallow copy object\n  const model = {\n    ...obj\n  };\n\n  // Convert into vtkObject any nested key\n  Object.keys(model).forEach(keyName => {\n    if (model[keyName] && typeof model[keyName] === 'object' && model[keyName].vtkClass) {\n      model[keyName] = vtk(model[keyName]);\n    }\n  });\n\n  // Return the root\n  const newInst = constructor(model);\n  if (newInst && newInst.modified) {\n    newInst.modified();\n  }\n  return newInst;\n}\nfunction register(vtkClassName, constructor) {\n  factoryMapping[vtkClassName] = constructor;\n}\n\n// Nest register method under the vtk function\nvtk.register = register;\n\nexport { vtk as default, vtkGlobal };\n"],"names":["FullDateInterface","constructor","date","this","fullDate","getTimeInSec","dateString","substring","timeString","yyyy","parseInt","mm","length","undefined","dd","isNaN","Error","dateJS","Date","HH","MM","SS","fractionalStr","FFFFFF","Math","pow","timeInSec","getTime","getTimeInMicroSec","combineDateTime","time","hours","padStart","minutes","seconds","month","day","fractionalSeconds","padEnd","year","parseDA","d","m","y","daysInMonth","parseTM","hh","ss","ffffff","dateTimeToFullDateInterface","dateTime","calculateDecayCorrection","instances","RadionuclideTotalDose","RadionuclideHalfLife","RadiopharmaceuticalStartDateTime","RadiopharmaceuticalStartTime","SeriesDate","scanTimes","SeriesTime","GEPrivatePostInjectionDateTime","results","Array","seriesDateTime","earliestAcquisitionDateTime","timeError","forEach","instance","AcquisitionDate","AcquisitionTime","acquisitionDateTime","fill","calculateScanTimes","startTime","input","calculateStartTime","map","_","index","decayTimeInSec","deepEquals","a","b","isArray","every","val","calculateSUVScalingFactors","CorrectedImage","Units","PhilipsPETPrivateGroup","PatientWeight","PatientSex","PatientSize","includes","DecayCorrection","decayCorrectionArray","weightInGrams","value","hasValidSUVScaleFactor","SUVScaleFactor","hasValidActivityConcentrationScaleFactor","ActivityConcentrationScaleFactor","JSON","stringify","suvbsaFactor","suvlbmFactor","suvlbmJenmaFactor","console","warn","inputs","calculateSUVbsaScalingFactor","suvlbmInputs","LBM","weightSizeFactor","calculateSUVlbmScalingFactor","bodyMassIndex","calculateSUVlbmJanmahasatianScalingFactor","result","factors","suvbw","suvbsa","suvlbm","suvlbmJanma","vtkErrorMacro","DEFAULT_VALUES","extend","publicAPI","model","initialValues","arguments","Object","assign","obj","algo","setGetArray","classHierarchy","push","reset","data","getInputData","setCroppingPlanes","getExtent","requestData","inData","outData","scalars","getPointData","getScalars","extent","cropped","croppingPlanes","e","i","max","round","min","slice","sameAsInput","shallowCopy","numberOfComponents","getNumberOfComponents","componentSize","scalarsData","getData","dims","getDimensions","jStride","kStride","beginOffset","stripSize","croppedArray","k","j","begin","end","subarray","set","outImage","origin","getOrigin","direction","getDirection","spacing","getSpacing","croppedScalars","name","getName","values","setScalars","isResetAvailable","find","v","abs","Number","EPSILON","vtkImageCropFilter","vtkImageCropFilter$1","newInstance","MARCHING_CUBE_CASES","EDGES","vtkCaseTable","getCase","getEdge","eid","addValuesToArray","src","dst","readTriangle","lines","offset","points","cellArray","cellNormals","normalLine","indexOf","nbVertex","nbConsumedLines","firstVertexIndex","split","filter","vtkSTLReader","dataAccessHelper","setUrl","url","option","binary","path","pop","baseURL","join","loadData","promise","compression","progressCallback","fetchBinary","fetchText","fetchData","then","parse","content","parseAsText","parseAsArrayBuffer","parseData","modified","isBinary","DataView","getUint32","byteLength","arrayBufferToString","headerData","header","headerString","fieldValues","fieldValueSubStr","parseHeader","dataView","nbFaces","pointValues","Float32Array","normalValues","cellValues","Uint32Array","cellDataValues","Uint16Array","cellOffset","faceIdx","getFloat32","getUint16","orientationField","XYZ","mat4","buildFromDegree","setMatrix","apply","polydata","getPoints","setData","getPolys","getCellData","setNormals","output","from","get","setGet","vtkSTLReader$1","writeFloatBinary","float","setFloat32","toPrecision","writeVectorBinary","vector","off","writeSTL","polyData","format","BINARY","transform","writer","init","polys","buffer","ArrayBuffer","writeHeader","setUint32","getNumberOfCells","writeTriangle","v1","v2","v3","dn","writeFooter","getOutputData","binaryWriter","ASCII","file","asciiWriter","strips","getStrips","n","computeNormal","STATIC","getClassName","vtkSTLWriter","vtkSTLWriter$1","FormatTypes","ImageBorderMode","CLAMP","REPEAT","MIRROR","InterpolationMode","NEAREST","LINEAR","CUBIC","vtkInterpolationInfo","pointer","increments","scalarType","dataTypeSize","borderMode","interpolationMode","extraInfo","vtkInterpolationWeights","positions","weights","weightExtent","kernelSize","workspace","lastY","lastZ","vtkInterpolationMathFloor","x","integer","floor","floored","error","vtkInterpolationMathRound","vtkInterpolationMathClamp","c","clamp","vtkInterpolationMathWrap","range","wrap","vtkInterpolationMathMirror","range2","mirror","outValue","tolerance","componentOffset","componentCount","slidingWindow","interpolationInfo","interpolationFunc","rowInterpolationFunc","structuredBounds","initialize","releaseData","update","supportSize","computeSupportSize","minBound","MIN_SAFE_INTEGER","maxBound","MAX_SAFE_INTEGER","newTol","xdim","ydim","ncomp","component","inPtr","dataType","computeNumberOfComponents","internalUpdate","interpolateXYZ","z","point","p","checkBoundsIJK","iinfo","interpolatePoint","interpolate","inputCount","count","interpolateIJK","isSeparable","precomputeWeightsForExtent","matrix","inExtent","checkExtent","FreePrecomputedWeights","interpolateRow","xIdx","yIdx","zIdx","vtkAbstractImageInterpolator","vtkAbstractImageInterpolator$1","s","size","integerRow","isInteger","interpolateNearest","inExt","inInc","numscalars","inIdX0","inIdY0","inIdZ0","startId","interpolateLinear","floorX","floorY","floorZ","fx","fy","fz","inIdX1","inIdY1","inIdZ1","factX0","factX1","factY0","factY1","factZ0","factZ1","i00","i01","i10","i11","rx","ry","rz","ryrz","fyrz","ryfz","fyfz","log","interpolateRowNearest","idX","idY","idZ","outPtr","iX","iY","iZ","inPtr0","interpolateRowLinear","stepX","stepY","stepZ","idXtemp","idYtemp","idZtemp","fX","fY","fZ","t0","t1","vtkTricubicInterpWeights","f","fm1","fd2","ft3","outExt","clipExt","weightType","interpMode","validClip","minExt","maxExt","minBounds","maxBounds","step","inCount","Int16Array","startPositions","constants","region","lcount","inId0","res","inId","l","g","ll","gg","jj","vtkImageInterpolator","vtkImageInterpolator$1","spanState","spanEnd","rowEnd","sliceEnd","rowIncrement","rowEndIncrement","sliceIncrement","sliceEndIncrement","id","startY","hasStencil","inStencil","spanIndex","spanSliceIncrement","spanSliceEndIncrement","spanCountPointer","spanListPointer","algorithm","target","image","stencil","dataExtent","rowSpan","sliceSpan","volumeSpan","emptyExtent","stencilExtent","botOffset","topOffset","startOffset","yOffset","zOffset","extentListLengths","extentLists","setSpanState","maxCount","spans","endIdX","rowStart","nextSpan","spanIncr","reportProgress","spanCount","tmpIdX","isAtEnd","isInStencil","spanEndId","getArray","array","vtkImagePointDataIterator","vtkImagePointDataIterator$1","SlabMode","MIN","MAX","MEAN","SUM","transformInputSampling","autoCropOutput","outputDimensionality","outputSpacing","outputOrigin","outputDirection","outputExtent","outputScalarType","border","slabMode","slabTrapezoidIntegration","slabNumberOfSlices","slabSliceSpacingFraction","optimization","scalarShift","scalarScale","backgroundColor","resliceAxes","interpolator","usePermuteExecute","superClass","indexMatrix","Float64Array","optimizedTransform","getImageResliceSlabTrap","tmpPtr","inComponents","sampleCount","getImageResliceSlabSum","getImageResliceCompositeMinValue","getImageResliceCompositeMaxValue","getImageResliceCompositeMeanValue","getImageResliceCompositeMeanTrap","getImageResliceCompositeSumValue","getImageResliceCompositeSumTrap","getMTime","mTime","resliceTransform","setResliceAxes","inSpacing","inScalars","inWholeExt","outOrigin","outSpacing","outWholeExt","outDims","imatrix","inCenter","getAutoCroppedOutputBounds","r","tmp","sqrt","getDataType","numComponents","outScalarsData","newTypedArray","outScalars","setDimensions","setOrigin","setSpacing","setDirection","getIndexMatrix","isPermutationMatrix","canUseNearestNeighbor","setInterpolationMode","setBorderMode","mintol","tol","setTolerance","vtkImageResliceExecute","newmat","nsamples","slabSampleSpacing","perspective","isPerspectiveMatrix","inputScalarType","getComponentOffset","getBorderMode","inDims","fullSize","isA","getInterpolationMode","rescaleScalars","optimizeNearest","getNumberOfTuples","outComponents","xAxis","yAxis","zAxis","floatPtr","background","forceClamping","convertpixels","getConversionFunc","setpixels","getSetPixelsFunc","composite","getCompositeFunc","inPoint0","inPoint1","iter","outPtr0","outPtrIndex","outTmp","interpolatedPtr","interpolatedPoint","span","getId","outIndex","getIndex","idXmin","idXmax","inPtrTmp0","outPtrTmp","inIncX","inIncY","inIncZ","inExtX","inExtY","inExtZ","startIdX","isInBounds","bytesPerPixel","iidX","inPoint","inIdX","inIdY","inIdZ","oc","wasInBounds","pixelIndex","inPoint2","inPoint3","interpolatedPtrIndex","sample","inOrigin","inInvSpacing","applyTransform","numpixels","getMatrix","outMatrix","getIndexToWorld","inMatrix","getWorldToIndex","inDirection","getInverse","imageTransform","isIdentity3x3","buildFromRadian","translate","multiply3x3","invert","bounds","MAX_VALUE","transformPoint","getDataTypeMinMax","convert","inputType","useClamping","FLOAT","DOUBLE","inMinMax","checkMin","checkMax","outMinMax","outputMin","outputMax","minMax","set1","dataSize","dataPtr","newTrans","floatData","components","isIdentityMatrix","vtkImageReslice","vtkImageReslice$1","now","performance","cancelTimeout","timeoutID","cancelAnimationFrame","requestTimeout","callback","delay","start","requestAnimationFrame","tick","call","getScrollbarSize","recalculate","div","document","createElement","style","width","height","overflow","body","appendChild","offsetWidth","clientWidth","removeChild","cachedRTLResult","getRTLOffsetType","outerDiv","outerStyle","innerDiv","innerStyle","scrollLeft","defaultItemKey","createListComponent","getItemOffset","getEstimatedTotalSize","getItemSize","getOffsetForIndexAndAlignment","getStartIndexForOffset","getStopIndexForStartIndex","initInstanceProps","shouldResetStyleCacheOnItemSizeChange","validateProps","props","_instanceProps","_outerRef","_resetIsScrollingTimeoutId","state","isScrolling","scrollDirection","scrollOffset","initialScrollOffset","scrollUpdateWasRequested","_callOnItemsRendered","memoizeOne","overscanStartIndex","overscanStopIndex","visibleStartIndex","visibleStopIndex","onItemsRendered","_callOnScroll","onScroll","_getItemStyle","itemSize","layout","itemStyleCache","_getItemStyleCache","hasOwnProperty","isHorizontal","isRtl","offsetHorizontal","position","left","right","top","__","___","_onScrollHorizontal","event","currentTarget","scrollWidth","setState","prevState","_resetIsScrollingDebounced","_onScrollVertical","clientHeight","scrollHeight","scrollTop","_outerRefSetter","ref","outerRef","current","_resetIsScrolling","getDerivedStateFromProps","nextProps","validateSharedProps","scrollTo","scrollToItem","align","itemCount","scrollbarSize","componentDidMount","_callPropsCallbacks","componentDidUpdate","componentWillUnmount","render","children","className","innerRef","innerElementType","innerTagName","itemData","itemKey","outerElementType","outerTagName","useIsScrolling","_getRangeToRender","startIndex","stopIndex","items","key","estimatedTotalSize","WebkitOverflowScrolling","willChange","pointerEvents","overscanCount","overscanBackward","overscanForward","PureComponent","defaultProps","getItemMetadata","instanceProps","itemMetadataMap","lastMeasuredIndex","itemMetadata","findNearestItemBinarySearch","high","low","middle","currentOffset","findNearestItemExponentialSearch","interval","estimatedItemSize","totalSizeOfMeasuredItems","VariableSizeList","maxOffset","minOffset","findNearestItem","resetAfterIndex","shouldForceUpdate","forceUpdate","DefaultDataType","fastComputeRange","arr","len","computeRange","numberOfValues","nextJ","ensureRangeSize","rangeArray","ranges","typedArray","prototype","toString","createRangeHelper","sum","add","mean","getRange","getMaxNorm","normArray","numComps","maxNorm","tuple","getTuple","norm$1","rangeTuple","empty","TypeError","o","RangeError","resize","requestedNumTuples","numAllocatedTuples","oldValues","dataChange","allocate","extraNumTuples","newSize","getElementComponentSize","BYTES_PER_ELEMENT","getComponent","tupleIdx","compIdx","setComponent","getValue","valueIdx","idx","comp","setValue","componentIndex","rangeIdx","setRange","rangeValue","getRanges","structuredClone","setTuple","setTuples","tuples","last","insertTuple","insertTuples","insertNextTuple","insertNextTuples","findTuple","precision","match","tupleToFill","getTuples","fromId","toId","to","getTupleLocation","getNumberOfValues","newClone","getState","deleted","jsonArchive","vtkClass","keys","keyName","sortedObj","sort","mtime","deepCopy","other","currentType","currentArray","interpolateTuple","source1","source1Idx","source2","source2Idx","t","tuple1","tuple2","out","vtkDataArray","vtkDataArray$1","DataTypeByteSize","Int8Array","Uint8Array","Uint8ClampedArray","Int32Array","VtkDataTypes","VOID","CHAR","SIGNED_CHAR","UNSIGNED_CHAR","UNSIGNED_CHAR_CLAMPED","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","Constants","IDENTITY","IDENTITY_3X3","VTK_SMALL_NUMBER","vtkWarningMacro","randomSeedValue","notImplemented","method","swapRowsMatrix_nxn","row1","row2","swapColumnsMatrix_nxn","column1","column2","createArray","Pi","PI","ldexp","exponent","radiansFromDegrees","deg","degreesFromRadians","rad","ceil","arrayMin","stride","minValue","Infinity","arrayMax","maxValue","arrayRange","ceilLog2","factorial","nearestPowerOfTwo","xi","isPowerOfTwo","binomial","beginCombination","nextCombination","status","randomSeed","seed","global","getSeed","random","gaussian","subtract","multiplyScalar","vec","scalar","multiplyScalar2D","multiplyAccumulate","multiplyAccumulate2D","dot","outer","out_3x3","cross","Zx","Zy","Zz","norm","normalize","den","perpendiculars","theta","x2","y2","z2","dx","dy","dz","sintheta","sin","costheta","cos","projectVector","projection","bSquared","scale","dot2D","projectVector2D","distance2BetweenPoints","angleBetweenVectors","crossVect","atan2","gaussianAmplitude","variance","distanceFromMean","exp","gaussianWeight","outer2D","out_2x2","norm2D","x2D","normalize2D","determinant2x2","_len","args","_key","NaN","LUFactor3x3","mat_3x3","index_3","maxI","largest","LUSolve3x3","x_3","linearSolve3x3","y_3","a1","b1","c1","a2","b2","c2","a3","b3","c3","d1","d2","d3","e1","e2","e3","f1","f2","f3","det","multiply3x3_vect3","in_3","out_3","multiply3x3_mat3","a_3x3","b_3x3","copyA","copyB","multiplyMatrix","rowA","colA","rowB","colB","outRowAColB","transpose3x3","in_3x3","outT_3x3","invert3x3","outI_3x3","determinant3x3","areEquals","eps","element","areMatricesEqual","identity3x3","identity","mat","isIdentity","quaternionToMatrix3x3","quat_4","ww","wx","wy","wz","xx","yy","zz","xy","xz","yz","rr","roundNumber","num","digits","sig","roundVector","jacobiN","w","iq","ip","numPos","tresh","tau","sm","h","vtkROTATE","aa","ii","ceil_half_n","matrix3x3ToQuaternion","eigenvectors","multiplyQuaternion","quat_1","quat_2","quat_out","xw","yw","yx","zw","zx","zy","orthogonalize3x3","x1","x3","y3","flip","quat","diagonalize3x3","w_3","v_3x3","maxVal","vectTmp1","vectTmp2","eigenValTmp","singularValueDecomposition3x3","u_3x3","vT_3x3","B","luFactorLinearSystem","A","temp1","temp2","luSolveLinearSystem","solveLinearSystem","invertMatrix","AI","column","tmp1Size","tmp2Size","estimateMatrixCondition","jacobi","solveHomogeneousLeastSquares","numberOfSamples","xt","xOrder","mt","XXt","eigenvals","eigenvecs","solveLeastSquares","yt","yOrder","checkHomogeneous","homogenFlags","hmt","allHomogeneous","homogRC","someHomogeneous","XXtI","XYt","successFlag","hex2float","hexStr","outFloatArray","substr","rgb2hsv","rgb","hsv","onesixth","cmax","cmin","hsv2rgb","onethird","twothird","fivesixth","lab2xyz","lab","xyz","L","var_Y","var_X","var_Z","xyz2lab","xyz2rgb","rgb2xyz","rgb2lab","lab2rgb","uninitializeBounds","areBoundsInitialized","computeBoundsFromPoints","point1","point2","clampValue","clampVector","minVector","maxVector","clampAndNormalizeValue","getScalarTypeFittingRange","getAdjustedScalarRange","extentIsWithinOtherExtent","extent1","extent2","boundsIsWithinOtherBounds","bounds1_6","bounds2_6","delta_3","pointIsWithinBounds","point_3","bounds_6","solve3PointCircle","p1","p2","p3","center","v21","v32","v13","v12","v23","v31","norm12","norm23","norm13","crossv21v32","normCross","radius","normCross22","alpha","beta","gamma","inf","negInf","isInf","isFinite","createUninitializedBounds","concat","getMajorAxisIndex","axisIndex","getSparseOrthogonalMatrix","rows","cols","bestValue","bestRowI","bestColI","rowI","row","colI","col","absVal","matIdx","floatToHex2","floatRGB2HexCode","rgbArray","floatToChar","float2CssRGBA","vtkMath","isNan","boundMTime","getNumberOfPoints","setNumberOfPoints","nbPoints","dimension","setNumberOfComponents","setPoint","getPoint","findPoint","insertNextPoint","insertPoint","ptId","superGetBounds","getBounds","computeBounds","superGetBoundsByReference","getBoundsByReference","xRange","yRange","zRange","u","getCurrentGlobalMTime","vtkPoints","vtkPoints$1","DesiredOutputPrecision","DEFAULT","SINGLE","AttributeCopyOperations","COPYTUPLE","INTERPOLATE","PASSDATA","ALLCOPY","AttributeLimitTypes","EXACT","NOLIMIT","AttributeTypes","SCALARS","VECTORS","NORMALS","TCOORDS","TENSORS","GLOBALIDS","PEDIGREEIDS","EDGEFLAG","NUM_ATTRIBUTES","CellGhostTypes","DUPLICATECELL","HIGHCONNECTIVITYCELL","LOWCONNECTIVITYCELL","REFINEDCELL","EXTERIORCELL","HIDDENCELL","PointGhostTypes","DUPLICATEPOINT","HIDDENPOINT","ghostArrayName","isVtkObject","extractCellSizes","currentIdx","cellId","cellArrayIndex","defaultValues","recompute","numberOfCells","cellSizes","getCellSizes","oldNumTuples","newNumTuples","getCell","loc","cellLoc","numberOfPoints","insertNextCell","cell","cellPointIds","getPointsIds","getMaxCellSize","reduce","vtkCellArray","vtkCellArray$1","functionValue","evaluateFunction","transformedXYZ","_xyz","vtkImplicitFunction","vtkImplicitFunction$1","PLANE_TOLERANCE","COINCIDE","DISJOINT","distanceToPlane","normal","distance","projectPoint","xproj","xo","vproj","n2","generalizedProjectPoint","intersectWithLine","outObj","intersection","betweenPoints","p21","p1Origin","fabsden","fabstolerance","intersectWithPlane","plane1Origin","plane1Normal","plane2Origin","plane2Normal","l0","l1","cross$1","absCross","maxc","iP","evaluate","evaluateGradient","planeOrigin","planeNormal","vtkPlane","vtkPlane$1","INIT_BOUNDS","equals","isValid","setBounds","otherBounds","addPoint","xMin","xMax","yMin","yMax","zMin","zMax","addPoints","addBounds","_xMin","_xMax","_yMin","_yMax","_zMin","_zMax","setMinPoint","setMaxPoint","inflate","delta","nonZero","maxIdx","minInflate","sx","sy","sz","getCenter","getLength","getLengths","getXRange","getYRange","getZRange","getMaxLength","getDiagonalLength2","getDiagonalLength","lenght2","getMinPoint","getMaxPoint","oppositeSign","getCorners","corners","computeCornerPoints","transformBounds","computeScale3","scale3","computeLocalBounds","pointsData","du","dv","dw","intersectBox","dir","coord","inside","quadrant","whichPlane","maxT","candidatePlane","intersectPlane","sign","firstOne","intersect","bBounds","newBounds","intersects","containsPoint","cutWithPlane","ix","iy","iz","ti","bound","clampDivisions","targetBins","divs","numBins","computeDivisions","totalBins","adjustedBounds","numNonZero","lengths","totLen","zeroDetectionTolerance","minPoint","maxPoint","distance2ToBounds","deltas","BoundingBox","refBounds","contains","vtkBoundingBox","scaleAboutCenter","pointsIds","pointIdsList","triangleData","pointId","pointOffset","trianglePointOffset","getLength2","getParametricDistance","pcoords","pDist","pDistMax","getCellDimension","subId","evaluatePosition","closestPoint","dist2","vtkCell","vtkCell$1","maxId","buildLinks","numPts","numCells","linkLoc","getCellPoints","cellPointId","incrementLinkCount","allocateLinks","insertCellReference","numLinks","ext","ncells","cells","getLink","getNcells","getCells","insertNextCellReference","deletePoint","removeCellReference","addCellReference","resizeCellList","squeeze","pos","vtkCellLinks","vtkCellLinks$1","CellType","VTK_EMPTY_CELL","VTK_VERTEX","VTK_POLY_VERTEX","VTK_LINE","VTK_POLY_LINE","VTK_TRIANGLE","VTK_TRIANGLE_STRIP","VTK_POLYGON","VTK_PIXEL","VTK_QUAD","VTK_TETRA","VTK_VOXEL","VTK_HEXAHEDRON","VTK_WEDGE","VTK_PYRAMID","VTK_PENTAGONAL_PRISM","VTK_HEXAGONAL_PRISM","VTK_QUADRATIC_EDGE","VTK_QUADRATIC_TRIANGLE","VTK_QUADRATIC_QUAD","VTK_QUADRATIC_POLYGON","VTK_QUADRATIC_TETRA","VTK_QUADRATIC_HEXAHEDRON","VTK_QUADRATIC_WEDGE","VTK_QUADRATIC_PYRAMID","VTK_BIQUADRATIC_QUAD","VTK_TRIQUADRATIC_HEXAHEDRON","VTK_QUADRATIC_LINEAR_QUAD","VTK_QUADRATIC_LINEAR_WEDGE","VTK_BIQUADRATIC_QUADRATIC_WEDGE","VTK_BIQUADRATIC_QUADRATIC_HEXAHEDRON","VTK_BIQUADRATIC_TRIANGLE","VTK_CUBIC_LINE","VTK_CONVEX_POINT_SET","VTK_POLYHEDRON","VTK_PARAMETRIC_CURVE","VTK_PARAMETRIC_SURFACE","VTK_PARAMETRIC_TRI_SURFACE","VTK_PARAMETRIC_QUAD_SURFACE","VTK_PARAMETRIC_TETRA_REGION","VTK_PARAMETRIC_HEX_REGION","VTK_HIGHER_ORDER_EDGE","VTK_HIGHER_ORDER_TRIANGLE","VTK_HIGHER_ORDER_QUAD","VTK_HIGHER_ORDER_POLYGON","VTK_HIGHER_ORDER_TETRAHEDRON","VTK_HIGHER_ORDER_WEDGE","VTK_HIGHER_ORDER_PYRAMID","VTK_HIGHER_ORDER_HEXAHEDRON","VTK_LAGRANGE_CURVE","VTK_LAGRANGE_TRIANGLE","VTK_LAGRANGE_QUADRILATERAL","VTK_LAGRANGE_TETRAHEDRON","VTK_LAGRANGE_HEXAHEDRON","VTK_LAGRANGE_WEDGE","VTK_LAGRANGE_PYRAMID","VTK_NUMBER_OF_CELL_TYPES","CellTypesStrings","getClassNameFromTypeId","typeId","getTypeIdFromClassName","cellTypeString","findIndex","isLinear","type","hasSubCells","cellType","typeArray","locationArray","insertCell","setCellTypes","cellTypes","cellLocations","getCellLocation","deleteCell","getNumberOfTypes","isType","numTypes","getCellType","insertNextType","getSize","getExtend","getTypeArray","getLocationArray","getMaxId","vtkCellTypes","vtkCellTypes$1","IntersectionState","NO_INTERSECTION","YES_INTERSECTION","ON_LINE","distanceToLine","MIN_VALUE","closest","denom","a21","b21","b1a1","minDist","l2","orientations","projXYZ","outDistance","evaluateLocation","evaluateOrientation","q","vtkLine","vtkLine$1","arrays","copyFieldFlags","doCopyAllOn","doCopyAllOff","superGetState","item","vtk","initializeFields","copyAllOn","clearFieldFlags","copyStructure","getCopyFieldFlags","getArrays","getNumberOfArrays","getNumberOfActiveArrays","addArray","getArrayWithIndex","removeAllArrays","removeArray","arrayName","removeArrayByIndex","arrayIdx","splice","entry","arraySpec","getArrayByIndex","getArrayByName","hasArray","getArrayName","getFlag","passData","copyFlag","destArr","tId","getAttributes","attrType","setAttribute","ncomps","interpolateData","fromId1","fromId2","copyFieldOn","copyFieldOff","copyAllOff","arrNew","copyFlags","vtkFieldData","vtkFieldData$1","activeScalars","activeVectors","activeTensors","activeNormals","activeTCoords","activeGlobalIds","activePedigreeIds","attrTypes","cleanAttributeType","attType","cleanAttType","ee","toUpperCase","toLowerCase","checkNumberOfComponents","uncleanAttType","currentAttribute","setActiveAttributeByName","setActiveAttributeByIndex","getActiveAttribute","activeVal","da","copyAttributeFlags","initializeAttributeCopyFlags","op","attCopyOp","ty","chain","dataArrays","superShallowCopy","debug","vtkDataSetAttributes","vtkDataSetAttributes$1","FieldDataTypes","UNIFORM","DATA_OBJECT_FIELD","COORDINATE","POINT_DATA","POINT","POINT_FIELD_DATA","CELL","CELL_FIELD_DATA","VERTEX","VERTEX_FIELD_DATA","EDGE","EDGE_FIELD_DATA","ROW","ROW_DATA","FieldAssociations","FIELD_ASSOCIATION_POINTS","FIELD_ASSOCIATION_CELLS","FIELD_ASSOCIATION_NONE","FIELD_ASSOCIATION_POINTS_THEN_CELLS","FIELD_ASSOCIATION_VERTICES","FIELD_ASSOCIATION_EDGES","FIELD_ASSOCIATION_ROWS","NUMBER_OF_ASSOCIATIONS","DATASET_FIELDS","fieldName","modifiedTime","computeTime","getCellBounds","getReferenceByName","superGetMTime","vtkDataSet","vtkDataSet$1","superInitialize","vtkPointSet","vtkPointSet$1","distanceFunction","distancesTime","line","t2","numLines","pDistMin","pCoords","lineIntersected","setOrientations","getDistancesToFirstPoint","dTime","numPoints","distances","previousPoint","currentPoint","totalDistance","findPointIdAtDistanceFromFirstPoint","minId","midId","vtkPolyLine","vtkPolyLine$1","elements","priority","shift","deleteById","_ref","vtkPriorityQueue","vtkPriorityQueue$1","FLOAT_EPSILON","PolygonWithPointIntersectionState","FAILURE","OUTSIDE","INSIDE","INTERSECTION","pointLocation","axis0","axis1","p0","pointInPolygon","vertices","tol2","wn","poly","getNormal","computeCentroid","centroid","vtkPolygon","computeMeasure","v4","previous","next","area","perimeter","canRemoveVertex","pointCount","sN","currentSign","oneNegative","vertex","previousVertex","removePoint","queue","tris","previousMeasure","nextMeasure","firstPoint","earCutTriangulation","anchor","vertexQueue","measure","pointToRemove","triangulate","setPoints","getPointArray","vtkPolygon$1","computeNormalDirection","ax","ay","az","bx","by","bz","interpolationDerivs","derivs","intersectWithTriangle","q1","r1","q2","r2","coplanar","pt1","pt2","surfaceId","n1","s1","s2","dist1","pts1","pts2","n1n2","index1","index2","tt1","tt2","ts1","ts2","id1","id2","val1","val2","t12","t22","t11","t21","pt3","plane","evaluation","dist2Pt1Pt2","dist2Pt2Pt3","dist2Pt3Pt1","intersectLine","pt3Pt1","pt3Pt2","pt3X","fabsn","rhs","indices","dist2Point","dist2Line1","dist2Line2","closestPoint1","closestPoint2","cp","maxComponent","lineDistance","u3","pc","derivatives","dim","x0","v10","v20","lenX","v0","functionDerivs","J","JI","T","sum0","sum1","dBydx","dBydy","cellBoundary","pts","t3","vtkTriangle","vtkTriangle$1","getNumberOfEdges","getNumberOfFaces","diagonalCase","point0","point3","firstIntersect","triangle","firstIntersectTmpObj","intersected","secondIntersect","secondIntersectTmpObj","useFirstIntersection","useSecondIntersection","interpolationFunctions","rm","vtkQuad","vtkQuad$1","decomposeStrip","minDist2","returnStatus","tempWeights","activeWeights","pt0","currentDist2","order","edgeId","numTris","ret","getParametricCenter","contour","cellScalars","locator","verts","inPd","outPd","inCd","outCd","clip","insideOut","vtkTriangleStrip","vtkTriangleStrip$1","POLYDATA_FIELDS","CELL_FACTORY","str","replace","letter","buildCells","nVerts","getNumberOfVerts","nLines","getNumberOfLines","nPolys","getNumberOfPolys","nStrips","getNumberOfStrips","nCells","types","pTypes","locs","pLocs","nextCellPts","numCellPts","initialSize","links","getPointCells","getCellEdgeNeighbors","link1","link2","cellHint","cellInfo","vtkPolyData","vtkPolyData$1","preMultiplyFlag","transformPoints","outPoint","preMultiply","setPreMultiplyFlag","postMultiply","transformMatrix","transformMatrices","matrices","inMat","outMat","tMat","rotateWXYZ","degrees","angle","quatMat","rotateX","rotateY","rotateZ","sMat","transformNormal","inNormal","outNormal","matrix3x3","invMat3","tMat3","transformVector","transformNormals","inNormals","outNormals","inArr","outArr","inVector","outVector","transformVectors","inVectors","outVectors","transformPointsNormalsVectors","inPoints","outPoints","inVectorsArr","outVectorsArr","nOptionalVectors","oldPoint","oldVector","oldNormal","modifiedPoint","modifiedVector","modifiedNormal","modifiedVectorsArr","iArr","arrayEqual","vtkTransform","vtkTransform$1","vtkTransformPolyDataFilter","inPts","inPtData","outPD","inCellData","outCD","getVectors","getNormals","inCellVectors","inCellNormals","pointType","outputPointsPrecision","outPts","inPtsData","outPtsData","outCellVectors","outCellNormals","setVerts","getVerts","setLines","getLines","setPolys","setStrips","setVectors","transformPolyData","vtkTransformPolyDataFilter$1","arrayBuffer","TextDecoder","decode","BinaryHelper","extractBinary","prefixRegex","suffixRegex","prefixMatch","exec","text","dataStartIndex","strFirstHalf","retVal","suffixMatch","binaryBuffer","TYPE_MAPPING","has","registerType","fn","DataAccessHelper","options","NoOp","Transform","useDegree","angleConv","rotateFromDirections","originDirection","targetDirection","transf","cosAlpha","acos","rotate","axis","multiply","mat4x4","mat3x3","nbIterations","vtkMatrixBuilder","getEndianness","Endian","ENDIANNESS","swapBytes","wordSize","bytes","tempBuffer","vtkDebugMacro","REJECT_COMPRESSION","Promise","reject","requestCount","openAsyncXHR","xhr","XMLHttpRequest","open","headers","entries","setRequestHeader","addEventListener","LiteHttpDataAccessHelper","fetchArray","pending","resolve","basepath","onreadystatechange","readyState","invokeBusy","response","encode","responseType","send","fetchJSON","responseText","fetchImage","img","Image","crossOrigin","onload","onerror","removeDuplicateVertices","faces","vMap","Map","vIndexMap","vInc","pointsChanged","toFixed","outVerts","coords","outFaces","ClassHierarchy","super","globalMTime","requiredParam","Symbol","fakeConsole","noOp","methodName","loggerFunctions","info","setLoggerFunction","vtkLogMacro","vtkInfoMacro","ERROR_ONCE_MAP","vtkOnceErrorMacro","TYPED_ARRAYS","create","BigInt64Array","BigUint64Array","newTypedArrayFrom","_len2","_key2","capitalize","charAt","_capitalize","uncapitalize","formatBytesToProperUnit","chunkSize","units","currentUnit","formatNumbersWithThousandSeparator","separator","sections","reverse","safeArrays","getStateArrayMapFunc","setImmediateVTK","setTimeout","measurePromiseExecution","finally","callbacks","hierarchy","isDeleted","otherMTime","onModified","freeze","unsubscribe","on","depth","noWarning","noFunction","_len3","list","_key3","subset","delete","field","el","some","ctor","otherModel","keyList","keyIdx","toJSON","objectGetterMap","object","fieldNames","getter","objectSetterMap","enum","onChanged","previousValue","params","_len4","_key4","acc","prop","findSetter","fields","setArray","defaultVal","_len5","_key5","changeDetected","needCopy","otherArray","moveToProtected","numberOfInputs","numberOfOutputs","setInputData","dataset","port","inputData","inputConnection","setInputConnection","outputPort","msg","getPortToFill","portToFill","shouldUpdate","inputArrayToProcess","localMTime","minOutputMTime","addInputData","addInputConnection","getInputConnection","getOutputPort","outputPortAccess","ins","getNumberOfInputPorts","getNumberOfOutputPorts","getInputArrayToProcess","inputPort","arrayDesc","ds","fieldAssociation","setInputArrayToProcess","attributeType","EVENT_ABORT","eventName","previousDelete","curCallbackID","callbackID","cbID","currentCallbacks","cb","cb1","cb2","register","_len6","_key6","_len7","_key7","traverseInstanceTree","extractFunction","accumulator","visitedInstances","modelObj","subObj","debounce","func","wait","immediate","_this","timeout","debounced","_len8","_key8","context","callNow","clearTimeout","cancel","throttle","isThrottled","argsToUse","wrapper","_len9","_key9","keystore","initialKeystore","setKey","getKey","getAllKeys","deleteKey","clearKeystore","nextProxyId","ROOT_GROUP_NAME","proxy","parentDelete","proxyId","ui","propertyMap","groupChildrenNames","registerProperties","descriptionList","currentGroupName","childrenNames","getProperties","groupName","propertyNames","listProxyProperties","updateUI","updateProxyProperty","propertyName","propUI","activate","proxyManager","setActiveMethod","getProxyGroup","propertyLinkSubscribers","registerPropertyLinkForGC","otherLink","gcPropertyLinks","subscribers","unbind","propertyLinkMap","getPropertyLink","persistent","updateInProgress","source","force","needUpdate","sourceLink","link","newValue","shallowEquals","linkToUpdate","indexToDelete","subscription","linkHandler","bind","updateMe","listPropertyNames","getPropertyByName","getPropertyDomainByName","domain","getProxySection","proxyGroup","properties","property","updateOnBind","sLink","proxyPropertyMapping","subscriptions","modelKey","methodSrc","methodDst","proxyPropertyState","defaults","applyState","modelKeys","mapping","normalizeWheel","wheelEvent","sX","sY","pX","pY","detail","wheelDelta","wheelDeltaY","wheelDeltaX","HORIZONTAL_AXIS","deltaY","deltaX","deltaMode","spinX","spinY","pixelX","pixelY","macro","enumToString","setImmediate","macro$1","__proto__","vtkGlobal","factoryMapping","vtkObject","newInst","vtkClassName"],"sourceRoot":""}